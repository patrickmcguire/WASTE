diff -b -N -ru waste-source-1.5-beta-2/Makefile.in latest/Makefile.in
--- waste-source-1.5-beta-2/Makefile.in	1970-01-01 02:00:00.000000000 +0200
+++ latest/Makefile.in	2005-03-09 08:10:11.784627048 +0200
@@ -0,0 +1,4 @@
+
+all clean install:
+	make -f Makefiles/wxwidgets/Makefile $@
+
diff -b -N -ru waste-source-1.5-beta-2/Makefiles/wxwidgets/Makefile.in latest/Makefiles/wxwidgets/Makefile.in
--- waste-source-1.5-beta-2/Makefiles/wxwidgets/Makefile.in	1970-01-01 02:00:00.000000000 +0200
+++ latest/Makefiles/wxwidgets/Makefile.in	2005-03-09 08:10:11.782627352 +0200
@@ -0,0 +1,237 @@
+
+################################################################################
+
+CXX=        @CXX@
+LIBS=       @WXLIBS@ @LIBS@
+WXCFLAGS=   @WXCFLAGS@
+CXXFLAGS=   @CXXFLAGS@ $(CPPINC)
+
+################################################################################
+
+SRCDIR=.
+
+CPPINC=${WXCFLAGS} -D_DEFINE_WXUI -DNDEBUG -I. -Irsa
+LDFLAGS=$(LIBS)
+PROGRAM=waste
+PREFIX=@prefix@
+
+WXWIN=/usr
+TOOLCHAINNAME=gtk2
+WXVERSION:=2.4
+OUTPUTPATH=objs
+OBJS=objs
+RESCOMP=windres.exe
+RCFILE=waste
+RESOURCEOBJECT=
+MACRESOURCECMD=
+MACPACKAGEINFO=
+LIBDIRNAME=/lib
+RESPATH=--include-dir "$(WXWIN)/include" --include-dir "$(WXWIN)/contrib/include" --include-dir "/lib/wx/include/gtk2-ansi-debug-static-2.5"
+
+OBJECTS=$(OBJS)/wxappresources.o $(OBJS)/wxmain.o $(OBJS)/wxmainframe.o $(OBJS)/wxnetstat.o $(OBJS)/asyncdns.o $(OBJS)/blowfish.o $(OBJS)/childwnd.o $(OBJS)/config.o $(OBJS)/connection.o $(OBJS)/d_chat.o $(OBJS)/filedb.o $(OBJS)/keygen.o $(OBJS)/license.o $(OBJS)/listen.o $(OBJS)/listview.o $(OBJS)/m_chat.o $(OBJS)/m_file.o $(OBJS)/m_keydist.o $(OBJS)/m_lcaps.o $(OBJS)/m_ping.o $(OBJS)/m_search.o $(OBJS)/m_upload.o $(OBJS)/main.o $(OBJS)/mqueue.o $(OBJS)/mqueuelist.o $(OBJS)/netkern.o $(OBJS)/netq.o $(OBJS)/prefs.o $(OBJS)/sha.o $(OBJS)/sharedmain.o $(OBJS)/shbuf.o $(OBJS)/srchwnd.o $(OBJS)/srvmain.o $(OBJS)/stdafx.o $(OBJS)/util.o $(OBJS)/xfers.o $(OBJS)/xferwnd.o $(OBJS)/md5.o $(OBJS)/nn.o $(OBJS)/prime.o $(OBJS)/r_keygen.o $(OBJS)/r_random.o $(OBJS)/rsa.o $(RESOURCEOBJECT) $(OBJS)/wxxfers.o $(OBJS)/wxuploads.o $(OBJS)/wxbrowser.o $(OBJS)/wxprefs.o $(OBJS)/wxchat.o $(OBJS)/wxpubkeys.o $(OBJS)/wxkgrand.o $(OBJS)/wxxml.o
+
+
+all:	$(OBJS) $(MACPACKAGEINFO)
+
+$(OBJS):
+	mkdir -p $(OBJS)
+
+clean:
+	rm -f $(OBJS)/*.o $(OBJS)/*.res
+	rm -fr .deps .pch $(PROGRAM).app
+	rm -f $(OUTPUTPATH)/$(PROGRAM)
+
+### Targets ####
+
+all:	$(OUTPUTPATH)/$(PROGRAM)
+
+$(OUTPUTPATH)/$(PROGRAM):	$(OBJECTS)
+	$(CXX) -o $@ $(OBJECTS) $(LDFLAGS)
+	$(MACRESOURCECMD)
+
+# Windows only
+$(OBJS)/$(RCFILE)_rc.o:	$(RCFILE).rc
+	$(RESCOMP) --use-temp-file -i$< -o$@ $(RESPATH) --include-dir . --define NOPCH
+
+# Mac only
+# This is the default stuff produced by DialogBlocks.  I don't know if
+# it works or not
+$(OUTPUTPATH)/$(PROGRAM).app/Contents/PkgInfo: $(OUTPUTPATH)/$(PROGRAM) $(WXWIN)/src/mac/carbon/Info.plist.in $(LIBDIRNAME)/libwx_$(TOOLCHAINNAME)-$(WXVERSION).rsrc $(WXWIN)/src/mac/carbon/wxmac.icns
+	mkdir -p $(OUTPUTPATH)/$(PROGRAM).app/Contents
+	mkdir -p $(OUTPUTPATH)/$(PROGRAM).app/Contents/MacOS
+	mkdir -p $(OUTPUTPATH)/$(PROGRAM).app/Contents/Resources
+	sed -e "s/IDENTIFIER/`echo $(SRCDIR) | sed -e 's,\.\./,,g' | sed -e 's,/,.,g'`/" \
+	-e "s/EXECUTABLE/$(PROGRAM)/" \
+	-e "s/VERSION/$(WXVERSION)/" \
+	$(WXWIN)/src/mac/carbon/Info.plist.in >$(OUTPUTPATH)/$(PROGRAM).app/Contents/Info.plist
+	echo -n "APPL????" >$(OUTPUTPATH)/$(PROGRAM).app/Contents/PkgInfo
+	ln -f $(OUTPUTPATH)/$(PROGRAM) $(OUTPUTPATH)/$(PROGRAM).app/Contents/MacOS/$(PROGRAM)
+	cp -f $(LIBDIRNAME)/libwx_$(TOOLCHAINNAME)-$(WXVERSION).rsrc $(OUTPUTPATH)/$(PROGRAM).app/Contents/Resources/$(PROGRAM).rsrc
+	cp -f $(WXWIN)/src/mac/carbon/wxmac.icns $(OUTPUTPATH)/$(PROGRAM).app/Contents/Resources/wxmac.icns
+
+$(OBJS)/wxappresources.o:	wxappresources.cpp wxappresources.h
+	$(CXX) -c -o $@ $(CXXFLAGS) wxappresources.cpp
+
+$(OBJS)/wxmain.o:	wxmain.cpp wxmain.h wxmainframe.h
+	$(CXX) -c -o $@ $(CXXFLAGS) wxmain.cpp
+
+$(OBJS)/wxmainframe.o:	wxmainframe.cpp wxnetstat.h wxmainframe.h
+	$(CXX) -c -o $@ $(CXXFLAGS) wxmainframe.cpp
+
+$(OBJS)/wxnetstat.o:	wxnetstat.cpp wxnetstat.h
+	$(CXX) -c -o $@ $(CXXFLAGS) wxnetstat.cpp
+
+$(OBJS)/asyncdns.o:	asyncdns.cpp stdafx.hpp platform.hpp sockets.hpp asyncdns.hpp util.hpp rsa/global.hpp rsa/rsaref.hpp itemlist.hpp listview.hpp sha.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) asyncdns.cpp
+
+$(OBJS)/blowfish.o:	blowfish.cpp stdafx.hpp platform.hpp blowfish.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) blowfish.cpp
+
+$(OBJS)/childwnd.o:	childwnd.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp childwnd.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) childwnd.cpp
+
+$(OBJS)/config.o:	config.cpp stdafx.hpp platform.hpp config.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) config.cpp
+
+$(OBJS)/connection.o:	connection.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp sockets.hpp rsa/r_random.hpp rsa/rsa.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) connection.cpp
+
+$(OBJS)/d_chat.o:	d_chat.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp childwnd.hpp d_chat.hpp m_chat.hpp srchwnd.hpp resourcesrv.hpp resource.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) d_chat.cpp
+
+$(OBJS)/filedb.o:	filedb.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp srchwnd.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) filedb.cpp
+
+$(OBJS)/keygen.o:	keygen.cpp stdafx.hpp resourcesrv.hpp resource.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp rsa/r_random.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) keygen.cpp
+
+$(OBJS)/license.o:	license.cpp stdafx.hpp license.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) license.cpp
+
+$(OBJS)/listen.o:	listen.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp sockets.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) listen.cpp
+
+$(OBJS)/listview.o:	listview.cpp stdafx.hpp platform.hpp listview.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) listview.cpp
+
+$(OBJS)/m_chat.o:	m_chat.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp m_chat.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) m_chat.cpp
+
+$(OBJS)/m_file.o:	m_file.cpp stdafx.hpp platform.hpp m_file.hpp shbuf.hpp util.hpp rsa/global.hpp rsa/rsaref.hpp itemlist.hpp listview.hpp sha.hpp blowfish.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) m_file.cpp
+
+$(OBJS)/m_keydist.o:	m_keydist.cpp stdafx.hpp platform.hpp m_keydist.hpp shbuf.hpp util.hpp rsa/global.hpp rsa/rsaref.hpp itemlist.hpp listview.hpp sha.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) m_keydist.cpp
+
+$(OBJS)/m_lcaps.o:	m_lcaps.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp m_lcaps.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) m_lcaps.cpp
+
+$(OBJS)/m_ping.o:	m_ping.cpp stdafx.hpp platform.hpp m_ping.hpp shbuf.hpp util.hpp rsa/global.hpp rsa/rsaref.hpp itemlist.hpp listview.hpp sha.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) m_ping.cpp
+
+$(OBJS)/m_search.o:	m_search.cpp stdafx.hpp platform.hpp mqueue.hpp util.hpp rsa/global.hpp rsa/rsaref.hpp itemlist.hpp listview.hpp sha.hpp connection.hpp asyncdns.hpp blowfish.hpp packetdef.hpp shbuf.hpp m_search.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) m_search.cpp
+
+$(OBJS)/m_upload.o:	m_upload.cpp stdafx.hpp platform.hpp m_upload.hpp shbuf.hpp util.hpp rsa/global.hpp rsa/rsaref.hpp itemlist.hpp listview.hpp sha.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) m_upload.cpp
+
+$(OBJS)/main.o:	main.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp resource.hpp rsa/md5.hpp childwnd.hpp m_chat.hpp m_ping.hpp m_lcaps.hpp d_chat.hpp prefs.hpp xferwnd.hpp xfers.hpp m_file.hpp netq.hpp netkern.hpp srchwnd.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) main.cpp
+
+$(OBJS)/mqueue.o:	mqueue.cpp stdafx.hpp platform.hpp main.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp rsa/md5.hpp rsa/r_random.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) mqueue.cpp
+
+$(OBJS)/mqueuelist.o:	mqueuelist.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp netkern.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) mqueuelist.cpp
+
+$(OBJS)/netkern.o:	netkern.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp netq.hpp netkern.hpp resourcesrv.hpp resource.hpp childwnd.hpp m_ping.hpp m_lcaps.hpp srchwnd.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) netkern.cpp
+
+$(OBJS)/netq.o:	netq.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp netkern.hpp xferwnd.hpp xfers.hpp m_file.hpp resourcesrv.hpp resource.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) netq.cpp
+
+$(OBJS)/prefs.o:	prefs.cpp stdafx.hpp platform.hpp main.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp resourcesrv.hpp resource.hpp childwnd.hpp d_chat.hpp m_chat.hpp prefs.hpp srchwnd.hpp netq.hpp netkern.hpp license.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) prefs.cpp
+
+$(OBJS)/sha.o:	sha.cpp stdafx.hpp platform.hpp sha.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) sha.cpp
+
+$(OBJS)/sharedmain.o:	sharedmain.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp rsa/md5.hpp childwnd.hpp m_chat.hpp m_ping.hpp m_lcaps.hpp d_chat.hpp prefs.hpp xferwnd.hpp xfers.hpp m_file.hpp netq.hpp netkern.hpp srchwnd.hpp resourcesrv.hpp resource.hpp build/build.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) sharedmain.cpp
+
+$(OBJS)/shbuf.o:	shbuf.cpp stdafx.hpp platform.hpp shbuf.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) shbuf.cpp
+
+$(OBJS)/srchwnd.o:	srchwnd.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp srchwnd.hpp xferwnd.hpp xfers.hpp m_file.hpp childwnd.hpp d_chat.hpp m_chat.hpp resource.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) srchwnd.cpp
+
+$(OBJS)/srvmain.o:	srvmain.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp rsa/md5.hpp m_chat.hpp m_ping.hpp m_file.hpp m_lcaps.hpp xferwnd.hpp xfers.hpp netkern.hpp d_chat.hpp license.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) srvmain.cpp
+
+$(OBJS)/stdafx.o:	stdafx.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) stdafx.cpp
+
+$(OBJS)/util.o:	util.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp netkern.hpp rsa/md5.hpp rsa/r_random.hpp rsa/nn.hpp rsa/rsa.hpp resourcesrv.hpp resource.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) util.cpp
+
+$(OBJS)/xfers.o:	xfers.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp xfers.hpp m_file.hpp xferwnd.hpp srchwnd.hpp netkern.hpp rsa/md5.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) xfers.cpp
+
+$(OBJS)/xferwnd.o:	xferwnd.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp xfers.hpp m_file.hpp xferwnd.hpp srchwnd.hpp resourcesrv.hpp resource.hpp childwnd.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) xferwnd.cpp
+
+$(OBJS)/md5.o:	rsa/md5.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) rsa/md5.cpp
+
+$(OBJS)/nn.o:	rsa/nn.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) rsa/nn.cpp
+
+$(OBJS)/prime.o:	rsa/prime.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) rsa/prime.cpp
+
+$(OBJS)/r_keygen.o:	rsa/r_keygen.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) rsa/r_keygen.cpp
+
+$(OBJS)/r_random.o:	rsa/r_random.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) rsa/r_random.cpp
+
+$(OBJS)/rsa.o:	rsa/rsa.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) rsa/rsa.cpp
+
+$(OBJS)/wxextra.o:	wxextra.cpp stdafx.hpp main.hpp platform.hpp configparams.hpp netparams.hpp listen.hpp connection.hpp asyncdns.hpp blowfish.hpp rsa/global.hpp rsa/rsaref.hpp sha.hpp packetdef.hpp mqueuelist.hpp mqueue.hpp util.hpp itemlist.hpp listview.hpp shbuf.hpp filedb.hpp m_search.hpp itemstack.hpp config.hpp m_upload.hpp m_keydist.hpp rsa/md5.hpp m_chat.hpp m_ping.hpp m_file.hpp m_lcaps.hpp xferwnd.hpp xfers.hpp netkern.hpp d_chat.hpp license.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) wxextra.cpp
+
+$(OBJS)/wxxfers.o:	wxxfers.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) wxxfers.cpp
+
+$(OBJS)/wxbrowser.o:	wxbrowser.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) wxbrowser.cpp
+
+$(OBJS)/wxprefs.o:	wxprefs.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) wxprefs.cpp
+
+$(OBJS)/wxpubkeys.o:	wxpubkeys.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) wxpubkeys.cpp
+
+$(OBJS)/wxkgrand.o:	wxkgrand.cpp
+	$(CXX) -c -o $@ $(CXXFLAGS) wxkgrand.cpp
+
+$(OBJS)/wxchat.o:	wxchat.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) wxchat.cpp
+
+$(OBJS)/wxuploads.o:	wxuploads.cpp stdafx.hpp
+	$(CXX) -c -o $@ $(CXXFLAGS) wxuploads.cpp
+
+$(OBJS)/wxxml.o:	wxxml.cpp 
+	$(CXX) -c -o $@ $(CXXFLAGS) wxxml.cpp
+
+wxxml.cpp: wxwaste.xrc
+	wxrc -v -c --output=wxxml.cpp wxwaste.xrc
+
+install: $(OUTPUTPATH)/$(PROGRAM)
+	cp $(OUTPUTPATH)/$(PROGRAM) $(PREFIX)/bin/waste
+	strip $(PREFIX)/bin/waste
+
+
+.PHONY:	all clean install tardist
+
diff -b -N -ru waste-source-1.5-beta-2/README.wx latest/README.wx
--- waste-source-1.5-beta-2/README.wx	1970-01-01 02:00:00.000000000 +0200
+++ latest/README.wx	2005-03-09 07:48:40.000000000 +0200
@@ -0,0 +1,95 @@
+
+WXWIDGETS UI PATCH:
+
+
+This is a wxWidgets implementation of almost all dialogs and UI, as close as
+possible to Win32 implementation. most functionality now works under wxWidgets
+2.4 and 2.5.
+
+To build, you will need wxWidgets development and user packages installed,
+including the XRC library to use XML resource files.
+
+To apply the patch:
+
+    unzip waste-source-1.5-beta-2.zip       [original from sourceforge]
+    patch -p1 < wxui.patch
+    unzip res.zip
+    chmod a+x configure
+
+an autoconf configure script was added to build the wxWidgets code. This means
+that "./configure" needs to be run on UNIX and probably MacOS X before
+building.
+
+I haven't actually tried building on MacOS X, but the porting work to get the
+wxWidgets UI working there should be minimal now.  If you feel like doing this,
+please go for it!
+
+A wxWidgets dialog editor called DialogBlocks was used, and its project source
+file (wxwaste.pjd) is included.  (note: DialogBlocks seems to generate a mess
+of a makefile on linux, and it won't fit into the WASTE "Makefiles/wxwidgets"
+style anyway without some hacking.  so don't try to rebuild the Makefile in
+DialogBlocks, just edit by hand.)
+
+I ran into some limitations of the unregistered version of DialogBlocks, so I
+had to curtail the Preferences dialog and split the Transfers dialog into
+Downloads and Uploads.  This is a pity, as there's still some quite useful
+preferences settings (forceip_dynip_mo, forceip_name and port) that didn't make
+it in and require editing the "pr0" file on disk with a text editor.  If
+anyone wants to finish this up, go right ahead.
+
+There's a UI problem: right-click popup menus on tree view widgets are
+implemented with right-drag due to a glitch in wxWidgets.  this is annoying,
+but it works OK in practice once you remember to drag the mouse a little after
+pressing the right mouse button down.
+
+TO BUILD: on UNIX platforms, install the wxWidgets development and user
+packages required, including the XRC package.  
+  
+Then, run:
+
+        ./configure
+        make
+        make install
+
+haven't yet tried on MacOS or elsewhere, but should be easy now.
+
+
+PARTS THAT ARE NOT YET IMPLEMENTED: remembering child window positions, send
+file(s) to user, chat markup, full preferences window, systray, new user
+wizard.
+
+
+OTHER CHANGES:
+
+* recent versions of WASTE (> 1.1?) added a new feature which removed IPs
+  from the connection list after multiple failures to connect.  however,
+  this has very bad effects on intermittently-connected machines, such as
+  laptops; if WASTE is left running while the machine is disconnected from
+  the internet, it will forget all its peers.  To make this behavior
+  optional I added a new configuration parameter, "keepdeadconns".  This is
+  set to 1 by default.
+
+* changed "dorefresh" to 1 by default, so that search indexes are up to date.
+
+* abstracted out most of the platform-independent logic out of the Win32
+  event handler functions, so that the wxWidgets code could call it.
+
+* comparisons between different-sized data, flagged by g++: fixed.
+
+* uninitialized memory accesses: fixed.
+
+* mismatched new[]/new/delete[]/delete calls in shbuf.cpp: fixed.
+
+* on UNIX, closesocket() calls close().  this should be ::close() as
+  otherwise an FD leak is caused in C_Connection since that class'
+  close() method is called instead of the real close() function. fixed.
+
+* changed min()/max() calls to waste_min()/waste_max() to avoid a namespace
+  collision on linux.
+
+* trying to use a win32 filedb database on linux caused coredump: fixed.
+
+* some places where an overlapping memcpy() is called instead of
+  memmove(): fixed
+
+
diff -b -N -ru waste-source-1.5-beta-2/blowfish.cpp latest/blowfish.cpp
--- waste-source-1.5-beta-2/blowfish.cpp	2004-06-15 17:33:00.000000000 +0300
+++ latest/blowfish.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -440,12 +440,12 @@
 	static const unsigned int blocklen=8;
 	static forceinline void Encrypt(_BLOWFISH_CTX *ctx,unsigned long *IV_L,unsigned long *IV_R,unsigned long *left,unsigned long *right)
 	{
-		IV_L;IV_R;
+		(void) IV_L; (void) IV_R;
 		Blowfish_Encrypt(ctx,left,right);
 	};
 	static forceinline void Decrypt(_BLOWFISH_CTX *ctx,unsigned long *IV_L,unsigned long *IV_R,unsigned long *left,unsigned long *right)
 	{
-		IV_L;IV_R;
+		(void) IV_L; (void) IV_R;
 		Blowfish_Decrypt(ctx,left,right);
 	};
 };
diff -b -N -ru waste-source-1.5-beta-2/build/build.hpp latest/build/build.hpp
--- waste-source-1.5-beta-2/build/build.hpp	2004-06-16 22:31:00.000000000 +0300
+++ latest/build/build.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -1,4 +1,5 @@
-#pragma once
+#ifndef INCD_BUILD_HPP
+#define INCD_BUILD_HPP 1
 #define __VER_IMAJOR 1
 #define __VER_VMAJOR 1
 #define __VER_SMAJOR "1"
@@ -25,3 +26,4 @@
 #define __VER_IFULLRB 1,5,0,407
 #define __VER_VFULLRB 1.5.0.407
 #define __VER_SFULLRB "1.5.0.407"
+#endif // INCD_BUILD_HPP
diff -b -N -ru waste-source-1.5-beta-2/childwnd.cpp latest/childwnd.cpp
--- waste-source-1.5-beta-2/childwnd.cpp	2004-06-14 15:18:00.000000000 +0300
+++ latest/childwnd.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -18,6 +18,7 @@
 Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
 
+#ifndef _DEFINE_WXUI
 #include "stdafx.hpp"
 
 #include "main.hpp"
@@ -128,3 +129,4 @@
 #undef READINT
 #undef WRITEINT
 }
+#endif /* _DEFINE_WXUI */
diff -b -N -ru waste-source-1.5-beta-2/config.h.in latest/config.h.in
--- waste-source-1.5-beta-2/config.h.in	1970-01-01 02:00:00.000000000 +0200
+++ latest/config.h.in	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,106 @@
+/* config.h.in.  Generated from configure.in by autoheader.  */
+
+/* Define to 1 if you have the <arpa/inet.h> header file. */
+#undef HAVE_ARPA_INET_H
+
+/* Define to 1 if you have the <ctype.h> header file. */
+#undef HAVE_CTYPE_H
+
+/* Define to 1 if you have the <errno.h> header file. */
+#undef HAVE_ERRNO_H
+
+/* Define to 1 if you have the <fcntl.h> header file. */
+#undef HAVE_FCNTL_H
+
+/* Define to 1 if you have the <ifaddrs.h> header file. */
+#undef HAVE_IFADDRS_H
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#undef HAVE_INTTYPES_H
+
+/* Define to 1 if you have the `dl' library (-ldl). */
+#undef HAVE_LIBDL
+
+/* Define to 1 if you have the `inet' library (-linet). */
+#undef HAVE_LIBINET
+
+/* Define to 1 if you have the `nsl' library (-lnsl). */
+#undef HAVE_LIBNSL
+
+/* Define to 1 if you have the `socket' library (-lsocket). */
+#undef HAVE_LIBSOCKET
+
+/* Define to 1 if you have the `memmove' function. */
+#undef HAVE_MEMMOVE
+
+/* Define to 1 if you have the <memory.h> header file. */
+#undef HAVE_MEMORY_H
+
+/* Define to 1 if you have the <netdb.h> header file. */
+#undef HAVE_NETDB_H
+
+/* Define to 1 if you have the <netinet/in.h> header file. */
+#undef HAVE_NETINET_IN_H
+
+/* Define to 1 if you have the <net/if.h> header file. */
+#undef HAVE_NET_IF_H
+
+/* Define to 1 if you have the <pthread.h> header file. */
+#undef HAVE_PTHREAD_H
+
+/* Define to 1 if you have the <signal.h> header file. */
+#undef HAVE_SIGNAL_H
+
+/* Define to 1 if you have the <stdarg.h> header file. */
+#undef HAVE_STDARG_H
+
+/* Define to 1 if you have the <stdint.h> header file. */
+#undef HAVE_STDINT_H
+
+/* Define to 1 if you have the <stdio.h> header file. */
+#undef HAVE_STDIO_H
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#undef HAVE_STDLIB_H
+
+/* Define to 1 if you have the <strings.h> header file. */
+#undef HAVE_STRINGS_H
+
+/* Define to 1 if you have the <string.h> header file. */
+#undef HAVE_STRING_H
+
+/* Define to 1 if you have the <sys/socket.h> header file. */
+#undef HAVE_SYS_SOCKET_H
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#undef HAVE_SYS_STAT_H
+
+/* Define to 1 if you have the <sys/time.h> header file. */
+#undef HAVE_SYS_TIME_H
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#undef HAVE_SYS_TYPES_H
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#undef HAVE_UNISTD_H
+
+/* Define to the address where bug reports for this package should be sent. */
+#undef PACKAGE_BUGREPORT
+
+/* Define to the full name of this package. */
+#undef PACKAGE_NAME
+
+/* Define to the full name and version of this package. */
+#undef PACKAGE_STRING
+
+/* Define to the one symbol short name of this package. */
+#undef PACKAGE_TARNAME
+
+/* Define to the version of this package. */
+#undef PACKAGE_VERSION
+
+/* Define to 1 if you have the ANSI C header files. */
+#undef STDC_HEADERS
+
+/* Define to `signed long long' if <sys/types.h> does not define. */
+#undef __int64
diff -b -N -ru waste-source-1.5-beta-2/configparams.hpp latest/configparams.hpp
--- waste-source-1.5-beta-2/configparams.hpp	2004-06-14 15:29:00.000000000 +0300
+++ latest/configparams.hpp	2005-03-09 07:32:28.000000000 +0200
@@ -169,7 +169,7 @@
 #define	CONFIG_dlppath_DEFAULT					(1|32|4|16)
 
 #define	CONFIG_dorefresh						"dorefresh"
-#define	CONFIG_dorefresh_DEFAULT				0
+#define	CONFIG_dorefresh_DEFAULT				1
 
 #define	CONFIG_downloadflags					"downloadflags"
 #define	CONFIG_downloadflags_DEFAULT			7
@@ -259,6 +259,9 @@
 #define	CONFIG_networkname						"networkname"
 #define	CONFIG_networkname_DEFAULT				""
 
+#define	CONFIG_keepdeadconns					"keepdeadconns"
+#define	CONFIG_keepdeadconns_DEFAULT			1
+
 #define	CONFIG_USE_PSK							"presharedkey"
 #define	CONFIG_USE_PSK_DEFAULT					0
 
diff -b -N -ru waste-source-1.5-beta-2/configure latest/configure
--- waste-source-1.5-beta-2/configure	1970-01-01 02:00:00.000000000 +0200
+++ latest/configure	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,5325 @@
+#! /bin/sh
+# Guess values for system-dependent variables and create Makefiles.
+# Generated by GNU Autoconf 2.59.
+#
+# Copyright (C) 2003 Free Software Foundation, Inc.
+# This configure script is free software; the Free Software Foundation
+# gives unlimited permission to copy, distribute and modify it.
+## --------------------- ##
+## M4sh Initialization.  ##
+## --------------------- ##
+
+# Be Bourne compatible
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # is contrary to our usage.  Disable this feature.
+  alias -g '${1+"$@"}'='"$@"'
+elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
+  set -o posix
+fi
+DUALCASE=1; export DUALCASE # for MKS sh
+
+# Support unset when possible.
+if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+  as_unset=unset
+else
+  as_unset=false
+fi
+
+
+# Work around bugs in pre-3.0 UWIN ksh.
+$as_unset ENV MAIL MAILPATH
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# NLS nuisances.
+for as_var in \
+  LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
+  LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
+  LC_TELEPHONE LC_TIME
+do
+  if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
+    eval $as_var=C; export $as_var
+  else
+    $as_unset $as_var
+  fi
+done
+
+# Required to use basename.
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+if (basename /) >/dev/null 2>&1 && test "X`basename / 2>&1`" = "X/"; then
+  as_basename=basename
+else
+  as_basename=false
+fi
+
+
+# Name of the executable.
+as_me=`$as_basename "$0" ||
+$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+	 X"$0" : 'X\(//\)$' \| \
+	 X"$0" : 'X\(/\)$' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X/"$0" |
+    sed '/^.*\/\([^/][^/]*\)\/*$/{ s//\1/; q; }
+  	  /^X\/\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\/\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+
+
+# PATH needs CR, and LINENO needs CR and PATH.
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
+
+# The user is always right.
+if test "${PATH_SEPARATOR+set}" != set; then
+  echo "#! /bin/sh" >conf$$.sh
+  echo  "exit 0"   >>conf$$.sh
+  chmod +x conf$$.sh
+  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
+    PATH_SEPARATOR=';'
+  else
+    PATH_SEPARATOR=:
+  fi
+  rm -f conf$$.sh
+fi
+
+
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x$as_lineno_3"  = "x$as_lineno_2"  || {
+  # Find who we are.  Look in the path if we contain no path at all
+  # relative or not.
+  case $0 in
+    *[\\/]* ) as_myself=$0 ;;
+    *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+done
+
+       ;;
+  esac
+  # We did not find ourselves, most probably we were run as `sh COMMAND'
+  # in which case we are not to be found in the path.
+  if test "x$as_myself" = x; then
+    as_myself=$0
+  fi
+  if test ! -f "$as_myself"; then
+    { echo "$as_me: error: cannot find myself; rerun with an absolute path" >&2
+   { (exit 1); exit 1; }; }
+  fi
+  case $CONFIG_SHELL in
+  '')
+    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for as_base in sh bash ksh sh5; do
+	 case $as_dir in
+	 /*)
+	   if ("$as_dir/$as_base" -c '
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/dev/null; then
+	     $as_unset BASH_ENV || test "${BASH_ENV+set}" != set || { BASH_ENV=; export BASH_ENV; }
+	     $as_unset ENV || test "${ENV+set}" != set || { ENV=; export ENV; }
+	     CONFIG_SHELL=$as_dir/$as_base
+	     export CONFIG_SHELL
+	     exec "$CONFIG_SHELL" "$0" ${1+"$@"}
+	   fi;;
+	 esac
+       done
+done
+;;
+  esac
+
+  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+  # uniformly replaced by the line number.  The first 'sed' inserts a
+  # line-number line before each line; the second 'sed' does the real
+  # work.  The second script uses 'N' to pair each line-number line
+  # with the numbered line, and appends trailing '-' during
+  # substitution so that $LINENO is not a special case at line end.
+  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+  # second 'sed' script.  Blame Lee E. McMahon for sed's syntax.  :-)
+  sed '=' <$as_myself |
+    sed '
+      N
+      s,$,-,
+      : loop
+      s,^\(['$as_cr_digits']*\)\(.*\)[$]LINENO\([^'$as_cr_alnum'_]\),\1\2\1\3,
+      t loop
+      s,-$,,
+      s,^['$as_cr_digits']*\n,,
+    ' >$as_me.lineno &&
+  chmod +x $as_me.lineno ||
+    { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
+   { (exit 1); exit 1; }; }
+
+  # Don't try to exec as it changes $[0], causing all sort of problems
+  # (the dirname of $[0] is not the place where we might find the
+  # original and so on.  Autoconf is especially sensible to this).
+  . ./$as_me.lineno
+  # Exit status is that of the last command.
+  exit
+}
+
+
+case `echo "testing\c"; echo 1,2,3`,`echo -n testing; echo 1,2,3` in
+  *c*,-n*) ECHO_N= ECHO_C='
+' ECHO_T='	' ;;
+  *c*,*  ) ECHO_N=-n ECHO_C= ECHO_T= ;;
+  *)       ECHO_N= ECHO_C='\c' ECHO_T= ;;
+esac
+
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+rm -f conf$$ conf$$.exe conf$$.file
+echo >conf$$.file
+if ln -s conf$$.file conf$$ 2>/dev/null; then
+  # We could just check for DJGPP; but this test a) works b) is more generic
+  # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
+  if test -f conf$$.exe; then
+    # Don't use ln at all; we don't have any links
+    as_ln_s='cp -p'
+  else
+    as_ln_s='ln -s'
+  fi
+elif ln conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s=ln
+else
+  as_ln_s='cp -p'
+fi
+rm -f conf$$ conf$$.exe conf$$.file
+
+if mkdir -p . 2>/dev/null; then
+  as_mkdir_p=:
+else
+  test -d ./-p && rmdir ./-p
+  as_mkdir_p=false
+fi
+
+as_executable_p="test -f"
+
+# Sed expression to map a string onto a valid CPP name.
+as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
+
+# Sed expression to map a string onto a valid variable name.
+as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
+
+
+# IFS
+# We need space, tab and new line, in precisely that order.
+as_nl='
+'
+IFS=" 	$as_nl"
+
+# CDPATH.
+$as_unset CDPATH
+
+
+# Name of the host.
+# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
+# so uname gets run too.
+ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
+
+exec 6>&1
+
+#
+# Initializations.
+#
+ac_default_prefix=/usr/local
+ac_config_libobj_dir=.
+cross_compiling=no
+subdirs=
+MFLAGS=
+MAKEFLAGS=
+SHELL=${CONFIG_SHELL-/bin/sh}
+
+# Maximum number of lines to put in a shell here document.
+# This variable seems obsolete.  It should probably be removed, and
+# only ac_max_sed_lines should be used.
+: ${ac_max_here_lines=38}
+
+# Identity of this package.
+PACKAGE_NAME=
+PACKAGE_TARNAME=
+PACKAGE_VERSION=
+PACKAGE_STRING=
+PACKAGE_BUGREPORT=
+
+ac_unique_file="main.cpp"
+# Factoring default headers for most tests.
+ac_includes_default="\
+#include <stdio.h>
+#if HAVE_SYS_TYPES_H
+# include <sys/types.h>
+#endif
+#if HAVE_SYS_STAT_H
+# include <sys/stat.h>
+#endif
+#if STDC_HEADERS
+# include <stdlib.h>
+# include <stddef.h>
+#else
+# if HAVE_STDLIB_H
+#  include <stdlib.h>
+# endif
+#endif
+#if HAVE_STRING_H
+# if !STDC_HEADERS && HAVE_MEMORY_H
+#  include <memory.h>
+# endif
+# include <string.h>
+#endif
+#if HAVE_STRINGS_H
+# include <strings.h>
+#endif
+#if HAVE_INTTYPES_H
+# include <inttypes.h>
+#else
+# if HAVE_STDINT_H
+#  include <stdint.h>
+# endif
+#endif
+#if HAVE_UNISTD_H
+# include <unistd.h>
+#endif"
+
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT CXX CXXFLAGS ac_ct_CXX WXCONFIG CPP EGREP wxconf WXLIBS WXCFLAGS LIBOBJS LTLIBOBJS'
+ac_subst_files=''
+
+# Initialize some variables set by options.
+ac_init_help=
+ac_init_version=false
+# The variables have the same names as the options, with
+# dashes changed to underlines.
+cache_file=/dev/null
+exec_prefix=NONE
+no_create=
+no_recursion=
+prefix=NONE
+program_prefix=NONE
+program_suffix=NONE
+program_transform_name=s,x,x,
+silent=
+site=
+srcdir=
+verbose=
+x_includes=NONE
+x_libraries=NONE
+
+# Installation directory options.
+# These are left unexpanded so users can "make install exec_prefix=/foo"
+# and all the variables that are supposed to be based on exec_prefix
+# by default will actually change.
+# Use braces instead of parens because sh, perl, etc. also accept them.
+bindir='${exec_prefix}/bin'
+sbindir='${exec_prefix}/sbin'
+libexecdir='${exec_prefix}/libexec'
+datadir='${prefix}/share'
+sysconfdir='${prefix}/etc'
+sharedstatedir='${prefix}/com'
+localstatedir='${prefix}/var'
+libdir='${exec_prefix}/lib'
+includedir='${prefix}/include'
+oldincludedir='/usr/include'
+infodir='${prefix}/info'
+mandir='${prefix}/man'
+
+ac_prev=
+for ac_option
+do
+  # If the previous option needs an argument, assign it.
+  if test -n "$ac_prev"; then
+    eval "$ac_prev=\$ac_option"
+    ac_prev=
+    continue
+  fi
+
+  ac_optarg=`expr "x$ac_option" : 'x[^=]*=\(.*\)'`
+
+  # Accept the important Cygnus configure options, so we can diagnose typos.
+
+  case $ac_option in
+
+  -bindir | --bindir | --bindi | --bind | --bin | --bi)
+    ac_prev=bindir ;;
+  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
+    bindir=$ac_optarg ;;
+
+  -build | --build | --buil | --bui | --bu)
+    ac_prev=build_alias ;;
+  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
+    build_alias=$ac_optarg ;;
+
+  -cache-file | --cache-file | --cache-fil | --cache-fi \
+  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
+    ac_prev=cache_file ;;
+  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
+  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
+    cache_file=$ac_optarg ;;
+
+  --config-cache | -C)
+    cache_file=config.cache ;;
+
+  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
+    ac_prev=datadir ;;
+  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
+  | --da=*)
+    datadir=$ac_optarg ;;
+
+  -disable-* | --disable-*)
+    ac_feature=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
+   { (exit 1); exit 1; }; }
+    ac_feature=`echo $ac_feature | sed 's/-/_/g'`
+    eval "enable_$ac_feature=no" ;;
+
+  -enable-* | --enable-*)
+    ac_feature=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
+   { (exit 1); exit 1; }; }
+    ac_feature=`echo $ac_feature | sed 's/-/_/g'`
+    case $ac_option in
+      *=*) ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`;;
+      *) ac_optarg=yes ;;
+    esac
+    eval "enable_$ac_feature='$ac_optarg'" ;;
+
+  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
+  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
+  | --exec | --exe | --ex)
+    ac_prev=exec_prefix ;;
+  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
+  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
+  | --exec=* | --exe=* | --ex=*)
+    exec_prefix=$ac_optarg ;;
+
+  -gas | --gas | --ga | --g)
+    # Obsolete; use --with-gas.
+    with_gas=yes ;;
+
+  -help | --help | --hel | --he | -h)
+    ac_init_help=long ;;
+  -help=r* | --help=r* | --hel=r* | --he=r* | -hr*)
+    ac_init_help=recursive ;;
+  -help=s* | --help=s* | --hel=s* | --he=s* | -hs*)
+    ac_init_help=short ;;
+
+  -host | --host | --hos | --ho)
+    ac_prev=host_alias ;;
+  -host=* | --host=* | --hos=* | --ho=*)
+    host_alias=$ac_optarg ;;
+
+  -includedir | --includedir | --includedi | --included | --include \
+  | --includ | --inclu | --incl | --inc)
+    ac_prev=includedir ;;
+  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
+  | --includ=* | --inclu=* | --incl=* | --inc=*)
+    includedir=$ac_optarg ;;
+
+  -infodir | --infodir | --infodi | --infod | --info | --inf)
+    ac_prev=infodir ;;
+  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
+    infodir=$ac_optarg ;;
+
+  -libdir | --libdir | --libdi | --libd)
+    ac_prev=libdir ;;
+  -libdir=* | --libdir=* | --libdi=* | --libd=*)
+    libdir=$ac_optarg ;;
+
+  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
+  | --libexe | --libex | --libe)
+    ac_prev=libexecdir ;;
+  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
+  | --libexe=* | --libex=* | --libe=*)
+    libexecdir=$ac_optarg ;;
+
+  -localstatedir | --localstatedir | --localstatedi | --localstated \
+  | --localstate | --localstat | --localsta | --localst \
+  | --locals | --local | --loca | --loc | --lo)
+    ac_prev=localstatedir ;;
+  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
+  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
+  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
+    localstatedir=$ac_optarg ;;
+
+  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
+    ac_prev=mandir ;;
+  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
+    mandir=$ac_optarg ;;
+
+  -nfp | --nfp | --nf)
+    # Obsolete; use --without-fp.
+    with_fp=no ;;
+
+  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
+  | --no-cr | --no-c | -n)
+    no_create=yes ;;
+
+  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
+  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
+    no_recursion=yes ;;
+
+  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
+  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
+  | --oldin | --oldi | --old | --ol | --o)
+    ac_prev=oldincludedir ;;
+  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
+  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
+  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
+    oldincludedir=$ac_optarg ;;
+
+  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
+    ac_prev=prefix ;;
+  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
+    prefix=$ac_optarg ;;
+
+  -program-prefix | --program-prefix | --program-prefi | --program-pref \
+  | --program-pre | --program-pr | --program-p)
+    ac_prev=program_prefix ;;
+  -program-prefix=* | --program-prefix=* | --program-prefi=* \
+  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
+    program_prefix=$ac_optarg ;;
+
+  -program-suffix | --program-suffix | --program-suffi | --program-suff \
+  | --program-suf | --program-su | --program-s)
+    ac_prev=program_suffix ;;
+  -program-suffix=* | --program-suffix=* | --program-suffi=* \
+  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
+    program_suffix=$ac_optarg ;;
+
+  -program-transform-name | --program-transform-name \
+  | --program-transform-nam | --program-transform-na \
+  | --program-transform-n | --program-transform- \
+  | --program-transform | --program-transfor \
+  | --program-transfo | --program-transf \
+  | --program-trans | --program-tran \
+  | --progr-tra | --program-tr | --program-t)
+    ac_prev=program_transform_name ;;
+  -program-transform-name=* | --program-transform-name=* \
+  | --program-transform-nam=* | --program-transform-na=* \
+  | --program-transform-n=* | --program-transform-=* \
+  | --program-transform=* | --program-transfor=* \
+  | --program-transfo=* | --program-transf=* \
+  | --program-trans=* | --program-tran=* \
+  | --progr-tra=* | --program-tr=* | --program-t=*)
+    program_transform_name=$ac_optarg ;;
+
+  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
+  | -silent | --silent | --silen | --sile | --sil)
+    silent=yes ;;
+
+  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
+    ac_prev=sbindir ;;
+  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
+  | --sbi=* | --sb=*)
+    sbindir=$ac_optarg ;;
+
+  -sharedstatedir | --sharedstatedir | --sharedstatedi \
+  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
+  | --sharedst | --shareds | --shared | --share | --shar \
+  | --sha | --sh)
+    ac_prev=sharedstatedir ;;
+  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
+  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
+  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
+  | --sha=* | --sh=*)
+    sharedstatedir=$ac_optarg ;;
+
+  -site | --site | --sit)
+    ac_prev=site ;;
+  -site=* | --site=* | --sit=*)
+    site=$ac_optarg ;;
+
+  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
+    ac_prev=srcdir ;;
+  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
+    srcdir=$ac_optarg ;;
+
+  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
+  | --syscon | --sysco | --sysc | --sys | --sy)
+    ac_prev=sysconfdir ;;
+  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
+  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
+    sysconfdir=$ac_optarg ;;
+
+  -target | --target | --targe | --targ | --tar | --ta | --t)
+    ac_prev=target_alias ;;
+  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
+    target_alias=$ac_optarg ;;
+
+  -v | -verbose | --verbose | --verbos | --verbo | --verb)
+    verbose=yes ;;
+
+  -version | --version | --versio | --versi | --vers | -V)
+    ac_init_version=: ;;
+
+  -with-* | --with-*)
+    ac_package=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid package name: $ac_package" >&2
+   { (exit 1); exit 1; }; }
+    ac_package=`echo $ac_package| sed 's/-/_/g'`
+    case $ac_option in
+      *=*) ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`;;
+      *) ac_optarg=yes ;;
+    esac
+    eval "with_$ac_package='$ac_optarg'" ;;
+
+  -without-* | --without-*)
+    ac_package=`expr "x$ac_option" : 'x-*without-\(.*\)'`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid package name: $ac_package" >&2
+   { (exit 1); exit 1; }; }
+    ac_package=`echo $ac_package | sed 's/-/_/g'`
+    eval "with_$ac_package=no" ;;
+
+  --x)
+    # Obsolete; use --with-x.
+    with_x=yes ;;
+
+  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
+  | --x-incl | --x-inc | --x-in | --x-i)
+    ac_prev=x_includes ;;
+  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
+  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
+    x_includes=$ac_optarg ;;
+
+  -x-libraries | --x-libraries | --x-librarie | --x-librari \
+  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
+    ac_prev=x_libraries ;;
+  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
+  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
+    x_libraries=$ac_optarg ;;
+
+  -*) { echo "$as_me: error: unrecognized option: $ac_option
+Try \`$0 --help' for more information." >&2
+   { (exit 1); exit 1; }; }
+    ;;
+
+  *=*)
+    ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid variable name: $ac_envvar" >&2
+   { (exit 1); exit 1; }; }
+    ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`
+    eval "$ac_envvar='$ac_optarg'"
+    export $ac_envvar ;;
+
+  *)
+    # FIXME: should be removed in autoconf 3.0.
+    echo "$as_me: WARNING: you should use --build, --host, --target" >&2
+    expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+      echo "$as_me: WARNING: invalid host type: $ac_option" >&2
+    : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
+    ;;
+
+  esac
+done
+
+if test -n "$ac_prev"; then
+  ac_option=--`echo $ac_prev | sed 's/_/-/g'`
+  { echo "$as_me: error: missing argument to $ac_option" >&2
+   { (exit 1); exit 1; }; }
+fi
+
+# Be sure to have absolute paths.
+for ac_var in exec_prefix prefix
+do
+  eval ac_val=$`echo $ac_var`
+  case $ac_val in
+    [\\/$]* | ?:[\\/]* | NONE | '' ) ;;
+    *)  { echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
+# Be sure to have absolute paths.
+for ac_var in bindir sbindir libexecdir datadir sysconfdir sharedstatedir \
+	      localstatedir libdir includedir oldincludedir infodir mandir
+do
+  eval ac_val=$`echo $ac_var`
+  case $ac_val in
+    [\\/$]* | ?:[\\/]* ) ;;
+    *)  { echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
+# There might be people who depend on the old broken behavior: `$host'
+# used to hold the argument of --host etc.
+# FIXME: To remove some day.
+build=$build_alias
+host=$host_alias
+target=$target_alias
+
+# FIXME: To remove some day.
+if test "x$host_alias" != x; then
+  if test "x$build_alias" = x; then
+    cross_compiling=maybe
+    echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
+    If a cross compiler is detected then cross compile mode will be used." >&2
+  elif test "x$build_alias" != "x$host_alias"; then
+    cross_compiling=yes
+  fi
+fi
+
+ac_tool_prefix=
+test -n "$host_alias" && ac_tool_prefix=$host_alias-
+
+test "$silent" = yes && exec 6>/dev/null
+
+
+# Find the source files, if location was not specified.
+if test -z "$srcdir"; then
+  ac_srcdir_defaulted=yes
+  # Try the directory containing this script, then its parent.
+  ac_confdir=`(dirname "$0") 2>/dev/null ||
+$as_expr X"$0" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$0" : 'X\(//\)[^/]' \| \
+	 X"$0" : 'X\(//\)$' \| \
+	 X"$0" : 'X\(/\)' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X"$0" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+  srcdir=$ac_confdir
+  if test ! -r $srcdir/$ac_unique_file; then
+    srcdir=..
+  fi
+else
+  ac_srcdir_defaulted=no
+fi
+if test ! -r $srcdir/$ac_unique_file; then
+  if test "$ac_srcdir_defaulted" = yes; then
+    { echo "$as_me: error: cannot find sources ($ac_unique_file) in $ac_confdir or .." >&2
+   { (exit 1); exit 1; }; }
+  else
+    { echo "$as_me: error: cannot find sources ($ac_unique_file) in $srcdir" >&2
+   { (exit 1); exit 1; }; }
+  fi
+fi
+(cd $srcdir && test -r ./$ac_unique_file) 2>/dev/null ||
+  { echo "$as_me: error: sources are in $srcdir, but \`cd $srcdir' does not work" >&2
+   { (exit 1); exit 1; }; }
+srcdir=`echo "$srcdir" | sed 's%\([^\\/]\)[\\/]*$%\1%'`
+ac_env_build_alias_set=${build_alias+set}
+ac_env_build_alias_value=$build_alias
+ac_cv_env_build_alias_set=${build_alias+set}
+ac_cv_env_build_alias_value=$build_alias
+ac_env_host_alias_set=${host_alias+set}
+ac_env_host_alias_value=$host_alias
+ac_cv_env_host_alias_set=${host_alias+set}
+ac_cv_env_host_alias_value=$host_alias
+ac_env_target_alias_set=${target_alias+set}
+ac_env_target_alias_value=$target_alias
+ac_cv_env_target_alias_set=${target_alias+set}
+ac_cv_env_target_alias_value=$target_alias
+ac_env_CC_set=${CC+set}
+ac_env_CC_value=$CC
+ac_cv_env_CC_set=${CC+set}
+ac_cv_env_CC_value=$CC
+ac_env_CFLAGS_set=${CFLAGS+set}
+ac_env_CFLAGS_value=$CFLAGS
+ac_cv_env_CFLAGS_set=${CFLAGS+set}
+ac_cv_env_CFLAGS_value=$CFLAGS
+ac_env_LDFLAGS_set=${LDFLAGS+set}
+ac_env_LDFLAGS_value=$LDFLAGS
+ac_cv_env_LDFLAGS_set=${LDFLAGS+set}
+ac_cv_env_LDFLAGS_value=$LDFLAGS
+ac_env_CPPFLAGS_set=${CPPFLAGS+set}
+ac_env_CPPFLAGS_value=$CPPFLAGS
+ac_cv_env_CPPFLAGS_set=${CPPFLAGS+set}
+ac_cv_env_CPPFLAGS_value=$CPPFLAGS
+ac_env_CXX_set=${CXX+set}
+ac_env_CXX_value=$CXX
+ac_cv_env_CXX_set=${CXX+set}
+ac_cv_env_CXX_value=$CXX
+ac_env_CXXFLAGS_set=${CXXFLAGS+set}
+ac_env_CXXFLAGS_value=$CXXFLAGS
+ac_cv_env_CXXFLAGS_set=${CXXFLAGS+set}
+ac_cv_env_CXXFLAGS_value=$CXXFLAGS
+ac_env_CPP_set=${CPP+set}
+ac_env_CPP_value=$CPP
+ac_cv_env_CPP_set=${CPP+set}
+ac_cv_env_CPP_value=$CPP
+
+#
+# Report the --help message.
+#
+if test "$ac_init_help" = "long"; then
+  # Omit some internal or obsolete options to make the list less imposing.
+  # This message is too long to be a string in the A/UX 3.1 sh.
+  cat <<_ACEOF
+\`configure' configures this package to adapt to many kinds of systems.
+
+Usage: $0 [OPTION]... [VAR=VALUE]...
+
+To assign environment variables (e.g., CC, CFLAGS...), specify them as
+VAR=VALUE.  See below for descriptions of some of the useful variables.
+
+Defaults for the options are specified in brackets.
+
+Configuration:
+  -h, --help              display this help and exit
+      --help=short        display options specific to this package
+      --help=recursive    display the short help of all the included packages
+  -V, --version           display version information and exit
+  -q, --quiet, --silent   do not print \`checking...' messages
+      --cache-file=FILE   cache test results in FILE [disabled]
+  -C, --config-cache      alias for \`--cache-file=config.cache'
+  -n, --no-create         do not create output files
+      --srcdir=DIR        find the sources in DIR [configure dir or \`..']
+
+_ACEOF
+
+  cat <<_ACEOF
+Installation directories:
+  --prefix=PREFIX         install architecture-independent files in PREFIX
+			  [$ac_default_prefix]
+  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
+			  [PREFIX]
+
+By default, \`make install' will install all the files in
+\`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
+an installation prefix other than \`$ac_default_prefix' using \`--prefix',
+for instance \`--prefix=\$HOME'.
+
+For better control, use the options below.
+
+Fine tuning of the installation directories:
+  --bindir=DIR           user executables [EPREFIX/bin]
+  --sbindir=DIR          system admin executables [EPREFIX/sbin]
+  --libexecdir=DIR       program executables [EPREFIX/libexec]
+  --datadir=DIR          read-only architecture-independent data [PREFIX/share]
+  --sysconfdir=DIR       read-only single-machine data [PREFIX/etc]
+  --sharedstatedir=DIR   modifiable architecture-independent data [PREFIX/com]
+  --localstatedir=DIR    modifiable single-machine data [PREFIX/var]
+  --libdir=DIR           object code libraries [EPREFIX/lib]
+  --includedir=DIR       C header files [PREFIX/include]
+  --oldincludedir=DIR    C header files for non-gcc [/usr/include]
+  --infodir=DIR          info documentation [PREFIX/info]
+  --mandir=DIR           man documentation [PREFIX/man]
+_ACEOF
+
+  cat <<\_ACEOF
+_ACEOF
+fi
+
+if test -n "$ac_init_help"; then
+
+  cat <<\_ACEOF
+
+Some influential environment variables:
+  CC          C compiler command
+  CFLAGS      C compiler flags
+  LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
+              nonstandard directory <lib dir>
+  CPPFLAGS    C/C++ preprocessor flags, e.g. -I<include dir> if you have
+              headers in a nonstandard directory <include dir>
+  CXX         C++ compiler command
+  CXXFLAGS    C++ compiler flags
+  CPP         C preprocessor
+
+Use these variables to override the choices made by `configure' or to help
+it to find libraries and programs with nonstandard names/locations.
+
+_ACEOF
+fi
+
+if test "$ac_init_help" = "recursive"; then
+  # If there are subdirs, report their specific --help.
+  ac_popdir=`pwd`
+  for ac_dir in : $ac_subdirs_all; do test "x$ac_dir" = x: && continue
+    test -d $ac_dir || continue
+    ac_builddir=.
+
+if test "$ac_dir" != .; then
+  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
+  # A "../" for each directory in $ac_dir_suffix.
+  ac_top_builddir=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,../,g'`
+else
+  ac_dir_suffix= ac_top_builddir=
+fi
+
+case $srcdir in
+  .)  # No --srcdir option.  We are building in place.
+    ac_srcdir=.
+    if test -z "$ac_top_builddir"; then
+       ac_top_srcdir=.
+    else
+       ac_top_srcdir=`echo $ac_top_builddir | sed 's,/$,,'`
+    fi ;;
+  [\\/]* | ?:[\\/]* )  # Absolute path.
+    ac_srcdir=$srcdir$ac_dir_suffix;
+    ac_top_srcdir=$srcdir ;;
+  *) # Relative path.
+    ac_srcdir=$ac_top_builddir$srcdir$ac_dir_suffix
+    ac_top_srcdir=$ac_top_builddir$srcdir ;;
+esac
+
+# Do not use `cd foo && pwd` to compute absolute paths, because
+# the directories may not exist.
+case `pwd` in
+.) ac_abs_builddir="$ac_dir";;
+*)
+  case "$ac_dir" in
+  .) ac_abs_builddir=`pwd`;;
+  [\\/]* | ?:[\\/]* ) ac_abs_builddir="$ac_dir";;
+  *) ac_abs_builddir=`pwd`/"$ac_dir";;
+  esac;;
+esac
+case $ac_abs_builddir in
+.) ac_abs_top_builddir=${ac_top_builddir}.;;
+*)
+  case ${ac_top_builddir}. in
+  .) ac_abs_top_builddir=$ac_abs_builddir;;
+  [\\/]* | ?:[\\/]* ) ac_abs_top_builddir=${ac_top_builddir}.;;
+  *) ac_abs_top_builddir=$ac_abs_builddir/${ac_top_builddir}.;;
+  esac;;
+esac
+case $ac_abs_builddir in
+.) ac_abs_srcdir=$ac_srcdir;;
+*)
+  case $ac_srcdir in
+  .) ac_abs_srcdir=$ac_abs_builddir;;
+  [\\/]* | ?:[\\/]* ) ac_abs_srcdir=$ac_srcdir;;
+  *) ac_abs_srcdir=$ac_abs_builddir/$ac_srcdir;;
+  esac;;
+esac
+case $ac_abs_builddir in
+.) ac_abs_top_srcdir=$ac_top_srcdir;;
+*)
+  case $ac_top_srcdir in
+  .) ac_abs_top_srcdir=$ac_abs_builddir;;
+  [\\/]* | ?:[\\/]* ) ac_abs_top_srcdir=$ac_top_srcdir;;
+  *) ac_abs_top_srcdir=$ac_abs_builddir/$ac_top_srcdir;;
+  esac;;
+esac
+
+    cd $ac_dir
+    # Check for guested configure; otherwise get Cygnus style configure.
+    if test -f $ac_srcdir/configure.gnu; then
+      echo
+      $SHELL $ac_srcdir/configure.gnu  --help=recursive
+    elif test -f $ac_srcdir/configure; then
+      echo
+      $SHELL $ac_srcdir/configure  --help=recursive
+    elif test -f $ac_srcdir/configure.ac ||
+	   test -f $ac_srcdir/configure.in; then
+      echo
+      $ac_configure --help
+    else
+      echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
+    fi
+    cd "$ac_popdir"
+  done
+fi
+
+test -n "$ac_init_help" && exit 0
+if $ac_init_version; then
+  cat <<\_ACEOF
+
+Copyright (C) 2003 Free Software Foundation, Inc.
+This configure script is free software; the Free Software Foundation
+gives unlimited permission to copy, distribute and modify it.
+_ACEOF
+  exit 0
+fi
+exec 5>config.log
+cat >&5 <<_ACEOF
+This file contains any messages produced by compilers while
+running configure, to aid debugging if configure makes a mistake.
+
+It was created by $as_me, which was
+generated by GNU Autoconf 2.59.  Invocation command line was
+
+  $ $0 $@
+
+_ACEOF
+{
+cat <<_ASUNAME
+## --------- ##
+## Platform. ##
+## --------- ##
+
+hostname = `(hostname || uname -n) 2>/dev/null | sed 1q`
+uname -m = `(uname -m) 2>/dev/null || echo unknown`
+uname -r = `(uname -r) 2>/dev/null || echo unknown`
+uname -s = `(uname -s) 2>/dev/null || echo unknown`
+uname -v = `(uname -v) 2>/dev/null || echo unknown`
+
+/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null || echo unknown`
+/bin/uname -X     = `(/bin/uname -X) 2>/dev/null     || echo unknown`
+
+/bin/arch              = `(/bin/arch) 2>/dev/null              || echo unknown`
+/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null       || echo unknown`
+/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null || echo unknown`
+hostinfo               = `(hostinfo) 2>/dev/null               || echo unknown`
+/bin/machine           = `(/bin/machine) 2>/dev/null           || echo unknown`
+/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null       || echo unknown`
+/bin/universe          = `(/bin/universe) 2>/dev/null          || echo unknown`
+
+_ASUNAME
+
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  echo "PATH: $as_dir"
+done
+
+} >&5
+
+cat >&5 <<_ACEOF
+
+
+## ----------- ##
+## Core tests. ##
+## ----------- ##
+
+_ACEOF
+
+
+# Keep a trace of the command line.
+# Strip out --no-create and --no-recursion so they do not pile up.
+# Strip out --silent because we don't want to record it for future runs.
+# Also quote any args containing shell meta-characters.
+# Make two passes to allow for proper duplicate-argument suppression.
+ac_configure_args=
+ac_configure_args0=
+ac_configure_args1=
+ac_sep=
+ac_must_keep_next=false
+for ac_pass in 1 2
+do
+  for ac_arg
+  do
+    case $ac_arg in
+    -no-create | --no-c* | -n | -no-recursion | --no-r*) continue ;;
+    -q | -quiet | --quiet | --quie | --qui | --qu | --q \
+    | -silent | --silent | --silen | --sile | --sil)
+      continue ;;
+    *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?\"\']*)
+      ac_arg=`echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    esac
+    case $ac_pass in
+    1) ac_configure_args0="$ac_configure_args0 '$ac_arg'" ;;
+    2)
+      ac_configure_args1="$ac_configure_args1 '$ac_arg'"
+      if test $ac_must_keep_next = true; then
+	ac_must_keep_next=false # Got value, back to normal.
+      else
+	case $ac_arg in
+	  *=* | --config-cache | -C | -disable-* | --disable-* \
+	  | -enable-* | --enable-* | -gas | --g* | -nfp | --nf* \
+	  | -q | -quiet | --q* | -silent | --sil* | -v | -verb* \
+	  | -with-* | --with-* | -without-* | --without-* | --x)
+	    case "$ac_configure_args0 " in
+	      "$ac_configure_args1"*" '$ac_arg' "* ) continue ;;
+	    esac
+	    ;;
+	  -* ) ac_must_keep_next=true ;;
+	esac
+      fi
+      ac_configure_args="$ac_configure_args$ac_sep'$ac_arg'"
+      # Get rid of the leading space.
+      ac_sep=" "
+      ;;
+    esac
+  done
+done
+$as_unset ac_configure_args0 || test "${ac_configure_args0+set}" != set || { ac_configure_args0=; export ac_configure_args0; }
+$as_unset ac_configure_args1 || test "${ac_configure_args1+set}" != set || { ac_configure_args1=; export ac_configure_args1; }
+
+# When interrupted or exit'd, cleanup temporary files, and complete
+# config.log.  We remove comments because anyway the quotes in there
+# would cause problems or look ugly.
+# WARNING: Be sure not to use single quotes in there, as some shells,
+# such as our DU 5.0 friend, will then `close' the trap.
+trap 'exit_status=$?
+  # Save into config.log some information that might help in debugging.
+  {
+    echo
+
+    cat <<\_ASBOX
+## ---------------- ##
+## Cache variables. ##
+## ---------------- ##
+_ASBOX
+    echo
+    # The following way of writing the cache mishandles newlines in values,
+{
+  (set) 2>&1 |
+    case `(ac_space='"'"' '"'"'; set | grep ac_space) 2>&1` in
+    *ac_space=\ *)
+      sed -n \
+	"s/'"'"'/'"'"'\\\\'"'"''"'"'/g;
+	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='"'"'\\2'"'"'/p"
+      ;;
+    *)
+      sed -n \
+	"s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
+      ;;
+    esac;
+}
+    echo
+
+    cat <<\_ASBOX
+## ----------------- ##
+## Output variables. ##
+## ----------------- ##
+_ASBOX
+    echo
+    for ac_var in $ac_subst_vars
+    do
+      eval ac_val=$`echo $ac_var`
+      echo "$ac_var='"'"'$ac_val'"'"'"
+    done | sort
+    echo
+
+    if test -n "$ac_subst_files"; then
+      cat <<\_ASBOX
+## ------------- ##
+## Output files. ##
+## ------------- ##
+_ASBOX
+      echo
+      for ac_var in $ac_subst_files
+      do
+	eval ac_val=$`echo $ac_var`
+	echo "$ac_var='"'"'$ac_val'"'"'"
+      done | sort
+      echo
+    fi
+
+    if test -s confdefs.h; then
+      cat <<\_ASBOX
+## ----------- ##
+## confdefs.h. ##
+## ----------- ##
+_ASBOX
+      echo
+      sed "/^$/d" confdefs.h | sort
+      echo
+    fi
+    test "$ac_signal" != 0 &&
+      echo "$as_me: caught signal $ac_signal"
+    echo "$as_me: exit $exit_status"
+  } >&5
+  rm -f core *.core &&
+  rm -rf conftest* confdefs* conf$$* $ac_clean_files &&
+    exit $exit_status
+     ' 0
+for ac_signal in 1 2 13 15; do
+  trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
+done
+ac_signal=0
+
+# confdefs.h avoids OS command line length limits that DEFS can exceed.
+rm -rf conftest* confdefs.h
+# AIX cpp loses on an empty file, so make sure it contains at least a newline.
+echo >confdefs.h
+
+# Predefined preprocessor variables.
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_NAME "$PACKAGE_NAME"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_TARNAME "$PACKAGE_TARNAME"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_VERSION "$PACKAGE_VERSION"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_STRING "$PACKAGE_STRING"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
+_ACEOF
+
+
+# Let the site file select an alternate cache file if it wants to.
+# Prefer explicitly selected file to automatically selected ones.
+if test -z "$CONFIG_SITE"; then
+  if test "x$prefix" != xNONE; then
+    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
+  else
+    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
+  fi
+fi
+for ac_site_file in $CONFIG_SITE; do
+  if test -r "$ac_site_file"; then
+    { echo "$as_me:$LINENO: loading site script $ac_site_file" >&5
+echo "$as_me: loading site script $ac_site_file" >&6;}
+    sed 's/^/| /' "$ac_site_file" >&5
+    . "$ac_site_file"
+  fi
+done
+
+if test -r "$cache_file"; then
+  # Some versions of bash will fail to source /dev/null (special
+  # files actually), so we avoid doing that.
+  if test -f "$cache_file"; then
+    { echo "$as_me:$LINENO: loading cache $cache_file" >&5
+echo "$as_me: loading cache $cache_file" >&6;}
+    case $cache_file in
+      [\\/]* | ?:[\\/]* ) . $cache_file;;
+      *)                      . ./$cache_file;;
+    esac
+  fi
+else
+  { echo "$as_me:$LINENO: creating cache $cache_file" >&5
+echo "$as_me: creating cache $cache_file" >&6;}
+  >$cache_file
+fi
+
+# Check that the precious variables saved in the cache have kept the same
+# value.
+ac_cache_corrupted=false
+for ac_var in `(set) 2>&1 |
+	       sed -n 's/^ac_env_\([a-zA-Z_0-9]*\)_set=.*/\1/p'`; do
+  eval ac_old_set=\$ac_cv_env_${ac_var}_set
+  eval ac_new_set=\$ac_env_${ac_var}_set
+  eval ac_old_val="\$ac_cv_env_${ac_var}_value"
+  eval ac_new_val="\$ac_env_${ac_var}_value"
+  case $ac_old_set,$ac_new_set in
+    set,)
+      { echo "$as_me:$LINENO: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
+echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
+      ac_cache_corrupted=: ;;
+    ,set)
+      { echo "$as_me:$LINENO: error: \`$ac_var' was not set in the previous run" >&5
+echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
+      ac_cache_corrupted=: ;;
+    ,);;
+    *)
+      if test "x$ac_old_val" != "x$ac_new_val"; then
+	{ echo "$as_me:$LINENO: error: \`$ac_var' has changed since the previous run:" >&5
+echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
+	{ echo "$as_me:$LINENO:   former value:  $ac_old_val" >&5
+echo "$as_me:   former value:  $ac_old_val" >&2;}
+	{ echo "$as_me:$LINENO:   current value: $ac_new_val" >&5
+echo "$as_me:   current value: $ac_new_val" >&2;}
+	ac_cache_corrupted=:
+      fi;;
+  esac
+  # Pass precious variables to config.status.
+  if test "$ac_new_set" = set; then
+    case $ac_new_val in
+    *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?\"\']*)
+      ac_arg=$ac_var=`echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
+    *) ac_arg=$ac_var=$ac_new_val ;;
+    esac
+    case " $ac_configure_args " in
+      *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
+      *) ac_configure_args="$ac_configure_args '$ac_arg'" ;;
+    esac
+  fi
+done
+if $ac_cache_corrupted; then
+  { echo "$as_me:$LINENO: error: changes in the environment can compromise the build" >&5
+echo "$as_me: error: changes in the environment can compromise the build" >&2;}
+  { { echo "$as_me:$LINENO: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
+echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+          ac_config_headers="$ac_config_headers config.h"
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}gcc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}gcc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "gcc", so it can be a program name with args.
+set dummy gcc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="gcc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  CC=$ac_ct_CC
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}cc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  CC=$ac_ct_CC
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+fi
+if test -z "$CC"; then
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+  ac_prog_rejected=no
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+       ac_prog_rejected=yes
+       continue
+     fi
+    ac_cv_prog_CC="cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+if test $ac_prog_rejected = yes; then
+  # We found a bogon in the path, so make sure we never use it.
+  set dummy $ac_cv_prog_CC
+  shift
+  if test $# != 0; then
+    # We chose a different compiler from the bogus one.
+    # However, it has the same basename, so the bogon will be chosen
+    # first if we set CC to just the basename; use the full file name.
+    shift
+    ac_cv_prog_CC="$as_dir/$ac_word${1+' '}$@"
+  fi
+fi
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  for ac_prog in cl
+  do
+    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+    test -n "$CC" && break
+  done
+fi
+if test -z "$CC"; then
+  ac_ct_CC=$CC
+  for ac_prog in cl
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  test -n "$ac_ct_CC" && break
+done
+
+  CC=$ac_ct_CC
+fi
+
+fi
+
+
+test -z "$CC" && { { echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
+See \`config.log' for more details." >&5
+echo "$as_me: error: no acceptable C compiler found in \$PATH
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+
+# Provide some information about the compiler.
+echo "$as_me:$LINENO:" \
+     "checking for C compiler version" >&5
+ac_compiler=`set X $ac_compile; echo $2`
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler --version </dev/null >&5\"") >&5
+  (eval $ac_compiler --version </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler -v </dev/null >&5\"") >&5
+  (eval $ac_compiler -v </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler -V </dev/null >&5\"") >&5
+  (eval $ac_compiler -V </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+ac_clean_files_save=$ac_clean_files
+ac_clean_files="$ac_clean_files a.out a.exe b.out"
+# Try to create an executable without -o first, disregard a.out.
+# It will help us diagnose broken compilers, and finding out an intuition
+# of exeext.
+echo "$as_me:$LINENO: checking for C compiler default output file name" >&5
+echo $ECHO_N "checking for C compiler default output file name... $ECHO_C" >&6
+ac_link_default=`echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
+if { (eval echo "$as_me:$LINENO: \"$ac_link_default\"") >&5
+  (eval $ac_link_default) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  # Find the output, starting from the most likely.  This scheme is
+# not robust to junk in `.', hence go to wildcards (a.*) only as a last
+# resort.
+
+# Be careful to initialize this variable, since it used to be cached.
+# Otherwise an old cache value of `no' led to `EXEEXT = no' in a Makefile.
+ac_cv_exeext=
+# b.out is created by i960 compilers.
+for ac_file in a_out.exe a.exe conftest.exe a.out conftest a.* conftest.* b.out
+do
+  test -f "$ac_file" || continue
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.o | *.obj )
+	;;
+    conftest.$ac_ext )
+	# This is the source file.
+	;;
+    [ab].out )
+	# We found the default executable, but exeext='' is most
+	# certainly right.
+	break;;
+    *.* )
+	ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+	# FIXME: I believe we export ac_cv_exeext for Libtool,
+	# but it would be cool to find out if it's true.  Does anybody
+	# maintain Libtool? --akim.
+	export ac_cv_exeext
+	break;;
+    * )
+	break;;
+  esac
+done
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+{ { echo "$as_me:$LINENO: error: C compiler cannot create executables
+See \`config.log' for more details." >&5
+echo "$as_me: error: C compiler cannot create executables
+See \`config.log' for more details." >&2;}
+   { (exit 77); exit 77; }; }
+fi
+
+ac_exeext=$ac_cv_exeext
+echo "$as_me:$LINENO: result: $ac_file" >&5
+echo "${ECHO_T}$ac_file" >&6
+
+# Check the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+echo "$as_me:$LINENO: checking whether the C compiler works" >&5
+echo $ECHO_N "checking whether the C compiler works... $ECHO_C" >&6
+# FIXME: These cross compiler hacks should be removed for Autoconf 3.0
+# If not cross compiling, check that we can run a simple program.
+if test "$cross_compiling" != yes; then
+  if { ac_try='./$ac_file'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+    cross_compiling=no
+  else
+    if test "$cross_compiling" = maybe; then
+	cross_compiling=yes
+    else
+	{ { echo "$as_me:$LINENO: error: cannot run C compiled programs.
+If you meant to cross compile, use \`--host'.
+See \`config.log' for more details." >&5
+echo "$as_me: error: cannot run C compiled programs.
+If you meant to cross compile, use \`--host'.
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+  fi
+fi
+echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+
+rm -f a.out a.exe conftest$ac_cv_exeext b.out
+ac_clean_files=$ac_clean_files_save
+# Check the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+echo "$as_me:$LINENO: checking whether we are cross compiling" >&5
+echo $ECHO_N "checking whether we are cross compiling... $ECHO_C" >&6
+echo "$as_me:$LINENO: result: $cross_compiling" >&5
+echo "${ECHO_T}$cross_compiling" >&6
+
+echo "$as_me:$LINENO: checking for suffix of executables" >&5
+echo $ECHO_N "checking for suffix of executables... $ECHO_C" >&6
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  # If both `conftest.exe' and `conftest' are `present' (well, observable)
+# catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
+# work properly (i.e., refer to `conftest.exe'), while it won't with
+# `rm'.
+for ac_file in conftest.exe conftest conftest.*; do
+  test -f "$ac_file" || continue
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.o | *.obj ) ;;
+    *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+	  export ac_cv_exeext
+	  break;;
+    * ) break;;
+  esac
+done
+else
+  { { echo "$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details." >&5
+echo "$as_me: error: cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+rm -f conftest$ac_cv_exeext
+echo "$as_me:$LINENO: result: $ac_cv_exeext" >&5
+echo "${ECHO_T}$ac_cv_exeext" >&6
+
+rm -f conftest.$ac_ext
+EXEEXT=$ac_cv_exeext
+ac_exeext=$EXEEXT
+echo "$as_me:$LINENO: checking for suffix of object files" >&5
+echo $ECHO_N "checking for suffix of object files... $ECHO_C" >&6
+if test "${ac_cv_objext+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.o conftest.obj
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  for ac_file in `(ls conftest.o conftest.obj; ls conftest.*) 2>/dev/null`; do
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg ) ;;
+    *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
+       break;;
+  esac
+done
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+{ { echo "$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile
+See \`config.log' for more details." >&5
+echo "$as_me: error: cannot compute suffix of object files: cannot compile
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+rm -f conftest.$ac_cv_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_objext" >&5
+echo "${ECHO_T}$ac_cv_objext" >&6
+OBJEXT=$ac_cv_objext
+ac_objext=$OBJEXT
+echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
+echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6
+if test "${ac_cv_c_compiler_gnu+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+#ifndef __GNUC__
+       choke me
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_compiler_gnu=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_compiler_gnu=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+ac_cv_c_compiler_gnu=$ac_compiler_gnu
+
+fi
+echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
+echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6
+GCC=`test $ac_compiler_gnu = yes && echo yes`
+ac_test_CFLAGS=${CFLAGS+set}
+ac_save_CFLAGS=$CFLAGS
+CFLAGS="-g"
+echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
+echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6
+if test "${ac_cv_prog_cc_g+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_prog_cc_g=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_prog_cc_g=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
+echo "${ECHO_T}$ac_cv_prog_cc_g" >&6
+if test "$ac_test_CFLAGS" = set; then
+  CFLAGS=$ac_save_CFLAGS
+elif test $ac_cv_prog_cc_g = yes; then
+  if test "$GCC" = yes; then
+    CFLAGS="-g -O2"
+  else
+    CFLAGS="-g"
+  fi
+else
+  if test "$GCC" = yes; then
+    CFLAGS="-O2"
+  else
+    CFLAGS=
+  fi
+fi
+echo "$as_me:$LINENO: checking for $CC option to accept ANSI C" >&5
+echo $ECHO_N "checking for $CC option to accept ANSI C... $ECHO_C" >&6
+if test "${ac_cv_prog_cc_stdc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_cv_prog_cc_stdc=no
+ac_save_CC=$CC
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <stdarg.h>
+#include <stdio.h>
+#include <sys/types.h>
+#include <sys/stat.h>
+/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
+struct buf { int x; };
+FILE * (*rcsopen) (struct buf *, struct stat *, int);
+static char *e (p, i)
+     char **p;
+     int i;
+{
+  return p[i];
+}
+static char *f (char * (*g) (char **, int), char **p, ...)
+{
+  char *s;
+  va_list v;
+  va_start (v,p);
+  s = g (p, va_arg (v,int));
+  va_end (v);
+  return s;
+}
+
+/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
+   function prototypes and stuff, but not '\xHH' hex character constants.
+   These don't provoke an error unfortunately, instead are silently treated
+   as 'x'.  The following induces an error, until -std1 is added to get
+   proper ANSI mode.  Curiously '\x00'!='x' always comes out true, for an
+   array size at least.  It's necessary to write '\x00'==0 to get something
+   that's true only with -std1.  */
+int osf4_cc_array ['\x00' == 0 ? 1 : -1];
+
+int test (int i, double x);
+struct s1 {int (*f) (int a);};
+struct s2 {int (*f) (double a);};
+int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
+int argc;
+char **argv;
+int
+main ()
+{
+return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
+  ;
+  return 0;
+}
+_ACEOF
+# Don't try gcc -ansi; that turns off useful extensions and
+# breaks some systems' header files.
+# AIX			-qlanglvl=ansi
+# Ultrix and OSF/1	-std1
+# HP-UX 10.20 and later	-Ae
+# HP-UX older versions	-Aa -D_HPUX_SOURCE
+# SVR4			-Xc -D__EXTENSIONS__
+for ac_arg in "" -qlanglvl=ansi -std1 -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+do
+  CC="$ac_save_CC $ac_arg"
+  rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_prog_cc_stdc=$ac_arg
+break
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+fi
+rm -f conftest.err conftest.$ac_objext
+done
+rm -f conftest.$ac_ext conftest.$ac_objext
+CC=$ac_save_CC
+
+fi
+
+case "x$ac_cv_prog_cc_stdc" in
+  x|xno)
+    echo "$as_me:$LINENO: result: none needed" >&5
+echo "${ECHO_T}none needed" >&6 ;;
+  *)
+    echo "$as_me:$LINENO: result: $ac_cv_prog_cc_stdc" >&5
+echo "${ECHO_T}$ac_cv_prog_cc_stdc" >&6
+    CC="$CC $ac_cv_prog_cc_stdc" ;;
+esac
+
+# Some people use a C++ compiler to compile C.  Since we use `exit',
+# in C++ we need to declare it.  In case someone uses the same compiler
+# for both compiling C and C++ we need to have the C++ compiler decide
+# the declaration of exit, since it's the most demanding environment.
+cat >conftest.$ac_ext <<_ACEOF
+#ifndef __cplusplus
+  choke me
+#endif
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  for ac_declaration in \
+   '' \
+   'extern "C" void std::exit (int) throw (); using std::exit;' \
+   'extern "C" void std::exit (int); using std::exit;' \
+   'extern "C" void exit (int) throw ();' \
+   'extern "C" void exit (int);' \
+   'void exit (int);'
+do
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_declaration
+#include <stdlib.h>
+int
+main ()
+{
+exit (42);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+continue
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_declaration
+int
+main ()
+{
+exit (42);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  break
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+done
+rm -f conftest*
+if test -n "$ac_declaration"; then
+  echo '#ifdef __cplusplus' >>confdefs.h
+  echo $ac_declaration      >>confdefs.h
+  echo '#endif'             >>confdefs.h
+fi
+
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+ac_ext=cc
+ac_cpp='$CXXCPP $CPPFLAGS'
+ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+if test -n "$ac_tool_prefix"; then
+  for ac_prog in $CCC g++ c++ gpp aCC CC cxx cc++ cl FCC KCC RCC xlC_r xlC
+  do
+    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CXX+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CXX"; then
+  ac_cv_prog_CXX="$CXX" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CXX="$ac_tool_prefix$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+CXX=$ac_cv_prog_CXX
+if test -n "$CXX"; then
+  echo "$as_me:$LINENO: result: $CXX" >&5
+echo "${ECHO_T}$CXX" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+    test -n "$CXX" && break
+  done
+fi
+if test -z "$CXX"; then
+  ac_ct_CXX=$CXX
+  for ac_prog in $CCC g++ c++ gpp aCC CC cxx cc++ cl FCC KCC RCC xlC_r xlC
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CXX+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CXX"; then
+  ac_cv_prog_ac_ct_CXX="$ac_ct_CXX" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CXX="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+ac_ct_CXX=$ac_cv_prog_ac_ct_CXX
+if test -n "$ac_ct_CXX"; then
+  echo "$as_me:$LINENO: result: $ac_ct_CXX" >&5
+echo "${ECHO_T}$ac_ct_CXX" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  test -n "$ac_ct_CXX" && break
+done
+test -n "$ac_ct_CXX" || ac_ct_CXX="g++"
+
+  CXX=$ac_ct_CXX
+fi
+
+
+# Provide some information about the compiler.
+echo "$as_me:$LINENO:" \
+     "checking for C++ compiler version" >&5
+ac_compiler=`set X $ac_compile; echo $2`
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler --version </dev/null >&5\"") >&5
+  (eval $ac_compiler --version </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler -v </dev/null >&5\"") >&5
+  (eval $ac_compiler -v </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler -V </dev/null >&5\"") >&5
+  (eval $ac_compiler -V </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+
+echo "$as_me:$LINENO: checking whether we are using the GNU C++ compiler" >&5
+echo $ECHO_N "checking whether we are using the GNU C++ compiler... $ECHO_C" >&6
+if test "${ac_cv_cxx_compiler_gnu+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+#ifndef __GNUC__
+       choke me
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_cxx_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_compiler_gnu=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_compiler_gnu=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+ac_cv_cxx_compiler_gnu=$ac_compiler_gnu
+
+fi
+echo "$as_me:$LINENO: result: $ac_cv_cxx_compiler_gnu" >&5
+echo "${ECHO_T}$ac_cv_cxx_compiler_gnu" >&6
+GXX=`test $ac_compiler_gnu = yes && echo yes`
+ac_test_CXXFLAGS=${CXXFLAGS+set}
+ac_save_CXXFLAGS=$CXXFLAGS
+CXXFLAGS="-g"
+echo "$as_me:$LINENO: checking whether $CXX accepts -g" >&5
+echo $ECHO_N "checking whether $CXX accepts -g... $ECHO_C" >&6
+if test "${ac_cv_prog_cxx_g+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_cxx_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_prog_cxx_g=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_prog_cxx_g=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_prog_cxx_g" >&5
+echo "${ECHO_T}$ac_cv_prog_cxx_g" >&6
+if test "$ac_test_CXXFLAGS" = set; then
+  CXXFLAGS=$ac_save_CXXFLAGS
+elif test $ac_cv_prog_cxx_g = yes; then
+  if test "$GXX" = yes; then
+    CXXFLAGS="-g -O2"
+  else
+    CXXFLAGS="-g"
+  fi
+else
+  if test "$GXX" = yes; then
+    CXXFLAGS="-O2"
+  else
+    CXXFLAGS=
+  fi
+fi
+for ac_declaration in \
+   '' \
+   'extern "C" void std::exit (int) throw (); using std::exit;' \
+   'extern "C" void std::exit (int); using std::exit;' \
+   'extern "C" void exit (int) throw ();' \
+   'extern "C" void exit (int);' \
+   'void exit (int);'
+do
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_declaration
+#include <stdlib.h>
+int
+main ()
+{
+exit (42);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_cxx_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+continue
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_declaration
+int
+main ()
+{
+exit (42);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_cxx_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  break
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+done
+rm -f conftest*
+if test -n "$ac_declaration"; then
+  echo '#ifdef __cplusplus' >>confdefs.h
+  echo $ac_declaration      >>confdefs.h
+  echo '#endif'             >>confdefs.h
+fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+# Extract the first word of "wx-config", so it can be a program name with args.
+set dummy wx-config; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_WXCONFIG+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  case $WXCONFIG in
+  [\\/]* | ?:[\\/]*)
+  ac_cv_path_WXCONFIG="$WXCONFIG" # Let the user override the test with a path.
+  ;;
+  *)
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+as_dummy="$PATH:/usr/bin:/usr/local/bin"
+for as_dir in $as_dummy
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_path_WXCONFIG="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+  ;;
+esac
+fi
+WXCONFIG=$ac_cv_path_WXCONFIG
+
+if test -n "$WXCONFIG"; then
+  echo "$as_me:$LINENO: result: $WXCONFIG" >&5
+echo "${ECHO_T}$WXCONFIG" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+
+
+if test "x$GCC" = "xyes" ; then
+  CFLAGS="-Wall $CFLAGS"
+  CXXFLAGS="-Wall $CXXFLAGS"
+fi
+
+
+
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
+echo $ECHO_N "checking how to run the C preprocessor... $ECHO_C" >&6
+# On Suns, sometimes $CPP names a directory.
+if test -n "$CPP" && test -d "$CPP"; then
+  CPP=
+fi
+if test -z "$CPP"; then
+  if test "${ac_cv_prog_CPP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+      # Double quotes because CPP needs to be expanded
+    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
+    do
+      ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+  # <limits.h> exists even on freestanding compilers.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+		     Syntax error
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether non-existent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <ac_nonexistent.h>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  break
+fi
+
+    done
+    ac_cv_prog_CPP=$CPP
+
+fi
+  CPP=$ac_cv_prog_CPP
+else
+  ac_cv_prog_CPP=$CPP
+fi
+echo "$as_me:$LINENO: result: $CPP" >&5
+echo "${ECHO_T}$CPP" >&6
+ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+  # <limits.h> exists even on freestanding compilers.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+		     Syntax error
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether non-existent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <ac_nonexistent.h>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  :
+else
+  { { echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details." >&5
+echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+echo "$as_me:$LINENO: checking for egrep" >&5
+echo $ECHO_N "checking for egrep... $ECHO_C" >&6
+if test "${ac_cv_prog_egrep+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if echo a | (grep -E '(a|b)') >/dev/null 2>&1
+    then ac_cv_prog_egrep='grep -E'
+    else ac_cv_prog_egrep='egrep'
+    fi
+fi
+echo "$as_me:$LINENO: result: $ac_cv_prog_egrep" >&5
+echo "${ECHO_T}$ac_cv_prog_egrep" >&6
+ EGREP=$ac_cv_prog_egrep
+
+
+echo "$as_me:$LINENO: checking for ANSI C header files" >&5
+echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6
+if test "${ac_cv_header_stdc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <stdlib.h>
+#include <stdarg.h>
+#include <string.h>
+#include <float.h>
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_header_stdc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_header_stdc=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+
+if test $ac_cv_header_stdc = yes; then
+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <string.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "memchr" >/dev/null 2>&1; then
+  :
+else
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <stdlib.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "free" >/dev/null 2>&1; then
+  :
+else
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
+  if test "$cross_compiling" = yes; then
+  :
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <ctype.h>
+#if ((' ' & 0x0FF) == 0x020)
+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+#else
+# define ISLOWER(c) \
+		   (('a' <= (c) && (c) <= 'i') \
+		     || ('j' <= (c) && (c) <= 'r') \
+		     || ('s' <= (c) && (c) <= 'z'))
+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
+#endif
+
+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
+int
+main ()
+{
+  int i;
+  for (i = 0; i < 256; i++)
+    if (XOR (islower (i), ISLOWER (i))
+	|| toupper (i) != TOUPPER (i))
+      exit(2);
+  exit (0);
+}
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  :
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+( exit $ac_status )
+ac_cv_header_stdc=no
+fi
+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+fi
+fi
+fi
+echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
+echo "${ECHO_T}$ac_cv_header_stdc" >&6
+if test $ac_cv_header_stdc = yes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define STDC_HEADERS 1
+_ACEOF
+
+fi
+
+# On IRIX 5.3, sys/types and inttypes.h are conflicting.
+
+
+
+
+
+
+
+
+
+for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
+		  inttypes.h stdint.h unistd.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_Header=yes"
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+eval "$as_ac_Header=no"
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+
+
+
+
+
+
+for ac_header in pthread.h sys/types.h sys/stat.h sys/socket.h arpa/inet.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_header_compiler=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+
+
+
+
+
+for ac_header in netinet/in.h sys/time.h arpa/inet.h ifaddrs.h net/if.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_header_compiler=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+
+
+
+
+
+
+
+for ac_header in netdb.h stdarg.h stdio.h fcntl.h unistd.h signal.h stdlib.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_header_compiler=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+
+
+
+for ac_header in errno.h string.h ctype.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_header_compiler=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+
+
+echo "$as_me:$LINENO: checking for socket in -lsocket" >&5
+echo $ECHO_N "checking for socket in -lsocket... $ECHO_C" >&6
+if test "${ac_cv_lib_socket_socket+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lsocket  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char socket ();
+int
+main ()
+{
+socket ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_socket_socket=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_lib_socket_socket=no
+fi
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_socket_socket" >&5
+echo "${ECHO_T}$ac_cv_lib_socket_socket" >&6
+if test $ac_cv_lib_socket_socket = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBSOCKET 1
+_ACEOF
+
+  LIBS="-lsocket $LIBS"
+
+fi
+
+
+echo "$as_me:$LINENO: checking for connect in -linet" >&5
+echo $ECHO_N "checking for connect in -linet... $ECHO_C" >&6
+if test "${ac_cv_lib_inet_connect+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-linet  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char connect ();
+int
+main ()
+{
+connect ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_inet_connect=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_lib_inet_connect=no
+fi
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_inet_connect" >&5
+echo "${ECHO_T}$ac_cv_lib_inet_connect" >&6
+if test $ac_cv_lib_inet_connect = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBINET 1
+_ACEOF
+
+  LIBS="-linet $LIBS"
+
+fi
+
+
+echo "$as_me:$LINENO: checking for gethostname in -lnsl" >&5
+echo $ECHO_N "checking for gethostname in -lnsl... $ECHO_C" >&6
+if test "${ac_cv_lib_nsl_gethostname+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lnsl  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char gethostname ();
+int
+main ()
+{
+gethostname ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_nsl_gethostname=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_lib_nsl_gethostname=no
+fi
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_nsl_gethostname" >&5
+echo "${ECHO_T}$ac_cv_lib_nsl_gethostname" >&6
+if test $ac_cv_lib_nsl_gethostname = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBNSL 1
+_ACEOF
+
+  LIBS="-lnsl $LIBS"
+
+fi
+
+
+echo "$as_me:$LINENO: checking for __int64" >&5
+echo $ECHO_N "checking for __int64... $ECHO_C" >&6
+if test "${ac_cv_type___int64+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+int
+main ()
+{
+if ((__int64 *) 0)
+  return 0;
+if (sizeof (__int64))
+  return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_type___int64=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_type___int64=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_type___int64" >&5
+echo "${ECHO_T}$ac_cv_type___int64" >&6
+if test $ac_cv_type___int64 = yes; then
+  :
+else
+
+cat >>confdefs.h <<_ACEOF
+#define __int64 signed long long
+_ACEOF
+
+fi
+
+
+
+for ac_func in memmove
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+#define $ac_func innocuous_$ac_func
+
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func (); below.
+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+    <limits.h> exists even on freestanding compilers.  */
+
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+
+#undef $ac_func
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+{
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+char (*f) () = $ac_func;
+#endif
+#ifdef __cplusplus
+}
+#endif
+
+int
+main ()
+{
+return f != $ac_func;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+eval "$as_ac_var=no"
+fi
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+done
+
+
+for ac_prog in wx-config
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_wxconf+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$wxconf"; then
+  ac_cv_prog_wxconf="$wxconf" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_wxconf="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+wxconf=$ac_cv_prog_wxconf
+if test -n "$wxconf"; then
+  echo "$as_me:$LINENO: result: $wxconf" >&5
+echo "${ECHO_T}$wxconf" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  test -n "$wxconf" && break
+done
+test -n "$wxconf" || wxconf="NOTFOUND"
+
+if test "$wxconf" = "NOTFOUND" ; then
+  echo "wx-config not found!" 1>&2
+  echo "wxWidgets is required to build this application." 1>&2
+  exit 2
+fi
+
+echo "$as_me:$LINENO: checking wx-config --version" >&5
+echo $ECHO_N "checking wx-config --version... $ECHO_C" >&6
+WXVERSION=`$wxconf --version`
+if test "$?" -ne 0 ; then
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+  echo "wx-config --version not running!" 1>&2
+  echo "wxWidgets is required to build this application." 1>&2
+  exit 2
+else
+  echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+fi
+
+
+# detect if we can do Unicode
+echo "$as_me:$LINENO: checking wx-config --unicode=yes --cflags" >&5
+echo $ECHO_N "checking wx-config --unicode=yes --cflags... $ECHO_C" >&6
+if $wxconf --unicode=yes --cflags > /dev/null 2>&1
+then
+  echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+  WXLIBS=`$wxconf --unicode=yes --libs`
+  WXCFLAGS=`$wxconf --unicode=yes --cflags`
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+  WXLIBS=`$wxconf --libs`
+  WXCFLAGS=`$wxconf --cflags`
+fi
+
+# Fedora Core 1: leaves out the XRC lib by default. grr
+wxrelease=`$wxconf --release`
+wxbasename=`$wxconf --basename`
+
+case "$WXLIBS" in
+  *_xrc* )
+    ;;
+  * )
+    WXLIBS="$WXLIBS -l${wxbasename}_xrc-${wxrelease}"
+    ;;
+esac
+
+
+
+
+
+                    ac_config_files="$ac_config_files Makefiles/wxwidgets/Makefile Makefile"
+
+cat >confcache <<\_ACEOF
+# This file is a shell script that caches the results of configure
+# tests run on this system so they can be shared between configure
+# scripts and configure runs, see configure's option --config-cache.
+# It is not useful on other systems.  If it contains results you don't
+# want to keep, you may remove or edit it.
+#
+# config.status only pays attention to the cache file if you give it
+# the --recheck option to rerun configure.
+#
+# `ac_cv_env_foo' variables (set or unset) will be overridden when
+# loading this file, other *unset* `ac_cv_foo' will be assigned the
+# following values.
+
+_ACEOF
+
+# The following way of writing the cache mishandles newlines in values,
+# but we know of no workaround that is simple, portable, and efficient.
+# So, don't put newlines in cache variables' values.
+# Ultrix sh set writes to stderr and can't be redirected directly,
+# and sets the high bit in the cache file unless we assign to the vars.
+{
+  (set) 2>&1 |
+    case `(ac_space=' '; set | grep ac_space) 2>&1` in
+    *ac_space=\ *)
+      # `set' does not quote correctly, so add quotes (double-quote
+      # substitution turns \\\\ into \\, and sed turns \\ into \).
+      sed -n \
+	"s/'/'\\\\''/g;
+	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
+      ;;
+    *)
+      # `set' quotes correctly as required by POSIX, so do not add quotes.
+      sed -n \
+	"s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
+      ;;
+    esac;
+} |
+  sed '
+     t clear
+     : clear
+     s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
+     t end
+     /^ac_cv_env/!s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
+     : end' >>confcache
+if diff $cache_file confcache >/dev/null 2>&1; then :; else
+  if test -w $cache_file; then
+    test "x$cache_file" != "x/dev/null" && echo "updating cache $cache_file"
+    cat confcache >$cache_file
+  else
+    echo "not updating unwritable cache $cache_file"
+  fi
+fi
+rm -f confcache
+
+test "x$prefix" = xNONE && prefix=$ac_default_prefix
+# Let make expand exec_prefix.
+test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
+
+# VPATH may cause trouble with some makes, so we remove $(srcdir),
+# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
+# trailing colons and then remove the whole line if VPATH becomes empty
+# (actually we leave an empty line to preserve line numbers).
+if test "x$srcdir" = x.; then
+  ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
+s/:*\$(srcdir):*/:/;
+s/:*\${srcdir}:*/:/;
+s/:*@srcdir@:*/:/;
+s/^\([^=]*=[	 ]*\):*/\1/;
+s/:*$//;
+s/^[^=]*=[	 ]*$//;
+}'
+fi
+
+DEFS=-DHAVE_CONFIG_H
+
+ac_libobjs=
+ac_ltlibobjs=
+for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
+  # 1. Remove the extension, and $U if already installed.
+  ac_i=`echo "$ac_i" |
+	 sed 's/\$U\././;s/\.o$//;s/\.obj$//'`
+  # 2. Add them.
+  ac_libobjs="$ac_libobjs $ac_i\$U.$ac_objext"
+  ac_ltlibobjs="$ac_ltlibobjs $ac_i"'$U.lo'
+done
+LIBOBJS=$ac_libobjs
+
+LTLIBOBJS=$ac_ltlibobjs
+
+
+
+: ${CONFIG_STATUS=./config.status}
+ac_clean_files_save=$ac_clean_files
+ac_clean_files="$ac_clean_files $CONFIG_STATUS"
+{ echo "$as_me:$LINENO: creating $CONFIG_STATUS" >&5
+echo "$as_me: creating $CONFIG_STATUS" >&6;}
+cat >$CONFIG_STATUS <<_ACEOF
+#! $SHELL
+# Generated by $as_me.
+# Run this file to recreate the current configuration.
+# Compiler output produced by configure, useful for debugging
+# configure, is in config.log if it exists.
+
+debug=false
+ac_cs_recheck=false
+ac_cs_silent=false
+SHELL=\${CONFIG_SHELL-$SHELL}
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+## --------------------- ##
+## M4sh Initialization.  ##
+## --------------------- ##
+
+# Be Bourne compatible
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # is contrary to our usage.  Disable this feature.
+  alias -g '${1+"$@"}'='"$@"'
+elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
+  set -o posix
+fi
+DUALCASE=1; export DUALCASE # for MKS sh
+
+# Support unset when possible.
+if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+  as_unset=unset
+else
+  as_unset=false
+fi
+
+
+# Work around bugs in pre-3.0 UWIN ksh.
+$as_unset ENV MAIL MAILPATH
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# NLS nuisances.
+for as_var in \
+  LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION \
+  LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER \
+  LC_TELEPHONE LC_TIME
+do
+  if (set +x; test -z "`(eval $as_var=C; export $as_var) 2>&1`"); then
+    eval $as_var=C; export $as_var
+  else
+    $as_unset $as_var
+  fi
+done
+
+# Required to use basename.
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+if (basename /) >/dev/null 2>&1 && test "X`basename / 2>&1`" = "X/"; then
+  as_basename=basename
+else
+  as_basename=false
+fi
+
+
+# Name of the executable.
+as_me=`$as_basename "$0" ||
+$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+	 X"$0" : 'X\(//\)$' \| \
+	 X"$0" : 'X\(/\)$' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X/"$0" |
+    sed '/^.*\/\([^/][^/]*\)\/*$/{ s//\1/; q; }
+  	  /^X\/\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\/\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+
+
+# PATH needs CR, and LINENO needs CR and PATH.
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
+
+# The user is always right.
+if test "${PATH_SEPARATOR+set}" != set; then
+  echo "#! /bin/sh" >conf$$.sh
+  echo  "exit 0"   >>conf$$.sh
+  chmod +x conf$$.sh
+  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
+    PATH_SEPARATOR=';'
+  else
+    PATH_SEPARATOR=:
+  fi
+  rm -f conf$$.sh
+fi
+
+
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x$as_lineno_3"  = "x$as_lineno_2"  || {
+  # Find who we are.  Look in the path if we contain no path at all
+  # relative or not.
+  case $0 in
+    *[\\/]* ) as_myself=$0 ;;
+    *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+done
+
+       ;;
+  esac
+  # We did not find ourselves, most probably we were run as `sh COMMAND'
+  # in which case we are not to be found in the path.
+  if test "x$as_myself" = x; then
+    as_myself=$0
+  fi
+  if test ! -f "$as_myself"; then
+    { { echo "$as_me:$LINENO: error: cannot find myself; rerun with an absolute path" >&5
+echo "$as_me: error: cannot find myself; rerun with an absolute path" >&2;}
+   { (exit 1); exit 1; }; }
+  fi
+  case $CONFIG_SHELL in
+  '')
+    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for as_base in sh bash ksh sh5; do
+	 case $as_dir in
+	 /*)
+	   if ("$as_dir/$as_base" -c '
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/dev/null; then
+	     $as_unset BASH_ENV || test "${BASH_ENV+set}" != set || { BASH_ENV=; export BASH_ENV; }
+	     $as_unset ENV || test "${ENV+set}" != set || { ENV=; export ENV; }
+	     CONFIG_SHELL=$as_dir/$as_base
+	     export CONFIG_SHELL
+	     exec "$CONFIG_SHELL" "$0" ${1+"$@"}
+	   fi;;
+	 esac
+       done
+done
+;;
+  esac
+
+  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+  # uniformly replaced by the line number.  The first 'sed' inserts a
+  # line-number line before each line; the second 'sed' does the real
+  # work.  The second script uses 'N' to pair each line-number line
+  # with the numbered line, and appends trailing '-' during
+  # substitution so that $LINENO is not a special case at line end.
+  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+  # second 'sed' script.  Blame Lee E. McMahon for sed's syntax.  :-)
+  sed '=' <$as_myself |
+    sed '
+      N
+      s,$,-,
+      : loop
+      s,^\(['$as_cr_digits']*\)\(.*\)[$]LINENO\([^'$as_cr_alnum'_]\),\1\2\1\3,
+      t loop
+      s,-$,,
+      s,^['$as_cr_digits']*\n,,
+    ' >$as_me.lineno &&
+  chmod +x $as_me.lineno ||
+    { { echo "$as_me:$LINENO: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&5
+echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2;}
+   { (exit 1); exit 1; }; }
+
+  # Don't try to exec as it changes $[0], causing all sort of problems
+  # (the dirname of $[0] is not the place where we might find the
+  # original and so on.  Autoconf is especially sensible to this).
+  . ./$as_me.lineno
+  # Exit status is that of the last command.
+  exit
+}
+
+
+case `echo "testing\c"; echo 1,2,3`,`echo -n testing; echo 1,2,3` in
+  *c*,-n*) ECHO_N= ECHO_C='
+' ECHO_T='	' ;;
+  *c*,*  ) ECHO_N=-n ECHO_C= ECHO_T= ;;
+  *)       ECHO_N= ECHO_C='\c' ECHO_T= ;;
+esac
+
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+rm -f conf$$ conf$$.exe conf$$.file
+echo >conf$$.file
+if ln -s conf$$.file conf$$ 2>/dev/null; then
+  # We could just check for DJGPP; but this test a) works b) is more generic
+  # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
+  if test -f conf$$.exe; then
+    # Don't use ln at all; we don't have any links
+    as_ln_s='cp -p'
+  else
+    as_ln_s='ln -s'
+  fi
+elif ln conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s=ln
+else
+  as_ln_s='cp -p'
+fi
+rm -f conf$$ conf$$.exe conf$$.file
+
+if mkdir -p . 2>/dev/null; then
+  as_mkdir_p=:
+else
+  test -d ./-p && rmdir ./-p
+  as_mkdir_p=false
+fi
+
+as_executable_p="test -f"
+
+# Sed expression to map a string onto a valid CPP name.
+as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
+
+# Sed expression to map a string onto a valid variable name.
+as_tr_sh="eval sed 'y%*+%pp%;s%[^_$as_cr_alnum]%_%g'"
+
+
+# IFS
+# We need space, tab and new line, in precisely that order.
+as_nl='
+'
+IFS=" 	$as_nl"
+
+# CDPATH.
+$as_unset CDPATH
+
+exec 6>&1
+
+# Open the log real soon, to keep \$[0] and so on meaningful, and to
+# report actual input values of CONFIG_FILES etc. instead of their
+# values after options handling.  Logging --version etc. is OK.
+exec 5>>config.log
+{
+  echo
+  sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
+## Running $as_me. ##
+_ASBOX
+} >&5
+cat >&5 <<_CSEOF
+
+This file was extended by $as_me, which was
+generated by GNU Autoconf 2.59.  Invocation command line was
+
+  CONFIG_FILES    = $CONFIG_FILES
+  CONFIG_HEADERS  = $CONFIG_HEADERS
+  CONFIG_LINKS    = $CONFIG_LINKS
+  CONFIG_COMMANDS = $CONFIG_COMMANDS
+  $ $0 $@
+
+_CSEOF
+echo "on `(hostname || uname -n) 2>/dev/null | sed 1q`" >&5
+echo >&5
+_ACEOF
+
+# Files that config.status was made for.
+if test -n "$ac_config_files"; then
+  echo "config_files=\"$ac_config_files\"" >>$CONFIG_STATUS
+fi
+
+if test -n "$ac_config_headers"; then
+  echo "config_headers=\"$ac_config_headers\"" >>$CONFIG_STATUS
+fi
+
+if test -n "$ac_config_links"; then
+  echo "config_links=\"$ac_config_links\"" >>$CONFIG_STATUS
+fi
+
+if test -n "$ac_config_commands"; then
+  echo "config_commands=\"$ac_config_commands\"" >>$CONFIG_STATUS
+fi
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+
+ac_cs_usage="\
+\`$as_me' instantiates files from templates according to the
+current configuration.
+
+Usage: $0 [OPTIONS] [FILE]...
+
+  -h, --help       print this help, then exit
+  -V, --version    print version number, then exit
+  -q, --quiet      do not print progress messages
+  -d, --debug      don't remove temporary files
+      --recheck    update $as_me by reconfiguring in the same conditions
+  --file=FILE[:TEMPLATE]
+		   instantiate the configuration file FILE
+  --header=FILE[:TEMPLATE]
+		   instantiate the configuration header FILE
+
+Configuration files:
+$config_files
+
+Configuration headers:
+$config_headers
+
+Report bugs to <bug-autoconf@gnu.org>."
+_ACEOF
+
+cat >>$CONFIG_STATUS <<_ACEOF
+ac_cs_version="\\
+config.status
+configured by $0, generated by GNU Autoconf 2.59,
+  with options \\"`echo "$ac_configure_args" | sed 's/[\\""\`\$]/\\\\&/g'`\\"
+
+Copyright (C) 2003 Free Software Foundation, Inc.
+This config.status script is free software; the Free Software Foundation
+gives unlimited permission to copy, distribute and modify it."
+srcdir=$srcdir
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+# If no file are specified by the user, then we need to provide default
+# value.  By we need to know if files were specified by the user.
+ac_need_defaults=:
+while test $# != 0
+do
+  case $1 in
+  --*=*)
+    ac_option=`expr "x$1" : 'x\([^=]*\)='`
+    ac_optarg=`expr "x$1" : 'x[^=]*=\(.*\)'`
+    ac_shift=:
+    ;;
+  -*)
+    ac_option=$1
+    ac_optarg=$2
+    ac_shift=shift
+    ;;
+  *) # This is not an option, so the user has probably given explicit
+     # arguments.
+     ac_option=$1
+     ac_need_defaults=false;;
+  esac
+
+  case $ac_option in
+  # Handling of the options.
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
+    ac_cs_recheck=: ;;
+  --version | --vers* | -V )
+    echo "$ac_cs_version"; exit 0 ;;
+  --he | --h)
+    # Conflict between --help and --header
+    { { echo "$as_me:$LINENO: error: ambiguous option: $1
+Try \`$0 --help' for more information." >&5
+echo "$as_me: error: ambiguous option: $1
+Try \`$0 --help' for more information." >&2;}
+   { (exit 1); exit 1; }; };;
+  --help | --hel | -h )
+    echo "$ac_cs_usage"; exit 0 ;;
+  --debug | --d* | -d )
+    debug=: ;;
+  --file | --fil | --fi | --f )
+    $ac_shift
+    CONFIG_FILES="$CONFIG_FILES $ac_optarg"
+    ac_need_defaults=false;;
+  --header | --heade | --head | --hea )
+    $ac_shift
+    CONFIG_HEADERS="$CONFIG_HEADERS $ac_optarg"
+    ac_need_defaults=false;;
+  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
+  | -silent | --silent | --silen | --sile | --sil | --si | --s)
+    ac_cs_silent=: ;;
+
+  # This is an error.
+  -*) { { echo "$as_me:$LINENO: error: unrecognized option: $1
+Try \`$0 --help' for more information." >&5
+echo "$as_me: error: unrecognized option: $1
+Try \`$0 --help' for more information." >&2;}
+   { (exit 1); exit 1; }; } ;;
+
+  *) ac_config_targets="$ac_config_targets $1" ;;
+
+  esac
+  shift
+done
+
+ac_configure_extra_args=
+
+if $ac_cs_silent; then
+  exec 6>/dev/null
+  ac_configure_extra_args="$ac_configure_extra_args --silent"
+fi
+
+_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF
+if \$ac_cs_recheck; then
+  echo "running $SHELL $0 " $ac_configure_args \$ac_configure_extra_args " --no-create --no-recursion" >&6
+  exec $SHELL $0 $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
+fi
+
+_ACEOF
+
+
+
+
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+for ac_config_target in $ac_config_targets
+do
+  case "$ac_config_target" in
+  # Handling of arguments.
+  "Makefiles/wxwidgets/Makefile" ) CONFIG_FILES="$CONFIG_FILES Makefiles/wxwidgets/Makefile" ;;
+  "Makefile" ) CONFIG_FILES="$CONFIG_FILES Makefile" ;;
+  "config.h" ) CONFIG_HEADERS="$CONFIG_HEADERS config.h" ;;
+  *) { { echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
+echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
+# If the user did not use the arguments to specify the items to instantiate,
+# then the envvar interface is used.  Set only those that are not.
+# We use the long form for the default assignment because of an extremely
+# bizarre bug on SunOS 4.1.3.
+if $ac_need_defaults; then
+  test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
+  test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
+fi
+
+# Have a temporary directory for convenience.  Make it in the build tree
+# simply because there is no reason to put it here, and in addition,
+# creating and moving files from /tmp can sometimes cause problems.
+# Create a temporary directory, and hook for its removal unless debugging.
+$debug ||
+{
+  trap 'exit_status=$?; rm -rf $tmp && exit $exit_status' 0
+  trap '{ (exit 1); exit 1; }' 1 2 13 15
+}
+
+# Create a (secure) tmp directory for tmp files.
+
+{
+  tmp=`(umask 077 && mktemp -d -q "./confstatXXXXXX") 2>/dev/null` &&
+  test -n "$tmp" && test -d "$tmp"
+}  ||
+{
+  tmp=./confstat$$-$RANDOM
+  (umask 077 && mkdir $tmp)
+} ||
+{
+   echo "$me: cannot create a temporary directory in ." >&2
+   { (exit 1); exit 1; }
+}
+
+_ACEOF
+
+cat >>$CONFIG_STATUS <<_ACEOF
+
+#
+# CONFIG_FILES section.
+#
+
+# No need to generate the scripts if there are no CONFIG_FILES.
+# This happens for instance when ./config.status config.h
+if test -n "\$CONFIG_FILES"; then
+  # Protect against being on the right side of a sed subst in config.status.
+  sed 's/,@/@@/; s/@,/@@/; s/,;t t\$/@;t t/; /@;t t\$/s/[\\\\&,]/\\\\&/g;
+   s/@@/,@/; s/@@/@,/; s/@;t t\$/,;t t/' >\$tmp/subs.sed <<\\CEOF
+s,@SHELL@,$SHELL,;t t
+s,@PATH_SEPARATOR@,$PATH_SEPARATOR,;t t
+s,@PACKAGE_NAME@,$PACKAGE_NAME,;t t
+s,@PACKAGE_TARNAME@,$PACKAGE_TARNAME,;t t
+s,@PACKAGE_VERSION@,$PACKAGE_VERSION,;t t
+s,@PACKAGE_STRING@,$PACKAGE_STRING,;t t
+s,@PACKAGE_BUGREPORT@,$PACKAGE_BUGREPORT,;t t
+s,@exec_prefix@,$exec_prefix,;t t
+s,@prefix@,$prefix,;t t
+s,@program_transform_name@,$program_transform_name,;t t
+s,@bindir@,$bindir,;t t
+s,@sbindir@,$sbindir,;t t
+s,@libexecdir@,$libexecdir,;t t
+s,@datadir@,$datadir,;t t
+s,@sysconfdir@,$sysconfdir,;t t
+s,@sharedstatedir@,$sharedstatedir,;t t
+s,@localstatedir@,$localstatedir,;t t
+s,@libdir@,$libdir,;t t
+s,@includedir@,$includedir,;t t
+s,@oldincludedir@,$oldincludedir,;t t
+s,@infodir@,$infodir,;t t
+s,@mandir@,$mandir,;t t
+s,@build_alias@,$build_alias,;t t
+s,@host_alias@,$host_alias,;t t
+s,@target_alias@,$target_alias,;t t
+s,@DEFS@,$DEFS,;t t
+s,@ECHO_C@,$ECHO_C,;t t
+s,@ECHO_N@,$ECHO_N,;t t
+s,@ECHO_T@,$ECHO_T,;t t
+s,@LIBS@,$LIBS,;t t
+s,@CC@,$CC,;t t
+s,@CFLAGS@,$CFLAGS,;t t
+s,@LDFLAGS@,$LDFLAGS,;t t
+s,@CPPFLAGS@,$CPPFLAGS,;t t
+s,@ac_ct_CC@,$ac_ct_CC,;t t
+s,@EXEEXT@,$EXEEXT,;t t
+s,@OBJEXT@,$OBJEXT,;t t
+s,@CXX@,$CXX,;t t
+s,@CXXFLAGS@,$CXXFLAGS,;t t
+s,@ac_ct_CXX@,$ac_ct_CXX,;t t
+s,@WXCONFIG@,$WXCONFIG,;t t
+s,@CPP@,$CPP,;t t
+s,@EGREP@,$EGREP,;t t
+s,@wxconf@,$wxconf,;t t
+s,@WXLIBS@,$WXLIBS,;t t
+s,@WXCFLAGS@,$WXCFLAGS,;t t
+s,@LIBOBJS@,$LIBOBJS,;t t
+s,@LTLIBOBJS@,$LTLIBOBJS,;t t
+CEOF
+
+_ACEOF
+
+  cat >>$CONFIG_STATUS <<\_ACEOF
+  # Split the substitutions into bite-sized pieces for seds with
+  # small command number limits, like on Digital OSF/1 and HP-UX.
+  ac_max_sed_lines=48
+  ac_sed_frag=1 # Number of current file.
+  ac_beg=1 # First line for current file.
+  ac_end=$ac_max_sed_lines # Line after last line for current file.
+  ac_more_lines=:
+  ac_sed_cmds=
+  while $ac_more_lines; do
+    if test $ac_beg -gt 1; then
+      sed "1,${ac_beg}d; ${ac_end}q" $tmp/subs.sed >$tmp/subs.frag
+    else
+      sed "${ac_end}q" $tmp/subs.sed >$tmp/subs.frag
+    fi
+    if test ! -s $tmp/subs.frag; then
+      ac_more_lines=false
+    else
+      # The purpose of the label and of the branching condition is to
+      # speed up the sed processing (if there are no `@' at all, there
+      # is no need to browse any of the substitutions).
+      # These are the two extra sed commands mentioned above.
+      (echo ':t
+  /@[a-zA-Z_][a-zA-Z_0-9]*@/!b' && cat $tmp/subs.frag) >$tmp/subs-$ac_sed_frag.sed
+      if test -z "$ac_sed_cmds"; then
+	ac_sed_cmds="sed -f $tmp/subs-$ac_sed_frag.sed"
+      else
+	ac_sed_cmds="$ac_sed_cmds | sed -f $tmp/subs-$ac_sed_frag.sed"
+      fi
+      ac_sed_frag=`expr $ac_sed_frag + 1`
+      ac_beg=$ac_end
+      ac_end=`expr $ac_end + $ac_max_sed_lines`
+    fi
+  done
+  if test -z "$ac_sed_cmds"; then
+    ac_sed_cmds=cat
+  fi
+fi # test -n "$CONFIG_FILES"
+
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+for ac_file in : $CONFIG_FILES; do test "x$ac_file" = x: && continue
+  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
+  case $ac_file in
+  - | *:- | *:-:* ) # input from stdin
+	cat >$tmp/stdin
+	ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+	ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+	ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  * )   ac_file_in=$ac_file.in ;;
+  esac
+
+  # Compute @srcdir@, @top_srcdir@, and @INSTALL@ for subdirectories.
+  ac_dir=`(dirname "$ac_file") 2>/dev/null ||
+$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$ac_file" : 'X\(//\)[^/]' \| \
+	 X"$ac_file" : 'X\(//\)$' \| \
+	 X"$ac_file" : 'X\(/\)' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X"$ac_file" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+  { if $as_mkdir_p; then
+    mkdir -p "$ac_dir"
+  else
+    as_dir="$ac_dir"
+    as_dirs=
+    while test ! -d "$as_dir"; do
+      as_dirs="$as_dir $as_dirs"
+      as_dir=`(dirname "$as_dir") 2>/dev/null ||
+$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$as_dir" : 'X\(//\)[^/]' \| \
+	 X"$as_dir" : 'X\(//\)$' \| \
+	 X"$as_dir" : 'X\(/\)' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X"$as_dir" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+    done
+    test ! -n "$as_dirs" || mkdir $as_dirs
+  fi || { { echo "$as_me:$LINENO: error: cannot create directory \"$ac_dir\"" >&5
+echo "$as_me: error: cannot create directory \"$ac_dir\"" >&2;}
+   { (exit 1); exit 1; }; }; }
+
+  ac_builddir=.
+
+if test "$ac_dir" != .; then
+  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
+  # A "../" for each directory in $ac_dir_suffix.
+  ac_top_builddir=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,../,g'`
+else
+  ac_dir_suffix= ac_top_builddir=
+fi
+
+case $srcdir in
+  .)  # No --srcdir option.  We are building in place.
+    ac_srcdir=.
+    if test -z "$ac_top_builddir"; then
+       ac_top_srcdir=.
+    else
+       ac_top_srcdir=`echo $ac_top_builddir | sed 's,/$,,'`
+    fi ;;
+  [\\/]* | ?:[\\/]* )  # Absolute path.
+    ac_srcdir=$srcdir$ac_dir_suffix;
+    ac_top_srcdir=$srcdir ;;
+  *) # Relative path.
+    ac_srcdir=$ac_top_builddir$srcdir$ac_dir_suffix
+    ac_top_srcdir=$ac_top_builddir$srcdir ;;
+esac
+
+# Do not use `cd foo && pwd` to compute absolute paths, because
+# the directories may not exist.
+case `pwd` in
+.) ac_abs_builddir="$ac_dir";;
+*)
+  case "$ac_dir" in
+  .) ac_abs_builddir=`pwd`;;
+  [\\/]* | ?:[\\/]* ) ac_abs_builddir="$ac_dir";;
+  *) ac_abs_builddir=`pwd`/"$ac_dir";;
+  esac;;
+esac
+case $ac_abs_builddir in
+.) ac_abs_top_builddir=${ac_top_builddir}.;;
+*)
+  case ${ac_top_builddir}. in
+  .) ac_abs_top_builddir=$ac_abs_builddir;;
+  [\\/]* | ?:[\\/]* ) ac_abs_top_builddir=${ac_top_builddir}.;;
+  *) ac_abs_top_builddir=$ac_abs_builddir/${ac_top_builddir}.;;
+  esac;;
+esac
+case $ac_abs_builddir in
+.) ac_abs_srcdir=$ac_srcdir;;
+*)
+  case $ac_srcdir in
+  .) ac_abs_srcdir=$ac_abs_builddir;;
+  [\\/]* | ?:[\\/]* ) ac_abs_srcdir=$ac_srcdir;;
+  *) ac_abs_srcdir=$ac_abs_builddir/$ac_srcdir;;
+  esac;;
+esac
+case $ac_abs_builddir in
+.) ac_abs_top_srcdir=$ac_top_srcdir;;
+*)
+  case $ac_top_srcdir in
+  .) ac_abs_top_srcdir=$ac_abs_builddir;;
+  [\\/]* | ?:[\\/]* ) ac_abs_top_srcdir=$ac_top_srcdir;;
+  *) ac_abs_top_srcdir=$ac_abs_builddir/$ac_top_srcdir;;
+  esac;;
+esac
+
+
+
+  # Let's still pretend it is `configure' which instantiates (i.e., don't
+  # use $as_me), people would be surprised to read:
+  #    /* config.h.  Generated by config.status.  */
+  if test x"$ac_file" = x-; then
+    configure_input=
+  else
+    configure_input="$ac_file.  "
+  fi
+  configure_input=$configure_input"Generated from `echo $ac_file_in |
+				     sed 's,.*/,,'` by configure."
+
+  # First look for the input files in the build tree, otherwise in the
+  # src tree.
+  ac_file_inputs=`IFS=:
+    for f in $ac_file_in; do
+      case $f in
+      -) echo $tmp/stdin ;;
+      [\\/$]*)
+	 # Absolute (can't be DOS-style, as IFS=:)
+	 test -f "$f" || { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+	 echo "$f";;
+      *) # Relative
+	 if test -f "$f"; then
+	   # Build tree
+	   echo "$f"
+	 elif test -f "$srcdir/$f"; then
+	   # Source tree
+	   echo "$srcdir/$f"
+	 else
+	   # /dev/null tree
+	   { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+	 fi;;
+      esac
+    done` || { (exit 1); exit 1; }
+
+  if test x"$ac_file" != x-; then
+    { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+    rm -f "$ac_file"
+  fi
+_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF
+  sed "$ac_vpsub
+$extrasub
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+:t
+/@[a-zA-Z_][a-zA-Z_0-9]*@/!b
+s,@configure_input@,$configure_input,;t t
+s,@srcdir@,$ac_srcdir,;t t
+s,@abs_srcdir@,$ac_abs_srcdir,;t t
+s,@top_srcdir@,$ac_top_srcdir,;t t
+s,@abs_top_srcdir@,$ac_abs_top_srcdir,;t t
+s,@builddir@,$ac_builddir,;t t
+s,@abs_builddir@,$ac_abs_builddir,;t t
+s,@top_builddir@,$ac_top_builddir,;t t
+s,@abs_top_builddir@,$ac_abs_top_builddir,;t t
+" $ac_file_inputs | (eval "$ac_sed_cmds") >$tmp/out
+  rm -f $tmp/stdin
+  if test x"$ac_file" != x-; then
+    mv $tmp/out $ac_file
+  else
+    cat $tmp/out
+    rm -f $tmp/out
+  fi
+
+done
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+
+#
+# CONFIG_HEADER section.
+#
+
+# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
+# NAME is the cpp macro being defined and VALUE is the value it is being given.
+#
+# ac_d sets the value in "#define NAME VALUE" lines.
+ac_dA='s,^\([	 ]*\)#\([	 ]*define[	 ][	 ]*\)'
+ac_dB='[	 ].*$,\1#\2'
+ac_dC=' '
+ac_dD=',;t'
+# ac_u turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
+ac_uA='s,^\([	 ]*\)#\([	 ]*\)undef\([	 ][	 ]*\)'
+ac_uB='$,\1#\2define\3'
+ac_uC=' '
+ac_uD=',;t'
+
+for ac_file in : $CONFIG_HEADERS; do test "x$ac_file" = x: && continue
+  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
+  case $ac_file in
+  - | *:- | *:-:* ) # input from stdin
+	cat >$tmp/stdin
+	ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+	ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+	ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  * )   ac_file_in=$ac_file.in ;;
+  esac
+
+  test x"$ac_file" != x- && { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+
+  # First look for the input files in the build tree, otherwise in the
+  # src tree.
+  ac_file_inputs=`IFS=:
+    for f in $ac_file_in; do
+      case $f in
+      -) echo $tmp/stdin ;;
+      [\\/$]*)
+	 # Absolute (can't be DOS-style, as IFS=:)
+	 test -f "$f" || { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+	 # Do quote $f, to prevent DOS paths from being IFS'd.
+	 echo "$f";;
+      *) # Relative
+	 if test -f "$f"; then
+	   # Build tree
+	   echo "$f"
+	 elif test -f "$srcdir/$f"; then
+	   # Source tree
+	   echo "$srcdir/$f"
+	 else
+	   # /dev/null tree
+	   { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+	 fi;;
+      esac
+    done` || { (exit 1); exit 1; }
+  # Remove the trailing spaces.
+  sed 's/[	 ]*$//' $ac_file_inputs >$tmp/in
+
+_ACEOF
+
+# Transform confdefs.h into two sed scripts, `conftest.defines' and
+# `conftest.undefs', that substitutes the proper values into
+# config.h.in to produce config.h.  The first handles `#define'
+# templates, and the second `#undef' templates.
+# And first: Protect against being on the right side of a sed subst in
+# config.status.  Protect against being in an unquoted here document
+# in config.status.
+rm -f conftest.defines conftest.undefs
+# Using a here document instead of a string reduces the quoting nightmare.
+# Putting comments in sed scripts is not portable.
+#
+# `end' is used to avoid that the second main sed command (meant for
+# 0-ary CPP macros) applies to n-ary macro definitions.
+# See the Autoconf documentation for `clear'.
+cat >confdef2sed.sed <<\_ACEOF
+s/[\\&,]/\\&/g
+s,[\\$`],\\&,g
+t clear
+: clear
+s,^[	 ]*#[	 ]*define[	 ][	 ]*\([^	 (][^	 (]*\)\(([^)]*)\)[	 ]*\(.*\)$,${ac_dA}\1${ac_dB}\1\2${ac_dC}\3${ac_dD},gp
+t end
+s,^[	 ]*#[	 ]*define[	 ][	 ]*\([^	 ][^	 ]*\)[	 ]*\(.*\)$,${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD},gp
+: end
+_ACEOF
+# If some macros were called several times there might be several times
+# the same #defines, which is useless.  Nevertheless, we may not want to
+# sort them, since we want the *last* AC-DEFINE to be honored.
+uniq confdefs.h | sed -n -f confdef2sed.sed >conftest.defines
+sed 's/ac_d/ac_u/g' conftest.defines >conftest.undefs
+rm -f confdef2sed.sed
+
+# This sed command replaces #undef with comments.  This is necessary, for
+# example, in the case of _POSIX_SOURCE, which is predefined and required
+# on some systems where configure will not decide to define it.
+cat >>conftest.undefs <<\_ACEOF
+s,^[	 ]*#[	 ]*undef[	 ][	 ]*[a-zA-Z_][a-zA-Z_0-9]*,/* & */,
+_ACEOF
+
+# Break up conftest.defines because some shells have a limit on the size
+# of here documents, and old seds have small limits too (100 cmds).
+echo '  # Handle all the #define templates only if necessary.' >>$CONFIG_STATUS
+echo '  if grep "^[	 ]*#[	 ]*define" $tmp/in >/dev/null; then' >>$CONFIG_STATUS
+echo '  # If there are no defines, we may have an empty if/fi' >>$CONFIG_STATUS
+echo '  :' >>$CONFIG_STATUS
+rm -f conftest.tail
+while grep . conftest.defines >/dev/null
+do
+  # Write a limited-size here document to $tmp/defines.sed.
+  echo '  cat >$tmp/defines.sed <<CEOF' >>$CONFIG_STATUS
+  # Speed up: don't consider the non `#define' lines.
+  echo '/^[	 ]*#[	 ]*define/!b' >>$CONFIG_STATUS
+  # Work around the forget-to-reset-the-flag bug.
+  echo 't clr' >>$CONFIG_STATUS
+  echo ': clr' >>$CONFIG_STATUS
+  sed ${ac_max_here_lines}q conftest.defines >>$CONFIG_STATUS
+  echo 'CEOF
+  sed -f $tmp/defines.sed $tmp/in >$tmp/out
+  rm -f $tmp/in
+  mv $tmp/out $tmp/in
+' >>$CONFIG_STATUS
+  sed 1,${ac_max_here_lines}d conftest.defines >conftest.tail
+  rm -f conftest.defines
+  mv conftest.tail conftest.defines
+done
+rm -f conftest.defines
+echo '  fi # grep' >>$CONFIG_STATUS
+echo >>$CONFIG_STATUS
+
+# Break up conftest.undefs because some shells have a limit on the size
+# of here documents, and old seds have small limits too (100 cmds).
+echo '  # Handle all the #undef templates' >>$CONFIG_STATUS
+rm -f conftest.tail
+while grep . conftest.undefs >/dev/null
+do
+  # Write a limited-size here document to $tmp/undefs.sed.
+  echo '  cat >$tmp/undefs.sed <<CEOF' >>$CONFIG_STATUS
+  # Speed up: don't consider the non `#undef'
+  echo '/^[	 ]*#[	 ]*undef/!b' >>$CONFIG_STATUS
+  # Work around the forget-to-reset-the-flag bug.
+  echo 't clr' >>$CONFIG_STATUS
+  echo ': clr' >>$CONFIG_STATUS
+  sed ${ac_max_here_lines}q conftest.undefs >>$CONFIG_STATUS
+  echo 'CEOF
+  sed -f $tmp/undefs.sed $tmp/in >$tmp/out
+  rm -f $tmp/in
+  mv $tmp/out $tmp/in
+' >>$CONFIG_STATUS
+  sed 1,${ac_max_here_lines}d conftest.undefs >conftest.tail
+  rm -f conftest.undefs
+  mv conftest.tail conftest.undefs
+done
+rm -f conftest.undefs
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+  # Let's still pretend it is `configure' which instantiates (i.e., don't
+  # use $as_me), people would be surprised to read:
+  #    /* config.h.  Generated by config.status.  */
+  if test x"$ac_file" = x-; then
+    echo "/* Generated by configure.  */" >$tmp/config.h
+  else
+    echo "/* $ac_file.  Generated by configure.  */" >$tmp/config.h
+  fi
+  cat $tmp/in >>$tmp/config.h
+  rm -f $tmp/in
+  if test x"$ac_file" != x-; then
+    if diff $ac_file $tmp/config.h >/dev/null 2>&1; then
+      { echo "$as_me:$LINENO: $ac_file is unchanged" >&5
+echo "$as_me: $ac_file is unchanged" >&6;}
+    else
+      ac_dir=`(dirname "$ac_file") 2>/dev/null ||
+$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$ac_file" : 'X\(//\)[^/]' \| \
+	 X"$ac_file" : 'X\(//\)$' \| \
+	 X"$ac_file" : 'X\(/\)' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X"$ac_file" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+      { if $as_mkdir_p; then
+    mkdir -p "$ac_dir"
+  else
+    as_dir="$ac_dir"
+    as_dirs=
+    while test ! -d "$as_dir"; do
+      as_dirs="$as_dir $as_dirs"
+      as_dir=`(dirname "$as_dir") 2>/dev/null ||
+$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	 X"$as_dir" : 'X\(//\)[^/]' \| \
+	 X"$as_dir" : 'X\(//\)$' \| \
+	 X"$as_dir" : 'X\(/\)' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X"$as_dir" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+    done
+    test ! -n "$as_dirs" || mkdir $as_dirs
+  fi || { { echo "$as_me:$LINENO: error: cannot create directory \"$ac_dir\"" >&5
+echo "$as_me: error: cannot create directory \"$ac_dir\"" >&2;}
+   { (exit 1); exit 1; }; }; }
+
+      rm -f $ac_file
+      mv $tmp/config.h $ac_file
+    fi
+  else
+    cat $tmp/config.h
+    rm -f $tmp/config.h
+  fi
+done
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+
+{ (exit 0); exit 0; }
+_ACEOF
+chmod +x $CONFIG_STATUS
+ac_clean_files=$ac_clean_files_save
+
+
+# configure is writing to config.log, and then calls config.status.
+# config.status does its own redirection, appending to config.log.
+# Unfortunately, on DOS this fails, as config.log is still kept open
+# by configure, so config.status won't be able to write to it; its
+# output is simply discarded.  So we exec the FD to /dev/null,
+# effectively closing config.log, so it can be properly (re)opened and
+# appended to by config.status.  When coming back to configure, we
+# need to make the FD available again.
+if test "$no_create" != yes; then
+  ac_cs_success=:
+  ac_config_status_args=
+  test "$silent" = yes &&
+    ac_config_status_args="$ac_config_status_args --quiet"
+  exec 5>/dev/null
+  $SHELL $CONFIG_STATUS $ac_config_status_args || ac_cs_success=false
+  exec 5>>config.log
+  # Use ||, not &&, to avoid exiting from the if with $? = 1, which
+  # would make configure fail if this is the last instruction.
+  $ac_cs_success || { (exit 1); exit 1; }
+fi
+
diff -b -N -ru waste-source-1.5-beta-2/configure.in latest/configure.in
--- waste-source-1.5-beta-2/configure.in	1970-01-01 02:00:00.000000000 +0200
+++ latest/configure.in	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,80 @@
+AC_INIT
+
+AC_CONFIG_SRCDIR(main.cpp)
+AC_CONFIG_HEADER(config.h)
+AC_PROG_CC
+AC_PROG_CXX
+
+AC_PATH_PROG(WXCONFIG, wx-config, , $PATH:/usr/bin:/usr/local/bin)
+
+
+if test "x$GCC" = "xyes" ; then
+  CFLAGS="-Wall $CFLAGS"
+  CXXFLAGS="-Wall $CXXFLAGS"
+fi
+
+AC_EXEEXT
+
+AC_CHECK_HEADERS( pthread.h sys/types.h sys/stat.h sys/socket.h arpa/inet.h)
+AC_CHECK_HEADERS( netinet/in.h sys/time.h arpa/inet.h ifaddrs.h net/if.h)
+AC_CHECK_HEADERS( netdb.h stdarg.h stdio.h fcntl.h unistd.h signal.h stdlib.h)
+AC_CHECK_HEADERS( errno.h string.h ctype.h)
+
+AC_CHECK_LIB(socket, socket)
+AC_CHECK_LIB(inet, connect)
+AC_CHECK_LIB(nsl, gethostname)
+
+AC_CHECK_TYPE(__int64, signed long long)
+
+AC_CHECK_FUNCS(memmove)
+
+AC_CHECK_PROGS(wxconf,wx-config,NOTFOUND)
+if test "$wxconf" = "NOTFOUND" ; then
+  echo "wx-config not found!" 1>&2
+  echo "wxWidgets is required to build this application." 1>&2
+  exit 2
+fi
+
+AC_MSG_CHECKING(wx-config --version)
+WXVERSION=`$wxconf --version`
+if test "$?" -ne 0 ; then
+  AC_MSG_RESULT(no)
+  echo "wx-config --version not running!" 1>&2
+  echo "wxWidgets is required to build this application." 1>&2
+  exit 2
+else
+  AC_MSG_RESULT(yes)
+fi
+
+
+# detect if we can do Unicode
+AC_MSG_CHECKING(wx-config --unicode=yes --cflags)
+if $wxconf --unicode=yes --cflags > /dev/null 2>&1
+then
+  AC_MSG_RESULT(yes)
+  WXLIBS=`$wxconf --unicode=yes --libs`
+  WXCFLAGS=`$wxconf --unicode=yes --cflags`
+else
+  AC_MSG_RESULT(no)
+  WXLIBS=`$wxconf --libs`
+  WXCFLAGS=`$wxconf --cflags`
+fi
+
+# Fedora Core 1: leaves out the XRC lib by default. grr
+wxrelease=`$wxconf --release`
+wxbasename=`$wxconf --basename`
+
+case "$WXLIBS" in
+  *_xrc* )
+    ;;
+  * )
+    WXLIBS="$WXLIBS -l${wxbasename}_xrc-${wxrelease}"
+    ;;
+esac
+
+AC_SUBST(WXLIBS)
+AC_SUBST(WXCFLAGS)
+
+
+AC_CONFIG_FILES([Makefiles/wxwidgets/Makefile Makefile])
+AC_OUTPUT
diff -b -N -ru waste-source-1.5-beta-2/connection.cpp latest/connection.cpp
--- waste-source-1.5-beta-2/connection.cpp	2004-06-15 03:24:00.000000000 +0300
+++ latest/connection.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -30,7 +30,6 @@
 #include "rsa/r_random.hpp"
 #include "rsa/rsa.hpp"
 
-
 inline bool _bfInit::TestAll1(unsigned int mask)
 {
 	return (i&mask)==mask;
@@ -108,13 +107,20 @@
 	do_init();
 	m_socket=s;
 	SET_SOCK_BLOCK(m_socket,0);
+
 	m_remote_port=0;
 	m_state=STATE_CONNECTED;
 	m_dns=NULL;
 	m_ever_connected=0;
 	m_has_sent_remoteip=false;
-	if (loc) m_saddr=*loc;
-	else memset(&m_saddr,0,sizeof(m_saddr));
+
+	memset(&m_saddr,0,sizeof(m_saddr));
+	if (loc) {
+		m_saddr=*loc;
+	} else {
+		m_saddr.sin_addr.s_addr = (unsigned long) 0L;
+	}
+
 	m_cansend=false;
 }
 
@@ -279,7 +285,7 @@
 	if (g_use_networkhash && g_networkhash_PSK) {
 		_InitialPacket2_PSK &p2psk=(_InitialPacket2_PSK&)packsend2;
 		memcpy(p2psk.sRand,packrecv1.sRand,sizeof(p2psk.sRand));
-		for (int i=0;i<(sizeof(p2psk.sRand)/sizeof(int));i++) ((unsigned int*)(p2psk.sRand))[i]^=(~0);
+		for (int i=0;i<(int) (sizeof(p2psk.sRand)/sizeof(int));i++) ((unsigned int*)(p2psk.sRand))[i]^=(~0);
 		g_networkhash_PSK_fish.EncryptECB(p2psk.sPubCrypted, sizeof(p2psk.sPubCrypted));
 		g_networkhash_PSK_fish.EncryptECB(p2psk.sRand, sizeof(p2psk.sRand));
 		R_GenerateBytes((unsigned char*)&packsend2+sizeof(_InitialPacket2)+m_InitialPacket2Add,m_iSendRandomPadding2,&g_random);
@@ -310,7 +316,7 @@
 		m_fish_recv.DecryptPCBC(p2psk.sRand, sizeof(p2psk.sRand));
 		g_networkhash_PSK_fish.DecryptECB(p2psk.sPubCrypted, sizeof(p2psk.sPubCrypted));
 		g_networkhash_PSK_fish.DecryptECB(p2psk.sRand, sizeof(p2psk.sRand));
-		for (int i=0;i<(sizeof(p2psk.sRand)/sizeof(int));i++) ((unsigned int*)(p2psk.sRand))[i]^=(~0);
+		for (int i=0;i<(int) (sizeof(p2psk.sRand)/sizeof(int));i++) ((unsigned int*)(p2psk.sRand))[i]^=(~0);
 		if (memcmp(p2psk.sRand, m_local_sRand, sizeof(localkeyinfo.sRand))) {
 			log_printf(ds_Error,"connection: stealth mode fast MAC failed!!! DOS-Attack warning!");
 			close(1);
@@ -355,7 +361,7 @@
 	//check to make sure it is nonzero.
 	int x;
 	int zeros=0;
-	for (x = 0; x < sizeof(localkeyinfo.sKey); x++) {
+	for (x = 0; x < (int) sizeof(localkeyinfo.sKey); x++) {
 		localkeyinfo.sKey[x]^=m_mykeyinfo.sKey[x];
 		if (!localkeyinfo.sKey[x]) zeros++;
 	};
@@ -388,7 +394,9 @@
 	int x;
 	m_satmode=0;
 	m_remote_maxsend=2048;
-	for (x = 0 ; x < sizeof(bps_count)/sizeof(bps_count[0]); x ++) {
+	for (x = 0 ; (unsigned int) x < sizeof(bps_count)/sizeof(bps_count[0]);
+					x++)
+		{
 		bps_count[x].recv_bytes=0;
 		bps_count[x].send_bytes=0;
 		bps_count[x].time_ms=GetTickCount();
@@ -445,7 +453,7 @@
 		bps_count[bps_count_pos].recv_bytes=m_recv_bytes_total;
 		bps_count[bps_count_pos].time_ms=now;
 		bps_count_pos++;
-		if (bps_count_pos>=sizeof(bps_count)/sizeof(bps_count[0])) bps_count_pos=0;
+		if (bps_count_pos>=(int) (sizeof(bps_count)/sizeof(bps_count[0]))) bps_count_pos=0;
 	};
 }
 
@@ -495,7 +503,7 @@
 		if (!allowIP(this->get_remote())) {
 			return (m_state=STATE_DIENOW);
 		};
-		int res=::connect(m_socket,(sockaddr *)&m_saddr,16);
+		int res=::connect(m_socket,(sockaddr *)&m_saddr,sizeof(struct sockaddr_in));
 		if (!res) {
 			m_state=STATE_CONNECTED;
 		}
@@ -514,7 +522,11 @@
 		FD_SET(m_socket,&f2);
 		struct timeval tv;
 		memset(&tv,0,sizeof(tv));
-		if (select(0,NULL,&f,&f2,&tv)==-1) {
+				int highestfd = 0;
+#ifndef WIN32
+				highestfd = m_socket + 1;
+#endif
+		if (select(highestfd,NULL,&f,&f2,&tv)==-1) {
 			log_printf(ds_Error,"connection::run: select() returned error: %d",ERRNO);
 			return (m_state=STATE_ERROR);
 		};
@@ -745,7 +757,7 @@
 
 int C_Connection::send_bytes_available()
 {
-	extern int g_conspeed;
+	//extern int g_conspeed;
 	int a=getMaxSendSize();
 
 	a-=m_send_len;
diff -b -N -ru waste-source-1.5-beta-2/d_chat.cpp latest/d_chat.cpp
--- waste-source-1.5-beta-2/d_chat.cpp	2004-06-15 01:58:00.000000000 +0300
+++ latest/d_chat.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -32,6 +32,39 @@
 	#include "resource.hpp"
 #endif
 
+#ifdef _DEFINE_WXUI
+#include <wx/gdicmn.h>
+#include <wx/dir.h>
+#include "wxchat.h"
+
+#ifndef TVIS_BOLD
+#define TVIS_BOLD       1
+#endif
+
+typedef wxWindow*        CHAT_HWND;
+#endif
+
+void set_L_Chatroom(HWND hwnd);
+
+#ifdef _DEFINE_WXUI
+
+extern MainFrame *g_mainwnd;
+
+void wx_setup_chat_window(WxChat *wnd, chatroom_item *item) {
+	set_L_Chatroom(wnd);
+	wnd->m_chatedit->SetFocus();
+
+	wxTreeItemId root = wnd->m_tree_chatroom->AddRoot(_T("root"));
+	wnd->m_tree_chatroom->InsertItem(root, root, 
+					cstr_to_wxstr(g_regnick));
+}
+
+class chatTreeItemData : public wxTreeItemData {
+public: long lParam;
+};
+
+#endif
+
 bool chat_IsForMe(C_MessageChat &chat)
 {
 	char buf2[SHA_OUTSIZE*2+1];
@@ -79,12 +112,17 @@
 	return false;
 }
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	static const char _bcastsrc[]="[message to all]";
 	chatroom_item *L_Chatroom;
 
+	void set_L_Chatroom(HWND hwnd) {
+		L_Chatroom->hwnd = hwnd;
+	}
+
 	void chat_RingTheBell()
 	{
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 		int ips;
 		const char *fn;
 		ips=g_config->ReadInt(CONFIG_chatsnd,CONFIG_chatsnd_DEFAULT);
@@ -94,6 +132,14 @@
 				sndPlaySound(fn,SND_ASYNC);
 			};
 		};
+#endif
+	}
+
+	void chat_RingTheBellIfReqd(CHAT_HWND hwnd)
+	{
+#ifndef _DEFINE_WXUI
+		if (hwnd!=GetForegroundWindow()) chat_RingTheBell();
+#endif
 	}
 
 	void CloseAllChatWindows()
@@ -102,7 +148,11 @@
 		while (p)
 		{
 			L_Chatroom=p->next;
+#ifdef _DEFINE_WXUI
+			wxDynamicCast(p->hwnd,WxChat)->Destroy();
+#else
 			DestroyWindow(p->hwnd);
+#endif
 			p=L_Chatroom;
 		};
 	}
@@ -118,7 +168,7 @@
 				char* channel = strstr(token, "#");
 				if(channel != NULL) {
 					chatroom_item *perform=chat_ShowRoom(channel, 1);
-					perform;
+					(void) perform;
 				};
 			};
 			token = strtok(NULL, ";");
@@ -126,6 +176,7 @@
 		free(parser);
 	}
 
+#ifndef _DEFINE_WXUI
 	static bool isValidChar(char c)
 	{
 		static const char cav[]="<>";
@@ -137,9 +188,18 @@
 		if ((c>=0x00)&&(c<=0x1f)) return false;
 		return true;
 	}
+#endif
 
-	static void add_chatline(HWND hwndDlg, char *line)
+	static void add_chatline(CHAT_HWND hwndDlg, char *line)
 	{
+#ifdef _DEFINE_WXUI
+		wxTextCtrl *ctrl = wxDynamicCast(hwndDlg,WxChat)->m_chattext;
+		ctrl->AppendText(cstr_to_wxstr(line));
+		ctrl->AppendText(_T("\n"));
+		/* todo: all the markup stuff below */
+
+#else
+
 		HWND m_hwnd=GetDlgItem(hwndDlg,IDC_CHATTEXT);
 		SCROLLINFO si={sizeof(si),SIF_RANGE|SIF_POS|SIF_TRACKPOS,};
 		GetScrollInfo(m_hwnd,SB_VERT,&si);
@@ -259,8 +319,30 @@
 			SendMessage(m_hwnd, WM_VSCROLL, MAKEWPARAM(SB_THUMBPOSITION,si.nMax),0);
 			//SendMessage(m_hwnd,EM_LINESCROLL,0,4096);
 		};
+#endif
+	}
+
+	void chat_title_update(HWND hwnd) {
+#ifdef _DEFINE_WXUI
+		char buf[64];
+		chatroom_item *cli=(chatroom_item *)
+							(wxDynamicCast(hwnd,WxChat)->m_userdata);
+		if (cli->channel[0] == '#' ||
+			cli->channel[0] == '&')
+		{
+			sprintf(buf,"%s - " APP_NAME " Chat",cli->channel);
+		}
+		else {
+			sprintf(buf,"%s - " APP_NAME " User Chat",cli->channel);
+		};
+		wxDynamicCast(hwnd,WxChat)->SetTitle(cstr_to_wxstr(buf));
+
+#else
+		SendMessage(hwnd,WM_USER_TITLEUPDATE,0,0);
+#endif
 	}
 
+#ifndef _DEFINE_WXUI
 	int IsChatRoomDlgMessage(MSG *msg)
 	{
 		chatroom_item *cr=L_Chatroom;
@@ -281,12 +363,10 @@
 		};
 		return 0;
 	}
+#endif
 
-	static void gotNick(HWND hwnd, const char *nick, int state, int statemask, int delifold)
+	static void gotNick(CHAT_HWND hwnd, const char *nick, int state, int statemask, int delifold)
 	{
-		KillTimer(hwnd,1);
-		SetTimer(hwnd,1,1000,NULL);
-
 		#if 0
 			#ifndef _DEBUG
 				#error remove 1
@@ -297,14 +377,39 @@
 			OutputDebugString(buf);
 		#endif
 
-		HWND hwndTree=GetDlgItem(hwnd,IDC_TREE_CHATROOM);
+#ifdef _DEFINE_WXUI
+		wxTreeCtrl *htree = wxDynamicCast(hwnd,WxChat)->m_tree_chatroom;
+		//state == TVIS_BOLD or 0
+
+		wxTreeItemIdValue cookie;
+		wxTreeItemId rootId = htree->GetRootItem();
+		wxTreeItemId h = htree->GetFirstChild(rootId, cookie);
+
+		int gotme=0;
+		while (h.IsOk())
+
+#else
+		KillTimer(hwnd,1);
+		SetTimer(hwnd,1,1000,NULL);
+		CHAT_HWND hwndTree=GetDlgItem(hwnd,IDC_TREE_CHATROOM);
 		HTREEITEM h=TreeView_GetChild(hwndTree,TVI_ROOT);
 		TVITEM i;
+
 		int gotme=0;
 		while (h)
+#endif
 		{
 			char tmp[64];
 			tmp[0]=0;
+
+#ifdef _DEFINE_WXUI
+			wxString str = htree->GetItemText(h);
+			wxstr_to_cstr(tmp, str, sizeof(tmp));
+
+			chatTreeItemData& i = *((chatTreeItemData *) htree->GetItemData(h));
+			bool isbold = htree->IsBold(h);
+
+#else
 			i.mask=TVIF_TEXT|TVIF_PARAM|TVIF_STATE;
 			i.hItem=h;
 			i.pszText=tmp;
@@ -312,41 +417,78 @@
 			i.state=0;
 			i.stateMask=TVIS_BOLD;
 			TreeView_GetItem(hwndTree,&i);
+#endif
 			if (delifold && !nick)
 			{
+
+#ifdef _DEFINE_WXUI
+				h=htree->GetNextSibling(h);
+#else
 				h=TreeView_GetNextSibling(hwndTree,h);
+#endif
+
 				if (!stricmp(tmp,g_regnick) && !gotme) {
 					gotme=1;
 				}
-				else if (i.lParam) {
+
+				else if (i.lParam)
+				{
 					int age=GetTickCount() - i.lParam;
-					if (!(i.state&TVIS_BOLD)) {
+
+#ifdef _DEFINE_WXUI
+					if (!isbold)
+#else
+					if (!(i.state&TVIS_BOLD))
+#endif
+					{
 						if (age > CHAT_NICK_STARVE_DELAY) {
+
+#ifdef _DEFINE_WXUI
+							htree->Delete(h);
+							chatroom_item *cli=(chatroom_item *) (wxDynamicCast(hwnd,WxChat)->m_userdata);
+#else
 							TreeView_DeleteItem(hwndTree,i.hItem);
 							chatroom_item *cli=(chatroom_item *)GetWindowLong(hwnd,GWL_USERDATA);
+#endif
 							if (cli) {
 								char buf[1024];
-								sprintf(buf,"*** %s may have left %s (no response)",i.pszText,cli->channel);
+								sprintf(buf,"*** %s may have left %s (no response)",tmp,cli->channel);
 								add_chatline(hwnd,buf);
 							};
 						};
 					}
 					else {
 						if (age > CHAT_NICK_UNBOLD_DELAY) {  //set it to unbold
+#ifdef _DEFINE_WXUI
+							htree->SetItemBold(h, false);
+#else
 							i.mask=TVIF_HANDLE|TVIF_STATE;
 							i.state=0;
 							i.stateMask=TVIS_BOLD;
 							TreeView_SetItem(hwndTree,&i);
+#endif
 						};
 					};
 				};
 			}
 			else {
-				if (!stricmp(i.pszText,nick)) {
+				if (!stricmp(tmp,nick)) {
 					if (delifold) {
+#ifdef _DEFINE_WXUI
+						htree->Delete(h);
+#else
 						TreeView_DeleteItem(hwndTree,h);
+#endif
 					}
 					else {
+#ifdef _DEFINE_WXUI
+						htree->SetItemBold(h, (state & TVIS_BOLD) ? true : false);
+						htree->SetItemText(h, cstr_to_wxstr((char *) nick));
+
+						chatTreeItemData *data = new chatTreeItemData();
+						data->lParam = 0;
+						htree->SetItemData(h, data);
+#else
 						i.hItem=h;
 						i.mask=TVIF_HANDLE|TVIF_PARAM|TVIF_STATE|TVIF_TEXT;
 						i.pszText=(char*)nick;
@@ -354,14 +496,30 @@
 						i.state=state;
 						i.stateMask=statemask;
 						TreeView_SetItem(hwndTree,&i);
+#endif
 					};
 					return;
 				};
+
+#ifdef _DEFINE_WXUI
+				h=htree->GetNextSibling(h);
+#else
 				h=TreeView_GetNextSibling(hwndTree,h);
+#endif
 			};
 		};
 
 		if (!delifold) {
+#ifdef _DEFINE_WXUI
+			wxTreeItemId rootId = htree->GetRootItem();
+			wxTreeItemId newh = htree->InsertItem (rootId,
+					rootId, cstr_to_wxstr((char *) nick));
+			htree->SetItemBold(newh, (state & TVIS_BOLD));
+
+			chatTreeItemData *data = new chatTreeItemData();
+			data->lParam = 0;
+			htree->SetItemData(newh, data);
+#else
 			TVINSERTSTRUCT tis;
 			tis.hParent=TVI_ROOT;
 			tis.hInsertAfter=TVI_SORT;
@@ -371,8 +529,23 @@
 			tis.item.state=state;
 			tis.item.stateMask=statemask;
 			TreeView_InsertItem(hwndTree,&tis);
+#endif
 		}
 		else if (!nick && !gotme) {
+#ifdef _DEFINE_WXUI
+
+			wxTreeItemId rootId = htree->GetRootItem();
+			wxTreeItemId newh = htree->InsertItem (rootId,
+					rootId, cstr_to_wxstr(g_regnick));
+			htree->SetItemBold(newh, true);
+
+			chatTreeItemData *data = new chatTreeItemData();
+			data->lParam = 0;
+			htree->SetItemData(newh, data);
+			htree->SortChildren(rootId);
+
+#else
+
 			TVINSERTSTRUCT tis;
 			tis.hParent=TVI_ROOT;
 			tis.hInsertAfter=TVI_SORT;
@@ -382,7 +555,9 @@
 			tis.item.state=TVIS_BOLD;
 			tis.item.stateMask=TVIS_BOLD;
 			TreeView_InsertItem(hwndTree,&tis);
-		};
+
+#endif
+		}
 	}
 
 	void formatChatString(char *txt, const char *src, const char *str_c, chatroom_item *cnl, bool bForLog=false)
@@ -422,7 +597,7 @@
 				else {
 					sprintf(txt,"*** %s is now known as %s",str+6,src);
 					safe_strncpy(cnl->channel,src,sizeof(cnl->channel));
-					SendMessage(cnl->hwnd,WM_USER_TITLEUPDATE,0,0);
+					chat_title_update(cnl->hwnd);
 				};
 			};
 		}
@@ -467,7 +642,7 @@
 		if (p>='@' && p<='Z') ok=true;
 		else if (p>='a' && p<='z') ok=true;
 		else if (p>='0' && p<='9') ok=true;
-		for (int i=0;i<(sizeof(allow)/sizeof(allow[0]))-1;i++) {
+		for (int i=0;i<(int) ((sizeof(allow)/sizeof(allow[0]))-1);i++) {
 			if (p==allow[i]) {
 				ok=true;
 				break;
@@ -500,9 +675,15 @@
 		{
 			const char* path;
 			path=g_config->ReadString(CONFIG_chatlogpath,CONFIG_chatlogpath_DEFAULT);
+#ifdef _DEFINE_WXUI
+			if (wxDir::Exists(cstr_to_wxstr(path)))
+#else
+
 			DWORD att;
 			att=GetFileAttributes(path);
-			if ((att!=INVALID_FILE_ATTRIBUTES)&&((att&FILE_ATTRIBUTE_DIRECTORY)!=0)) {
+			if ((att!=INVALID_FILE_ATTRIBUTES)&&((att&FILE_ATTRIBUTE_DIRECTORY)!=0))
+#endif
+			{
 				static const char szCLog[]="Chatlog-";
 				char fpath[1024];
 				char *cfpath;
@@ -532,11 +713,12 @@
 		};
 	}
 
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 	static WNDPROC text_oldWndProc;
-	static BOOL CALLBACK text_newWndProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
+	static BOOL CALLBACK text_newWndProc(CHAT_HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
 	{
 		if (uMsg == WM_CHAR) {
-			HWND h=GetDlgItem(GetParent(hwndDlg),IDC_CHATEDIT);
+			CHAT_HWND h=GetDlgItem(GetParent(hwndDlg),IDC_CHATEDIT);
 			SetFocus(h);
 			if (wParam == VK_RETURN) {
 				SendMessage(GetParent(hwndDlg),WM_COMMAND,IDC_CHAT,0);
@@ -547,6 +729,7 @@
 		};
 		return CallWindowProc(text_oldWndProc,hwndDlg,uMsg,wParam,lParam);
 	}
+#endif
 
 	#if 0 // TODO: need to make this work
 	static void chatroom_AddHist(chatroom_item *cli, char *buf)
@@ -564,7 +747,7 @@
 	}
 
 	static WNDPROC edit_oldWndProc;
-	static BOOL CALLBACK edit_newWndProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
+	static BOOL CALLBACK edit_newWndProc(CHAT_HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
 	{
 		if (uMsg == WM_KEYDOWN) {
 			if (wParam == VK_DOWN || wParam == VK_UP) {
@@ -607,8 +790,10 @@
 	{
 		chatroom_item *p=L_Chatroom;
 		while (p) {
-			SendMessage(p->hwnd,WM_USER_TITLEUPDATE,0,0);
+			chat_title_update(p->hwnd);
+#ifndef _DEFINE_WXUI
 			InvalidateRect(p->hwnd,NULL,FALSE);
+#endif
 			p=p->next;
 		};
 	}
@@ -636,7 +821,36 @@
 			//T_Message msg={0,};
 			C_MessageChat req;
 			if (p->channel[0] == '#' || p->channel[0] == '&') {
-				HWND hwndTree=GetDlgItem(p->hwnd,IDC_TREE_CHATROOM);
+#ifdef _DEFINE_WXUI
+				wxTreeCtrl *htree = wxDynamicCast(p->hwnd,WxChat)->m_tree_chatroom;
+				wxTreeItemIdValue cookie;
+				wxTreeItemId rootId = htree->GetRootItem();
+				wxTreeItemId h = htree->GetFirstChild(rootId, cookie);
+
+				while (h.IsOk()) {
+					char tmp[64];
+					wxString str = htree->GetItemText(h);
+					wxstr_to_cstr(tmp, str, sizeof(tmp));
+
+					if (!strcmp(tmp,oldnick)) {
+						htree->Delete(h);
+						break;
+					};
+					h=htree->GetNextSibling(h);
+				}
+
+				wxTreeItemId newh = htree->InsertItem (rootId,
+						rootId, cstr_to_wxstr(g_regnick));
+				htree->SetItemBold(newh, true);
+
+				chatTreeItemData *data = new chatTreeItemData();
+				data->lParam = 0;
+				htree->SetItemData(newh, data);
+				htree->SortChildren(rootId);
+
+#else
+
+				CHAT_HWND hwndTree=GetDlgItem(p->hwnd,IDC_TREE_CHATROOM);
 				HTREEITEM h=TreeView_GetChild(hwndTree,TVI_ROOT);
 				while (h) {
 					TVITEM i;
@@ -663,11 +877,13 @@
 				tis.item.state=TVIS_BOLD;
 				tis.item.stateMask=TVIS_BOLD;
 				TreeView_InsertItem(hwndTree,&tis);
+#endif
 			};
 			p=p->next;
 		};
 	}
 
+#ifndef _DEFINE_WXUI
 	static void ChatDiv_UpdPos(chatroom_item *cli, int xp)
 	{
 		RECT r,r2;
@@ -697,389 +913,75 @@
 
 		childresize_resize(cli->hwnd,cli->resize,5);
 	}
+#endif
 
-	static BOOL CALLBACK chatdiv_newWndProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
-	{
-		chatroom_item *cli=(chatroom_item *)GetWindowLong(GetParent(hwndDlg),GWL_USERDATA);
-		if (!cli) return 0;
-		if (uMsg == WM_LBUTTONDOWN) {
-			SetForegroundWindow(hwndDlg);
-			SetCapture(hwndDlg);
-			SetCursor(LoadCursor(NULL,IDC_SIZEWE));
-		}
-		else if (uMsg == WM_SETCURSOR) {
-			SetCursor(LoadCursor(NULL,IDC_SIZEWE));
-			return TRUE;
-		}
-		else if (uMsg == WM_MOUSEMOVE && GetCapture()==hwndDlg) {
-			POINT p;
-			RECT r3;
-			GetCursorPos(&p);
-			ScreenToClient(GetParent(hwndDlg),(LPPOINT)&p);
-			GetWindowRect(hwndDlg,&r3);
-			ChatDiv_UpdPos(cli,p.x-r3.left);
-		}
-		else if (uMsg == WM_MOUSEMOVE) {
-			SetCursor(LoadCursor(NULL,IDC_SIZEWE));
-		}
-		else if (uMsg == WM_LBUTTONUP) {
-			ReleaseCapture();
-		};
-		return CallWindowProc(cli->chatdiv_oldWndProc,hwndDlg,uMsg,wParam,lParam);
+	void chat_set_CHATTEXT(HWND hwndDlg, const char *buf) {
+#ifdef _DEFINE_WXUI
+		wxSetDlgItemText(wxDynamicCast(hwndDlg,WxChat)->m_chattext, buf);
+#else
+		SetDlgItemText(hwndDlg,IDC_CHATTEXT,buf);
+#endif
 	}
 
-	BOOL WINAPI Chat_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
-	{
-		static unsigned int linkclicktime;
-		switch (uMsg)
-		{
-		case WM_USER+0x103:
-			{
-				char buf[512],*bufptr=buf;
-				int mode=0;
-				GetDlgItemText(hwndDlg,IDC_CHATEDIT,buf,sizeof(buf));
-				if (buf[0] && !strstr(buf,"/") && !strstr(buf," ") && !strstr(buf,":")) mode=1;
-				else if (!strnicmp(buf,"/whois ",7) && buf[7]) mode=7;
-				else if (!strnicmp(buf,"/msg ",5) && buf[5]) mode=5;
-				else if (!strnicmp(buf,"/query ",7) && buf[7]) mode=7;
-				else if (!strnicmp(buf,"/browse ",8) && buf[8]) mode=8;
-
-				if (mode>1) {
-					bufptr+=mode;
-					while (*bufptr == ' ') bufptr++;
-					if (!*bufptr || strstr(bufptr,":") || strstr(bufptr,"/")) mode=0;
-				};
-
-				if (mode) {
-					HWND hwndTree=GetDlgItem(hwndDlg,IDC_TREE_CHATROOM);
-					HTREEITEM h=TreeView_GetChild(hwndTree,TVI_ROOT);
-					while (h) {
-						TVITEM i;
-						i.mask=TVIF_TEXT;
-						i.hItem=h;
-						char tx[64+16];
-						i.pszText=tx;
-						i.cchTextMax=61;
-						TreeView_GetItem(hwndTree,&i);
-
-						if (!strnicmp(tx,bufptr,strlen(bufptr))) {
-							if (mode == 1) strcat(tx,": ");
-							else {
-								buf[mode]=0;
-								strcat(buf,tx);
-								safe_strncpy(tx,buf,sizeof(tx));
-							};
-
-							SetDlgItemText(hwndDlg,IDC_CHATEDIT,tx);
+	void chat_set_CHATEDIT(HWND hwndDlg, const char *buf) {
+#ifdef _DEFINE_WXUI
+		wxSetDlgItemText(wxDynamicCast(hwndDlg,WxChat)->m_chatedit, buf);
+#else
+		SetDlgItemText(hwndDlg,IDC_CHATEDIT,buf);
+#endif
+	}
 
-							POINTL p;
-							SendDlgItemMessage(hwndDlg,IDC_CHATEDIT,EM_POSFROMCHAR,(WPARAM)&p,strlen(tx)); //simulate click at the new point
-							SendDlgItemMessage(hwndDlg,IDC_CHATEDIT,WM_LBUTTONDOWN,0,MAKELPARAM(p.x,p.y));
-							SendDlgItemMessage(hwndDlg,IDC_CHATEDIT,WM_LBUTTONUP,0,MAKELPARAM(p.x,p.y));
-							break;
-						};
-						h=TreeView_GetNextSibling(hwndTree,h);
-					};
-				};
-				return 0;
-			};
-		case WM_GETMINMAXINFO:
-			{
-				LPMINMAXINFO m=(LPMINMAXINFO)lParam;
-				if (m) {
-					m->ptMinTrackSize.x=204;
-					m->ptMinTrackSize.y=134;
-				};
-				return 0;
-			};
-		case WM_LBUTTONDOWN:
-		case WM_MOUSEMOVE:
+	int chat_WM_COMMAND_IDC_CHAT(CHAT_HWND hwndDlg)
 			{
-				chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
-				if (cli && (cli->channel[0] == '#' || cli->channel[0] == '&')) {
-					POINT p;
-					RECT r3;
-					GetWindowRect(GetDlgItem(hwndDlg,IDC_NAMELISTRESIZER),&r3);
-					GetCursorPos(&p);
-					int d=p.x-r3.right;
-					int d2=p.x-r3.left;
-					if (d<0)d=-d;
-					if (d2<0)d2=-d2;
-
-					if (d < 6 || d2 < 6) SendDlgItemMessage(hwndDlg,IDC_NAMELISTRESIZER,uMsg,0,0);
-				};
+		if(!g_regnick[0]) {
+			add_chatline(hwndDlg,"Register your nickname first !");
+			chat_set_CHATEDIT(hwndDlg,"");
 				return 0;
 			};
-		case WM_CLOSE:
 			{
-				chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
+			int isme=0;
+			chatroom_item *cli;
+#ifdef _DEFINE_WXUI
+			cli=(chatroom_item *)wxDynamicCast(hwndDlg,WxChat)->m_userdata;
+#else
+			cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
 
-				RECT r;
-				GetWindowRect(hwndDlg,&r);
-				int w=r.right-r.left;
-				int h=r.bottom-r.top;
+#endif
+			char textb[2048];
+#ifdef _DEFINE_WXUI
+			wxGetDlgItemText(wxDynamicCast(hwndDlg,WxChat)->m_chatedit,textb,2047);
+#else
+			GetDlgItemText(hwndDlg,IDC_CHATEDIT,textb,2047);
+#endif
 
-				if (cli && (cli->channel[0] == '#' || cli->channel[0] == '&'))
+			char *text=textb;
+			while (*text == ' ') text++;
+			if (text[0] == '/' && text[1] != '/')
 				{
-					if (g_regnick[0] && g_regnick[0]!='.') {
-						T_Message msg={0,};
+				if (text[1] == 'J' || text[1] == 'j') {
+					while (*text && *text != ' ') text++;
+					while (*text == ' ') text++;
+					if(strstr(text,"\r") || strstr(text,"\n") || (*text != '#' && *text != '&')) {
+						add_chatline(hwndDlg,"Usage: /join <#channel|&channel>");
+					}
+					else {
+						chat_ShowRoom(text,1);
+						chat_set_CHATEDIT(hwndDlg,"");
+						return 0;
+					};
+				}
+				else if (!strnicmp(text+1,"whois",5)) {
+					while (*text && *text != ' ') text++;
+					while (*text == ' ') text++;
+					if(!*text || strstr(text,"\r") || strstr(text,"\n") || strstr(text,"#") || strstr(text,"&")) {
+						add_chatline(hwndDlg,"Usage: /whois <username>");
+					}
+					else {
+						T_Message msg;
+						//send a message to text that is /whois
 						C_MessageChat req;
-						req.set_chatstring("/leave");
-						req.set_dest(cli->channel);
-						req.set_src(g_regnick);
-						msg.data=req.Make();
-						msg.message_type=MESSAGE_CHAT;
-						if (msg.data) {
-							msg.message_length=msg.data->GetLength();
-							g_mql->send(&msg);
-							cli->lastMsgGuid=msg.message_guid;
-							cli->lastmsgguid_time=GetTickCount();
-						};
-					};
-					g_config->WriteInt(CONFIG_chatchan_w,w);
-					g_config->WriteInt(CONFIG_chatchan_h,h);
-					g_config->WriteInt(CONFIG_chat_divpos,cli->lastdivpos);
-
-				}
-				else {
-					g_config->WriteInt(CONFIG_chatuser_w,w);
-					g_config->WriteInt(CONFIG_chatuser_h,h);
-				};
-
-				if (cli==L_Chatroom) {
-					L_Chatroom=cli->next;
-				}
-				else {
-					chatroom_item *p=L_Chatroom;
-					while(p->next && p->next!=cli) p=p->next;
-					if(p->next) p->next=p->next->next;
-				};
-				/* free(cli); */
-
-				DestroyWindow(hwndDlg);
-				return 0;
-			};
-		case WM_DESTROY:
-			{
-				chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
-
-				if(cli) SetWindowLong(hwndDlg,GWL_USERDATA,(LONG)0);
-				free(cli);
-
-				return 0;
-			};
-
-		case WM_DROPFILES:
-			{
-				chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
-				if (cli->channel[0] != '#' && cli->channel[0] != '&') {
-					UserListOnDropFiles(hwndDlg,NULL,(HDROP)wParam,cli->channel);
-				}
-				else {
-					UserListOnDropFiles(hwndDlg,GetDlgItem(hwndDlg,IDC_TREE_CHATROOM),(HDROP)wParam,NULL);
-				};
-				return 0;
-			};
-		case WM_SIZE:
-			{
-				if (wParam == SIZE_MINIMIZED) {
-					if (g_config->ReadInt(CONFIG_cwhmin,CONFIG_cwhmin_DEFAULT) || (GetAsyncKeyState(VK_SHIFT)&0x8000)) ShowWindow(hwndDlg,SW_HIDE);
-				}
-				else {
-					chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
-					if (cli) childresize_resize(hwndDlg,cli->resize,5);
-					add_chatline(hwndDlg,NULL);
-				};
-				return 0;
-			};
-		case WM_TIMER:
-			{
-				if (wParam == 1) {
-					gotNick(hwndDlg,NULL,0,0,1);
-				};
-				if (wParam == 3) {
-					KillTimer(hwndDlg,3);
-					ShowWindow(hwndDlg,SW_SHOW);
-					SetForegroundWindow(hwndDlg);
-				};
-				return 0;
-			};
-		case WM_INITDIALOG:
-			{
-				L_Chatroom->hwnd = hwndDlg;
-				SetFocus(GetDlgItem(hwndDlg,IDC_CHATEDIT));
-				SetWindowLong(hwndDlg,GWL_USERDATA,(long)L_Chatroom);
-
-				text_oldWndProc=(WNDPROC) SetWindowLong(GetDlgItem(hwndDlg,IDC_CHATTEXT),GWL_WNDPROC,(LONG)text_newWndProc);
-				#if 0 // TODO: need to fix this
-					edit_oldWndProc=(WNDPROC) SetWindowLong(GetDlgItem(hwndDlg,IDC_CHATEDIT),GWL_WNDPROC,(LONG)edit_newWndProc);
-				#endif
-
-				if (L_Chatroom->channel[0] == '#' || L_Chatroom->channel[0] == '&') {
-					L_Chatroom->chatdiv_oldWndProc=(WNDPROC)
-						SetWindowLong(GetDlgItem(hwndDlg,IDC_NAMELISTRESIZER),GWL_WNDPROC,(LONG)chatdiv_newWndProc);
-
-					childresize_init(hwndDlg,L_Chatroom->resize,5);
-
-					L_Chatroom->wnd_old_xoffs=L_Chatroom->resize[4].rinfo.left;
-					POINT p={0,0};
-					ScreenToClient(hwndDlg,&p);
-					ChatDiv_UpdPos(L_Chatroom,g_config->ReadInt(CONFIG_chat_divpos,CONFIG_chat_divpos_DEFAULT)+p.x);
-
-					if (g_regnick[0] && g_regnick[0]!='.')
-					{
-						T_Message msg={0,};
-						C_MessageChat req;
-						req.set_chatstring("/join");
-						req.set_dest(L_Chatroom->channel);
-						req.set_src(g_regnick);
-						msg.data=req.Make();
-						msg.message_type=MESSAGE_CHAT;
-						if (msg.data) {
-							msg.message_length=msg.data->GetLength();
-							g_mql->send(&msg);
-							L_Chatroom->lastMsgGuid=msg.message_guid;
-							L_Chatroom->lastmsgguid_time=GetTickCount();
-						};
-					};
-
-					HWND hwndTree=GetDlgItem(hwndDlg,IDC_TREE_CHATROOM);
-					TVINSERTSTRUCT tis;
-					tis.hParent=TVI_ROOT;
-					tis.hInsertAfter=TVI_SORT;
-					tis.item.mask=TVIF_PARAM|TVIF_STATE|TVIF_TEXT;
-					tis.item.lParam=0;
-					tis.item.pszText=g_regnick;
-					tis.item.state=TVIS_BOLD;
-					tis.item.stateMask=TVIS_BOLD;
-					TreeView_InsertItem(hwndTree,&tis);
-				}
-				else {
-					childresize_init(hwndDlg,L_Chatroom->resize,4);
-				};
-
-				int w,h;
-				RECT oldr;
-				GetWindowRect(hwndDlg,&oldr);
-				if (L_Chatroom->channel[0] == '#' || L_Chatroom->channel[0] == '&') {
-					w=g_config->ReadInt(CONFIG_chatchan_w,CONFIG_chatchan_w_DEFAULT);
-					h=g_config->ReadInt(CONFIG_chatchan_h,CONFIG_chatchan_h_DEFAULT);
-				}
-				else {
-					w=g_config->ReadInt(CONFIG_chatuser_w,CONFIG_chatuser_w_DEFAULT);
-					h=g_config->ReadInt(CONFIG_chatuser_h,CONFIG_chatuser_h_DEFAULT);
-				};
-				SetWindowPos(hwndDlg,NULL,
-					oldr.left + (oldr.right-oldr.left - w)/2,
-					oldr.top + (oldr.bottom-oldr.top - h)/2,w,h,SWP_NOZORDER|SWP_NOACTIVATE);
-			}
-		case WM_USER_TITLEUPDATE:
-			{
-				char buf[64];
-				chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
-				if (cli->channel[0] == '#' ||
-					cli->channel[0] == '&')
-				{
-					sprintf(buf,"%s - " APP_NAME " Chat",cli->channel);
-				}
-				else {
-					sprintf(buf,"%s - " APP_NAME " User Chat",cli->channel);
-				};
-				SetWndTitle(hwndDlg,buf);
-
-				HWND m_hwnd=GetDlgItem(hwndDlg,IDC_CHATTEXT);
-				SendMessage(m_hwnd, EM_SETEVENTMASK, 0, ENM_LINK);
-				//SendMessage(m_hwnd, EM_AUTOURLDETECT, 1, 0);
-
-				CHARFORMAT fmt={sizeof(fmt),};
-				SendMessage(m_hwnd,EM_GETCHARFORMAT,1,(LPARAM)&fmt);
-
-				fmt.dwMask=CFM_SIZE|CFM_FACE|CFM_BOLD|CFM_COLOR|CFM_ITALIC|CFM_STRIKEOUT|CFM_UNDERLINE;
-				fmt.dwEffects = g_config->ReadInt(CONFIG_cfont_fx,CONFIG_cfont_fx_DEFAULT);
-				fmt.yHeight = g_config->ReadInt(CONFIG_cfont_yh,CONFIG_cfont_yh_DEFAULT);
-				fmt.crTextColor = g_config->ReadInt(CONFIG_cfont_color,CONFIG_cfont_color_DEFAULT);
-				if (cli->channel[0] == '#' || cli->channel[0] == '&') TreeView_SetTextColor(GetDlgItem(hwndDlg,IDC_TREE_CHATROOM),fmt.crTextColor);
-
-				HWND editWnd=GetDlgItem(hwndDlg,IDC_CHATEDIT);
-				const char *p=g_config->ReadString(CONFIG_cfont_face,CONFIG_cfont_face_DEFAULT);
-				if (*p) {
-					safe_strncpy(fmt.szFaceName,p,sizeof(fmt.szFaceName));
-					SendMessage(m_hwnd,EM_SETCHARFORMAT,SCF_ALL,(LPARAM)&fmt);
-					SendMessage(editWnd,EM_SETCHARFORMAT,SCF_ALL,(LPARAM)&fmt);
-
-					int bgc=g_config->ReadInt(CONFIG_cfont_bgc,CONFIG_cfont_bgc_DEFAULT);
-
-					LOGBRUSH lb;
-					lb.lbColor=bgc;
-					lb.lbStyle=BS_SOLID;
-					SendMessage(m_hwnd,EM_SETBKGNDCOLOR,FALSE,bgc);
-					SendMessage(editWnd,EM_SETBKGNDCOLOR,FALSE,bgc);
-					if (cli->channel[0] == '#' || cli->channel[0] == '&') TreeView_SetBkColor(GetDlgItem(hwndDlg,IDC_TREE_CHATROOM),bgc);
-				}
-				else fmt.yHeight=100;
-
-				//resize edit field
-				cli->resize[1].rinfo.top = cli->resize[1].rinfo.bottom + fmt.yHeight/15+12;
-
-				//resize chat output
-				cli->resize[0].rinfo.bottom=cli->resize[1].rinfo.top+2;
-
-				//resize invisible chat button
-				int old2size=cli->resize[2].rinfo.top-cli->resize[2].rinfo.bottom;
-				cli->resize[2].rinfo.bottom=cli->resize[1].rinfo.top+2;
-				cli->resize[2].rinfo.top=cli->resize[2].rinfo.bottom+old2size;
-
-				//resize 3rd field, if necessary :)
-				if (cli->channel[0] == '#' || cli->channel[0] == '&') {
-					cli->resize[3].rinfo.bottom=cli->resize[1].rinfo.top+2;
-				};
-				childresize_resize(hwndDlg,cli->resize,5);
-				return 0;
-			};
-		case WM_COMMAND:
-			{
-				switch (LOWORD(wParam))
-				{
-				case IDC_CHAT:
-					{
-						if(!g_regnick[0]) {
-							add_chatline(hwndDlg,"Register your nickname first !");
-							SetDlgItemText(hwndDlg,IDC_CHATEDIT,"");
-							break;
-						};
-						{
-							int isme=0;
-							chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
-							char textb[2048];
-							GetDlgItemText(hwndDlg,IDC_CHATEDIT,textb,2047);
-							char *text=textb;
-							while (*text == ' ') text++;
-							if (text[0] == '/' && text[1] != '/')
-							{
-								if (text[1] == 'J' || text[1] == 'j') {
-									while (*text && *text != ' ') text++;
-									while (*text == ' ') text++;
-									if(strstr(text,"\r") || strstr(text,"\n") || (*text != '#' && *text != '&')) {
-										add_chatline(hwndDlg,"Usage: /join <#channel|&channel>");
-									}
-									else {
-										chat_ShowRoom(text,1);
-										SetDlgItemText(hwndDlg,IDC_CHATEDIT,"");
-										break;
-									};
-								}
-								else if (!strnicmp(text+1,"whois",5)) {
-									while (*text && *text != ' ') text++;
-									while (*text == ' ') text++;
-									if(!*text || strstr(text,"\r") || strstr(text,"\n") || strstr(text,"#") || strstr(text,"&")) {
-										add_chatline(hwndDlg,"Usage: /whois <username>");
-									}
-									else {
-										T_Message msg;
-										//send a message to text that is /whois
-										C_MessageChat req;
-										req.set_chatstring("/whois");
-										req.set_dest(text);
+						req.set_chatstring("/whois");
+						req.set_dest(text);
 										req.set_src(g_regnick);
 										msg.data=req.Make();
 										msg.message_type=MESSAGE_CHAT;
@@ -1096,9 +998,13 @@
 										add_chatline(hwndDlg,"Usage: /search <searchterm>");
 									}
 									else {
+#ifdef _DEFINE_WXUI
+						g_mainwnd->ViewWindow (g_mainwnd->m_browser_dlg, false);
+#else
 										SendMessage(g_mainwnd,WM_COMMAND,IDC_SEARCH,0);
+#endif
 										Search_Search(text);
-										SetDlgItemText(hwndDlg,IDC_CHATEDIT,"");
+						chat_set_CHATEDIT(hwndDlg,"");
 										return 0;
 									};
 								}
@@ -1113,25 +1019,33 @@
 											text--;
 											*text='/';
 										};
+#ifdef _DEFINE_WXUI
+						g_mainwnd->ViewWindow (g_mainwnd->m_browser_dlg, false);
+#else
 										SendMessage(g_mainwnd,WM_COMMAND,IDC_SEARCH,0);
+#endif
 										Search_Search(text);
-										SetDlgItemText(hwndDlg,IDC_CHATEDIT,"");
+						chat_set_CHATEDIT(hwndDlg,"");
 										return 0;
 									};
 								}
 								else if (!strnicmp(text+1,"leave",5)) {
+#ifdef _DEFINE_WXUI
+					wxDynamicCast(hwndDlg,WxChat)->Close();
+#else
 									PostMessage(hwndDlg,WM_CLOSE,0,0);
+#endif
 								}
 								else if (!strnicmp(text+1,"clear",5)) {
-									SetDlgItemText(hwndDlg,IDC_CHATTEXT,"");
+					chat_set_CHATTEXT(hwndDlg,"");
 								}
 								else if (!strnicmp(text+1,"query",5)) {
 									while (*text && *text != ' ') text++;
 									while (*text == ' ') text++;
 									if (!strstr(text,"\r") && !strstr(text,"\n") && *text && text[0] != '#' && text[0] != '&') {
 										chat_ShowRoom(text,1);
-										SetDlgItemText(hwndDlg,IDC_CHATEDIT,"");
-										break;
+						chat_set_CHATEDIT(hwndDlg,"");
+						return 0;
 									}
 									else {
 										add_chatline(hwndDlg,"Usage: /query <nickname>");
@@ -1159,118 +1073,513 @@
 										else {
 											req.set_chatstring(dstr+1);
 										};
-										*dstr=0;
+						*dstr=0;
+
+						/* Sending of text is here */
+
+						req.set_dest(text+5);
+						req.set_src(g_regnick);
+
+						msg.data=req.Make();
+						msg.message_type=MESSAGE_CHAT;
+						if (msg.data) {
+							msg.message_length=msg.data->GetLength();
+							g_mql->send(&msg);
+							char tmp[4096];
+							sprintf(tmp,"-> *%s*: %s",text+5,dstr+1);
+							add_chatline(hwndDlg,tmp);
+						};
+					}
+					else
+						add_chatline(hwndDlg,"Usage: /msg <user> <text>");
+				}
+				else if (!strnicmp(text+1,"help",4)) {
+					add_chatline(hwndDlg,"Commands:");
+					add_chatline(hwndDlg,"  /msg <user> <text>");
+					add_chatline(hwndDlg,"  /query <user>");
+					add_chatline(hwndDlg,"  /whois <user>");
+					add_chatline(hwndDlg,"  /join <channel>");
+					add_chatline(hwndDlg,"  /me <action>");
+					add_chatline(hwndDlg,"  /search <searchterm>");
+					add_chatline(hwndDlg,"  /browse <user|path>");
+					add_chatline(hwndDlg,"  /leave");
+					add_chatline(hwndDlg,"  /clear");
+				}
+				else {
+					add_chatline(hwndDlg,"Unknown command! Try /help");
+				};
+			}
+			else if (strlen(text)>0) {
+	senditanyway:
+				if (cli->channel[0] == '#' || cli->channel[0] == '&') {
+#ifdef _DEFINE_WXUI
+
+					wxTreeCtrl *htree = wxDynamicCast(hwndDlg,WxChat)->m_tree_chatroom;
+					wxTreeItemIdValue cookie;
+					wxTreeItemId rootId = htree->GetRootItem();
+					wxTreeItemId h = htree->GetFirstChild(rootId, cookie);
+
+					while (h.IsOk()) {
+						chatTreeItemData& i = *((chatTreeItemData *) htree->GetItemData(h));
+						bool isbold = htree->IsBold(h);
+						if (isbold || !i.lParam) {
+							i.lParam=GetTickCount();
+						}
+						h=htree->GetNextSibling(h);
+					}
+
+#else
+
+					CHAT_HWND hwndTree=GetDlgItem(hwndDlg,IDC_TREE_CHATROOM);
+					HTREEITEM h=TreeView_GetChild(hwndTree,TVI_ROOT);
+					while (h) {
+						TVITEM i;
+						i.mask=TVIF_PARAM|TVIF_STATE;
+						i.hItem=h;
+						i.state=0;
+						i.stateMask=TVIS_BOLD;
+						TreeView_GetItem(hwndTree,&i);
+
+						if (i.state || !i.lParam) {
+							i.hItem=h;
+							i.mask=TVIF_HANDLE|TVIF_PARAM;
+							i.lParam=GetTickCount();
+							TreeView_SetItem(hwndTree,&i);
+						};
+						h=TreeView_GetNextSibling(hwndTree,h);
+					};
+
+#endif
+				}
+				else {
+#ifdef _DEFINE_WXUI
+					wxSetDlgItemText(wxDynamicCast(hwndDlg,WxChat)->m_status, "Sent message, awaiting reply");
+#else
+					SetDlgItemText(hwndDlg,IDC_STATUS,"Sent message, awaiting reply");
+#endif
+				};
+
+				int l=0;
+				while (text && *text && l++ < 16) {
+					while (*text == '\r' || *text == '\n') text++;
+					while (*text == ' ') text++;
+
+					char *lasttext=text;
+					while (*text && *text != '\r' && *text != '\n') text++;
+					if (*text) *text++=0;
+					if (!*lasttext) break;
+
+					T_Message msg={0,};
+					C_MessageChat req;
+
+					char buf[1024];
+					if (lasttext[0] == '/' && lasttext[1] != '/' && !isme) {
+						safe_strncpy(buf+1,lasttext,sizeof(buf)-1);
+						buf[0]='/';
+					}
+					else {
+						safe_strncpy(buf,lasttext,sizeof(buf));
+					};
+					isme=0;
+					req.set_chatstring(buf);
+
+					req.set_dest(cli->channel);
+					req.set_src(g_regnick);
+					msg.data=req.Make();
+					msg.message_type=MESSAGE_CHAT;
+					if (msg.data) {
+						msg.message_length=msg.data->GetLength();
+						g_mql->send(&msg);
+						cli->lastMsgGuid=msg.message_guid;
+						cli->lastmsgguid_time=GetTickCount();
+						char tmp[4096];
+						formatChatString(tmp,req.get_src(),buf,cli);
+						if (tmp[0]) {
+							add_chatline(hwndDlg,tmp);
+							int type;
+							if (cli->channel[0] && (cli->channel[0]=='#' || cli->channel[0]=='&')) type=2;
+							else if (!strcmp(_bcastsrc,cli->channel)) type=4;
+							else type=1;
+							chat_log(type, cli->channel, req.get_src(), buf, cli);
+						};
+					};
+				};
+			}
+			chat_set_CHATEDIT(hwndDlg,"");
+#ifdef _DEFINE_WXUI
+			wxDynamicCast(hwndDlg,WxChat)->m_chatedit->SetFocus();
+#else
+			SetFocus(GetDlgItem(hwndDlg,IDC_CHATEDIT));
+#endif
+		};
+		return 0;
+	}
+
+	int chat_WM_CLOSE(CHAT_HWND hwndDlg) {
+		chatroom_item *cli;
+#ifdef _DEFINE_WXUI
+		WxChat *wnd = wxDynamicCast(hwndDlg,WxChat);
+		cli=(chatroom_item *)wnd->m_userdata;
+
+		wxSize r = wnd->GetSize();
+		int w = r.GetWidth();
+		int h = r.GetHeight();
+
+#else
+		cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
+
+		RECT r;
+		GetWindowRect(hwndDlg,&r);
+		int w=r.right-r.left;
+		int h=r.bottom-r.top;
+#endif
+
+		if (cli && (cli->channel[0] == '#' || cli->channel[0] == '&'))
+		{
+			if (g_regnick[0] && g_regnick[0]!='.') {
+				T_Message msg={0,};
+				C_MessageChat req;
+				req.set_chatstring("/leave");
+				req.set_dest(cli->channel);
+				req.set_src(g_regnick);
+				msg.data=req.Make();
+				msg.message_type=MESSAGE_CHAT;
+				if (msg.data) {
+					msg.message_length=msg.data->GetLength();
+					g_mql->send(&msg);
+					cli->lastMsgGuid=msg.message_guid;
+					cli->lastmsgguid_time=GetTickCount();
+				};
+			};
+			g_config->WriteInt(CONFIG_chatchan_w,w);
+			g_config->WriteInt(CONFIG_chatchan_h,h);
+			g_config->WriteInt(CONFIG_chat_divpos,cli->lastdivpos);
+
+		}
+		else {
+			g_config->WriteInt(CONFIG_chatuser_w,w);
+			g_config->WriteInt(CONFIG_chatuser_h,h);
+		};
+
+		if (cli==L_Chatroom) {
+			L_Chatroom=cli->next;
+		}
+		else {
+			chatroom_item *p=L_Chatroom;
+			while(p->next && p->next!=cli) p=p->next;
+			if(p->next) p->next=p->next->next;
+		};
+		/* free(cli); */
+
+#ifdef _DEFINE_WXUI
+		wnd->Destroy();
+#else
+		DestroyWindow(hwndDlg);
+#endif
+		return 0;
+	}
+
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	static BOOL CALLBACK chatdiv_newWndProc(CHAT_HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
+	{
+		chatroom_item *cli=(chatroom_item *)GetWindowLong(GetParent(hwndDlg),GWL_USERDATA);
+		if (!cli) return 0;
+		if (uMsg == WM_LBUTTONDOWN) {
+			SetForegroundWindow(hwndDlg);
+			SetCapture(hwndDlg);
+			SetCursor(LoadCursor(NULL,IDC_SIZEWE));
+		}
+		else if (uMsg == WM_SETCURSOR) {
+			SetCursor(LoadCursor(NULL,IDC_SIZEWE));
+			return TRUE;
+		}
+		else if (uMsg == WM_MOUSEMOVE && GetCapture()==hwndDlg) {
+			POINT p;
+			RECT r3;
+			GetCursorPos(&p);
+			ScreenToClient(GetParent(hwndDlg),(LPPOINT)&p);
+			GetWindowRect(hwndDlg,&r3);
+			ChatDiv_UpdPos(cli,p.x-r3.left);
+		}
+		else if (uMsg == WM_MOUSEMOVE) {
+			SetCursor(LoadCursor(NULL,IDC_SIZEWE));
+		}
+		else if (uMsg == WM_LBUTTONUP) {
+			ReleaseCapture();
+		};
+		return CallWindowProc(cli->chatdiv_oldWndProc,hwndDlg,uMsg,wParam,lParam);
+	}
+
+	BOOL WINAPI Chat_DlgProc(CHAT_HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
+	{
+		static unsigned int linkclicktime;
+		switch (uMsg)
+		{
+		case WM_USER+0x103:
+			{
+				char buf[512],*bufptr=buf;
+				int mode=0;
+				GetDlgItemText(hwndDlg,IDC_CHATEDIT,buf,sizeof(buf));
+				if (buf[0] && !strstr(buf,"/") && !strstr(buf," ") && !strstr(buf,":")) mode=1;
+				else if (!strnicmp(buf,"/whois ",7) && buf[7]) mode=7;
+				else if (!strnicmp(buf,"/msg ",5) && buf[5]) mode=5;
+				else if (!strnicmp(buf,"/query ",7) && buf[7]) mode=7;
+				else if (!strnicmp(buf,"/browse ",8) && buf[8]) mode=8;
+
+				if (mode>1) {
+					bufptr+=mode;
+					while (*bufptr == ' ') bufptr++;
+					if (!*bufptr || strstr(bufptr,":") || strstr(bufptr,"/")) mode=0;
+				};
+
+				if (mode) {
+					CHAT_HWND hwndTree=GetDlgItem(hwndDlg,IDC_TREE_CHATROOM);
+					HTREEITEM h=TreeView_GetChild(hwndTree,TVI_ROOT);
+					while (h) {
+						TVITEM i;
+						i.mask=TVIF_TEXT;
+						i.hItem=h;
+						char tx[64+16];
+						i.pszText=tx;
+						i.cchTextMax=61;
+						TreeView_GetItem(hwndTree,&i);
+
+						if (!strnicmp(tx,bufptr,strlen(bufptr))) {
+							if (mode == 1) strcat(tx,": ");
+							else {
+								buf[mode]=0;
+								strcat(buf,tx);
+								safe_strncpy(tx,buf,sizeof(tx));
+							};
+
+							chat_set_CHATEDIT(hwndDlg,tx);
+
+							POINTL p;
+							SendDlgItemMessage(hwndDlg,IDC_CHATEDIT,EM_POSFROMCHAR,(WPARAM)&p,strlen(tx)); //simulate click at the new point
+							SendDlgItemMessage(hwndDlg,IDC_CHATEDIT,WM_LBUTTONDOWN,0,MAKELPARAM(p.x,p.y));
+							SendDlgItemMessage(hwndDlg,IDC_CHATEDIT,WM_LBUTTONUP,0,MAKELPARAM(p.x,p.y));
+							break;
+						};
+						h=TreeView_GetNextSibling(hwndTree,h);
+					};
+				};
+				return 0;
+			};
+		case WM_GETMINMAXINFO:
+			{
+				LPMINMAXINFO m=(LPMINMAXINFO)lParam;
+				if (m) {
+					m->ptMinTrackSize.x=204;
+					m->ptMinTrackSize.y=134;
+				};
+				return 0;
+			};
+		case WM_LBUTTONDOWN:
+		case WM_MOUSEMOVE:
+			{
+				chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
+				if (cli && (cli->channel[0] == '#' || cli->channel[0] == '&')) {
+					POINT p;
+					RECT r3;
+					GetWindowRect(GetDlgItem(hwndDlg,IDC_NAMELISTRESIZER),&r3);
+					GetCursorPos(&p);
+					int d=p.x-r3.right;
+					int d2=p.x-r3.left;
+					if (d<0)d=-d;
+					if (d2<0)d2=-d2;
+
+					if (d < 6 || d2 < 6) SendDlgItemMessage(hwndDlg,IDC_NAMELISTRESIZER,uMsg,0,0);
+				};
+				return 0;
+			};
+		case WM_CLOSE:
+			{
+				return chat_WM_CLOSE(hwndDlg);
+			};
+		case WM_DESTROY:
+			{
+				chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
+
+				if(cli) SetWindowLong(hwndDlg,GWL_USERDATA,(LONG)0);
+				free(cli);
+
+				return 0;
+			};
+
+		case WM_DROPFILES:
+			{
+				chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
+				if (cli->channel[0] != '#' && cli->channel[0] != '&') {
+					UserListOnDropFiles(hwndDlg,NULL,(HDROP)wParam,cli->channel);
+				}
+				else {
+					UserListOnDropFiles(hwndDlg,GetDlgItem(hwndDlg,IDC_TREE_CHATROOM),(HDROP)wParam,NULL);
+				};
+				return 0;
+			};
+		case WM_SIZE:
+			{
+				if (wParam == SIZE_MINIMIZED) {
+					if (g_config->ReadInt(CONFIG_cwhmin,CONFIG_cwhmin_DEFAULT) || (GetAsyncKeyState(VK_SHIFT)&0x8000)) ShowWindow(hwndDlg,SW_HIDE);
+				}
+				else {
+					chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
+					if (cli) childresize_resize(hwndDlg,cli->resize,5);
+					add_chatline(hwndDlg,NULL);
+				};
+				return 0;
+			};
+		case WM_TIMER:
+			{
+				if (wParam == 1) {
+					gotNick(hwndDlg,NULL,0,0,1);
+				};
+				if (wParam == 3) {
+					KillTimer(hwndDlg,3);
+					ShowWindow(hwndDlg,SW_SHOW);
+					SetForegroundWindow(hwndDlg);
+				};
+				return 0;
+			};
+		case WM_INITDIALOG:
+			{
+				L_Chatroom->hwnd = hwndDlg;
+				SetFocus(GetDlgItem(hwndDlg,IDC_CHATEDIT));
+				SetWindowLong(hwndDlg,GWL_USERDATA,(long)L_Chatroom);
 
-										/* Sending of text is here */
+				text_oldWndProc=(WNDPROC) SetWindowLong(GetDlgItem(hwndDlg,IDC_CHATTEXT),GWL_WNDPROC,(LONG)text_newWndProc);
+				#if 0 // TODO: need to fix this
+					edit_oldWndProc=(WNDPROC) SetWindowLong(GetDlgItem(hwndDlg,IDC_CHATEDIT),GWL_WNDPROC,(LONG)edit_newWndProc);
+				#endif
 
-										req.set_dest(text+5);
-										req.set_src(g_regnick);
+				if (L_Chatroom->channel[0] == '#' || L_Chatroom->channel[0] == '&') {
+					L_Chatroom->chatdiv_oldWndProc=(WNDPROC)
+						SetWindowLong(GetDlgItem(hwndDlg,IDC_NAMELISTRESIZER),GWL_WNDPROC,(LONG)chatdiv_newWndProc);
 
+					childresize_init(hwndDlg,L_Chatroom->resize,5);
+
+					L_Chatroom->wnd_old_xoffs=L_Chatroom->resize[4].rinfo.left;
+					POINT p={0,0};
+					ScreenToClient(hwndDlg,&p);
+					ChatDiv_UpdPos(L_Chatroom,g_config->ReadInt(CONFIG_chat_divpos,CONFIG_chat_divpos_DEFAULT)+p.x);
+
+					if (g_regnick[0] && g_regnick[0]!='.')
+					{
+						T_Message msg={0,};
+						C_MessageChat req;
+						req.set_chatstring("/join");
+						req.set_dest(L_Chatroom->channel);
+						req.set_src(g_regnick);
 										msg.data=req.Make();
 										msg.message_type=MESSAGE_CHAT;
 										if (msg.data) {
 											msg.message_length=msg.data->GetLength();
 											g_mql->send(&msg);
-											char tmp[4096];
-											sprintf(tmp,"-> *%s*: %s",text+5,dstr+1);
-											add_chatline(hwndDlg,tmp);
+							L_Chatroom->lastMsgGuid=msg.message_guid;
+							L_Chatroom->lastmsgguid_time=GetTickCount();
 										};
-									}
-									else
-										add_chatline(hwndDlg,"Usage: /msg <user> <text>");
-								}
-								else if (!strnicmp(text+1,"help",4)) {
-									add_chatline(hwndDlg,"Commands:");
-									add_chatline(hwndDlg,"  /msg <user> <text>");
-									add_chatline(hwndDlg,"  /query <user>");
-									add_chatline(hwndDlg,"  /whois <user>");
-									add_chatline(hwndDlg,"  /join <channel>");
-									add_chatline(hwndDlg,"  /me <action>");
-									add_chatline(hwndDlg,"  /search <searchterm>");
-									add_chatline(hwndDlg,"  /browse <user|path>");
-									add_chatline(hwndDlg,"  /leave");
-									add_chatline(hwndDlg,"  /clear");
+					};
+
+					CHAT_HWND hwndTree=GetDlgItem(hwndDlg,IDC_TREE_CHATROOM);
+					TVINSERTSTRUCT tis;
+					tis.hParent=TVI_ROOT;
+					tis.hInsertAfter=TVI_SORT;
+					tis.item.mask=TVIF_PARAM|TVIF_STATE|TVIF_TEXT;
+					tis.item.lParam=0;
+					tis.item.pszText=g_regnick;
+					tis.item.state=TVIS_BOLD;
+					tis.item.stateMask=TVIS_BOLD;
+					TreeView_InsertItem(hwndTree,&tis);
 								}
 								else {
-									add_chatline(hwndDlg,"Unknown command! Try /help");
+					childresize_init(hwndDlg,L_Chatroom->resize,4);
 								};
-							}
-							else if (strlen(text)>0) {
-	senditanyway:
-								if (cli->channel[0] == '#' || cli->channel[0] == '&') {
-									HWND hwndTree=GetDlgItem(hwndDlg,IDC_TREE_CHATROOM);
-									HTREEITEM h=TreeView_GetChild(hwndTree,TVI_ROOT);
-									while (h) {
-										TVITEM i;
-										i.mask=TVIF_PARAM|TVIF_STATE;
-										i.hItem=h;
-										i.state=0;
-										i.stateMask=TVIS_BOLD;
-										TreeView_GetItem(hwndTree,&i);
 
-										if (i.state || !i.lParam) {
-											i.hItem=h;
-											i.mask=TVIF_HANDLE|TVIF_PARAM;
-											i.lParam=GetTickCount();
-											TreeView_SetItem(hwndTree,&i);
-										};
-										h=TreeView_GetNextSibling(hwndTree,h);
+				int w,h;
+				RECT oldr;
+				GetWindowRect(hwndDlg,&oldr);
+				if (L_Chatroom->channel[0] == '#' || L_Chatroom->channel[0] == '&') {
+					w=g_config->ReadInt(CONFIG_chatchan_w,CONFIG_chatchan_w_DEFAULT);
+					h=g_config->ReadInt(CONFIG_chatchan_h,CONFIG_chatchan_h_DEFAULT);
+				}
+				else {
+					w=g_config->ReadInt(CONFIG_chatuser_w,CONFIG_chatuser_w_DEFAULT);
+					h=g_config->ReadInt(CONFIG_chatuser_h,CONFIG_chatuser_h_DEFAULT);
 									};
+				SetWindowPos(hwndDlg,NULL,
+					oldr.left + (oldr.right-oldr.left - w)/2,
+					oldr.top + (oldr.bottom-oldr.top - h)/2,w,h,SWP_NOZORDER|SWP_NOACTIVATE);
+			}
+		case WM_USER_TITLEUPDATE:
+			{
+				char buf[64];
+				chatroom_item *cli=(chatroom_item *)GetWindowLong(hwndDlg,GWL_USERDATA);
+				if (cli->channel[0] == '#' ||
+					cli->channel[0] == '&')
+				{
+					sprintf(buf,"%s - " APP_NAME " Chat",cli->channel);
 								}
 								else {
-									SetDlgItemText(hwndDlg,IDC_STATUS,"Sent message, awaiting reply");
+					sprintf(buf,"%s - " APP_NAME " User Chat",cli->channel);
 								};
+				SetWndTitle(hwndDlg,buf);
 
-								int l=0;
-								while (text && *text && l++ < 16) {
-									while (*text == '\r' || *text == '\n') text++;
-									while (*text == ' ') text++;
+				CHAT_HWND m_hwnd=GetDlgItem(hwndDlg,IDC_CHATTEXT);
+				SendMessage(m_hwnd, EM_SETEVENTMASK, 0, ENM_LINK);
+				//SendMessage(m_hwnd, EM_AUTOURLDETECT, 1, 0);
 
-									char *lasttext=text;
-									while (*text && *text != '\r' && *text != '\n') text++;
-									if (*text) *text++=0;
-									if (!*lasttext) break;
+				CHARFORMAT fmt={sizeof(fmt),};
+				SendMessage(m_hwnd,EM_GETCHARFORMAT,1,(LPARAM)&fmt);
 
-									T_Message msg={0,};
-									C_MessageChat req;
+				fmt.dwMask=CFM_SIZE|CFM_FACE|CFM_BOLD|CFM_COLOR|CFM_ITALIC|CFM_STRIKEOUT|CFM_UNDERLINE;
+				fmt.dwEffects = g_config->ReadInt(CONFIG_cfont_fx,CONFIG_cfont_fx_DEFAULT);
+				fmt.yHeight = g_config->ReadInt(CONFIG_cfont_yh,CONFIG_cfont_yh_DEFAULT);
+				fmt.crTextColor = g_config->ReadInt(CONFIG_cfont_color,CONFIG_cfont_color_DEFAULT);
+				if (cli->channel[0] == '#' || cli->channel[0] == '&') TreeView_SetTextColor(GetDlgItem(hwndDlg,IDC_TREE_CHATROOM),fmt.crTextColor);
 
-									char buf[1024];
-									if (lasttext[0] == '/' && lasttext[1] != '/' && !isme) {
-										safe_strncpy(buf+1,lasttext,sizeof(buf)-1);
-										buf[0]='/';
+				CHAT_HWND editWnd=GetDlgItem(hwndDlg,IDC_CHATEDIT);
+				const char *p=g_config->ReadString(CONFIG_cfont_face,CONFIG_cfont_face_DEFAULT);
+				if (*p) {
+					safe_strncpy(fmt.szFaceName,p,sizeof(fmt.szFaceName));
+					SendMessage(m_hwnd,EM_SETCHARFORMAT,SCF_ALL,(LPARAM)&fmt);
+					SendMessage(editWnd,EM_SETCHARFORMAT,SCF_ALL,(LPARAM)&fmt);
+
+					int bgc=g_config->ReadInt(CONFIG_cfont_bgc,CONFIG_cfont_bgc_DEFAULT);
+
+					LOGBRUSH lb;
+					lb.lbColor=bgc;
+					lb.lbStyle=BS_SOLID;
+					SendMessage(m_hwnd,EM_SETBKGNDCOLOR,FALSE,bgc);
+					SendMessage(editWnd,EM_SETBKGNDCOLOR,FALSE,bgc);
+					if (cli->channel[0] == '#' || cli->channel[0] == '&') TreeView_SetBkColor(GetDlgItem(hwndDlg,IDC_TREE_CHATROOM),bgc);
 									}
-									else {
-										safe_strncpy(buf,lasttext,sizeof(buf));
-									};
-									isme=0;
-									req.set_chatstring(buf);
+				else fmt.yHeight=100;
 
-									req.set_dest(cli->channel);
-									req.set_src(g_regnick);
-									msg.data=req.Make();
-									msg.message_type=MESSAGE_CHAT;
-									if (msg.data) {
-										msg.message_length=msg.data->GetLength();
-										g_mql->send(&msg);
-										cli->lastMsgGuid=msg.message_guid;
-										cli->lastmsgguid_time=GetTickCount();
-										char tmp[4096];
-										formatChatString(tmp,req.get_src(),buf,cli);
-										if (tmp[0]) {
-											add_chatline(hwndDlg,tmp);
-											int type;
-											if (cli->channel[0] && (cli->channel[0]=='#' || cli->channel[0]=='&')) type=2;
-											else if (!strcmp(_bcastsrc,cli->channel)) type=4;
-											else type=1;
-											chat_log(type, cli->channel, req.get_src(), buf, cli);
-										};
-									};
-								};
-								SetDlgItemText(hwndDlg,IDC_CHATEDIT,"");
+				//resize edit field
+				cli->resize[1].rinfo.top = cli->resize[1].rinfo.bottom + fmt.yHeight/15+12;
+
+				//resize chat output
+				cli->resize[0].rinfo.bottom=cli->resize[1].rinfo.top+2;
+
+				//resize invisible chat button
+				int old2size=cli->resize[2].rinfo.top-cli->resize[2].rinfo.bottom;
+				cli->resize[2].rinfo.bottom=cli->resize[1].rinfo.top+2;
+				cli->resize[2].rinfo.top=cli->resize[2].rinfo.bottom+old2size;
+
+				//resize 3rd field, if necessary :)
+				if (cli->channel[0] == '#' || cli->channel[0] == '&') {
+					cli->resize[3].rinfo.bottom=cli->resize[1].rinfo.top+2;
 							};
-							SetDlgItemText(hwndDlg,IDC_CHATEDIT,"");
-							SetFocus(GetDlgItem(hwndDlg,IDC_CHATEDIT));
+				childresize_resize(hwndDlg,cli->resize,5);
+				return 0;
 						};
+		case WM_COMMAND:
+			{
+				switch (LOWORD(wParam))
+				{
+				case IDC_CHAT:
+					{
+						chat_WM_COMMAND_IDC_CHAT(hwndDlg);
 						break;
 					};
 				};
@@ -1284,7 +1593,7 @@
 						UserListContextMenu(l->hwndFrom);
 					}
 					else if (l->code == NM_DBLCLK) {
-						HWND htree=l->hwndFrom;
+						CHAT_HWND htree=l->hwndFrom;
 						HTREEITEM h=TreeView_GetSelection(htree);
 						if (h) {
 							char text[256];
@@ -1309,7 +1618,7 @@
 						if(el->msg==WM_LBUTTONUP && GetTickCount()-linkclicktime < 5000) {
 							linkclicktime=0;
 							char tmp[1024];
-							HWND h=l->hwndFrom;
+							CHAT_HWND h=l->hwndFrom;
 							TEXTRANGE r;
 							r.chrg=el->chrg;
 							r.lpstrText=tmp;
@@ -1340,6 +1649,25 @@
 		};
 		return 0;
 	}
+#endif
+
+	void chatShowAndFlashIfReqd (CHAT_HWND hwnd, int f)
+	{
+		if (f&1) {
+#ifdef _DEFINE_WXUI
+			wxDynamicCast(hwnd,WxChat)->Show();
+			if (f&2) {
+#if (wxMAJOR_VERSION >= 2 && wxMINOR_VERSION >= 5)
+				wxDynamicCast(hwnd,WxChat)->RequestUserAttention();
+#endif
+			}
+#else
+
+			ShowWindow(hwnd,SW_SHOWNA);
+			DoFlashWindow(hwnd,(f&2)?(f>>2):0);
+#endif
+		}
+	}
 
 	chatroom_item *chat_ShowRoom(const char *channel, int activate)
 	{
@@ -1348,16 +1676,22 @@
 		while(p!=NULL) {
 			if(!stricmp(p->channel,channel)) {
 				if (activate) {
+#ifdef _DEFINE_WXUI
+					WxChat *wnd = wxDynamicCast(p->hwnd,WxChat);
+					wnd->Iconize(false);
+					wnd->Raise();
+#else
 					WINDOWPLACEMENT wp={sizeof(wp),};
 					GetWindowPlacement(p->hwnd,&wp);
 					if (wp.showCmd == SW_SHOWMINIMIZED)
 						ShowWindow(p->hwnd,SW_RESTORE);
 					else {
-						SetWindowPos(p->hwnd,HWND_TOP,0,0,0,0,SWP_NOMOVE|SWP_NOSIZE);
+						SetWindowPos(p->hwnd,CHAT_HWND_TOP,0,0,0,0,SWP_NOMOVE|SWP_NOSIZE);
 					};
 					if (activate == 2) {
 						SetTimer(p->hwnd,3,250,NULL);
 					};
+#endif
 				};
 				return p;
 			};
@@ -1373,6 +1707,19 @@
 
 		chatroom_item *cli=(chatroom_item *)malloc(sizeof(chatroom_item));
 		memset(cli,0,sizeof(chatroom_item));
+
+		safe_strncpy(cli->channel,channel,sizeof(cli->channel));
+		cli->next=L_Chatroom;
+		L_Chatroom=cli;
+
+		if (channel[0] == '#' || channel[0] == '&') {
+			if (channel[0] == '#') main_onGotChannel(channel);
+		}
+
+#ifdef _DEFINE_WXUI
+		extern void main_create_chat_window(chatroom_item *cli);
+		main_create_chat_window(cli);
+#else
 		cli->resize[0].id=IDC_CHATTEXT;
 		cli->resize[0].type=0x0011;
 		cli->resize[1].id=IDC_CHATEDIT;
@@ -1381,7 +1728,6 @@
 		cli->resize[2].type=0x1111;
 		int resid;
 		if (channel[0] == '#' || channel[0] == '&') {
-			if (channel[0] == '#') main_onGotChannel(channel);
 			resid=IDD_CHATCHAN;
 			cli->resize[3].id=IDC_TREE_CHATROOM;
 			cli->resize[3].type=0x1011;
@@ -1393,9 +1739,6 @@
 			cli->resize[3].id=IDC_STATUS;
 			cli->resize[3].type=0x0111;
 		};
-		safe_strncpy(cli->channel,channel,sizeof(cli->channel));
-		cli->next=L_Chatroom;
-		L_Chatroom=cli;
 
 		CreateDialog(g_hInst,MAKEINTRESOURCE(resid),NULL,Chat_DlgProc);
 		if (activate == 2) {
@@ -1407,6 +1750,7 @@
 		else {
 			ShowWindow(cli->hwnd,SW_SHOW);
 		};
+#endif
 
 		return cli;
 	}
@@ -1414,7 +1758,7 @@
 	//HACK currently unused stuff
 	/*
 	static WNDPROC chatrooms_oldWndProc;
-	static BOOL CALLBACK chatrooms_newWndProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
+	static BOOL CALLBACK chatrooms_newWndProc(CHAT_HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
 	{
 		if ((uMsg == WM_KEYDOWN || uMsg == WM_KEYUP)&&(wParam == VK_RETURN)) {
 			if (uMsg == WM_KEYUP) SendMessage(GetParent(hwndDlg),WM_COMMAND,IDC_CREATE,0);
@@ -1424,6 +1768,7 @@
 	}
 	*/
 
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	int chat_HandleMsg(T_Message *message)
 	{
 		chatroom_item *p=L_Chatroom;
@@ -1442,7 +1787,11 @@
 						else {
 							char buf[128];
 							char *tmp="Message sent, delivery confirmed";
+#ifdef _DEFINE_WXUI
+							wxGetDlgItemText(wxDynamicCast(p->hwnd,WxChat)->m_status, buf, sizeof(buf));
+#else
 							GetDlgItemText(p->hwnd,IDC_STATUS,buf,sizeof(buf));
+#endif
 							if (strncmp(buf,tmp,strlen(tmp))) {
 								sprintf(buf,"%s - (%dms roundtrip)",tmp,GetTickCount()-p->lastmsgguid_time);
 							}
@@ -1452,7 +1801,11 @@
 								if (*q == '(') a=atoi(q+1);
 								sprintf(buf,"%s (%d recipients) - (%dms max roundtrip).",tmp,a+1,GetTickCount()-p->lastmsgguid_time);
 							};
+#ifdef _DEFINE_WXUI
+							wxSetDlgItemText(wxDynamicCast(p->hwnd,WxChat)->m_status, buf);
+#else
 							SetDlgItemText(p->hwnd,IDC_STATUS,buf);
+#endif
 						};
 					};
 					break;
@@ -1486,7 +1839,28 @@
 				{
 					int isgood=0;
 					if (p->channel[0] == '#' || p->channel[0] == '&') {
-						HWND hwndTree=GetDlgItem(p->hwnd,IDC_TREE_CHATROOM);
+#ifdef _DEFINE_WXUI
+
+						wxTreeCtrl *htree = wxDynamicCast(p->hwnd,WxChat)->m_tree_chatroom;
+						wxTreeItemIdValue cookie;
+						wxTreeItemId rootId = htree->GetRootItem();
+						wxTreeItemId h = htree->GetFirstChild(rootId, cookie);
+
+						while (h.IsOk()) {
+							char tx[64];
+							wxString str = htree->GetItemText(h);
+							wxstr_to_cstr(tx, str, sizeof(tx));
+
+							if (!stricmp(tx,chat.get_chatstring()+6)) {
+								isgood=1;
+								gotNick(p->hwnd,chat.get_src(),TVIS_BOLD,TVIS_BOLD,0);
+								break;
+							};
+							h=htree->GetNextSibling(h);
+						}
+
+#else
+						CHAT_HWND hwndTree=GetDlgItem(p->hwnd,IDC_TREE_CHATROOM);
 						HTREEITEM h=TreeView_GetChild(hwndTree,TVI_ROOT);
 						while (h) {
 							TVITEM i;
@@ -1505,6 +1879,7 @@
 							};
 							h=TreeView_GetNextSibling(hwndTree,h);
 						};
+#endif
 					};
 
 					if (isgood || !stricmp(p->channel,chat.get_chatstring()+6)) {
@@ -1551,12 +1926,9 @@
 					if (txt[0]) {
 						add_chatline(p->hwnd,txt);
 						chat_log(4, _bcastsrc, chat.get_src(), chat.get_chatstring(), p);
-						if (p->hwnd!=GetForegroundWindow()) chat_RingTheBell();
+						chat_RingTheBellIfReqd(p->hwnd);
 						int f=g_config->ReadInt(CONFIG_gayflashb,CONFIG_gayflashb_DEFAULT);
-						if (f&1) {
-							ShowWindow(p->hwnd,SW_SHOWNA);
-							DoFlashWindow(p->hwnd,(f&2)?(f>>2):0);
-						};
+						chatShowAndFlashIfReqd (p->hwnd, f);
 						retval=1;
 					};
 					break;
@@ -1572,10 +1944,7 @@
 					chat_log(4, _bcastsrc, chat.get_src(), chat.get_chatstring(), p);
 					chat_RingTheBell();
 					int f=g_config->ReadInt(CONFIG_gayflashb,CONFIG_gayflashb_DEFAULT);
-					if (f&1) {
-						ShowWindow(p->hwnd,SW_SHOWNA);
-						DoFlashWindow(p->hwnd,(f&2)?(f>>2):0);
-					};
+					chatShowAndFlashIfReqd (p->hwnd, f);
 					retval=1;
 				};
 			};
@@ -1589,12 +1958,9 @@
 					if (txt[0]) {
 						add_chatline(p->hwnd,txt);
 						chat_log(1, chat.get_src(), chat.get_src(), chat.get_chatstring(), p);
-						if (p->hwnd!=GetForegroundWindow()) chat_RingTheBell();
+						chat_RingTheBellIfReqd(p->hwnd);
 						int f=g_config->ReadInt(CONFIG_gayflashp,CONFIG_gayflashp_DEFAULT);
-						if (f&1) {
-							ShowWindow(p->hwnd,SW_SHOWNA);
-							DoFlashWindow(p->hwnd,(f&2)?(f>>2):0);
-						};
+						chatShowAndFlashIfReqd (p->hwnd, f);
 						retval=1;
 					};
 					break;
@@ -1610,10 +1976,7 @@
 					chat_log(1, chat.get_src(), chat.get_src(), chat.get_chatstring(), p);
 					chat_RingTheBell();
 					int f=g_config->ReadInt(CONFIG_gayflashp,CONFIG_gayflashp_DEFAULT);
-					if (f&1) {
-						ShowWindow(p->hwnd,SW_SHOWNA);
-						DoFlashWindow(p->hwnd,(f&2)?(f>>2):0);
-					};
+					chatShowAndFlashIfReqd(p->hwnd, f);
 					retval=1;
 				};
 			};
@@ -1627,12 +1990,9 @@
 					if (txt[0]) {
 						add_chatline(p->hwnd,txt);
 						chat_log(2, chat.get_dest(), chat.get_src(), chat.get_chatstring(), p);
-						if (p->hwnd!=GetForegroundWindow()) chat_RingTheBell();
+						chat_RingTheBellIfReqd(p->hwnd);
 						int f=g_config->ReadInt(CONFIG_gayflash,CONFIG_gayflash_DEFAULT);
-						if (f&1) {
-							ShowWindow(p->hwnd,SW_SHOWNA);
-							DoFlashWindow(p->hwnd,(f&2)?(f>>2):0);
-						};
+						chatShowAndFlashIfReqd (p->hwnd, f);
 						retval=1;
 					};
 					break;
@@ -1642,8 +2002,34 @@
 		};
 		return retval;
 	}
+#endif
+
+#ifdef _DEFINE_WXUI
+void CreateChatDialog (const char *chatname)
+{
+	wxString defname;
+	if (chatname != NULL && *chatname) {
+	defname = cstr_to_wxstr(chatname);
+	}
+
+	wxString roomname = wxGetTextFromUser(_T("Chat room name\n"
+			"Visible chat rooms should begin with '#',\n"
+			"Invisible chat rooms should begin with '&'.\n"
+			"To initiate a user chat, enter the user's name.\n"),
+			_T("Join / Create Chat Room"),
+			defname);
+	if (roomname.Length() == 0) { return; }
 
-	BOOL WINAPI CreateChat_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
+	char buf[128];
+	wxstr_to_cstr(buf, roomname, 127);
+
+	chatroom_item *p=chat_ShowRoom(buf,1);
+	if (p) p->hwnd->Raise();
+}
+#endif
+
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	BOOL WINAPI CreateChat_DlgProc(CHAT_HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
 	{
 		if (uMsg == WM_INITDIALOG) { //set default values, if any
 			char *p=(char *)lParam;
@@ -1678,3 +2064,4 @@
 		return 0;
 	}
 #endif
+#endif
diff -b -N -ru waste-source-1.5-beta-2/d_chat.hpp latest/d_chat.hpp
--- waste-source-1.5-beta-2/d_chat.hpp	2004-06-14 15:29:00.000000000 +0300
+++ latest/d_chat.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -27,19 +27,23 @@
 bool chat_handle_whois(C_MessageChat &chat);
 int chat_HandleMsg(T_Message *message); //refered by either srvmain or d_chat
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	struct ChatroomItem
 	{
 		HWND hwnd;
 		char channel[SHA_OUTSIZE*2+1];
 		ChatroomItem *next;
 
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 		ChildWndResizeItem resize[5];
+#endif
 
 		T_GUID lastMsgGuid;
 		unsigned int lastmsgguid_time;
 
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 		WNDPROC chatdiv_oldWndProc;
+#endif
 		int wnd_old_xoffs;
 		int lastdivpos;
 
@@ -51,13 +55,18 @@
 	extern chatroom_item *L_Chatroom;
 	void CloseAllChatWindows();
 	void RunPerforms();
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 	int IsChatRoomDlgMessage(MSG *msg);
+#endif
 	void chat_updateTitles();
 	void chat_sendNickChangeFrom(char *oldnick);
 	chatroom_item *chat_ShowRoom(const char *channel, int activate);
+
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 	BOOL WINAPI Chat_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam);
 	BOOL WINAPI ChatRooms_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam);
 	BOOL WINAPI CreateChat_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam);
 #endif
+#endif
 
 #endif //_D_CHAT_H_
diff -b -N -ru waste-source-1.5-beta-2/filedb.cpp latest/filedb.cpp
--- waste-source-1.5-beta-2/filedb.cpp	2004-06-14 15:18:00.000000000 +0300
+++ latest/filedb.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -93,7 +93,7 @@
 			#ifdef _WIN32
 				if (p.h != INVALID_HANDLE_VALUE) ::FindClose(p.h);
 			#else
-				if (p.dir_h) closedir(p.dir_h);
+				if (p.dir_h) { closedir(p.dir_h); p.dir_h = 0; }
 			#endif
 		};
 	}
@@ -637,9 +637,9 @@
 			if (s.dir_h == 0)
 		#endif
 			{
-				char maskstr[2048];
 				if (!s.cur_path[0]) continue;
 				#ifdef _WIN32
+				        char maskstr[2048];
 					sprintf(maskstr,"%s\\*.*",s.cur_path);
 					s.h=::FindFirstFile(maskstr,&d);
 					if (s.h == INVALID_HANDLE_VALUE) {
@@ -725,6 +725,17 @@
 										#endif
 
 										if (!ispending && ((stricmp(p,szWastestate)!=0)||(strlen(p)!=strlen(szWastestate))) && in_list(m_ext_list,p)) {
+#ifndef _WIN32
+											struct stat statbuf;
+											{
+												char buf[4096];
+												sprintf(buf,"%s/%s",s.cur_path,d->d_name);
+												if (stat(buf,&statbuf) < 0) {
+												/* stat failed, file is unusable/nonexistent. skip */
+												continue;
+												}
+											}
+#endif
 											if (s.dir_index==-1) {
 												alloc_dir_index();
 												s.dir_index=m_dir_index_used;
@@ -736,6 +747,7 @@
 											alloc_entry();
 											m_database[m_database_used].meta=0;
 											m_database[m_database_used].dir_index=s.dir_index;
+
 											#ifdef _WIN32
 												m_database[m_database_used].file=DB_LH_STRDUP(d.cFileName);
 												m_database[m_database_used].length_high=d.nFileSizeHigh;
@@ -746,15 +758,9 @@
 												m_database[m_database_used].file=DB_LH_STRDUP(d->d_name);
 
 												m_database[m_database_used].length_high=0; //fucko64 for bsd
-												{
-													char buf[4096];
-													sprintf(buf,"%s/%s",s.cur_path,d->d_name);
-													struct stat s;
-													stat(buf,&s);
-													m_database[m_database_used].file_time=s.st_mtime;
-													if (!fsize) m_database[m_database_used].length_low=s.st_size;
+												m_database[m_database_used].file_time=statbuf.st_mtime;
+												if (!fsize) m_database[m_database_used].length_low=statbuf.st_size;
 													else m_database[m_database_used].length_low=fsize;
-												};
 											#endif
 
 											if (m_database[m_database_used].file_time > m_database_newesttime)
@@ -774,6 +780,10 @@
 
 													for (x = 0; x < oldDB->m_database_used; x ++) {
 														int thisidx=oldDB->m_database[v].dir_index;
+																												if (thisidx > oldDB->m_dir_index_used) {
+																													// out of range; old dir index is corrupt
+																													break;
+																												}
 														if (thisidx != lastidx) {
 															lastidx=thisidx;
 															if (!strcmp(
@@ -887,6 +897,9 @@
 							int a=GetTickCount()-endt;
 							if (a>=0) {
 								m_scan_stack->Push(s);
+#ifndef _WIN32
+								//if (s.dir_h) { closedir(s.dir_h); s.dir_h = 0; }
+#endif
 								return m_database_used;
 							};
 					} while (
@@ -897,12 +910,13 @@
 						#endif
 						);
 	};
-	#ifdef _WIN32
+#ifdef _WIN32
 		::FindClose(s.h);
-	#else
-		closedir(s.dir_h);
-	#endif
-};
+#else
+		closedir(s.dir_h); s.dir_h = 0;
+#endif
+	};
+
 //HACK never exits here
 //return m_database_used;
 }//returns number of files scanned, or -1 if done
@@ -1195,7 +1209,12 @@
 					};
 				};
 				fclose(fp);
-			};
+			}
+			else {
+#ifdef _DEFINE_WXUI
+				wxLogSysError(_T("database save failed"));
+#endif
+			}
 		}
 
 		int C_FileDB::readIn(char *fn)
@@ -1239,6 +1258,7 @@
 						fread(&m_dir_index_used,1,4,fp);
 						fread(&m_scanidx_gpos,1,4,fp);
 
+
 						if (m_dir_index_used) {
 							alloc_dir_index();
 							if (m_dir_index) {
diff -b -N -ru waste-source-1.5-beta-2/itemlist.hpp latest/itemlist.hpp
--- waste-source-1.5-beta-2/itemlist.hpp	2004-06-14 15:29:00.000000000 +0300
+++ latest/itemlist.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -51,7 +51,8 @@
 	{
 		if (m_list && idx >= 0 && idx < m_size) {
 			m_size--;
-			if (idx != m_size) ::memcpy(m_list+idx,m_list+idx+1,sizeof(T *)*(m_size-idx));
+
+			if (idx != m_size) w_memmove(m_list+idx,m_list+idx+1,sizeof(T *)*(m_size-idx));
 			if (!(m_size&31)&&m_size) { //resize down
 				m_list=(T**)::realloc(m_list,sizeof(T*)*m_size);
 			};
diff -b -N -ru waste-source-1.5-beta-2/keygen.cpp latest/keygen.cpp
--- waste-source-1.5-beta-2/keygen.cpp	2004-06-15 02:43:00.000000000 +0300
+++ latest/keygen.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -40,13 +40,19 @@
 static unsigned int kg_movebuf[7];
 static int kg_movebuf_cnt;
 
+#ifndef _DEFINE_WXUI
 static WNDPROC kg_oldWndProc;
-
 static HANDLE kg_thread;
+static HWND kg_hwndDlg;
+#else
 
-static R_RSA_PRIVATE_KEY kg_privKey;
+#include "wxkgrand.h"
+WxKeyGenRandomnessDialog *keygen_dlg;
+
+#endif /* _DEFINE_WXUI */
 
-static HWND kg_hwndDlg;
+
+static R_RSA_PRIVATE_KEY kg_privKey;
 
 static void writeBFdata(
 						FILE *out,
@@ -113,7 +119,59 @@
 	return 0;
 }
 
-static DWORD WINAPI keyThread(LPVOID /*p*/)
+void getting_randomness (unsigned int data) {
+
+#ifdef _DEFINE_WXUI
+
+	kg_movebuf[kg_movebuf_cnt%7]+=data;
+	kg_movebuf[(kg_movebuf_cnt+1)%7]+=GetTickCount();
+	//kg_movebuf[(kg_movebuf_cnt+2)%7]+=GetMessageTime()+GetMessagePos();
+
+	if (++kg_movebuf_cnt >= 29) {
+		kg_movebuf_cnt=0;
+		R_RandomUpdate(&kg_random,(unsigned char *)kg_movebuf,sizeof(kg_movebuf));
+
+		unsigned int bytesNeeded;
+		R_GetRandomBytesNeeded(&bytesNeeded, &kg_random);
+
+		keygen_dlg->m_kg_progress->SetValue(64-bytesNeeded/4);
+
+		if (!bytesNeeded) {
+			kg_going=2;
+			keygen_dlg->m_kg_progress->SetValue(64);
+			keygen_dlg->EndModal(wxID_OK);
+		};
+	}
+
+#else
+
+	kg_movebuf[kg_movebuf_cnt%7]+=data;
+	kg_movebuf[(kg_movebuf_cnt+1)%7]+=GetTickCount();
+	kg_movebuf[(kg_movebuf_cnt+2)%7]+=GetMessageTime()+GetMessagePos();
+	if (++kg_movebuf_cnt >= 29) {
+		kg_movebuf_cnt=0;
+		R_RandomUpdate(&kg_random,(unsigned char *)kg_movebuf,sizeof(kg_movebuf));
+
+		unsigned int bytesNeeded;
+		R_GetRandomBytesNeeded(&bytesNeeded, &kg_random);
+		SendDlgItemMessage(hwndDlg,IDC_PROGRESS_KEYGEN,PBM_SETPOS,(WPARAM)(64-bytesNeeded/4),0);
+		if (!bytesNeeded) {
+			kg_going=2;
+			SendDlgItemMessage(hwndDlg,IDC_PROGRESS_KEYGEN,PBM_SETPOS,0,0);
+			SetDlgItemText(hwndDlg,IDC_LABEL_LINE1,"Generating key pair... please wait");
+			char buf[128];
+			wsprintf(buf,"(this may take as long as %d minutes)",kg_keysize<=1024?1:kg_keysize<=2048?3:kg_keysize<=3072?10:20);
+			SetDlgItemText(hwndDlg,IDC_LABEL_LINE2,buf);
+			SetTimer(hwndDlg,1,250,NULL);
+			DWORD id;
+			kg_thread=CreateThread(NULL,0,keyThread,NULL,0,&id);
+		};
+	};
+
+#endif
+}
+
+int keyThreadImpl()
 {
 	kg_start_time=time(NULL);
 	R_RSA_PROTO_KEY protoKey;
@@ -124,13 +182,30 @@
 	if (R_GeneratePEMKeys(&kg_pubKey,&kg_privKey,&protoKey,&kg_random) ||
 		kg_writePrivateKey(kg_privout,&kg_privKey,&kg_random,kg_passbf))
 	{
+
+#ifdef _DEFINE_WXUI
+
+		::wxMessageBox (
+			_T("Error calling GeneratePEMKeys()"),
+			_T("WASTE Key Generation Error"),
+			wxOK|wxICON_ERROR);
+
+#else
+
 		SetDlgItemText(kg_hwndDlg,IDC_LABEL_LINE1,"Error creating keys");
 		SetDlgItemText(kg_hwndDlg,IDC_LABEL_LINE2,"");
 		MessageBox(kg_hwndDlg,"Error calling GeneratePEMKeys()",APP_NAME " Key Generation Error",MB_OK|MB_ICONSTOP);
+
+#endif
+
 	}
 	else {
 		kg_start_time=time(NULL)-kg_start_time;
+
+#ifndef _DEFINE_WXUI
 		PostMessage(kg_hwndDlg,WM_USER+0x131,0,1);
+#endif
+
 	};
 	memset(kg_passbf,0,SHA_OUTSIZE);
 	memset(&kg_pubKey,0,sizeof(kg_pubKey));
@@ -144,35 +219,24 @@
 
 	memset(&kg_privKey,0,sizeof(R_RSA_PRIVATE_KEY));
 
+
+#ifndef _DEFINE_WXUI
 	KillTimer(kg_hwndDlg,1);
+#endif
+
 	return 0;
 }
 
+#ifndef _DEFINE_WXUI
+static DWORD WINAPI keyThread(LPVOID /*p*/)
+{
+	return keyThreadImpl();
+}
+
 static BOOL CALLBACK kg_newWndProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
 {
 	if (uMsg == WM_MOUSEMOVE && kg_going==1) {
-		kg_movebuf[kg_movebuf_cnt%7]+=lParam;
-		kg_movebuf[(kg_movebuf_cnt+1)%7]+=GetTickCount();
-		kg_movebuf[(kg_movebuf_cnt+2)%7]+=GetMessageTime()+GetMessagePos();
-		if (++kg_movebuf_cnt >= 29) {
-			kg_movebuf_cnt=0;
-			R_RandomUpdate(&kg_random,(unsigned char *)kg_movebuf,sizeof(kg_movebuf));
-
-			unsigned int bytesNeeded;
-			R_GetRandomBytesNeeded(&bytesNeeded, &kg_random);
-			SendDlgItemMessage(hwndDlg,IDC_PROGRESS_KEYGEN,PBM_SETPOS,(WPARAM)(64-bytesNeeded/4),0);
-			if (!bytesNeeded) {
-				kg_going=2;
-				SendDlgItemMessage(hwndDlg,IDC_PROGRESS_KEYGEN,PBM_SETPOS,0,0);
-				SetDlgItemText(hwndDlg,IDC_LABEL_LINE1,"Generating key pair... please wait");
-				char buf[128];
-				wsprintf(buf,"(this may take as long as %d minutes)",kg_keysize<=1024?1:kg_keysize<=2048?3:kg_keysize<=3072?10:20);
-				SetDlgItemText(hwndDlg,IDC_LABEL_LINE2,buf);
-				SetTimer(hwndDlg,1,250,NULL);
-				DWORD id;
-				kg_thread=CreateThread(NULL,0,keyThread,NULL,0,&id);
-			};
-		};
+		getting_randomness((long) lParam);
 	};
 	return CallWindowProc(kg_oldWndProc,hwndDlg,uMsg,wParam,lParam);
 }
@@ -270,6 +334,7 @@
 							break;
 						};
 
+						char pass1[1024],pass2[1024];
 						SHAify c;
 						c.add((unsigned char *)pass1,strlen(pass1));
 						c.final((unsigned char *)kg_passbf);
@@ -320,26 +385,213 @@
 	};
 	return 0;
 }
+#endif /* _DEFINE_WXUI */
 
 static int running=0;
 
+#ifdef _DEFINE_WXUI
+
+#include <wx/timer.h>
+class KeygenRandomnessTimer : public wxTimer {
+public:
+	KeygenRandomnessTimer() : wxTimer() { }
+
+	virtual void Notify () {
+		if (kg_going == 1) {
+			wxPoint p = wxGetMousePosition();
+			getting_randomness((p.x << 16) ^ p.y);
+		}
+	}
+};
+
+#include <wx/thread.h>
+class keyGenThread : public wxThread {
+public:
+	virtual ExitCode Entry() {
+
+#if (wxMAJOR_VERSION >= 2 && wxMINOR_VERSION >= 5)
+		wxMilliSleep(500);
+#else
+		wxUsleep(500);
+#endif
+
+		keyThreadImpl();
+		return NULL;
+	}
+	virtual void OnExit() {
+	}
+};
+
+#endif /* _DEFINE_WXUI */
+
+#ifdef _DEFINE_WXUI
+void RunKeyGen(wxWindow *hwndParent, char *keyout)
+#else
 void RunKeyGen(HWND hwndParent, char *keyout)
+#endif /* _DEFINE_WXUI */
 {
 	if (!running) {
 		running=1;
 		memset(&kg_privKey,0,sizeof(kg_privKey));
-		kg_thread=0;
 		kg_start_time=0;
 		memset(kg_movebuf,0,sizeof(kg_movebuf));
 		kg_movebuf_cnt=0;
-		kg_oldWndProc=0;
 		kg_going=0;
 		kg_keysize=0;
 		memset(&kg_random,0,sizeof(kg_random));
 		kg_privout=keyout;
+
+#ifndef _DEFINE_WXUI
+
+		kg_oldWndProc=0;
+		kg_thread=0;
 		DialogBox(g_hInst,MAKEINTRESOURCE(IDD_KEYGEN),hwndParent,dlgProc);
-		running=0;
+
+#else
+
+		wxString keychoices[] = {
+			_T("1024 bits (weak, not recommended)"),
+			_T("1536 bits (recommended)"),
+			_T("2048 bits (slower, recommended)"),
+			_T("3072 bits (slow, not recommended)"),
+			_T("4096 bits (very slow, not recommended)")
+		};
+
+		int idx = ::wxGetSingleChoiceIndex(
+				_T("Select key strength"),
+				_T("WASTE Key Generator (step 1/4)"),
+				5, keychoices
+				);
+
+		switch (idx)
+		{
+		case -1:
+			return;
+			//break;
+		case 0:
+			kg_keysize=1024;
+			break;
+		case 1:
+			kg_keysize=1536;
+			break;
+		case 2:
+			kg_keysize=2048;
+			break;
+		case 3:
+			kg_keysize=3072;
+			break;
+		case 4:
+			kg_keysize=4096;
+			break;
+		default:
+			kg_keysize=2048;
 	};
-}
 
+		// dialog step 2: passphrases
+
+		char pass1[1024];
+		while (1) {
+			wxString str1 = ::wxGetPasswordFromUser(
+				_T("Enter your passphrase"),
+				_T("WASTE Key Generator (step 2/4)"));
+
+			wxString str2 = ::wxGetPasswordFromUser(
+				_T("Re-type your passphrase"),
+				_T("WASTE Key Generator (step 2/4)"));
+
+			if (str1.IsSameAs(str2)) {
+				wxstr_to_cstr(pass1, str1, 1023);
+
+				// todo : memset-zero the string buffers
+				break;
+			} else {
+				if (::wxMessageBox (
+					_T("Passphrases do not match!  Please try again."),
+					_T("Error"),
+					wxOK|wxCANCEL|wxICON_ERROR) == wxCANCEL)
+				{
+					return; // give up
+				}
+			}
+		}
+
+		SHAify c;
+		c.add((unsigned char *)pass1,strlen(pass1));
+		c.final((unsigned char *)kg_passbf);
+		memset(pass1,0,sizeof(pass1));
+
+		// dialog step 3: randomness
+		while (1) {
+			KeygenRandomnessTimer timer;
+			keygen_dlg = new WxKeyGenRandomnessDialog(hwndParent);
 
+			kg_going=1;
+			R_RandomInit(&kg_random);
+			unsigned char buf[16];
+			R_GenerateBytes(buf,sizeof(buf),&g_random);
+			R_RandomUpdate(&kg_random,buf,sizeof(buf));
+			memset(buf,0,sizeof(buf));
+
+			timer.Start(50, wxTIMER_CONTINUOUS);
+			keygen_dlg->ShowModal();
+			timer.Stop();
+
+			bool cancelled = keygen_dlg->m_cancel_pressed;
+			delete keygen_dlg;
+
+			if (cancelled) {
+				break;
+			}
+
+			wxString msgstr = wxString::Format(
+				_T("About to generate a new key pair.\n(this may take as long as %d minutes)"),
+				kg_keysize<=1024?1:kg_keysize<=2048?3:kg_keysize<=3072?10:20);
+
+			/* display a dialog before we do the slow bit */
+			::wxMessageBox (
+				msgstr,
+				_T("About to generate"),
+				wxID_OK|wxICON_INFORMATION);
+
+			wxMessageDialog *dlg = new wxMessageDialog(hwndParent,
+					msgstr, _T("WASTE Key Generator"),
+					wxID_CANCEL|wxICON_INFORMATION);
+
+			wxBeginBusyCursor();
+			dlg->Show(true);
+			::wxSafeYield();
+			/* this dialog doesn't seem to appear. */
+
+#undef USE_THREAD_KEYGEN /* doesn't seem to help anyway! */
+#if USE_THREAD_KEYGEN
+			keyGenThread kg_thread;
+			kg_thread.Create();
+			kg_thread.Run();
+			while (kg_thread.IsAlive()) {
+				::wxSafeYield();
+			}
+			kg_thread.Wait();
+
+#else 
+
+			keyThreadImpl();
+
+#endif
+
+			wxEndBusyCursor();
+			dlg->Show(false);
+			delete dlg;
+
+			::wxMessageBox (
+				_T("New WASTE private key generated!\n"
+				"Now send your public key to the other users.\n"),
+				_T("Done!"),
+				wxID_OK|wxICON_INFORMATION);
+
+			break;
+		}
+
+#endif /* _DEFINE_WXUI */
+		running=0;
+	};
+}
diff -b -N -ru waste-source-1.5-beta-2/listen.cpp latest/listen.cpp
--- waste-source-1.5-beta-2/listen.cpp	2004-06-14 15:17:00.000000000 +0300
+++ latest/listen.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -28,6 +28,7 @@
 {
 	m_port=port;
 	m_socket = ::socket(AF_INET,SOCK_STREAM,0);
+
 	if (m_socket < 0) {
 		log_printf(ds_Error,"C_Listen: call to socket() failed: %d.",ERRNO);
 	}
diff -b -N -ru waste-source-1.5-beta-2/listview.cpp latest/listview.cpp
--- waste-source-1.5-beta-2/listview.cpp	2004-06-14 15:17:00.000000000 +0300
+++ latest/listview.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -18,11 +18,14 @@
 Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
 
+#ifndef _DEFINE_WXUI
 #include "stdafx.hpp"
+#endif /* _DEFINE_WXUI */
 
 #include "platform.hpp"
 #include "listview.hpp"
 
+#ifndef _DEFINE_WXUI
 #if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 void W_ListView::AddCol(char *text, int w)
 {
@@ -128,3 +131,103 @@
 
 #endif//_WIN32
 
+#else /* _DEFINE_WXUI */
+
+void W_ListView::AddCol(char *text, int w)
+{
+		wxString str = cstr_to_wxstr(text);
+	m_hwnd->InsertColumn((long) m_col, str,
+					wxLIST_FORMAT_LEFT, w ? w : -1);
+	m_col++;
+}
+
+int W_ListView::GetColumnWidth(int col)
+{
+	if (col < 0 || col >= m_col) return 0;
+	return m_hwnd->GetColumnWidth((long) col);
+}
+
+int W_ListView::GetParam(int p)
+{
+	wxListItem lvi;
+		lvi.SetId(p);
+		lvi.SetMask(wxLIST_MASK_DATA);
+	m_hwnd->GetItem(lvi);
+	return lvi.GetData();
+}
+
+int W_ListView::InsertItem(int p, const char *text, int param)
+{
+	wxListItem lvi;
+		wxString str = cstr_to_wxstr(text);
+		lvi.SetMask(wxLIST_MASK_TEXT | wxLIST_MASK_DATA);
+		lvi.SetId(p);
+		lvi.SetText(str);
+	lvi.SetData((long) param);
+	return m_hwnd->InsertItem(lvi);
+}
+
+int W_ListView::InsertItemSorted(const char *text, int param, const char *sorttext)
+{
+	int l=GetCount();
+	int x;
+	for (x = 0; x < l; x ++) {
+		char thetext[512];
+		GetText(x,m_sort_col,thetext,sizeof(thetext));
+		if (_docompare(sorttext,thetext)<0) {
+			break;
+		};
+	};
+	return InsertItem(x,text,param);
+}
+
+void W_ListView::SetItemText(int p, int si, const char *text)
+{
+		wxString str = cstr_to_wxstr(text);
+	//wxListItem lvi;
+	//lvi.SetMask(wxLIST_MASK_TEXT);
+	//lvi.SetText(str);
+	m_hwnd->SetItem(p, si, str);
+}
+
+void W_ListView::SetItemParam(int p, int param)
+{
+	wxListItem lvi;
+	lvi.SetMask(wxLIST_MASK_DATA);
+	lvi.SetData(param);
+	m_hwnd->SetItem(lvi);
+}
+
+int W_ListView::_docompare(const char *s1, const char *s2)
+{
+	if (m_sort_type) {
+		int r=(atoi(s1)-atoi(s2));
+		if (m_sort_dir==-1) return -r;
+		return r;
+	};
+	int r=stricmp(s1,s2);
+	if (m_sort_dir==-1) return -r;
+	return r;
+}
+
+int wxCALLBACK W_ListView::sortfunc(long lParam1, long lParam2, long lParamSort)
+{
+	W_ListView *_this=(W_ListView *)lParamSort;
+	int idx1,idx2;
+	char text1[128],text2[128];
+	idx1=_this->FindItemByParam(lParam1);
+	idx2=_this->FindItemByParam(lParam2);
+	if (idx1==-1) return _this->m_sort_dir;
+	if (idx2==-1) return -_this->m_sort_dir;
+	_this->GetText(idx1,_this->m_sort_col,text1,sizeof(text1));
+	_this->GetText(idx2,_this->m_sort_col,text2,sizeof(text2));
+	text1[127]=text2[127]=0;
+	return _this->_docompare(text1,text2);
+}
+
+void W_ListView::Resort()
+{
+	m_hwnd->SortItems(sortfunc,(long)this);
+}
+
+#endif /* _DEFINE_WXUI */
diff -b -N -ru waste-source-1.5-beta-2/listview.hpp latest/listview.hpp
--- waste-source-1.5-beta-2/listview.hpp	2004-06-14 15:28:00.000000000 +0300
+++ latest/listview.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -21,6 +21,8 @@
 #ifndef _LISTVIEW_H_
 #define _LISTVIEW_H_
 
+#ifndef _DEFINE_WXUI
+
 //#include <commctrl.h>
 
 class W_ListView
@@ -78,4 +80,81 @@
 	int _docompare(const char *s1, const char *s2);
 };
 
+#else /* _DEFINE_WXUI */
+/* wxWindows version */
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+#include <wx/listctrl.h>
+
+class W_ListView
+{
+public:
+	W_ListView() { m_hwnd=NULL; m_sort_type=0; m_sort_col=0; m_sort_dir=1; m_col=0; }
+	W_ListView(wxListCtrl* hwnd) { m_hwnd=hwnd; m_col=0; }
+	~W_ListView() { };
+
+	void setwnd(wxListCtrl* hwnd)
+	{
+		m_hwnd=hwnd;
+	};
+
+	void AddCol(char *text, int w);
+	int GetCount() { return m_hwnd->GetItemCount(); }
+	int GetParam(int p);
+	void DeleteItem(int n) { m_hwnd->DeleteItem((long) n); }
+	void Clear() { m_hwnd->DeleteAllItems(); }
+	int GetSelected(int x) { return (m_hwnd->GetItemState((long) x, wxLIST_STATE_SELECTED))?1:0; }
+	void SetSelected(int x) { m_hwnd->SetItemState((long) x,wxLIST_STATE_SELECTED,wxLIST_STATE_SELECTED); }
+	int InsertItem(int p, const char *text, int param);
+	int InsertItemSorted(const char *text, int param, const char *sorttext);
+	void SetItemText(int p, int si, const char *text);
+	void SetItemParam(int p, int param);
+
+	void GetText(int p, int si, char *text, int maxlen) {
+				wxListItem item;
+				item.m_itemId = p;
+				item.m_col = si;
+				item.m_mask = wxLIST_MASK_TEXT;
+				if (m_hwnd->GetItem(item)) {
+				wxstr_to_cstr (text, item.GetText().c_str(), maxlen);
+				} else {
+				printf("oops! GetItem false for %d/%d\n", p, si);
+				*text = '\0';
+				}
+		}
+	int FindItemByParam(int param)
+	{
+		return m_hwnd->FindItem(-1,(long) param);
+	};
+	void SetSortColumn(int col, int bNumeric=0)
+	{
+		if (col == m_sort_col) m_sort_dir=-m_sort_dir;
+		else m_sort_dir=1;
+		m_sort_col=col;
+		m_sort_type=bNumeric;
+	};
+	void SetSortDir(int dir) { m_sort_dir=dir; }
+	int GetSortColumn() { return m_sort_col; }
+	int GetSortDir() { return m_sort_dir; }
+	int GetColumnWidth(int col);
+	void Resort();
+	wxListCtrl* getwnd() { return m_hwnd; }
+
+protected:
+	wxListCtrl *m_hwnd;
+	int m_col;
+	int m_sort_col;
+	int m_sort_dir;
+	int m_sort_type;
+	static int wxCALLBACK sortfunc(long lParam1, long lParam2, long lParamSort);
+	int _docompare(const char *s1, const char *s2);
+};
+#endif /* _DEFINE_WXUI */
+
 #endif//_LISTVIEW_H_
diff -b -N -ru waste-source-1.5-beta-2/m_chat.cpp latest/m_chat.cpp
--- waste-source-1.5-beta-2/m_chat.cpp	2004-06-14 15:32:00.000000000 +0300
+++ latest/m_chat.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -35,7 +35,7 @@
 C_MessageChatReply::C_MessageChatReply(C_SHBuf *in)
 {
 	nick[0]=0;
-	if (in->GetLength() > sizeof(nick)-1) {
+	if (in->GetLength() > (int) sizeof(nick)-1) {
 		log_printf(ds_Warning,"chatreply: length of %d too big",in->GetLength());
 	}
 	else {
@@ -52,7 +52,7 @@
 C_SHBuf *C_MessageChatReply::Make()
 {
 	int l=strlen(nick);
-	if (l > sizeof(nick)-1) {
+	if (l > (int) sizeof(nick)-1) {
 		dbg_printf(ds_Debug,"chatreply::make() length is %d",l);
 		l=sizeof(nick)-1;
 	};
@@ -63,7 +63,7 @@
 
 C_MessageChat::~C_MessageChat()
 {
-	delete m_chatstring;
+	delete[] m_chatstring;
 }
 
 C_MessageChat::C_MessageChat()
diff -b -N -ru waste-source-1.5-beta-2/m_file.cpp latest/m_file.cpp
--- waste-source-1.5-beta-2/m_file.cpp	2004-06-14 15:32:00.000000000 +0300
+++ latest/m_file.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -62,7 +62,7 @@
 	memcpy(&m_guid,data,16); data+=16; datalen-=16;
 	memcpy(&m_prev_guid,data,16); data+=16; datalen-=16;
 
-	if (datalen < 4+SHA_OUTSIZE+(sizeof(m_nick)-1)+4+2) {
+	if (datalen < (int) (4+SHA_OUTSIZE+(sizeof(m_nick)-1)+4+2)) {
 		if (datalen) {//m_abort>=2!
 			m_abort=DataUInt1(data);data++;datalen--;
 			if (m_abort<2) {
diff -b -N -ru waste-source-1.5-beta-2/m_ping.cpp latest/m_ping.cpp
--- waste-source-1.5-beta-2/m_ping.cpp	2004-06-14 15:32:00.000000000 +0300
+++ latest/m_ping.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -48,7 +48,7 @@
 	m_ip=DataUInt4(data);data+=4;
 	l-=4+2;
 	if (l>0) {
-		if (l > sizeof(m_nick)-1) {
+		if (l > (int) sizeof(m_nick)-1) {
 			dbg_printf(ds_Debug,"Ping: got ping with nick > %i", sizeof(m_nick)-1);
 		}
 		else {
diff -b -N -ru waste-source-1.5-beta-2/m_search.cpp latest/m_search.cpp
--- waste-source-1.5-beta-2/m_search.cpp	2004-06-14 15:32:00.000000000 +0300
+++ latest/m_search.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -67,8 +67,8 @@
 		m_replies[x].file_time=DataUInt4(data); data+=4; l-=4;
 
 		int t;
-		for (t=0; t < min(l,SEARCHREPLY_MAX_FILESIZE) && data[t]; t ++);
-		if (t >= min(l,SEARCHREPLY_MAX_FILESIZE)) {
+		for (t=0; t < waste_min(l,SEARCHREPLY_MAX_FILESIZE) && data[t]; t ++);
+		if (t >= waste_min(l,SEARCHREPLY_MAX_FILESIZE)) {
 			log_printf(ds_Warning,"searchreply: invalid message (filename error)!");
 			return;
 		};
@@ -76,8 +76,8 @@
 		l-=t+1;
 		data+=t+1;
 
-		for (t=0; t < min(l,SEARCHREPLY_MAX_METASIZE) && data[t]; t ++);
-		if (t >= min(l,SEARCHREPLY_MAX_METASIZE)) {
+		for (t=0; t < waste_min(l,SEARCHREPLY_MAX_METASIZE) && data[t]; t ++);
+		if (t >= waste_min(l,SEARCHREPLY_MAX_METASIZE)) {
 			log_printf(ds_Warning,"searchreply: invalid message (meta error)!");
 			return;
 		};
@@ -223,8 +223,8 @@
 	if (l < 2) return;
 	m_min_conspeed=DataUInt2(data);data+=2;l-=2;
 	int t;
-	for (t=0; t < min(l,256) && data[t]; t ++);
-	if (t == min(l,256)) return;
+	for (t=0; t < waste_min(l,256) && data[t]; t ++);
+	if (t == waste_min(l,256)) return;
 	memcpy(m_searchstring,data,t+1);
 	data+=t+1;
 	l-=t+1;
@@ -240,7 +240,7 @@
 	if (strlen(m_searchstring) < 1) return NULL;
 	C_SHBuf *buf=new C_SHBuf(2+strlen(m_searchstring)+1);
 	unsigned char *data=(unsigned char *)buf->Get();
-	UIntData2(data,(unsigned short)min(m_min_conspeed,0xffff));data+=2;
+	UIntData2(data,(unsigned short)waste_min(m_min_conspeed,0xffff));data+=2;
 	memcpy((char*)data,m_searchstring,strlen(m_searchstring)+1);
 	return buf;
 }
diff -b -N -ru waste-source-1.5-beta-2/m_upload.cpp latest/m_upload.cpp
--- waste-source-1.5-beta-2/m_upload.cpp	2004-06-14 15:32:00.000000000 +0300
+++ latest/m_upload.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -49,8 +49,8 @@
 
 	unsigned char *data=(unsigned char *)in->Get();
 	int datalen=in->GetLength();
-	if (datalen < 16+8+(sizeof(m_dest)-1)+4+(sizeof(m_nick)-1) + 1 ||
-		datalen > 16+8+(sizeof(m_dest)-1)+4+(sizeof(m_nick)-1) + 2048)
+	if (datalen < (int) (16+8+(sizeof(m_dest)-1)+4+(sizeof(m_nick)-1) + 1) ||
+			datalen > (int) (16+8+(sizeof(m_dest)-1)+4+(sizeof(m_nick)-1) + 2048))
 	{
 		log_printf(ds_Warning,"uploadrequest: length out of range (%d)",datalen);
 		return;
diff -b -N -ru waste-source-1.5-beta-2/main.cpp latest/main.cpp
--- waste-source-1.5-beta-2/main.cpp	2004-06-16 20:06:00.000000000 +0300
+++ latest/main.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -38,9 +38,239 @@
 #include "netkern.hpp"
 #include "srchwnd.hpp"
 
-static UINT CALLBACK fileHookProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM /*lParam*/)
+#ifdef _DEFINE_WXUI
+#include "wxmainframe.h"
+
+extern MainFrame *g_mainwnd;
+
+void main_create_chat_window(chatroom_item *cli) {
+	g_mainwnd->CreateChatWindow(cli);
+}
+
+int main_USERS_clicked(bool was_userlist)
 {
-	if (uMsg == WM_INITDIALOG) {
+	wxTreeCtrl *tree;
+	if (was_userlist) {
+		tree = g_mainwnd->m_users;
+	} else {
+		tree = g_mainwnd->m_chatrooms;
+	}
+
+	wxTreeItemId h=tree->GetSelection();
+	if (h) {
+		char text[256];
+		wxString str = tree->GetItemText(h);
+		wxstr_to_cstr(text, str, 255);
+		if (text[0]) {
+			chat_ShowRoom(text,2);
+			return 1;
+		};
+	};
+	return 0;
+}
+#else
+int main_USERS_clicked(HWND htree)
+{
+	HTREEITEM h=TreeView_GetSelection(htree);
+	if (h) {
+		char text[256];
+		TVITEM i;
+		i.mask=TVIF_TEXT|TVIF_HANDLE;
+		i.hItem=h;
+		i.pszText=text;
+		i.cchTextMax=sizeof(text);
+		text[0]=0;
+		TreeView_GetItem(htree,&i);
+		if (text[0]) {
+			chat_ShowRoom(text,2);
+			return 1;
+		};
+	};
+}
+#endif
+
+void main_WM_DESTROY() {
+	SaveNetQ();
+	SaveDbToDisk();
+}
+
+void main_ID_WHOISUSER (char *who) {
+	T_Message msg;
+	//send a message to text that is /whois
+	C_MessageChat req;
+	req.set_chatstring("/whois");
+	req.set_dest(who);
+	req.set_src(g_regnick);
+	msg.data=req.Make();
+	msg.message_type=MESSAGE_CHAT;
+	if (msg.data) {
+		msg.message_length=msg.data->GetLength();
+		g_mql->send(&msg);
+	};
+}
+
+char *g_opt_wasteOpen=NULL;
+int g_opt_forceProfileDlg=0;
+
+void ParseArgv (const char *lpszCmdParam, bool is_single_argv) {
+	for (;;) {
+		if (!is_single_argv) {
+			while (*lpszCmdParam == ' ') lpszCmdParam++;
+		}
+		if (!strnicmp(lpszCmdParam,"/profile=",9)
+		    || !strnicmp(lpszCmdParam,"--profile=",10))
+		{
+			int skip = 9;
+			if (*lpszCmdParam == '-') { skip = 10; }
+			if (lpszCmdParam[skip] && lpszCmdParam[skip] != ' ') {
+				char *p;
+				if (lpszCmdParam[skip] == '"') {
+					safe_strncpy(g_profile_name,lpszCmdParam+skip+1,sizeof(g_profile_name));
+					if ((p=strstr(g_profile_name,"\""))!=0) *p=0;
+					lpszCmdParam+=skip+1;
+					while (*lpszCmdParam != '"' && *lpszCmdParam) lpszCmdParam++;
+					if (*lpszCmdParam) lpszCmdParam++;
+				}
+				else {
+					safe_strncpy(g_profile_name,lpszCmdParam+skip,sizeof(g_profile_name));
+					if (!is_single_argv) {
+						if ((p=strstr(g_profile_name," "))!=0) *p=0;
+					}
+					lpszCmdParam+=skip+strlen(g_profile_name);
+				};
+				if (!g_profile_name[0]) g_opt_forceProfileDlg=1;
+			}
+			else {
+				g_opt_forceProfileDlg=1;
+				break;
+			};
+		}
+		else if (*lpszCmdParam) {
+			char scchar=' ';
+			if (*lpszCmdParam == '\"') scchar=*lpszCmdParam;
+			if (!strnicmp(lpszCmdParam+(scchar != ' '),"waste:",6) && !g_opt_wasteOpen) {
+				if (scchar != ' ') lpszCmdParam++;
+
+				g_opt_wasteOpen=strdup(lpszCmdParam);
+				char *t=g_opt_wasteOpen;
+				while (*t != scchar && *t) t++;
+				*t=0;
+
+				lpszCmdParam+=6;
+				while (*lpszCmdParam != scchar && *lpszCmdParam) lpszCmdParam++;
+			}
+			else break;
+		}
+		else break;
+	}
+}
+
+void main_ProcessKeyRequests() {
+    static int upcnt;
+    if (uploadPrompts.GetSize() && !upcnt) {
+        upcnt=1;
+        C_UploadRequest *t=uploadPrompts.Get(0);
+        uploadPrompts.Del(0);
+        char buf[1024];
+        char str[64];
+        MakeID128Str(t->get_guid(),str);
+        sprintf(str+strlen(str),":%d",t->get_idx());
+        if (strlen(t->get_fn()) > 768)
+            t->get_fn()[768]=0;
+        char sizebuf[64];
+        sizebuf[0]=0;
+        int fs_l,fs_h;
+        t->get_fsize(&fs_l,&fs_h);
+        if (fs_l != -1 || fs_h != -1) {
+            strcpy(sizebuf," (");
+            FormatSizeStr64(sizebuf+2,fs_l,fs_h);
+            strcat(sizebuf,")");
+        };
+
+// some small #defines to cut down on ifdefs
+#ifdef _DEFINE_WXUI
+#define UI_YESNO       wxYES_NO
+#define UI_YESNOCANCEL wxYES_NO|wxCANCEL
+#define UI_YES         wxYES
+#define UI_CANCEL      wxCANCEL
+#else
+#define UI_YESNO       MB_YESNO
+#define UI_YESNOCANCEL MB_YESNOCANCEL
+#define UI_YES         IDYES
+#define UI_CANCEL      IDCANCEL
+#endif
+
+        int f=UI_YESNO;
+        if (uploadPrompts.GetSize() > 1) {
+            f=UI_YESNOCANCEL;
+            sprintf(buf,"Accept upload of file named '%s'%s from user '%s'?\r\n(Cancel will remove all %d pending uploads)",t->get_fn(),sizebuf,t->get_nick(),uploadPrompts.GetSize()-1);
+        }
+        else {
+            sprintf(buf,"Accept upload of file named '%s'%s from user '%s'?",t->get_fn(),sizebuf,t->get_nick());
+        };
+
+#ifdef _DEFINE_WXUI
+        f=wxMessageBox(cstr_to_wxstr(buf), _T("WASTE - Accept Upload?"), f|wxICON_QUESTION);
+#else
+        f=MessageBox(NULL,buf,APP_NAME " - Accept Upload?",f|MB_TOPMOST|MB_ICONQUESTION);
+#endif
+
+        if (f==UI_YES) main_handleUpload(str,t->get_fn(),t);
+        else if (f == UI_CANCEL) {
+            while (uploadPrompts.GetSize()>0) {
+                delete uploadPrompts.Get(0);
+                uploadPrompts.Del(0);
+            };
+        };
+
+        delete t;
+        upcnt=0;
+    };
+    static int kdcnt;
+    if (keydistPrompts.GetSize() && !kdcnt) {
+        kdcnt=1;
+        C_KeydistRequest *t=keydistPrompts.Get(0);
+        keydistPrompts.Del(0);
+
+        if (!findPublicKeyFromKey(t->get_key())) {
+            char buf[1024];
+            char sign[SHA_OUTSIZE*2+1];
+            unsigned char hash[SHA_OUTSIZE];
+            SHAify m;
+            m.add((unsigned char *)t->get_key()->modulus,MAX_RSA_MODULUS_LEN);
+            m.add((unsigned char *)t->get_key()->exponent,MAX_RSA_MODULUS_LEN);
+            m.final(hash);
+            Bin2Hex(sign,hash,SHA_OUTSIZE);
+
+            sprintf(buf,"Authorize public key with signature '%s' from user '%s'?\r\n(Cancel will keep this key and any remaining prompts in the pending key list)",sign,t->get_nick());
+
+            int f;
+
+#ifdef _DEFINE_WXUI
+            f=wxMessageBox(cstr_to_wxstr(buf), _T("WASTE - Accept Public Key?"), wxYES_NO|wxCANCEL|wxICON_QUESTION);
+#else
+            f=MessageBox(NULL,buf,APP_NAME " - Accept Public Key?",MB_YESNOCANCEL|MB_TOPMOST|MB_ICONQUESTION);
+#endif
+
+            if (f==UI_YES) main_handleKeyDist(t,0);
+            else if (f == UI_CANCEL) {
+                main_handleKeyDist(t,1);
+                while (keydistPrompts.GetSize()>0) {
+                    main_handleKeyDist(keydistPrompts.Get(0),1);
+                    delete keydistPrompts.Get(0);
+                    keydistPrompts.Del(0);
+                };
+            };
+        };
+        delete t;
+        kdcnt=0;
+    }
+}
+
+#ifndef _DEFINE_WXUI
+
+static UINT CALLBACK fileHookProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM /*lParam*/)
+{ if (uMsg == WM_INITDIALOG) {
 		SetDlgItemText(hwndDlg,IDC_UPATH,g_filedlg_ulpath);
 	};
 	if (uMsg == WM_COMMAND) {
@@ -119,22 +349,12 @@
 				chat_ShowRoom(i.pszText,1);
 			}
 			else if (x == ID_WHOISUSER) {
-				T_Message msg;
-				//send a message to text that is /whois
-				C_MessageChat req;
-				req.set_chatstring("/whois");
-				req.set_dest(i.pszText);
-				req.set_src(g_regnick);
-				msg.data=req.Make();
-				msg.message_type=MESSAGE_CHAT;
-				if (msg.data) {
-					msg.message_length=msg.data->GetLength();
-					g_mql->send(&msg);
-				};
+				main_ID_WHOISUSER(i.pszText);
 			};
 		};
 	};
 }
+#endif  // _DEFINE_WXUI
 
 void handleWasteURL(char *url)
 {
@@ -152,16 +372,25 @@
 			chat_ShowRoom(tmp+6,2);
 		}
 		else if (!strnicmp(tmp,"?browse=",8)) {
+#ifndef _DEFINE_WXUI
 			SendMessage(g_mainwnd,WM_COMMAND,IDC_SEARCH,0);
+#else
+			g_mainwnd->ViewWindow(g_mainwnd->m_browser_dlg, 0);
+#endif
 			Search_Search(tmp+8);
 		};
 	}
 	else {
+#ifndef _DEFINE_WXUI
 		SendMessage(g_mainwnd,WM_COMMAND,IDC_SEARCH,0);
+#else
+		g_mainwnd->ViewWindow(g_mainwnd->m_browser_dlg, 0);
+#endif
 		Search_Search(tmp);
 	};
 }
 
+#ifndef _DEFINE_WXUI
 static void SendDirectoryToUser(HWND hwndDlg, char *fullfn, char *text, int offs)
 {
 	char maskstr[2048];
@@ -633,8 +862,7 @@
 	case WM_ENDSESSION:
 	case WM_DESTROY:
 		{
-			SaveNetQ();
-			SaveDbToDisk();
+			main_WM_DESTROY();
 			if (g_netstatus_wnd) DestroyWindow(g_netstatus_wnd);
 			if (g_xferwnd) DestroyWindow(g_xferwnd);
 			if (g_search_wnd) DestroyWindow(g_search_wnd);
@@ -652,23 +880,8 @@
 			};
 			if (p->code == NM_DBLCLK) {
 				if (p->idFrom == IDC_CHATROOMS || p->idFrom == IDC_USERS) {
-					HWND htree=p->hwndFrom;
-					HTREEITEM h=TreeView_GetSelection(htree);
-					if (h) {
-						char text[256];
-						TVITEM i;
-						i.mask=TVIF_TEXT|TVIF_HANDLE;
-						i.hItem=h;
-						i.pszText=text;
-						i.cchTextMax=sizeof(text);
-						text[0]=0;
-						TreeView_GetItem(htree,&i);
-						if (text[0]) {
-							chat_ShowRoom(text,2);
-							return 1;
-						};
-					};
-				};
+					return main_USERS_clicked(p->hwndFrom);
+				}
 			};
 			return 0;
 		};
@@ -688,80 +901,7 @@
 			};
 
 			if (wParam==1) {
-				static int upcnt;
-				if (uploadPrompts.GetSize() && !upcnt) {
-					upcnt=1;
-					C_UploadRequest *t=uploadPrompts.Get(0);
-					uploadPrompts.Del(0);
-					char buf[1024];
-					char str[64];
-					MakeID128Str(t->get_guid(),str);
-					sprintf(str+strlen(str),":%d",t->get_idx());
-					if (strlen(t->get_fn()) > 768)
-						t->get_fn()[768]=0;
-					int f=MB_YESNO;
-					char sizebuf[64];
-					sizebuf[0]=0;
-					int fs_l,fs_h;
-					t->get_fsize(&fs_l,&fs_h);
-					if (fs_l != -1 || fs_h != -1) {
-						strcpy(sizebuf," (");
-						FormatSizeStr64(sizebuf+2,fs_l,fs_h);
-						strcat(sizebuf,")");
-					};
-					if (uploadPrompts.GetSize() > 1) {
-						f=MB_YESNOCANCEL;
-						sprintf(buf,"Accept upload of file named '%s'%s from user '%s'?\r\n(Cancel will remove all %d pending uploads)",t->get_fn(),sizebuf,t->get_nick(),uploadPrompts.GetSize()-1);
-					}
-					else {
-						sprintf(buf,"Accept upload of file named '%s'%s from user '%s'?",t->get_fn(),sizebuf,t->get_nick());
-					};
-
-					f=MessageBox(NULL,buf,APP_NAME " - Accept Upload?",f|MB_TOPMOST|MB_ICONQUESTION);
-					if (f==IDYES) main_handleUpload(str,t->get_fn(),t);
-					else if (f == IDCANCEL) {
-						while (uploadPrompts.GetSize()>0) {
-							delete uploadPrompts.Get(0);
-							uploadPrompts.Del(0);
-						};
-					};
-
-					delete t;
-					upcnt=0;
-				};
-				static int kdcnt;
-				if (keydistPrompts.GetSize() && !kdcnt) {
-					kdcnt=1;
-					C_KeydistRequest *t=keydistPrompts.Get(0);
-					keydistPrompts.Del(0);
-
-					if (!findPublicKeyFromKey(t->get_key())) {
-						char buf[1024];
-						char sign[SHA_OUTSIZE*2+1];
-						unsigned char hash[SHA_OUTSIZE];
-						SHAify m;
-						m.add((unsigned char *)t->get_key()->modulus,MAX_RSA_MODULUS_LEN);
-						m.add((unsigned char *)t->get_key()->exponent,MAX_RSA_MODULUS_LEN);
-						m.final(hash);
-						Bin2Hex(sign,hash,SHA_OUTSIZE);
-
-						sprintf(buf,"Authorize public key with signature '%s' from user '%s'?\r\n(Cancel will keep this key and any remaining prompts in the pending key list)",sign,t->get_nick());
-
-						int f=MessageBox(NULL,buf,APP_NAME " - Accept Public Key?",MB_YESNOCANCEL|MB_TOPMOST|MB_ICONQUESTION);
-
-						if (f==IDYES) main_handleKeyDist(t,0);
-						else if (f == IDCANCEL) {
-							main_handleKeyDist(t,1);
-							while (keydistPrompts.GetSize()>0) {
-								main_handleKeyDist(keydistPrompts.Get(0),1);
-								delete keydistPrompts.Get(0);
-								keydistPrompts.Del(0);
-							};
-						};
-					};
-					delete t;
-					kdcnt=0;
-				};
+                main_ProcessKeyRequests();
 
 				static int in_timer;
 				if (!in_timer) {
@@ -945,54 +1085,10 @@
 		RegisterClass(&wc);
 	};
 
-	char *wasteOpen=NULL;
-	int force_profiledlg=0;
-	for (;;) {
-		while (*lpszCmdParam == ' ') lpszCmdParam++;
-		if (!strnicmp(lpszCmdParam,"/profile=",9)) {
-			if (lpszCmdParam[9] && lpszCmdParam[9] != ' ') {
-				char *p;
-				if (lpszCmdParam[9] == '"') {
-					safe_strncpy(g_profile_name,lpszCmdParam+10,sizeof(g_profile_name));
-					if ((p=strstr(g_profile_name,"\""))!=0) *p=0;
-					lpszCmdParam+=10;
-					while (*lpszCmdParam != '"' && *lpszCmdParam) lpszCmdParam++;
-					if (*lpszCmdParam) lpszCmdParam++;
-				}
-				else {
-					safe_strncpy(g_profile_name,lpszCmdParam+9,sizeof(g_profile_name));
-					if ((p=strstr(g_profile_name," "))!=0) *p=0;
-					lpszCmdParam+=9+strlen(g_profile_name);
-				};
-				if (!g_profile_name[0]) force_profiledlg=1;
-			}
-			else {
-				force_profiledlg=1;
-				break;
-			};
-		}
-		else if (*lpszCmdParam) {
-			char scchar=' ';
-			if (*lpszCmdParam == '\"') scchar=*lpszCmdParam;
-			if (!strnicmp(lpszCmdParam+(scchar != ' '),"waste:",6) && !wasteOpen) {
-				if (scchar != ' ') lpszCmdParam++;
-
-				wasteOpen=strdup(lpszCmdParam);
-				char *t=wasteOpen;
-				while (*t != scchar && *t) t++;
-				*t=0;
-
-				lpszCmdParam+=6;
-				while (*lpszCmdParam != scchar && *lpszCmdParam) lpszCmdParam++;
-			}
-			else break;
-		}
-		else break;
-	};
-
 	MYSRAND();
+	ParseArgv(lpszCmdParam, false);
 
-	if (Prefs_SelectProfile(force_profiledlg)) return 1;
+	if (Prefs_SelectProfile(g_opt_forceProfileDlg)) return 1;
 
 	strcat(g_config_prefix,g_profile_name);
 
@@ -1010,12 +1106,13 @@
 			else ShowWindow(wndpos,SW_SHOW);
 			SetForegroundWindow(wndpos);
 
-			if (wasteOpen) {
-				cds.cbData=strlen(wasteOpen)+1;
-				cds.lpData=(PVOID)wasteOpen;
+			if (g_opt_wasteOpen) {
+				cds.cbData=strlen(g_opt_wasteOpen)+1;
+				cds.lpData=(PVOID)g_opt_wasteOpen;
 				cds.dwData=0xB3EF;
 				SendMessage(wndpos,WM_COPYDATA,NULL,(LPARAM)&cds);
-				free(wasteOpen);
+				free(g_opt_wasteOpen);
+				g_opt_wasteOpen = NULL;
 			};
 
 			return 1;
@@ -1080,9 +1177,10 @@
 
 	CreateDialog(g_hInst,MAKEINTRESOURCE(IDD_MAIN),GetDesktopWindow(),Main_DlgProc);
 
-	if (wasteOpen) {
-		handleWasteURL(wasteOpen);
-		free(wasteOpen);
+	if (g_opt_wasteOpen) {
+		handleWasteURL(g_opt_wasteOpen);
+		free(g_opt_wasteOpen);
+		g_opt_wasteOpen = NULL;
 	};
 
 	RunPerforms();
@@ -1132,3 +1230,14 @@
 	log_UpdatePath(NULL);
 	return 0;
 }
+#endif /* _DEFINE_WXUI */
+
+void
+ShowTransfersWindow ()
+{
+#ifndef _DEFINE_WXUI
+SendMessage(g_mainwnd,WM_COMMAND,ID_VIEW_TRANSFERS,0);
+#else
+g_mainwnd->ViewWindow(g_mainwnd->m_xfers_dlg, 0);
+#endif
+}
diff -b -N -ru waste-source-1.5-beta-2/main.hpp latest/main.hpp
--- waste-source-1.5-beta-2/main.hpp	2004-06-15 08:05:00.000000000 +0300
+++ latest/main.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -125,7 +125,7 @@
 
 
 //win32 specific shit
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	void handleWasteURL(char *url);
 
 	void RunKeyGen(HWND hwndParent, char *keyout);
@@ -136,10 +136,14 @@
 	#define WM_USER_CLEANUPSELECTED (WM_USER+0x17)
 
 	extern int g_hidewnd_state;
+	#endif//WIN32
+
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 	extern HMENU g_context_menus;
 	extern HWND g_mainwnd;
 	extern HICON g_hSmallIcon;
 	extern HINSTANCE g_hInst;
+
 	void UserListContextMenu(HWND htree);
 	void UserListOnDropFiles(HWND hwndDlg, HWND htree, HDROP hdrop, char *forcenick);
 	#endif//WIN32
@@ -148,5 +152,14 @@
 		#define SIGHUP 1 /* Hangup (POSIX).  */
 	#endif
 
-#endif//_MAIN_H_
+#if (!defined(_WIN32))&&defined(_DEFINE_SRV)
+#define HWND int
+#endif
+
+int waste_main_start(int argc, char **argv);
+int waste_main_poll();
+int waste_main_exit();
+void ShowTransfersWindow();
+void PostMessageTitleUpdate(HWND wnd);
 
+#endif//_MAIN_H_
diff -b -N -ru waste-source-1.5-beta-2/mqueue.cpp latest/mqueue.cpp
--- waste-source-1.5-beta-2/mqueue.cpp	2004-06-14 15:17:00.000000000 +0300
+++ latest/mqueue.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -219,7 +219,7 @@
 	}
 	else {
 		int do_saturate=(g_throttle_flag&32) && (m_con->get_saturatemode()&1);
-		int satsize=min(m_con->getMaxSendSize()/64,216);
+		int satsize=waste_min(m_con->getMaxSendSize()/64,216);
 		if (satsize < 4) satsize=4;
 		if (!m_msg_used && do_saturate && m_con->send_bytes_in_queue() < 40+satsize*2 && (maxbytesend < 0 || m_con->send_bytes_in_queue()+40+satsize < maxbytesend)) saturate(satsize);
 
@@ -372,7 +372,7 @@
 	if (m_msg_used>0) {
 		if (m_msg->data) m_msg->data->Unlock();
 		m_msg_used--;
-		if (m_msg_used) memcpy(m_msg,m_msg+1,sizeof(T_Message)*m_msg_used);
+		if (m_msg_used) w_memmove(m_msg,m_msg+1,sizeof(T_Message)*m_msg_used);
 	};
 }
 
diff -b -N -ru waste-source-1.5-beta-2/mqueuelist.cpp latest/mqueuelist.cpp
--- waste-source-1.5-beta-2/mqueuelist.cpp	2004-06-14 15:17:00.000000000 +0300
+++ latest/mqueuelist.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -30,7 +30,7 @@
 	m_queues=new C_ItemList<C_MessageQueue>;
 	m_local_route=new C_MessageQueue(NULL,1);
 	m_max_ttl=maxttl;
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 		m_lv=NULL;
 	#endif
 	m_stat_route_errors=0;
@@ -206,7 +206,8 @@
 		};
 
 		if (s == C_Connection::STATE_ERROR || s == C_Connection::STATE_CLOSED) {
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 				if (m_lv) {
 					int i=m_lv->FindItemByParam((int)cm->get_con());
 					if (i != -1) {
@@ -236,8 +237,13 @@
 					g_forceip_dynip_addr=INADDR_NONE;
 				};
 			};
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+#ifdef _DEFINE_WXUI
+			extern void netkern_set_title();
+			netkern_set_title();
+#else
 				PostMessage(g_netstatus_wnd,WM_USER_TITLEUPDATE,0,0);
+#endif
 			#endif
 		}
 		else {
diff -b -N -ru waste-source-1.5-beta-2/mqueuelist.hpp latest/mqueuelist.hpp
--- waste-source-1.5-beta-2/mqueuelist.hpp	2004-06-14 15:28:00.000000000 +0300
+++ latest/mqueuelist.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -22,7 +22,7 @@
 #define _C_MQUEUELIST_H_
 
 #include "mqueue.hpp"
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 #include "listview.hpp"
 #endif
 #include "itemlist.hpp"
@@ -54,7 +54,7 @@
 
 	static unsigned char GetMessagePriority(int type);
 
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || _DEFINE_WXUI
 		void SetStatusListView(W_ListView *lv) {m_lv=lv;}
 	#endif
 
@@ -68,7 +68,7 @@
 
 	MessageQueueCallback m_got_message;
 
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || _DEFINE_WXUI
 		W_ListView *m_lv;
 	#endif
 };
diff -b -N -ru waste-source-1.5-beta-2/netkern.cpp latest/netkern.cpp
--- waste-source-1.5-beta-2/netkern.cpp	2004-06-15 01:58:00.000000000 +0300
+++ latest/netkern.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -24,7 +24,7 @@
 #include "netq.hpp"
 #include "netkern.hpp"
 
-#ifdef _DEFINE_SRV
+#if defined(_DEFINE_SRV) && !defined(_DEFINE_WXUI)
 	#include "resourcesrv.hpp"
 #else
 	#include "resource.hpp"
@@ -36,14 +36,85 @@
 #include "m_ping.hpp"
 #include "m_lcaps.hpp"
 #include "srchwnd.hpp"
+#include "platform.hpp"
 
 C_ItemList<C_Connection> g_new_net;
+int g_keepdeadconns;
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	W_ListView g_lvnetcons;
 	HWND g_netstatus_wnd;
 #endif
 
+#if defined(_DEFINE_WXUI)
+#include "wxnetstat.h"
+
+WxNetStatDialog *g_netstat_dlg;
+
+void netkern_find_wxwidgets(WxNetStatDialog *dlg)
+{
+	g_netstat_dlg = dlg;
+
+	g_lvnetcons.setwnd(g_netstat_dlg->m_hostlist);
+	g_lvnetcons.AddCol("Status",g_config->ReadInt(CONFIG_net_col3,CONFIG_net_col3_DEFAULT));
+	g_lvnetcons.AddCol("Host",g_config->ReadInt(CONFIG_net_col1,CONFIG_net_col1_DEFAULT));
+	g_lvnetcons.AddCol("Rating",g_config->ReadInt(CONFIG_net_col2,CONFIG_net_col2_DEFAULT));
+	g_lvnetcons.AddCol("User (key)",g_config->ReadInt(CONFIG_net_col4,CONFIG_net_col4_DEFAULT));
+	g_mql->SetStatusListView(&g_lvnetcons);
+
+	wxString keepupstr(L"");
+	keepupstr.Printf(_T("%d"), g_keepup);
+	g_netstat_dlg->m_num_con_up->SetValue(keepupstr);
+
+	#if defined(SAVE_CB_HOSTS)&&(SAVE_CB_HOSTS)
+		{
+			int x;
+			int p=g_config->ReadInt(CONFIG_concb_pos,CONFIG_concb_pos_DEFAULT);
+			for (x = 0 ; x < MAX_CBHOSTS; x ++) {
+				char buf[123];
+				sprintf(buf,"concb_%d",(p+x)%MAX_CBHOSTS);
+				const char *o=g_config->ReadString(buf,"");
+#ifdef _DEFINE_WXUI
+				wxString unibuf = cstr_to_wxstr(o);
+				if (*o) g_netstat_dlg->m_newconnection->Append(unibuf);
+#else
+				if (*o) SendDlgItemMessage(hwndDlg,IDC_NEWCONNECTION,CB_INSERTSTRING,0,(LPARAM)o);
+#endif
+			};
+		};
+	#endif
+
+	int netkern_WM_NOTIFY_IDC_NETCONS ();
+	netkern_WM_NOTIFY_IDC_NETCONS();
+}
+
+#elif (!defined(_DEFINE_SRV))
+
+void netkern_setup_win32 (HWND hwndDlg)
+{
+	g_lvnetcons.setwnd(GetDlgItem(hwndDlg,IDC_NETCONS));
+	g_lvnetcons.AddCol("Status",g_config->ReadInt(CONFIG_net_col3,CONFIG_net_col3_DEFAULT));
+	g_lvnetcons.AddCol("Host",g_config->ReadInt(CONFIG_net_col1,CONFIG_net_col1_DEFAULT));
+	g_lvnetcons.AddCol("Rating",g_config->ReadInt(CONFIG_net_col2,CONFIG_net_col2_DEFAULT));
+	g_lvnetcons.AddCol("User (key)",g_config->ReadInt(CONFIG_net_col4,CONFIG_net_col4_DEFAULT));
+	g_mql->SetStatusListView(&g_lvnetcons);
+	SetDlgItemInt(hwndDlg,IDC_NUMCONUP,g_keepup,0);
+	#if defined(SAVE_CB_HOSTS)&&(SAVE_CB_HOSTS)
+		{
+			int x;
+			int p=g_config->ReadInt(CONFIG_concb_pos,CONFIG_concb_pos_DEFAULT);
+			for (x = 0 ; x < MAX_CBHOSTS; x ++) {
+				char buf[123];
+				sprintf(buf,"concb_%d",(p+x)%MAX_CBHOSTS);
+				const char *o=g_config->ReadString(buf,"");
+				if (*o) SendDlgItemMessage(hwndDlg,IDC_NEWCONNECTION,CB_INSERTSTRING,0,(LPARAM)o);
+			};
+		};
+	#endif
+}
+
+#endif
+
 #define SYNC_SIZE 16
 static char g_con_str[SYNC_SIZE+1]="MUGWHUMPJISMSYN3";
 
@@ -69,7 +140,7 @@
 			}
 			else {
 				c->send_bytes(g_con_str,SYNC_SIZE);
-				#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+				#if (!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 					struct in_addr in;
 					in.s_addr=addr;
 					char *a=inet_ntoa(in);
@@ -79,9 +150,11 @@
 					g_lvnetcons.SetItemText(0,1,str2);
 					g_lvnetcons.SetItemText(0,2,"100");
 				#endif
+
 				g_new_net.Add(c);
-				#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-					PostMessage(g_netstatus_wnd,WM_USER_TITLEUPDATE,0,0);
+
+				#if !defined(_DEFINE_SRV)
+					PostMessageTitleUpdate(g_netstatus_wnd);
 				#endif
 			};
 		};
@@ -110,7 +183,7 @@
 		};
 	};
 
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 		int netqpos=-1;
 		int i,l;
 		l=g_lvnetcons.GetCount();
@@ -135,7 +208,7 @@
 		newcon->send_bytes(g_con_str,SYNC_SIZE);
 		g_new_net.Add(newcon);
 
-		#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+		#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 			if (netqpos<0) {
 				char buf[1024];
 				sprintf(buf,"%s:%d",text,(int)(unsigned short)port);
@@ -147,8 +220,10 @@
 				g_lvnetcons.SetItemParam(netqpos,(int)newcon);
 				g_lvnetcons.SetItemText(netqpos,0,"Connecting");
 			};
-			PostMessage(g_netstatus_wnd,WM_USER_TITLEUPDATE,0,0);
+
+			PostMessageTitleUpdate(g_netstatus_wnd);
 		#endif//WIN32
+
 	};
 }
 
@@ -193,9 +268,11 @@
 
 static void HandleNewOutCons()
 {
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 		static unsigned int next_runitem;
 
+	g_keepdeadconns = g_config->ReadInt(CONFIG_keepdeadconns,CONFIG_keepdeadconns_DEFAULT);
+
 		int a=GetTickCount()-next_runitem;
 		if (!next_runitem || a>=0) {
 			if (!g_mql->GetNumQueues()) { //invalidate cache if no queues =)
@@ -221,6 +298,7 @@
 
 						char rat[32];
 						g_lvnetcons.GetText(x,2,rat,sizeof(rat));
+
 						int thisrat=rat[0] ? atoi(rat) : -1;
 						if (max_pos < 0 || thisrat > max_rat) {
 							g_lvnetcons.GetText(x,1,text,sizeof(text));
@@ -261,7 +339,7 @@
 						g_lvnetcons.GetText(max_pos,2,rat,sizeof(rat));
 						g_lvnetcons.DeleteItem(max_pos);
 						int irat=atoi(rat);
-						if (irat>0) {
+					if (g_keepdeadconns || irat>0) {
 							AddConnection(text,port,irat);
 						};
 					};
@@ -269,13 +347,14 @@
 			};
 			next_runitem=GetTickCount()+NEXTITEM_NEW_OUT_CONNECTION_DELAY;
 		};
-	#endif// defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#endif// defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 	int x;
 	for (x = 0; x < g_new_net.GetSize(); x ++) {
 		C_Connection *cc=g_new_net.Get(x);
 		int s=cc->run(-1,-1);
 		if (s == C_Connection::STATE_DIENOW) {
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 				int a=g_lvnetcons.FindItemByParam((int)cc);
 				if (a >= 0) {
 					g_lvnetcons.DeleteItem(a);
@@ -287,12 +366,14 @@
 			log_printf(ds_Warning,"Could not connect to host: host %s not in access list!",ad);
 			delete cc;
 			g_new_net.Del(x--);
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-				PostMessage(g_netstatus_wnd,WM_USER_TITLEUPDATE,0,0);
-			#endif
+
+#ifndef _DEFINE_SRV
+			PostMessageTitleUpdate(g_netstatus_wnd);
+#endif /* _DEFINE_SRV */
+
 		}
 		else if (s == C_Connection::STATE_CLOSED || s == C_Connection::STATE_ERROR) {
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 				unsigned short port=cc->get_remote_port();
 				int irat=0;
 				int a=g_lvnetcons.FindItemByParam((int)g_new_net.Get(x));
@@ -322,6 +403,11 @@
 						};
 
 						if (irat < 0) irat=0;
+
+						struct in_addr in;
+						in.s_addr=cc->get_remote();
+						char *ad=inet_ntoa(in);
+						log_printf(ds_Warning,"Closed/Error: host %s",ad);
 						add_to_netq(cc->get_remote(),port,irat,1);
 					};
 				};
@@ -332,15 +418,16 @@
 			log_printf(ds_Warning,"Could not connect to host: failed connect to %s!", ad);
 			delete cc;
 			g_new_net.Del(x--);
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-				PostMessage(g_netstatus_wnd,WM_USER_TITLEUPDATE,0,0);
-			#endif
+
+#ifndef _DEFINE_SRV
+						PostMessageTitleUpdate(g_netstatus_wnd);
+#endif /* _DEFINE_SRV */
 		}
 		else if (cc->recv_bytes_available()>=(SYNC_SIZE+cc->get_RandomCrapLen())) {
 			char b[SYNC_SIZE];
 			cc->recv_bytes(b,SYNC_SIZE);
 			if (!cc->PopRandomCrap()) {
-				#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+				#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 					int a=g_lvnetcons.FindItemByParam((int)cc);
 					if (a >= 0) {
 						g_lvnetcons.DeleteItem(a);
@@ -349,12 +436,13 @@
 				log_printf(ds_Error,"Cannot pop random crap. Bad shit happened!");
 				delete cc;
 				g_new_net.Del(x--);
-				#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-					PostMessage(g_netstatus_wnd,WM_USER_TITLEUPDATE,0,0);
-				#endif
+
+#ifndef _DEFINE_SRV
+								PostMessageTitleUpdate(g_netstatus_wnd);
+#endif /* _DEFINE_SRV */
 			}
 			else if (memcmp(b,g_con_str,SYNC_SIZE)) {
-				#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+				#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 					int a=g_lvnetcons.FindItemByParam((int)cc);
 					if (a >= 0) {
 						g_lvnetcons.DeleteItem(a);
@@ -368,9 +456,10 @@
 				log_printf(ds_Warning,"Could not connect to host: failed auth by %s (%s)! Wrong network password?",ad,descstr_l);
 				delete cc;
 				g_new_net.Del(x--);
-				#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-					PostMessage(g_netstatus_wnd,WM_USER_TITLEUPDATE,0,0);
-				#endif
+
+#ifndef _DEFINE_SRV
+								PostMessageTitleUpdate(g_netstatus_wnd);
+#endif /* _DEFINE_SRV */
 			}
 			else {
 				char descstr_l[16+SHA_OUTSIZE*2+32];
@@ -383,9 +472,9 @@
 
 				if (cc->get_remote_port()==0) {
 					int in1=g_config->ReadInt(CONFIG_limitInCons,CONFIG_limitInCons_DEFAULT);
-					in1=max(0,in1);
+					in1=waste_max(0,in1);
 					int in2=g_config->ReadInt(CONFIG_limitInConsPHost,CONFIG_limitInConsPHost_DEFAULT);
-					in2=max(0,in2);
+					in2=waste_max(0,in2);
 
 					int numqueues=g_mql->GetNumQueues();
 					int numincons=0,numsamecons=0,n;
@@ -411,7 +500,7 @@
 						if (in1>0 && numincons>=in1) {
 							log_printf(ds_Warning,"Limiter: Host %s as %s cannot connect, because incoming connection limit is reached!",ad,descstr_l);
 						};
-						#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+						#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 							int a=g_lvnetcons.FindItemByParam((int)cc);
 							if (a >= 0) {
 								g_lvnetcons.DeleteItem(a);
@@ -420,14 +509,15 @@
 						delete cc;
 						g_new_net.Del(x--);
 						allowconnection=false;
-						#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-							PostMessage(g_netstatus_wnd,WM_USER_TITLEUPDATE,0,0);
-						#endif
+
+#ifndef _DEFINE_SRV
+												PostMessageTitleUpdate(g_netstatus_wnd);
+#endif /* _DEFINE_SRV */
 					}
 				};
 
 				if (allowconnection) {
-					#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+					#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 						int a=g_lvnetcons.FindItemByParam((int)cc);
 						if (a >= 0) {
 							char newconstr[512];
@@ -460,9 +550,10 @@
 					g_mql->AddMessageQueue(newq);
 					DoPing(newq);
 					g_new_net.Del(x--);
-					#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-						PostMessage(g_netstatus_wnd,WM_USER_TITLEUPDATE,0,0);
-					#endif
+
+#ifndef _DEFINE_SRV
+					PostMessageTitleUpdate(g_netstatus_wnd);
+#endif /* _DEFINE_SRV */
 				};
 			};
 		};
@@ -479,11 +570,12 @@
 {
 	C_Connection *newcon;
 	newcon=new C_Connection(str,port,g_dns);
+
 	newcon->send_bytes(g_con_str,SYNC_SIZE);
 	g_new_net.Add(newcon);
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 		char str2[512];
-		sprintf(str2,"%s:%d",str,(int)(unsigned short)port);
+		sprintf(str2,"%s:%d",str,(int)port);
 		g_lvnetcons.InsertItem(0,"Connecting",(int)newcon);
 		g_lvnetcons.SetItemText(0,1,str2);
 		sprintf(str2,"%d",rating);
@@ -578,61 +670,10 @@
 	};
 }
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-	BOOL WINAPI Net_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
-	{
-		static dlgSizeInfo sizeinf={"net",90,140,440,330};
-		static ChildWndResizeItem rlist[]={
-			{IDC_ADDCONNECTION,0x1010},
-			{IDC_NETCONS,0x0011},
-			{IDC_NEWCONNECTION,0x0010},
-		};
-		switch (uMsg)
-		{
-		case WM_GETMINMAXINFO:
-			{
-				LPMINMAXINFO m=(LPMINMAXINFO)lParam;
-				if (m) {
-					m->ptMinTrackSize.x=245;
-					m->ptMinTrackSize.y=180;
-				};
-				return 0;
-			};
-		case WM_CLOSE:
-			{
-				CheckMenuItem(GetMenu(g_mainwnd),
-					ID_VIEW_NETWORKCONNECTIONS,MF_UNCHECKED|MF_BYCOMMAND);
-				ShowWindow(hwndDlg,SW_HIDE);
-				g_config->WriteInt(CONFIG_net_vis,0);
-				return 0;
-			};
-		case WM_SHOWWINDOW:
-			{
-				static int m_hack;
-				if (!m_hack) {
-					m_hack=1;
-					int m=g_config->ReadInt(CONFIG_net_maximized,CONFIG_net_maximized_DEFAULT);
-					handleDialogSizeMsgs(hwndDlg,WM_INITDIALOG,0,0,&sizeinf);
-					if (m) ShowWindow(hwndDlg,SW_SHOWMAXIMIZED);
-				};
-				return 0;
-			};
-		case WM_MOVE:
-			{
-				handleDialogSizeMsgs(hwndDlg,uMsg,wParam,lParam,&sizeinf);
-				return 0;
-			};
-		case WM_SIZE:
-			{
-				if (wParam != SIZE_MINIMIZED) {
-					childresize_resize(hwndDlg,rlist,sizeof(rlist)/sizeof(rlist[0]));
-					handleDialogSizeMsgs(hwndDlg,uMsg,wParam,lParam,&sizeinf);
-				};
-				return 0;
-			};
-		case WM_TIMER:
-			{
-				if (IsWindowVisible(hwndDlg)) {
+#ifndef _DEFINE_SRV
+
+int netkern_WM_TIMER ()
+{
 					int l=g_lvnetcons.GetCount();
 					int x;
 					for (x = 0; x < l; x ++) {
@@ -660,55 +701,23 @@
 
 							g_lvnetcons.SetItemText(x,0,str);
 						};
-					};
-				};
+	}
 				return 0;
-			};
-		case WM_INITDIALOG:
-			{
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_REMOVECATCH),"Disconnect and remove selected host(s)");
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_CONNECTCATCH),"Connect to selected host(s)");
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_REMOVECONNECTION),"Disconnect from selected host(s)");
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_ADDCONNECTION),"Connect to host specified in text box");
-
-				// TODO: check where this button's gone
-				//SendDlgItemMessage(hwndDlg,IDC_CLEAR,BM_SETIMAGE,IMAGE_ICON,
-				//(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_CLEARALL),IMAGE_ICON,16,16,0));
-				SendDlgItemMessage(hwndDlg,IDC_REMOVECATCH,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_DISCONNECT),IMAGE_ICON,16,16,0));
-				SendDlgItemMessage(hwndDlg,IDC_CONNECTCATCH,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_CONNECT),IMAGE_ICON,16,16,0));
+}
 
-				SendDlgItemMessage(hwndDlg,IDC_REMOVECONNECTION,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_STOPDL),IMAGE_ICON,16,16,0));
-				SendDlgItemMessage(hwndDlg,IDC_ADDCONNECTION,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_CONNECT),IMAGE_ICON,16,16,0));
+int netkern_WM_CLOSE()
+{
+#ifndef _DEFINE_WXUI
+	CheckMenuItem(GetMenu(g_mainwnd),
+		ID_VIEW_NETWORKCONNECTIONS,MF_UNCHECKED|MF_BYCOMMAND);
+	ShowWindow(hwndDlg,SW_HIDE);
+	g_config->WriteInt(CONFIG_net_vis,0);
+#endif
+	return 0;
+}
 
-				SetTimer(hwndDlg,1,250,NULL);
-				g_lvnetcons.setwnd(GetDlgItem(hwndDlg,IDC_NETCONS));
-				g_lvnetcons.AddCol("Status",g_config->ReadInt(CONFIG_net_col3,CONFIG_net_col3_DEFAULT));
-				g_lvnetcons.AddCol("Host",g_config->ReadInt(CONFIG_net_col1,CONFIG_net_col1_DEFAULT));
-				g_lvnetcons.AddCol("Rating",g_config->ReadInt(CONFIG_net_col2,CONFIG_net_col2_DEFAULT));
-				g_lvnetcons.AddCol("User (key)",g_config->ReadInt(CONFIG_net_col4,CONFIG_net_col4_DEFAULT));
-				g_mql->SetStatusListView(&g_lvnetcons);
-				SetDlgItemInt(hwndDlg,IDC_NUMCONUP,g_keepup,0);
-				childresize_init(hwndDlg,rlist,sizeof(rlist)/sizeof(rlist[0]));
-				#if defined(SAVE_CB_HOSTS)&&(SAVE_CB_HOSTS)
-					{
-						int x;
-						int p=g_config->ReadInt(CONFIG_concb_pos,CONFIG_concb_pos_DEFAULT);
-						for (x = 0 ; x < MAX_CBHOSTS; x ++) {
-							char buf[123];
-							sprintf(buf,"concb_%d",(p+x)%MAX_CBHOSTS);
-							const char *o=g_config->ReadString(buf,"");
-							if (*o) SendDlgItemMessage(hwndDlg,IDC_NEWCONNECTION,CB_INSERTSTRING,0,(LPARAM)o);
-						};
-					};
-				#endif
-			};
-		case WM_USER_TITLEUPDATE:
-			{
-				char buf[1024];
+int set_netkern_title (char *buf, int len)
+{
 				strcpy(buf,"Network Status");
 				int numcons=g_mql->GetNumQueues();
 				int numneg=g_new_net.GetSize();
@@ -725,83 +734,98 @@
 				else strcat(buf," (network down)");
 
 				strcat(buf," - " APP_NAME);
-				SetWndTitle(hwndDlg,buf);
-				return 0;
-			};
-		case WM_DESTROY:
-			{
-				g_config->WriteInt(CONFIG_net_col3,g_lvnetcons.GetColumnWidth(0));
-				g_config->WriteInt(CONFIG_net_col1,g_lvnetcons.GetColumnWidth(1));
-				g_config->WriteInt(CONFIG_net_col2,g_lvnetcons.GetColumnWidth(2));
-				g_config->WriteInt(CONFIG_net_col4,g_lvnetcons.GetColumnWidth(3));
-				return 0;
-			};
-		case WM_NOTIFY:
-			{
-				LPNMHDR l=(LPNMHDR)lParam;
-				if (l->idFrom==IDC_NETCONS) {
-					if (l->code == NM_DBLCLK) {
-						SendMessage(hwndDlg,WM_COMMAND,IDC_CONNECTCATCH,0);
-					};
-					int isSel=!!ListView_GetSelectedCount(l->hwndFrom);
-					int isCon=0;
-					int isDiscon=0;
-					if (isSel) {
-						int a,n=g_lvnetcons.GetCount();
-						for (a = 0; a < n; a ++) {
-							if (g_lvnetcons.GetSelected(a)) {
-								if (g_lvnetcons.GetParam(a)) isCon++;
-								else isDiscon++;
-							};
-							if (isCon && isDiscon) break;
-						};
-					};
-					EnableWindow(GetDlgItem(hwndDlg,IDC_REMOVECONNECTION),isCon);
-					EnableWindow(GetDlgItem(hwndDlg,IDC_CONNECTCATCH),isDiscon);
-					EnableWindow(GetDlgItem(hwndDlg,IDC_REMOVECATCH),isSel);
-				};
 				return 0;
-			};
-		case WM_COMMAND:
-			{
-				switch (LOWORD(wParam))
-				{
-				case IDC_NEWCONNECTION:
-					{
-						if (HIWORD(wParam) == CBN_SELCHANGE) {
-							EnableWindow(GetDlgItem(hwndDlg,IDC_ADDCONNECTION),1);
-						}
-						else {
-							char buf[32];
-							GetDlgItemText(hwndDlg,IDC_NEWCONNECTION,buf,sizeof(buf));
-							EnableWindow(GetDlgItem(hwndDlg,IDC_ADDCONNECTION),!!buf[0]);
-						};
-						return 0;
-					};
-				case IDC_NUMCONUP:
-					{
+}
+
+void netkern_set_title() {
+#ifdef _DEFINE_WXUI
+	char buf[1024];
+	set_netkern_title(buf, 1023);
+	wxString wxbuf = cstr_to_wxstr(buf);
+	g_netstat_dlg->SetTitle (wxbuf);
+#endif
+}
+
+int netkern_WM_COMMAND_IDC_NUMCONUP() {
 						int r;
+
+#ifdef _DEFINE_WXUI
+	long lr;
+	bool b = g_netstat_dlg->m_num_con_up->GetValue().ToLong(&lr);
+	r = (int) lr;
+#else
 						BOOL b;
 						r=GetDlgItemInt(hwndDlg,IDC_NUMCONUP,&b,0);
+#endif
 						if (b) {
 							g_keepup=r;
 							g_config->WriteInt(CONFIG_keepupnet,r);
 						};
 						return 0;
+}
+
+int netkern_WM_COMMAND_IDC_NEWCONNECTION (int is_selchange) {
+	if (is_selchange) {
+#ifdef _DEFINE_WXUI
+		wxEnableWindow(g_netstat_dlg->m_addconnection,1);
+#else
+		EnableWindow(GetDlgItem(hwndDlg,IDC_ADDCONNECTION),1);
+#endif
+	}
+	else {
+		char buf[32];
+#ifdef _DEFINE_WXUI
+		wxGetDlgItemText(g_netstat_dlg->m_newconnection,buf,31);
+		wxEnableWindow(g_netstat_dlg->m_addconnection,!!buf[0]);
+#else
+		GetDlgItemText(hwndDlg,IDC_NEWCONNECTION,buf,31);
+		EnableWindow(GetDlgItem(hwndDlg,IDC_ADDCONNECTION),!!buf[0]);
+#endif
 					};
-				case IDC_ADDCONNECTION:
-					{
+	return 0;
+}
+
+int netkern_WM_COMMAND_IDC_ADDCONNECTION() {
 						char text[512];
 						unsigned short port=CONFIG_port_DEFAULT;
 						char *p=text;
+
+#ifdef _DEFINE_WXUI
+	wxGetDlgItemText(g_netstat_dlg->m_newconnection,text,511);
+#else
 						GetDlgItemText(hwndDlg,IDC_NEWCONNECTION,text,511);
+#endif
+
 						if (strlen(text)>0)
 						{
+#ifdef _DEFINE_WXUI
+
+		wxString aswx = cstr_to_wxstr(text);
+		if (g_netstat_dlg->m_newconnection->FindString(aswx) == wxNOT_FOUND)
+		{
+			if (g_netstat_dlg->m_newconnection->GetCount() > MAX_CBHOSTS) {
+				g_netstat_dlg->m_newconnection->Delete(g_netstat_dlg->m_newconnection->GetCount() - 1);
+			}
+			g_netstat_dlg->m_newconnection->Append(aswx);
+
+			#if defined(SAVE_CB_HOSTS)&&(SAVE_CB_HOSTS)
+				int p=g_config->ReadInt(CONFIG_concb_pos,CONFIG_concb_pos_DEFAULT);
+				char buf[123];
+				sprintf(buf,"concb_%d",p);
+				g_config->WriteString(buf,text);
+				p++;
+				g_config->WriteInt(CONFIG_concb_pos,p%MAX_CBHOSTS);
+			#endif
+		}
+
+#else
+
 							if (SendDlgItemMessage(hwndDlg,IDC_NEWCONNECTION,CB_FINDSTRINGEXACT,(WPARAM)-1,(LPARAM)text) == CB_ERR) {
 								if (SendDlgItemMessage(hwndDlg,IDC_NEWCONNECTION,CB_GETCOUNT,0,0)>MAX_CBHOSTS) {
 									SendDlgItemMessage(hwndDlg,IDC_NEWCONNECTION,CB_DELETESTRING,SendDlgItemMessage(hwndDlg,IDC_NEWCONNECTION,CB_GETCOUNT,0,0)-1,0);
 								};
 								SendDlgItemMessage(hwndDlg,IDC_NEWCONNECTION,CB_INSERTSTRING,0,(LPARAM)text);
+
 								#if defined(SAVE_CB_HOSTS)&&(SAVE_CB_HOSTS)
 									int p=g_config->ReadInt(CONFIG_concb_pos,CONFIG_concb_pos_DEFAULT);
 									char buf[123];
@@ -811,6 +835,9 @@
 									g_config->WriteInt(CONFIG_concb_pos,p%MAX_CBHOSTS);
 								#endif
 							}
+
+#endif
+
 							while (*p && *p != ':') p++;
 							if (*p==':') {
 								*p++=0;
@@ -821,23 +848,24 @@
 							};
 						};
 						return 0;
-					};
-				case IDC_REMOVECONNECTION:
-					{
+}
+
+int netkern_WM_COMMAND_IDC_REMOVECONNECTION() {
 						int n=g_lvnetcons.GetCount();
 						int x;
 						for (x = 0; x < n; x++) {
 							if (g_lvnetcons.GetSelected(x)) {
 								C_Connection *t= (C_Connection*)g_lvnetcons.GetParam(x);
+
 								if (t) t->close(1);
 								//g_lvnetcons.DeleteItem(x--);
 								//n--;
 							};
 						};
-						break;
-				};
-				case IDC_REMOVECATCH:
-					{
+	return 0;
+}
+
+int netkern_WM_COMMAND_IDC_REMOVECATCH() {
 						int n=g_lvnetcons.GetCount();
 						int x;
 						for (x = 0; x < n; x++) {
@@ -848,10 +876,10 @@
 								n--;
 							};
 						};
-						break;
-					};
-				case IDC_CONNECTCATCH:
-					{
+	return 0;
+}
+
+int netkern_WM_COMMAND_IDC_CONNECTCATCH() {
 						int n=g_lvnetcons.GetCount();
 						int x;
 						for (x = 0; x < n; x++) {
@@ -876,13 +904,182 @@
 								};
 							};
 						};
-						break;
+	return 0;
+}
+
+int netkern_WM_NOTIFY_IDC_NETCONS () {
+#ifdef _DEFINE_WXUI
+	int isSel=!!g_netstat_dlg->m_hostlist->GetSelectedItemCount();
+#else
+	int isSel=!!ListView_GetSelectedCount(l->hwndFrom);
+#endif
+	int isCon=0;
+	int isDiscon=0;
+	if (isSel) {
+		int a,n=g_lvnetcons.GetCount();
+		for (a = 0; a < n; a ++) {
+			if (g_lvnetcons.GetSelected(a)) {
+				if (g_lvnetcons.GetParam(a)) isCon++;
+				else isDiscon++;
+			};
+			if (isCon && isDiscon) break;
 					};
 				};
+#ifdef _DEFINE_WXUI
+	wxEnableWindow(g_netstat_dlg->m_removeconnection,isCon);
+	wxEnableWindow(g_netstat_dlg->m_connectcatch,isDiscon);
+	wxEnableWindow(g_netstat_dlg->m_removecatch,isSel);
+#else
+	EnableWindow(GetDlgItem(hwndDlg,IDC_REMOVECONNECTION),isCon);
+	EnableWindow(GetDlgItem(hwndDlg,IDC_CONNECTCATCH),isDiscon);
+	EnableWindow(GetDlgItem(hwndDlg,IDC_REMOVECATCH),isSel);
+#endif
 				return 0;
+}
+
+void netkern_WM_DESTROY () {
+	g_config->WriteInt(CONFIG_net_col3,g_lvnetcons.GetColumnWidth(0));
+	g_config->WriteInt(CONFIG_net_col1,g_lvnetcons.GetColumnWidth(1));
+	g_config->WriteInt(CONFIG_net_col2,g_lvnetcons.GetColumnWidth(2));
+	g_config->WriteInt(CONFIG_net_col4,g_lvnetcons.GetColumnWidth(3));
+}
+#endif /* _DEFINE_SRV */
+
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+BOOL WINAPI Net_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
+{
+	static dlgSizeInfo sizeinf={"net",90,140,440,330};
+	static ChildWndResizeItem rlist[]={
+		{IDC_ADDCONNECTION,0x1010},
+		{IDC_NETCONS,0x0011},
+		{IDC_NEWCONNECTION,0x0010},
 			};
+	switch (uMsg)
+	{
+	case WM_GETMINMAXINFO:
+		{
+			LPMINMAXINFO m=(LPMINMAXINFO)lParam;
+			if (m) {
+				m->ptMinTrackSize.x=245;
+				m->ptMinTrackSize.y=180;
 		};
 		return 0;
-	}
+		};
+	case WM_CLOSE:
+		{
+			return netkern_WM_CLOSE();
+			return 0;
+		};
+	case WM_SHOWWINDOW:
+		{
+			static int m_hack;
+			if (!m_hack) {
+				m_hack=1;
+				int m=g_config->ReadInt(CONFIG_net_maximized,CONFIG_net_maximized_DEFAULT);
+				handleDialogSizeMsgs(hwndDlg,WM_INITDIALOG,0,0,&sizeinf);
+				if (m) ShowWindow(hwndDlg,SW_SHOWMAXIMIZED);
+			};
+			return 0;
+		};
+	case WM_MOVE:
+		{
+			handleDialogSizeMsgs(hwndDlg,uMsg,wParam,lParam,&sizeinf);
+			return 0;
+		};
+	case WM_SIZE:
+		{
+			if (wParam != SIZE_MINIMIZED) {
+				childresize_resize(hwndDlg,rlist,sizeof(rlist)/sizeof(rlist[0]));
+				handleDialogSizeMsgs(hwndDlg,uMsg,wParam,lParam,&sizeinf);
+			};
+			return 0;
+		};
+	case WM_TIMER:
+		{
+			if (IsWindowVisible(hwndDlg)) {
+				netkern_WM_TIMER();
+			};
+			return 0;
+		};
+	case WM_INITDIALOG:
+		{
+			CreateTooltip(GetDlgItem(hwndDlg,IDC_REMOVECATCH),"Disconnect and remove selected host(s)");
+			CreateTooltip(GetDlgItem(hwndDlg,IDC_CONNECTCATCH),"Connect to selected host(s)");
+			CreateTooltip(GetDlgItem(hwndDlg,IDC_REMOVECONNECTION),"Disconnect from selected host(s)");
+			CreateTooltip(GetDlgItem(hwndDlg,IDC_ADDCONNECTION),"Connect to host specified in text box");
+
+			//SendDlgItemMessage(hwndDlg,IDC_CLEAR,BM_SETIMAGE,IMAGE_ICON,
+			//(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_CLEARALL),IMAGE_ICON,16,16,0));
+			SendDlgItemMessage(hwndDlg,IDC_REMOVECATCH,BM_SETIMAGE,IMAGE_ICON,
+				(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_DISCONNECT),IMAGE_ICON,16,16,0));
+			SendDlgItemMessage(hwndDlg,IDC_CONNECTCATCH,BM_SETIMAGE,IMAGE_ICON,
+				(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_CONNECT),IMAGE_ICON,16,16,0));
+
+			SendDlgItemMessage(hwndDlg,IDC_REMOVECONNECTION,BM_SETIMAGE,IMAGE_ICON,
+				(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_STOPDL),IMAGE_ICON,16,16,0));
+			SendDlgItemMessage(hwndDlg,IDC_ADDCONNECTION,BM_SETIMAGE,IMAGE_ICON,
+				(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_CONNECT),IMAGE_ICON,16,16,0));
+
+			SetTimer(hwndDlg,1,250,NULL);
+			netkern_setup_win32(hwndDlg);
+			childresize_init(hwndDlg,rlist,sizeof(rlist)/sizeof(rlist[0]));
+		};
+	case WM_USER_TITLEUPDATE:
+		{
+			char buf[1024];
+			set_netkern_title(buf, 1023);
+			SetWndTitle(hwndDlg,buf);
+		};
+	case WM_DESTROY:
+		{
+			netkern_WM_DESTROY();
+			return 0;
+		};
+	case WM_NOTIFY:
+		{
+			LPNMHDR l=(LPNMHDR)lParam;
+			if (l->idFrom==IDC_NETCONS) {
+				if (l->code == NM_DBLCLK) {
+					SendMessage(hwndDlg,WM_COMMAND,IDC_CONNECTCATCH,0);
+				};
+				return netkern_WM_NOTIFY_IDC_NETCONS();
+			};
+			return 0;
+		};
+	case WM_COMMAND:
+		{
+			switch (LOWORD(wParam))
+			{
+			case IDC_NEWCONNECTION:
+				{
+					return netkern_WM_COMMAND_IDC_NEWCONNECTION(HIWORD(wParam) == CBN_SELCHANGE);
+				};
+			case IDC_NUMCONUP:
+				{
+					return netkern_WM_COMMAND_IDC_NUMCONUP();
+				};
+			case IDC_ADDCONNECTION:
+				{
+					return netkern_WM_COMMAND_IDC_ADDCONNECTION();
+				};
+			case IDC_REMOVECONNECTION:
+				{
+					return netkern_WM_COMMAND_IDC_REMOVECONNECTION();
+				};
+			case IDC_REMOVECATCH:
+				{
+					return netkern_WM_COMMAND_IDC_REMOVECATCH();
+				};
+			case IDC_CONNECTCATCH:
+				{
+					return netkern_WM_COMMAND_IDC_CONNECTCATCH();
+				};
+			};
+			return 0;
+		};
+	};
+	return 0;
+}
+
+#endif  //WIN32
 
-#endif//WIN32
diff -b -N -ru waste-source-1.5-beta-2/netkern.hpp latest/netkern.hpp
--- waste-source-1.5-beta-2/netkern.hpp	2004-06-14 15:28:00.000000000 +0300
+++ latest/netkern.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -23,7 +23,7 @@
 
 extern C_ItemList<C_Connection> g_new_net;
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 extern W_ListView g_lvnetcons;
 extern HWND g_netstatus_wnd;
 #endif
diff -b -N -ru waste-source-1.5-beta-2/netq.cpp latest/netq.cpp
--- waste-source-1.5-beta-2/netq.cpp	2004-06-14 15:17:00.000000000 +0300
+++ latest/netq.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -35,11 +35,15 @@
 	if (rating > 100) rating=100;
 	if (rating < 0) rating=0;
 
+	if (ip == ((unsigned long) -1) || ip == 0L) {
+		return;
+	}
+
 	struct in_addr in;
 	in.s_addr=ip;
 	char *t=inet_ntoa(in);
 	if (!port) port=CONFIG_port_DEFAULT;
-	if (t && ip != -1 && ip) {
+	if (t && ip != ((unsigned long) -1) && ip) {
 		char host[256];
 		safe_strncpy(host,t,sizeof(host));
 		if (is_accessable_addr(ip) && allowIP(ip)) {
@@ -125,6 +129,7 @@
 				if (line[strlen(line)-1] == '\n') line[strlen(line)-1]=0;
 				if (line2[strlen(line2)-1] == '\n') line2[strlen(line2)-1]=0;
 				if (strlen(line)>1 && strlen(line2)>1) {
+
 					int p=g_lvrecvq.InsertItem(g_lvrecvq.GetCount(),line,0);
 					char *ptr=strstr(line2,"<");
 
@@ -176,6 +181,7 @@
 				fprintf(fp,"%s\n%s<%s\n",name,loc,size);
 			};
 		};
+
 		for (x = 0; x < g_lvrecvq.GetCount(); x ++) {
 			char name[256];
 			char loc[256];
@@ -185,6 +191,12 @@
 			g_lvrecvq.GetText(x,1,size,sizeof(size));
 			fprintf(fp,"%s\n%s<%s\n",name,loc,size);
 		};
+
 		fclose(fp);
-	};
+	} else {
+#ifdef _DEFINE_WXUI
+		wxLogSysError(_T("netq database save failed"));
+#endif
+	}
+
 }
diff -b -N -ru waste-source-1.5-beta-2/platform.hpp latest/platform.hpp
--- waste-source-1.5-beta-2/platform.hpp	2004-06-15 08:47:00.000000000 +0300
+++ latest/platform.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -25,6 +25,7 @@
 
 #ifndef _WIN32
 
+#include "config.h"
 #define THREAD_SAFE
 #define _REENTRANT
 #include <pthread.h>
@@ -55,11 +56,12 @@
 #define DeleteFile(x) unlink(x)
 #define RemoveDirectory(x) rmdir(x)
 #define CreateDirectory(x,y) mkdir(x,0755)
-#define Sleep(x) usleep(( x )*1000)
+#define WasteSleep(x) usleep(( x )*1000)
 #define stricmp(x,y) strcasecmp(x,y)
 #define strnicmp(x,y,z) strncasecmp(x,y,z)
 #define _vsnprintf vsnprintf
-static inline char *safe_strncpy(char *out, const char *in, int maxl) { strncpy(out,in,maxl); out[maxl-1]=0; }
+
+static inline char *safe_strncpy(char *out, const char *in, int maxl) { strncpy(out,in,maxl); out[maxl-1]=0; return out; }
 
 static inline unsigned int GetTickCount()
 {
@@ -86,11 +88,22 @@
 	#endif
 #endif
 
-#ifndef min
-#define min(x,y) ((x)<(y)?(x):(y))
-#define max(x,y) ((y)<(x)?(x):(y))
-#endif
-
 #endif //_WIN32
 
+#define waste_min(x,y) ((x)<(y)?(x):(y))
+#define waste_max(x,y) ((y)<(x)?(x):(y))
+
+#ifdef _DEFINE_WXUI
+#include "wxplatform.hpp"
+#endif // _DEFINE_WXUI
+
+/* provide a portable memmove() for places where WASTE does
+* overlapping copies
+*/
+#ifdef HAVE_MEMMOVE
+#define w_memmove(x,y,z)    memmove(x,y,z)
+#else
+#define w_memmove(x,y,z)    memcpy(x,y,z)
+#endif
+
 #endif //_PLATFORM_H_
diff -b -N -ru waste-source-1.5-beta-2/prefs.cpp latest/prefs.cpp
--- waste-source-1.5-beta-2/prefs.cpp	2004-06-16 22:31:00.000000000 +0300
+++ latest/prefs.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -40,6 +40,100 @@
 #include "netkern.hpp"
 #include "license.hpp"
 
+#ifdef _DEFINE_WXUI
+#include "wxprefs.h"
+
+WxPrefs *g_prefs_wnd;
+static bool write_to_config_on_ui_update = false;
+
+void prefs_find_wxwidgets(WxPrefs *wnd) {
+	g_prefs_wnd = wnd;
+
+	wxSetDlgItemText (g_prefs_wnd->m_nickname, (const char *) g_config->ReadString(CONFIG_nick,""));
+	wxSetDlgItemText (g_prefs_wnd->m_user_info, (const char *) g_config->ReadString(CONFIG_userinfo,CONFIG_userinfo_DEFAULT));
+	wxSetDlgItemText (g_prefs_wnd->m_net_name, (const char *) g_config->ReadString(CONFIG_networkname,CONFIG_networkname_DEFAULT));
+	wxSetDlgItemText (g_prefs_wnd->m_download_path, (const char *) g_config->ReadString(CONFIG_downloadpath,""));
+	wxSetDlgItemText (g_prefs_wnd->m_share_path, (const char *) g_config->ReadString(CONFIG_databasepath,CONFIG_databasepath_DEFAULT));
+
+	int x;
+	for (x = 0; x < (int) (sizeof(conspeed_strs)/sizeof(conspeed_strs[0])); x ++) {
+		g_prefs_wnd->m_conn_speed->SetString(x, wxString (conspeed_strs[x], *wxConvCurrent));
+	};
+	for (x = 0; x < (int) (sizeof(conspeed_strs)/sizeof(conspeed_strs[0])); x ++) {
+		if (g_conspeed <= conspeed_speeds[x]) break;
+	};
+	if (x == (int) (sizeof(conspeed_strs)/sizeof(conspeed_strs[0]))) x--;
+	g_prefs_wnd->m_conn_speed->SetSelection(x);
+
+	/* ok, they're ready */
+	write_to_config_on_ui_update = true;
+}
+
+void prefs_update_from_textboxes() {
+	char buf[1024];
+
+	if (!write_to_config_on_ui_update) {
+	    return;
+	}
+
+	wxGetDlgItemText (g_prefs_wnd->m_nickname, buf, sizeof(buf)-1);
+	g_config->WriteString(CONFIG_nick,buf);
+	wxGetDlgItemText (g_prefs_wnd->m_user_info, buf, sizeof(buf)-1);
+	g_config->WriteString(CONFIG_userinfo,buf);
+	wxGetDlgItemText (g_prefs_wnd->m_net_name, buf, sizeof(buf)-1);
+	g_config->WriteString(CONFIG_networkname,buf);
+	wxGetDlgItemText (g_prefs_wnd->m_download_path, buf, sizeof(buf)-1);
+	g_config->WriteString(CONFIG_downloadpath,buf);
+	wxGetDlgItemText (g_prefs_wnd->m_share_path, buf, sizeof(buf)-1);
+	g_config->WriteString(CONFIG_databasepath,buf);
+
+	int x = g_prefs_wnd->m_conn_speed->GetSelection();
+	if (x >= 0 && x < (int) (sizeof(conspeed_strs)/sizeof(conspeed_strs[0]))) {
+		if (conspeed_speeds[x] != g_conspeed) {
+			g_conspeed=conspeed_speeds[x];
+			g_config->WriteInt(CONFIG_conspeed,conspeed_speeds[x]);
+			g_route_traffic=conspeed_speeds[x]>MIN_ROUTE_SPEED;
+			//CheckDlgButton(hwndDlg,IDC_CHECK_ROUTE,conspeed_speeds[x]>MIN_ROUTE_SPEED?BST_CHECKED:BST_UNCHECKED);
+			RebroadcastCaps(g_mql);
+		};
+	};
+}
+#endif
+
+
+void clicked_IDC_BUTTON_UPDATE_NICK() {
+
+	char buf[32];
+#ifdef _DEFINE_WXUI
+	wxGetDlgItemText (g_prefs_wnd->m_nickname, buf, sizeof(buf)-1);
+#else
+	GetDlgItemText(hwndDlg,IDC_EDIT_NICK,buf,sizeof(buf));
+#endif
+	buf[31]=0;
+	if (stricmp(buf,g_regnick)) {
+		char oldnick[32];
+		safe_strncpy(oldnick,g_regnick,sizeof(oldnick));
+		safe_strncpy(g_regnick,buf,sizeof(g_regnick));
+		if (g_regnick[0] == '#' || g_regnick[0] == '&') g_regnick[0]=0;
+		g_config->WriteString(CONFIG_nick,g_regnick);
+		if (!g_regnick[0]) {
+#ifndef _DEFINE_WXUI
+			SetDlgItemText(hwndDlg,IDC_NICKSTATUS,"No nickname");
+#endif
+		} else {
+#ifndef _DEFINE_WXUI
+			char buf[512];
+			sprintf(buf,"Current nickname: %s\n",g_regnick);
+			SetDlgItemText(hwndDlg,IDC_NICKSTATUS,buf);
+#endif
+			//send nick change notification
+			chat_sendNickChangeFrom(oldnick);
+		};
+	};
+}
+
+#ifndef _DEFINE_WXUI
+
 static COLORREF custcolors[16];
 
 static int CALLBACK WINAPI BrowseCallbackProc( HWND hwnd, UINT uMsg, LPARAM /*lParam*/, LPARAM lpData)
@@ -1354,7 +1448,7 @@
 				li2.mci=0;
 			};
 		};
-		Sleep(300);
+		WasteSleep(300);
 	};
 	//dbg_printf(ds_Debug,"DEBUG: inthread got quit");
 	if (li2.data) {
@@ -1364,7 +1458,7 @@
 		playSong(NULL,li2.mci,NULL);
 		CloseHandle(li2.hh);
 		int i=10;
-		while ((i--)>0 && !DeleteFile(li2.tfi)) Sleep(200);
+		while ((i--)>0 && !DeleteFile(li2.tfi)) WasteSleep(200);
 	};
 	//dbg_printf(ds_Debug,"DEBUG: inthread exiting");
 	_thelp.hwnd=NULL;
@@ -1406,7 +1500,7 @@
 			HANDLE th=CreateThread(NULL,NULL,Pref_LicenseThread,0,0,&dwTid);
 			if (th!=INVALID_HANDLE_VALUE) {
 				CloseHandle(th);//free ref
-				while (_thelp.sync!=2) Sleep(200);
+				while (_thelp.sync!=2) WasteSleep(200);
 				//dbg_printf(ds_Debug,"DEBUG: thread synced 2");
 			}else {
 				//WTF ...
@@ -1532,30 +1626,10 @@
 				break;
 			};
 		case IDC_BUTTON_UPDATE_NICK:
-			{
-				char buf[32];
-				GetDlgItemText(hwndDlg,IDC_EDIT_NICK,buf,sizeof(buf));
-				buf[31]=0;
-				if (stricmp(buf,g_regnick)) {
-					char oldnick[32];
-					safe_strncpy(oldnick,g_regnick,sizeof(oldnick));
-					safe_strncpy(g_regnick,buf,sizeof(g_regnick));
-					if (g_regnick[0] == '#' || g_regnick[0] == '&') g_regnick[0]=0;
-					g_config->WriteString(CONFIG_nick,g_regnick);
-					if (!g_regnick[0])
-						SetDlgItemText(hwndDlg,IDC_NICKSTATUS,"No nickname");
-					else {
-						char buf[512];
-						sprintf(buf,"Current nickname: %s\n",g_regnick);
-						SetDlgItemText(hwndDlg,IDC_NICKSTATUS,buf);
-						//send nick change notification
-						chat_sendNickChangeFrom(oldnick);
-					};
-				};
+			clicked_IDC_BUTTON_UPDATE_NICK();
 			break;
 			};
 		};
-	};
 	return 0;
 }
 
@@ -3461,11 +3535,18 @@
 
 	return 0;
 }
+#endif /* _DEFINE_WXUI */
 
 int Prefs_SelectProfile(int force) //returns 1 on user abort
 {
 	if (g_profile_name[0]) return 0;
 
+#ifdef _DEFINE_WXUI
+
+	strcpy(g_profile_name,"Default");
+
+#else
+
 	if (force || GetPrivateProfileInt("config","showprofiles",0,g_config_mainini)) { //bring up profile manager
 		GetPrivateProfileString("config","lastprofile","Default",g_profile_name,sizeof(g_profile_name),g_config_mainini);
 		int rv=DialogBox(g_hInst,MAKEINTRESOURCE(IDD_PROFILES),GetDesktopWindow(),ProfilesProc);
@@ -3498,6 +3579,9 @@
 			FindClose(h);
 		};
 	};
+
+#endif
+
 	return 0;
 
 }
diff -b -N -ru waste-source-1.5-beta-2/prefs.hpp latest/prefs.hpp
--- waste-source-1.5-beta-2/prefs.hpp	2004-06-14 15:27:00.000000000 +0300
+++ latest/prefs.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -21,11 +21,15 @@
 #ifndef _PREFS_H_
 #define _PREFS_H_
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))&&(!defined(_DEFINE_WXUI))
 	extern HWND prefs_hwnd,prefs_cur_wnd;
 	int Prefs_SelectProfile(int force); //returns 1 on user abort
 	BOOL CALLBACK PrefsOuterProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam);
 	BOOL WINAPI SetupWizProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam);
 #endif
 
+#ifdef _DEFINE_WXUI
+	int Prefs_SelectProfile(int force); //returns 1 on user abort
+#endif
+
 #endif//_PREFS_H_
Binary files waste-source-1.5-beta-2/res/allusers.ico.gif and latest/res/allusers.ico.gif differ
Binary files waste-source-1.5-beta-2/res/backward.ico.gif and latest/res/backward.ico.gif differ
Binary files waste-source-1.5-beta-2/res/browse.ico.gif and latest/res/browse.ico.gif differ
Binary files waste-source-1.5-beta-2/res/chat.ico.gif and latest/res/chat.ico.gif differ
Binary files waste-source-1.5-beta-2/res/chat_icon.gif and latest/res/chat_icon.gif differ
Binary files waste-source-1.5-beta-2/res/clear-all2.ico.gif and latest/res/clear-all2.ico.gif differ
Binary files waste-source-1.5-beta-2/res/clear-completed2.ico.gif and latest/res/clear-completed2.ico.gif differ
Binary files waste-source-1.5-beta-2/res/clear-inactive2.ico.gif and latest/res/clear-inactive2.ico.gif differ
Binary files waste-source-1.5-beta-2/res/connect.ico.gif and latest/res/connect.ico.gif differ
Binary files waste-source-1.5-beta-2/res/connect_icon.gif and latest/res/connect_icon.gif differ
Binary files waste-source-1.5-beta-2/res/dir.ico.gif and latest/res/dir.ico.gif differ
diff -b -N -ru waste-source-1.5-beta-2/res/dir.xpm latest/res/dir.xpm
--- waste-source-1.5-beta-2/res/dir.xpm	1970-01-01 02:00:00.000000000 +0200
+++ latest/res/dir.xpm	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,29 @@
+/* XPM */
+static char * dir_xpm[] = {
+"16 16 10 1",
+" 	c None",
+".	c #966200",
+"+	c #FFD48E",
+"@	c #FFC66B",
+"#	c #734A00",
+"$	c #FFB848",
+"%	c #FFAA00",
+"&	c #DC9200",
+"*	c #503200",
+"=	c #B97A00",
+"                ",
+"                ",
+" .....          ",
+".+++++.......   ",
+".@@@@@@@@@@@@#  ",
+".$$$$$$$$$$$$#  ",
+".$$$############",
+".%%#%%%%%%%%%%%#",
+".&&#&&&&&&&&&&&*",
+"#=#&&&&&&&&&&&* ",
+"#.#===========* ",
+"##===========*  ",
+" ########*****  ",
+"                ",
+"                ",
+"                "};
Binary files waste-source-1.5-beta-2/res/disconnect.ico.gif and latest/res/disconnect.ico.gif differ
Binary files waste-source-1.5-beta-2/res/dlnow.ico.gif and latest/res/dlnow.ico.gif differ
Binary files waste-source-1.5-beta-2/res/file.ico.gif and latest/res/file.ico.gif differ
diff -b -N -ru waste-source-1.5-beta-2/res/file.xpm latest/res/file.xpm
--- waste-source-1.5-beta-2/res/file.xpm	1970-01-01 02:00:00.000000000 +0200
+++ latest/res/file.xpm	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,30 @@
+/* XPM */
+static char * file_xpm[] = {
+"16 16 11 1",
+" 	c None",
+".	c #6E6E6E",
+"+	c #FFFFFF",
+"@	c #F2F2F2",
+"#	c #C2C2C2",
+"$	c #E6E6E6",
+"%	c #DADADA",
+"&	c #CECECE",
+"*	c #565656",
+"=	c #626262",
+"-	c #4A4A4A",
+"                ",
+"  .........     ",
+"  .++++@@.#.    ",
+"  .+++@@$.#@.   ",
+"  .++@@@$.###.  ",
+"  .+@@@$$.....  ",
+"  .@@@$$$%%&#*  ",
+"  .@@$$$%%&&#*  ",
+"  =@$$$$%%&&#-  ",
+"  =$$$%%%%&&#-  ",
+"  =$$%%%%&&&#-  ",
+"  =%%%&&&&&##-  ",
+"  =%&&&&&&###-  ",
+"  =&&&#######-  ",
+"  ==****------  ",
+"                "};
Binary files waste-source-1.5-beta-2/res/forward.ico.gif and latest/res/forward.ico.gif differ
Binary files waste-source-1.5-beta-2/res/icon1.ico.gif and latest/res/icon1.ico.gif differ
Binary files waste-source-1.5-beta-2/res/iconplay.ico.gif and latest/res/iconplay.ico.gif differ
Binary files waste-source-1.5-beta-2/res/more2.ico.gif and latest/res/more2.ico.gif differ
Binary files waste-source-1.5-beta-2/res/move2end.ico.gif and latest/res/move2end.ico.gif differ
Binary files waste-source-1.5-beta-2/res/move2top.ico.gif and latest/res/move2top.ico.gif differ
Binary files waste-source-1.5-beta-2/res/search.ico.gif and latest/res/search.ico.gif differ
Binary files waste-source-1.5-beta-2/res/stopdl.ico.gif and latest/res/stopdl.ico.gif differ
Binary files waste-source-1.5-beta-2/res/transfers.ico.gif and latest/res/transfers.ico.gif differ
Binary files waste-source-1.5-beta-2/res/updir.ico.gif and latest/res/updir.ico.gif differ
Binary files waste-source-1.5-beta-2/res/user.ico.gif and latest/res/user.ico.gif differ
diff -b -N -ru waste-source-1.5-beta-2/res/user.xpm latest/res/user.xpm
--- waste-source-1.5-beta-2/res/user.xpm	1970-01-01 02:00:00.000000000 +0200
+++ latest/res/user.xpm	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,28 @@
+/* XPM */
+static char * user_xpm[] = {
+"16 16 9 1",
+" 	c None",
+".	c #337198",
+"+	c #6C9BC0",
+"@	c #3B82B0",
+"#	c #224C67",
+"$	c #2A5D7F",
+"%	c #000080",
+"&	c #1A394F",
+"*	c #224667",
+"                ",
+"      ...       ",
+"     .++@#      ",
+"    .++@.$#     ",
+"    .+@..$#     ",
+"    %#$$$#%     ",
+"     &###&      ",
+"    +@&&&#*     ",
+"    @+..#$*     ",
+"    @+@$.$*     ",
+"    @+@$.$*     ",
+"    @+@$.$*     ",
+"    @+@$.$*     ",
+"     $@$.#      ",
+"      $$#       ",
+"                "};
diff -b -N -ru waste-source-1.5-beta-2/rsa/global.hpp latest/rsa/global.hpp
--- waste-source-1.5-beta-2/rsa/global.hpp	2004-03-05 18:34:00.000000000 +0200
+++ latest/rsa/global.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -1,4 +1,4 @@
-/* GLOBAL.H - RSAREF types and constants
+/* GLOBAL.H - RSAREF types and constants */
 
 /* Copyright (C) RSA Laboratories, a division of RSA Data Security,
 Inc., created 1991. All rights reserved.
diff -b -N -ru waste-source-1.5-beta-2/sharedmain.cpp latest/sharedmain.cpp
--- waste-source-1.5-beta-2/sharedmain.cpp	2004-06-16 18:38:00.000000000 +0300
+++ latest/sharedmain.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -135,7 +135,7 @@
 #endif
 
 char g_profile_name[128];
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	int g_extrainf;
 #endif
 int g_keepup;
@@ -145,7 +145,7 @@
 int g_max_simul_dl;
 unsigned int g_max_simul_dl_host;
 int g_use_accesslist;
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	int g_appendprofiletitles;
 #endif
 int g_do_autorefresh;
@@ -177,7 +177,7 @@
 
 int g_throttle_flag, g_throttle_send, g_throttle_recv;
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	int g_search_showfull;
 #endif
 
@@ -203,10 +203,34 @@
 	HICON g_hSmallIcon;
 	HINSTANCE g_hInst;
 	int g_hidewnd_state;
+#endif
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	char g_performs[4096];  // TODO: check for bo
 	int g_search_showfullbytes;
 #endif
 
+
+#ifdef _DEFINE_WXUI
+#include "wxmainframe.h"
+
+class mainTreeItemData : public wxTreeItemData {
+public: long lParam;
+};
+
+MainFrame *g_mainwnd;
+
+void main_find_wxwidgets(MainFrame *dlg)
+{
+	g_mainwnd = dlg;
+
+	wxTreeCtrl *htree=g_mainwnd->m_users;
+	wxTreeItemId root = htree->AddRoot(wxString(_T("root")));   // invisible
+
+	wxTreeCtrl *htree2=g_mainwnd->m_chatrooms;
+	wxTreeItemId root2 = htree2->AddRoot(wxString(_T("root")));   // invisible
+}
+#endif
+
 void main_BroadcastPublicKey(T_Message *src)
 {
 	C_KeydistRequest rep;
@@ -378,10 +402,14 @@
 	int newl=g_mql->GetNumQueues();
 	if (lastqueues != newl) {
 		MYSRANDUPDATE((unsigned char *)&lastqueues,sizeof(lastqueues));
-		#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+		#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 			char text[32];
 			sprintf(text,":%d",newl);
+#ifdef _DEFINE_WXUI
+			wxSetDlgItemText(g_mainwnd->m_netstatus,text);
+#else
 			SetDlgItemText(g_mainwnd,IDC_NETSTATUS,text);
+#endif
 		#endif
 	};
 
@@ -393,7 +421,7 @@
 
 		//flush config and netq
 		g_config->Flush();
-		#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+		#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 			SaveNetQ();
 		#endif
 	};
@@ -454,6 +482,8 @@
 	#ifndef _DEFINE_SRV
 		int willq=Xfer_WillQ(fnstr,guidstr);
 		int p=g_lvrecvq.InsertItem(g_lvrecvq.GetCount(),fnstr,0);
+		(void) willq;
+		(void) p;
 	#endif
 	char sizebuf[64];
 	strcpy(sizebuf,"?");
@@ -465,19 +495,35 @@
 	log_printf(ds_Informational,"Receiving file: %s(%s) from %s",fnstr,sizebuf,t->get_nick());
 
 	#ifndef _DEFINE_SRV
+
+		const char *path=g_config->ReadString(CONFIG_downloadpath,"");
+		if (path&&path[0]) g_recvs.Add(new XferRecv(g_mql,guidstr,sizebuf,fnstr,path));
+
 		g_lvrecvq.SetItemText(p,1,sizebuf);
 		g_lvrecvq.SetItemText(p,2,guidstr);
 		g_files_in_download_queue++;
 		if (g_config->ReadInt(CONFIG_aorecv,CONFIG_aorecv_DEFAULT)) {
+
+#ifdef _DEFINE_WXUI
+
+						g_mainwnd->ViewWindow(g_mainwnd->m_xfers_dlg,
+							g_config->ReadInt(CONFIG_aorecv_btf, CONFIG_aorecv_btf_DEFAULT));
+
+						
+#else
+
 			HWND h=GetForegroundWindow();
 			SendMessage(g_mainwnd,WM_COMMAND,ID_VIEW_TRANSFERS,0);
 
 			if (g_config->ReadInt(CONFIG_aorecv_btf,CONFIG_aorecv_btf_DEFAULT)) SetForegroundWindow(g_xferwnd);
 			else SetForegroundWindow(h);
 
+#endif
+
 			XferDlg_SetSel(willq);
 		};
 		RecvQ_UpdateStatusText();
+
 	#else
 		const char *path=g_config->ReadString(CONFIG_downloadpath,"");
 		if (path&&path[0]) g_recvs.Add(new XferRecv(g_mql,guidstr,sizebuf,fnstr,path));
@@ -574,7 +620,7 @@
 			MYSRANDUPDATE((unsigned char *)&message->message_guid,16);
 			C_MessagePing rep(message->data);
 
-			#if (defined(_WIN32)&&(!defined(_DEFINE_SRV)))
+			#if (defined(_WIN32)&&(!defined(_DEFINE_SRV))) || defined(_DEFINE_WXUI)
 				unsigned int a=(unsigned int)(cn->get_interface());// Intellisense bug here
 				if (rep.m_port && rep.m_ip && (a != rep.m_ip)) {
 					add_to_netq(rep.m_ip,rep.m_port,90,0);
@@ -633,7 +679,8 @@
 				};
 			}
 			else {
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 				Search_AddReply(message);
 #endif
 			};
@@ -648,7 +695,8 @@
 				for (x = 0; x < n; x ++) {
 					XferSend *xs=g_sends.Get(x);
 					if (!memcmp(r->get_prev_guid(),xs->get_guid(),16)) {
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 						if (r->is_abort()==2) {
 							int a=xs->GetIdx()-UPLOAD_BASE_IDX;
 							if (a >= 0 && a < g_uploads.GetSize()) {
@@ -670,7 +718,8 @@
 					};
 				};
 				if (x == n && (r->is_abort()==3)) { //file exists
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 					int idx=r->get_idx();
 					if (idx >= UPLOAD_BASE_IDX) {
 						idx-=UPLOAD_BASE_IDX;
@@ -702,14 +751,16 @@
 							}
 							else {
 								idx-=UPLOAD_BASE_IDX;
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 								if (idx<g_uploads.GetSize() && g_uploads.Get(idx))
 #else
 								if (idx<g_uploads.GetSize())
 #endif
 								{
 									safe_strncpy(fn,g_uploads.Get(idx),sizeof(fn));
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 									int lvidx;
 									if ((lvidx=g_lvsend.FindItemByParam((int)g_uploads.Get(idx))) >= 0) {
 										g_lvsend.DeleteItem(lvidx);
@@ -726,7 +777,8 @@
 							dbg_printf(ds_Debug,"XXX: accept request on idx=%05i",r->get_idx());
 #endif
 							XferSend *a=new XferSend(_this,&message->message_guid,r,fn);
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 							//remove any timed out files of a->GetName() from r->get_nick()
 							n=g_lvsend.GetCount();
 							for (x = 0; x < n; x ++) {
@@ -746,7 +798,8 @@
 
 							char *err=a->GetError();
 							if (err) {
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 								if (!g_config->ReadInt(CONFIG_send_autoclear,CONFIG_send_autoclear_DEFAULT)) {
 									g_lvsend.InsertItem(0,a->GetName(),0);
 									char buf[32];
@@ -762,7 +815,8 @@
 							}
 							else {
 								g_sends.Add(a);
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 								g_lvsend.InsertItem(0,a->GetName(),(int)a);
 								char buf[32];
 								int fs_l,fs_h;
@@ -773,7 +827,8 @@
 								g_lvsend.SetItemText(0,3,"Sending");
 #endif
 							};
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 							PostMessage(g_xferwnd,WM_USER_TITLEUPDATE,0,0);
 #endif
 						}
@@ -811,7 +866,8 @@
 		};
 	case MESSAGE_CHAT_REPLY:
 		{
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 				chat_HandleMsg(message);
 			#endif
 			break;
@@ -887,6 +943,7 @@
 void main_onGotChannel(const char *cnl)
 {
 	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+
 		HWND htree=GetDlgItem(g_mainwnd,IDC_CHATROOMS);
 		int added=0;
 		HTREEITEM h = TreeView_GetChild(htree,TVI_ROOT);
@@ -927,6 +984,42 @@
 			i.item.lParam=time(NULL);
 			TreeView_InsertItem(htree,&i);
 		};
+
+	#elif defined(_DEFINE_WXUI)
+
+		wxTreeCtrl *htree=g_mainwnd->m_chatrooms;
+		wxTreeItemIdValue cookie;
+		wxTreeItemId rootId = htree->GetRootItem();
+		wxTreeItemId h = htree->GetFirstChild(rootId, cookie);
+		while (h.IsOk()) {
+			char text[512];
+			if (cnl) {
+				wxString str = htree->GetItemText(h);
+				wxstr_to_cstr(text, str, 511);
+				if (!stricmp(cnl,text)) {
+					mainTreeItemData *data = new mainTreeItemData();
+					data->lParam = time(NULL);
+					htree->SetItemData(h, (wxTreeItemData*) data);
+					htree->SetItemText(h, cstr_to_wxstr(cnl));
+					break;
+				};
+				h=htree->GetNextSibling(h);
+			}
+			else {
+				mainTreeItemData *data = (mainTreeItemData*) htree->GetItemData(h);
+				wxTreeItemId nexth = htree->GetNextSibling(h);
+				if (time(NULL) - data->lParam > CHANNEL_STARVE_DELAY) {
+					htree->Delete(h);
+				};
+				h = nexth;
+			};
+		};
+		if (!h.IsOk() && cnl) {
+			mainTreeItemData *data = new mainTreeItemData();
+			data->lParam = time(NULL);
+			htree->AppendItem(rootId, cstr_to_wxstr(cnl),
+							-1, -1, data);
+		};
 	#endif
 }
 
@@ -979,6 +1072,50 @@
 			i.item.lParam=time(NULL);
 			TreeView_InsertItem(htree,&i);
 		};
+
+	#elif defined(_DEFINE_WXUI)
+
+		if (nick) {
+			if (!stricmp(nick,g_regnick)) return;
+		};
+		wxTreeCtrl *htree=g_mainwnd->m_users;
+		wxTreeItemIdValue cookie;
+		wxTreeItemId rootId = htree->GetRootItem();
+		wxTreeItemId h = htree->GetFirstChild(rootId, cookie);
+		while (h.IsOk()) {
+			char text[512];
+			if (nick) {
+				wxString str = htree->GetItemText(h);
+				wxstr_to_cstr(text, str, 511);
+				if (!stricmp(nick,text)) {
+					if (del) {
+						htree->Delete(h);
+						return;
+					};
+
+					mainTreeItemData *data = new mainTreeItemData();
+					data->lParam = time(NULL);
+					htree->SetItemData(h, (wxTreeItemData*) data);
+					htree->SetItemText(h, cstr_to_wxstr(nick));
+					break;
+				};
+				h=htree->GetNextSibling(h);
+			}
+			else {
+				mainTreeItemData *data = (mainTreeItemData*) htree->GetItemData(h);
+				wxTreeItemId nexth = htree->GetNextSibling(h);
+				if (time(NULL) - data->lParam > NICK_STARVE_DELAY) {
+					htree->Delete(h);
+				};
+				h = nexth;
+			};
+		};
+		if (!h.IsOk() && nick) {
+			mainTreeItemData *data = new mainTreeItemData();
+			data->lParam = time(NULL);
+			htree->AppendItem(rootId, cstr_to_wxstr(nick),
+							-1, -1, data);
+		};
 	#endif
 }
 
@@ -1047,13 +1184,14 @@
 	g_throttle_recv=g_config->ReadInt(CONFIG_throttlerecv,CONFIG_throttlerecv_DEFAULT);
 
 	if (!isreload) {
-		#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+		#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
 			const char* performstmp = g_config->ReadString(CONFIG_performs,CONFIG_performs_DEFAULT);
 			safe_strncpy(g_performs, performstmp, sizeof(g_performs));
 		#endif
 	};
 
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 		g_appendprofiletitles=g_config->ReadInt(CONFIG_appendpt,CONFIG_appendpt_DEFAULT);
 		g_extrainf=g_config->ReadInt(CONFIG_extrainf,CONFIG_extrainf_DEFAULT);
 		g_search_showfull=g_config->ReadInt(CONFIG_search_showfull,CONFIG_search_showfull_DEFAULT);
@@ -1073,14 +1211,22 @@
 void SetProgramDirectory(const char *progpath)
 {
 	char *p;
-	progpath;
+	(void) progpath;
 	#ifdef _WIN32
 		{
 			GetModuleFileName(NULL,g_config_dir,sizeof(g_config_dir));
 		};
 	#else
 		{
+			char *home;
+			home = getenv("HOME");
+			if (home != NULL) {
+				snprintf (g_config_dir, sizeof(g_config_dir), "%s/.waste/", home);
+				/* ensure it exists */
+				(void) mkdir (g_config_dir, 0777);
+			} else {
 			safe_strncpy(g_config_dir,progpath,sizeof(g_config_dir));
+			}
 		};
 	#endif
 
@@ -1108,3 +1254,16 @@
 	g_mql = new C_MessageQueueList(main_MsgCallback,DEFAULT_TTL);
 	update_set_port();
 }
+
+void
+PostMessageTitleUpdate(HWND wnd)
+{
+
+#if defined(_DEFINE_WXUI)
+		(void) wnd;
+#elif defined(_WIN32)&&(!defined(_DEFINE_SRV))
+		PostMessage(wnd, WM_USER_TITLEUPDATE, 0, 0);
+#endif
+
+}
+
diff -b -N -ru waste-source-1.5-beta-2/shbuf.cpp latest/shbuf.cpp
--- waste-source-1.5-beta-2/shbuf.cpp	2004-06-14 15:15:00.000000000 +0300
+++ latest/shbuf.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -39,7 +39,7 @@
 C_SHBuf::~C_SHBuf()
 {
 	ASSERT(m_refcnt==0);
-	delete (char*)m_d;
+	delete[] (char*)m_d;
 	m_d=0;
 	m_dlen=0;
 }
diff -b -N -ru waste-source-1.5-beta-2/sockets.hpp latest/sockets.hpp
--- waste-source-1.5-beta-2/sockets.hpp	2004-06-14 15:27:00.000000000 +0300
+++ latest/sockets.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -38,7 +38,11 @@
 
 #else
 #define ERRNO errno
-#define closesocket(s) close(s)
+
+/* note "::close" instead of "close", as C_Connection class has a
+* method called close which gets called otherwise!  */
+#define closesocket(s) ::close(s)
+
 #define SET_SOCK_BLOCK(s,block) { int __flags; if ((__flags = fcntl(s, F_GETFL, 0)) != -1) {  if (!block) __flags |= O_NONBLOCK; else __flags &= ~O_NONBLOCK; fcntl(s, F_SETFL, __flags); } }
 
 #endif
diff -b -N -ru waste-source-1.5-beta-2/srchwnd.cpp latest/srchwnd.cpp
--- waste-source-1.5-beta-2/srchwnd.cpp	2004-06-15 03:12:00.000000000 +0300
+++ latest/srchwnd.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -24,7 +24,7 @@
 #include "srchwnd.hpp"
 #include "xferwnd.hpp"
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	#include "childwnd.hpp"
 	#include "d_chat.hpp"
 	#include "resource.hpp"
@@ -38,9 +38,50 @@
 
 #if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 	HWND g_search_wnd;
+#endif
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	static W_ListView g_lvsearchres;
 #endif
 
+#if defined(_DEFINE_WXUI)
+#include <wx/filedlg.h>
+#include <wx/clipbrd.h>
+#include "wxbrowser.h"
+#include "wxappresources.h"
+
+WxBrowser *g_search_wnd;
+
+void srchwnd_find_wxwidgets(WxBrowser *dlg)
+{
+	g_search_wnd = dlg;
+
+	g_lvsearchres.setwnd((wxListCtrl*) g_search_wnd->m_searchres);
+
+	g_lvsearchres.AddCol("Item",g_config->ReadInt(CONFIG_search_col1,CONFIG_search_col1_DEFAULT));
+	g_lvsearchres.AddCol("Size",g_config->ReadInt(CONFIG_search_col2,CONFIG_search_col2_DEFAULT));
+	g_lvsearchres.AddCol("Type",g_config->ReadInt(CONFIG_search_col3,CONFIG_search_col3_DEFAULT));
+	g_lvsearchres.AddCol("Date/Time",g_config->ReadInt(CONFIG_search_col6,CONFIG_search_col6_DEFAULT));
+	g_lvsearchres.AddCol("Speed",g_config->ReadInt(CONFIG_search_col4,CONFIG_search_col4_DEFAULT));
+	g_lvsearchres.AddCol("Location",g_config->ReadInt(CONFIG_search_col5,CONFIG_search_col5_DEFAULT));
+	{
+		int x;
+		for (x = 0 ; x < MAX_SRCHTEXTS; x ++) {
+			char buf[123];
+			sprintf(buf,"srchcb_%d",x);
+			const char *o=g_config->ReadString(buf,"");
+			if (*o) {
+				char buf[512];
+				safe_strncpy(buf,o,sizeof(buf));
+				wxString unibuf = cstr_to_wxstr(buf);
+				g_search_wnd->m_searchtext->Append(unibuf);
+			};
+		};
+		wxEnableWindow(g_search_wnd->m_search,0);
+		wxEnableWindow(g_search_wnd->m_goparent,0);
+	}
+}
+#endif
+
 
 SearchCacheItem::SearchCacheItem()
 {
@@ -77,13 +118,29 @@
 #define COL_SPEED 4
 #define COL_LOC 5
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	static unsigned int *m_srch_sort;
 	static int m_srch_sort_len,m_srch_sort_alloc;
 	static int m_fullsize;
 
 	static int m_dir,m_col;
 
+#ifdef _DEFINE_WXUI
+void
+SendMessageSearch (void *ignored)
+{
+int srch_WM_COMMAND_IDC_SEARCH();
+(void) ignored;
+srch_WM_COMMAND_IDC_SEARCH();
+}
+#else
+void
+SendMessageSearch (HWND wnd)
+{
+	SendMessage(wnd,WM_COMMAND,IDC_SEARCH,0);
+}
+#endif
+
 	static int sortFunc(const void *elem1, const void *elem2)
 	{
 		unsigned int a=*(unsigned int *)elem1;
@@ -153,7 +210,7 @@
 			while (*metaptra && *metaptra != ' ') metaptra++;
 			while (*metaptrb && *metaptrb != ' ') metaptrb++;
 
-			int x=strnicmp(metaa,metab,min(metaptra-metaa,metaptrb-metab));
+			int x=strnicmp(metaa,metab,waste_min(metaptra-metaa,metaptrb-metab));
 
 			if (!x) {
 				if (*metaptra) metaptra++;
@@ -223,6 +280,7 @@
 				else {
 					char name[SEARCHREPLY_MAX_FILESIZE];
 					t->get_item(y,NULL,name,NULL,NULL,NULL,NULL);
+
 					if (C_FileDB::substr_search("",name,ssout)) {
 						val++;
 					};
@@ -249,7 +307,13 @@
 		};
 
 		free(ssout);
+
+#if defined(WIN32) && !defined(_DEFINE_WXUI)
 		ListView_SetItemCount(g_lvsearchres.getwnd(),m_srch_sort_len);
+#elif defined(_DEFINE_WXUI)
+		g_lvsearchres.getwnd()->SetItemCount(m_srch_sort_len);
+
+#endif
 
 		char buf[2048];
 		if (m_fullsize != m_srch_sort_len) {
@@ -272,7 +336,11 @@
 			strcat(buf,")");
 		};
 
+#ifdef _DEFINE_WXUI
+		wxSetDlgItemText(g_search_wnd->m_searchstats,buf);
+#else
 		SetDlgItemText(g_search_wnd,IDC_SEARCHSTATS,buf);
+#endif
 		PostMessage(g_search_wnd,WM_USER_TITLEUPDATE,0,0);
 
 	}
@@ -282,7 +350,11 @@
 		if (!m_srch_sort||!g_search_wnd) return;
 
 		char buf[256];
+#ifdef _DEFINE_WXUI
+		wxGetDlgItemText(g_search_wnd->m_edit_filter,buf,sizeof(buf));
+#else
 		GetDlgItemText(g_search_wnd,IDC_EDIT_FILTER,buf,sizeof(buf));
+#endif
 		Search_FilterResults(buf);
 
 		m_col=g_config->ReadInt(CONFIG_search_sortcol,CONFIG_search_sortcol_DEFAULT);
@@ -291,16 +363,23 @@
 		if (m_col >= 0 && m_col < 5 && m_srch_sort_len)
 			qsort(m_srch_sort,m_srch_sort_len,sizeof(unsigned int),sortFunc);
 
+#if defined(WIN32) && !defined(_DEFINE_WXUI)
 		ListView_RedrawItems(g_lvsearchres.getwnd(),0,m_srch_sort_len-1);
 		InvalidateRect(g_lvsearchres.getwnd(),NULL,FALSE);
+#endif
+
 	}
 
 	void Search_Search(char *str)
 	{
+#ifdef _DEFINE_WXUI
+		wxEnableWindow(g_search_wnd->m_search, !!*str);
+#else
 		EnableWindow(GetDlgItem(g_search_wnd,IDC_SEARCH),!!*str);
+#endif
 		//safe_strncpy(g_searchcache[0]->lastsearchtext,str,sizeof(g_searchcache[0]->lastsearchtext));
-		SetDlgItemText(g_search_wnd,IDC_SEARCHTEXT,str);
-		SendMessage(g_search_wnd,WM_COMMAND,IDC_SEARCH,0);
+		wxSetDlgItemText(g_search_wnd->m_searchtext,str);
+		SendMessageSearch(g_search_wnd);
 	}
 
 	class DirGetRec
@@ -361,7 +440,7 @@
 				if (g_searchcache[x]->lastsearchtext[0] == '/') { //fucko might want to make this optional
 					//let's merge any directories or users with other directories or users of the same name
 					int entry;
-					char *cmpstr=strstr(g_searchcache[x]->lastsearchtext+1,"/")?DIRECTORY_STRING:USER_STRING;
+					const char *cmpstr=strstr(g_searchcache[x]->lastsearchtext+1,"/")?DIRECTORY_STRING:USER_STRING;
 					for (entry = 0; entry < n; entry ++) {
 						char name[SEARCHREPLY_MAX_FILESIZE];
 						char meta[SEARCHREPLY_MAX_METASIZE];
@@ -680,267 +759,337 @@
 		};
 		if (willq >= 0) {
 			if (g_config->ReadInt(CONFIG_aotransfer,CONFIG_aotransfer_DEFAULT)) {
-				SendMessage(g_mainwnd,WM_COMMAND,ID_VIEW_TRANSFERS,0);
+				ShowTransfersWindow();
+
+#ifdef _DEFINE_WXUI
+				extern void xfers_to_front();
+				if (g_config->ReadInt(CONFIG_aotransfer_btf,CONFIG_aotransfer_btf_DEFAULT)) xfers_to_front();
+				else g_search_wnd->Raise();
+#else
 
 				if (g_config->ReadInt(CONFIG_aotransfer_btf,CONFIG_aotransfer_btf_DEFAULT)) SetForegroundWindow(g_xferwnd);
 				else SetForegroundWindow(hwndDlg);
+#endif
 
 				XferDlg_SetSel(willq);
 			};
 		};
 	}
 
-	static WNDPROC srch_oldWndProc;
+#if defined(_DEFINE_WXUI)
+	void SrchWnd_Item_Run(int browseIfDir) {
+		SrchWnd_OnItemRun(0, browseIfDir);
+	}
+#endif
 
-	static BOOL CALLBACK srch_newWndProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) && (!defined(_DEFINE_WXUI))
+
+	int SrchWnd_GETDISPINFO(long lParam) {
+		NMLVDISPINFO *lpdi = (NMLVDISPINFO*) lParam;
+		int item=lpdi->item.iItem;
+		if (!m_srch_sort || item < 0 || item >= m_srch_sort_len) return 0;
+
+		int repidx=m_srch_sort[item]&0xffff;
+		C_MessageSearchReply *tr=g_searchcache[0]->searchreplies.Get(m_srch_sort[item]>>16);
+
+		if (lpdi->item.mask & LVIF_TEXT|LVIF_IMAGE) {
+			char name[SEARCHREPLY_MAX_FILESIZE];
+			char metadata[SEARCHREPLY_MAX_METASIZE];
+			char *nameptr=name;
+			int id;
+			unsigned int length_low,length_high;
+			int timev;
+			tr->get_item(repidx,&id,name,metadata,(int*)&length_low,(int*)&length_high,&timev);
+			//MessageBox(hwndDlg,name, APP_NAME " Info stuff",MB_OK|MB_ICONEXCLAMATION);
+			//"name" hold the path of the download path including
+			//the client name
+			int isnode=!stricmp(metadata,USER_STRING);
+			int isdir=!stricmp(metadata,DIRECTORY_STRING);
+
+			if (lpdi->item.mask & LVIF_TEXT)
 	{
-		if ((uMsg == WM_KEYDOWN || uMsg == WM_KEYUP)&&(wParam == VK_RETURN)) {
-			if (uMsg == WM_KEYUP) SendMessage(GetParent(GetParent(hwndDlg)),WM_COMMAND,IDC_SEARCH,0);
-			return 0;
+				char str[SEARCHREPLY_MAX_FILESIZE+128];
+				switch (lpdi->item.iSubItem)
+				{
+				case COL_ITEM:
+					{
+						if (g_searchcache[0]->lastsearchtext[0] != '/' && g_search_showfull!=1) {
+							while (*nameptr) nameptr++;
+							while (nameptr >= name && *nameptr != '/' && *nameptr != '\\') nameptr--;
+							if (g_search_showfull == 2 && nameptr >= name) {
+								nameptr--;
+								while (nameptr >= name && *nameptr != '/' && *nameptr != '\\') nameptr--;
 		};
-		return CallWindowProc(srch_oldWndProc,hwndDlg,uMsg,wParam,lParam);
-	}
+							nameptr++;
+							while (*nameptr == '/' || *nameptr == '\\') nameptr++;
+						};
+						break;
+					};
+				case COL_SIZE:
+					{
+						if (g_searchcache[0]->lastsearchtext[0] == '/' && !stricmp(metadata,DIRECTORY_STRING)) {
+							if (strncmp(name,"..",2)) {
+								__int64 a=length_high;
+								a<<=20;
 
-	static WNDPROC srchres_oldWndProc;
+								int lb_l=(int)(a&0xffffffff);
+								int lb_h=(int)(a>>32);
 
-	static BOOL CALLBACK srchres_newWndProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
+								FormatSizeStr64(str,lb_l,lb_h);
+								sprintf(str+strlen(str)," in %d items",length_low);
+							}
+							else
+								strcpy(str,"");
+						}
+						else if (g_searchcache[0]->lastsearchtext[0] == '/' && !stricmp(metadata,USER_STRING)) {
+							if (!g_searchcache[0]->lastsearchtext[1] && !strstr(name,"/") && strlen(name)<24 &&
+								name[0] != '.')
 	{
-		if ((uMsg == WM_KEYDOWN || uMsg == WM_KEYUP)&&(wParam == VK_RETURN || wParam == VK_BACK)) {
-			if (uMsg == WM_KEYUP && wParam == VK_RETURN) SrchWnd_OnItemRun(GetParent(hwndDlg),1);
+								main_onGotNick(name,0);
+							};
+							if (length_low || length_high && strncmp(name,"..",2)) {
+								__int64 a=length_high;
+								a<<=20;
 
-			if (uMsg == WM_KEYUP && wParam == VK_BACK) {
-				PostMessage(GetParent(hwndDlg),WM_COMMAND,IDC_BACK,0);
+								int lb_l=(int)(a&0xffffffff);
+								int lb_h=(int)(a>>32);
+
+								FormatSizeStr64(str,lb_l,lb_h);
+								sprintf(str+strlen(str)," in %d items",length_low);
+							}
+							else
+								strcpy(str,"");
+						}
+						else {
+							if ((g_search_showfullbytes || length_low < 1024) && !length_high) sprintf(str,"%u",length_low);
+							else {
+								FormatSizeStr64(str,length_low,length_high);
 			};
-			return 0;
 		};
-		return CallWindowProc(srchres_oldWndProc,hwndDlg,uMsg,wParam,lParam);
-	}
-
-	static UINT CALLBACK fileHookProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM /*lParam*/)
+						nameptr=str;
+						break;
+					};
+				case COL_TYPE:
 	{
-		if (uMsg == WM_INITDIALOG) {
-			SetDlgItemText(hwndDlg,IDC_UPATH,g_filedlg_ulpath);
+						if (!metadata[0]) {
+							char *p=::extension(name);
+							if (!*p) strcpy(metadata,"(no info)");
+							else {
+								int x;
+								for (x=0; *p && x < sizeof(metadata)-1; x++, p++) metadata[x]=(char)(toupper(*p)&0xff);
+								metadata[x]=0;
 		};
-		if (uMsg == WM_COMMAND) {
-			if (LOWORD(wParam) == IDC_UPATH && HIWORD(wParam) == EN_CHANGE) {
-				GetDlgItemText(hwndDlg,IDC_UPATH,g_filedlg_ulpath,sizeof(g_filedlg_ulpath));
-				return 1;
 			};
+						nameptr=metadata;
+						break;
+					};
+				case COL_TIME:
+					{
+						if (timev) {
+							struct tm *a=localtime((const time_t *)&timev);
+							if (!a) {
+								time_t b=0;
+								a=gmtime(&b);
 		};
 
-		return 0;
+							if (a) strftime(str,sizeof(str),"%c",a);
+							else wsprintf(str,"?:%d",timev);
+							nameptr=str;
 	}
-
-	BOOL WINAPI Search_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
+						else nameptr="";
+						break;
+					};
+				case COL_SPEED:
 	{
-		static dlgSizeInfo sizeinf={"search",50,50,567,430};
-		static ChildWndResizeItem rlist[]={
-			{IDC_SEARCHTEXT,0x0010},
-			{IDC_SEARCH,0x1010},
-			{IDC_SEARCHSTATS,0x0111},
-			{IDC_SEARCHRES,0x0011},
-			{IDC_SRESULTLBL,0x0101},
-			{IDC_EDIT_FILTER,0x0101},
+						sprintf(str,"%dms (",tr->_latency);
+						get_speedstr(tr->get_conspeed(),str+strlen(str));
+						strcat(str,")");
+						nameptr=str;
+						break;
 		};
-		switch (uMsg)
+				case COL_LOC:
 		{
-		case WM_GETMINMAXINFO:
+						sprintf(str,"%s:%d",tr->_guidstr,id);
+						nameptr=str;
+						break;
+					};
+				default:
 			{
-				LPMINMAXINFO m=(LPMINMAXINFO)lParam;
-				if (m) {
-					m->ptMinTrackSize.x=164;
-					m->ptMinTrackSize.y=134;
+						*nameptr=0;
+						break;
 				};
-				return 0;
 			};
-		case WM_CLOSE:
-			{
-				ShowWindow(hwndDlg,SW_HIDE);
-				CheckMenuItem(GetMenu(g_mainwnd),IDC_SEARCH,MF_UNCHECKED|MF_BYCOMMAND);
-				g_config->WriteInt(CONFIG_search_vis,0);
-				return 0;
+				strcpy(lpdi->item.pszText,nameptr);
 			};
-		case WM_INITDIALOG:
-			{
-				srch_oldWndProc=(WNDPROC) SetWindowLong(FindWindowEx(GetDlgItem(hwndDlg,IDC_SEARCHTEXT),NULL,"Edit",NULL),GWL_WNDPROC,(LONG)srch_newWndProc);
-				srchres_oldWndProc=(WNDPROC) SetWindowLong(GetDlgItem(hwndDlg,IDC_SEARCHRES),GWL_WNDPROC,(LONG)srchres_newWndProc);
-				SetTimer(hwndDlg,1,1000,NULL);
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_GOROOT),"Go to user list");
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_GOPARENT),"Go to parent directory");
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_BACK),"Go back");
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_BACK2),"Go back (list)");
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_FORWARD),"Go forward");
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_FORWARD2),"Go forward (list)");
-				CreateTooltip(GetDlgItem(hwndDlg,IDC_SEARCH),"Go to location");
+			if(lpdi->item.mask & LVIF_IMAGE) {
+				lpdi->item.iImage = isdir?1:isnode?2:0;
+			};
+		};
+		return 0;
+	}
 
-				SendDlgItemMessage(hwndDlg,IDC_SEARCH,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_SEARCH),IMAGE_ICON,16,16,0));
+#elif defined(_DEFINE_WXUI)
 
-				SendDlgItemMessage(hwndDlg,IDC_GOROOT,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_ROOT),IMAGE_ICON,16,16,0));
-				SendDlgItemMessage(hwndDlg,IDC_GOPARENT,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_PARENT),IMAGE_ICON,16,16,0));
+	size_t my_strftime(char *s, size_t max, const char *fmt, const struct tm *tm) {
+		return strftime(s, max, fmt, tm);
+	}
 
-				SendDlgItemMessage(hwndDlg,IDC_BACK,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_BACKWARD),IMAGE_ICON,16,16,0));
-				SendDlgItemMessage(hwndDlg,IDC_FORWARD,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_FORWARD),IMAGE_ICON,16,16,0));
+	wxString SrchWnd_GetItemText (long item, long column)
+	{
+		if (!m_srch_sort || item < 0 || item >= m_srch_sort_len)
+			return wxString(_T(""));
 
-				SendDlgItemMessage(hwndDlg,IDC_BACK2,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_MORE),IMAGE_ICON,7,4,0));
-				SendDlgItemMessage(hwndDlg,IDC_FORWARD2,BM_SETIMAGE,IMAGE_ICON,
-					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_MORE),IMAGE_ICON,7,4,0));
+		int repidx=m_srch_sort[item]&0xffff;
+		C_MessageSearchReply *tr=g_searchcache[0]->searchreplies.Get(m_srch_sort[item]>>16);
 
-				g_lvsearchres.setwnd(GetDlgItem(hwndDlg,IDC_SEARCHRES));
-				{
-					HIMAGELIST hImageList;
-					hImageList = ImageList_Create(16,16, ILC_COLOR32|ILC_MASK, 3, 3);
-					ImageList_AddIcon(hImageList,(HICON)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_FILE),IMAGE_ICON,16,16,0));
-					ImageList_AddIcon(hImageList,(HICON)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_DIR),IMAGE_ICON,16,16,0));
-					ImageList_AddIcon(hImageList,(HICON)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_USER),IMAGE_ICON,16,16,0));
-					ListView_SetImageList(g_lvsearchres.getwnd(),hImageList,LVSIL_SMALL);
-				};
-				g_lvsearchres.AddCol("Item",g_config->ReadInt(CONFIG_search_col1,CONFIG_search_col1_DEFAULT));
-				g_lvsearchres.AddCol("Size",g_config->ReadInt(CONFIG_search_col2,CONFIG_search_col2_DEFAULT));
-				g_lvsearchres.AddCol("Type",g_config->ReadInt(CONFIG_search_col3,CONFIG_search_col3_DEFAULT));
-				g_lvsearchres.AddCol("Date/Time",g_config->ReadInt(CONFIG_search_col6,CONFIG_search_col6_DEFAULT));
-				g_lvsearchres.AddCol("Speed",g_config->ReadInt(CONFIG_search_col4,CONFIG_search_col4_DEFAULT));
-				g_lvsearchres.AddCol("Location",g_config->ReadInt(CONFIG_search_col5,CONFIG_search_col5_DEFAULT));
-				childresize_init(hwndDlg,rlist,sizeof(rlist)/sizeof(rlist[0]));
+		char name[SEARCHREPLY_MAX_FILESIZE];
+		char metadata[SEARCHREPLY_MAX_METASIZE];
+		char *nameptr=name;
+		int id;
+		unsigned int length_low,length_high;
+		int timev;
+		tr->get_item(repidx,&id,name,metadata,(int*)&length_low,(int*)&length_high,&timev);
+		//MessageBox(hwndDlg,name, APP_NAME " Info stuff",MB_OK|MB_ICONEXCLAMATION);
+		//"name" hold the path of the download path including
+		//the client name
+		char str[SEARCHREPLY_MAX_FILESIZE+128];
+		switch (column)
 				{
-					int x;
-					for (x = 0 ; x < MAX_SRCHTEXTS; x ++) {
-						char buf[123];
-						sprintf(buf,"srchcb_%d",x);
-						const char *o=g_config->ReadString(buf,"");
-						if (*o) {
-							char buf[512];
-							safe_strncpy(buf,o,sizeof(buf));
-							SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_INSERTSTRING,x,(LPARAM)buf);
-						};
+		case COL_ITEM:
+			{
+				if (g_searchcache[0]->lastsearchtext[0] != '/' && g_search_showfull!=1) {
+					while (*nameptr) nameptr++;
+					while (nameptr >= name && *nameptr != '/' && *nameptr != '\\') nameptr--;
+					if (g_search_showfull == 2 && nameptr >= name) {
+						nameptr--;
+						while (nameptr >= name && *nameptr != '/' && *nameptr != '\\') nameptr--;
 					};
-					EnableWindow(GetDlgItem(hwndDlg,IDC_SEARCH),0);
-					EnableWindow(GetDlgItem(hwndDlg,IDC_GOPARENT),0);
+					nameptr++;
+					while (*nameptr == '/' || *nameptr == '\\') nameptr++;
 				};
+				break;
 			};
-		case WM_USER_TITLEUPDATE:
+		case COL_SIZE:
 			{
-				char buf[1024];
-				strcpy(buf,"Browser");
-				int numresults=m_srch_sort_len;
-				int numfresults=m_fullsize;
-				int a=0;
+				if (g_searchcache[0]->lastsearchtext[0] == '/' && !stricmp(metadata,DIRECTORY_STRING)) {
+					if (strncmp(name,"..",2)) {
+						__int64 a=length_high;
+						a<<=20;
 
-				if (numfresults) {
-					if (numfresults != numresults)
-						sprintf(buf+strlen(buf),"%s%d of %d result%s",a++?", ":" (",numresults,numfresults,numfresults==1?"":"s");
+						int lb_l=(int)(a&0xffffffff);
+						int lb_h=(int)(a>>32);
+
+						FormatSizeStr64(str,lb_l,lb_h);
+						sprintf(str+strlen(str)," in %d items",length_low);
+					}
 					else
-						sprintf(buf+strlen(buf),"%s%d result%s",a++?", ":" (",numresults,numresults==1?"":"s");
+						strcpy(str,"");
+				}
+				else if (g_searchcache[0]->lastsearchtext[0] == '/' && !stricmp(metadata,USER_STRING)) {
+					if (!g_searchcache[0]->lastsearchtext[1] && !strstr(name,"/") && strlen(name)<24 &&
+						name[0] != '.')
+					{
+						main_onGotNick(name,0);
 				};
-				if (a) strcat(buf,")");
+					if (length_low || length_high && strncmp(name,"..",2)) {
+						__int64 a=length_high;
+						a<<=20;
 
-				strcat(buf," - " APP_NAME);
-				SetWndTitle(hwndDlg,buf);
-				return 0;
+						int lb_l=(int)(a&0xffffffff);
+						int lb_h=(int)(a>>32);
+
+						FormatSizeStr64(str,lb_l,lb_h);
+						sprintf(str+strlen(str)," in %d items",length_low);
+					}
+					else
+						strcpy(str,"");
+				}
+				else {
+					if ((g_search_showfullbytes || length_low < 1024) && !length_high) sprintf(str,"%u",length_low);
+					else {
+						FormatSizeStr64(str,length_low,length_high);
 			};
-		case WM_SHOWWINDOW:
-			{
-				static int m_hack;
-				if (!m_hack) {
-					m_hack=1;
-					int m=g_config->ReadInt(CONFIG_search_maximized,CONFIG_search_maximized_DEFAULT);
-					handleDialogSizeMsgs(hwndDlg,WM_INITDIALOG,0,0,&sizeinf);
-					if (m) ShowWindow(hwndDlg,SW_SHOWMAXIMIZED);
 				};
-				return 0;
+				nameptr=str;
+				break;
 			};
-		case WM_TIMER:
+		case COL_TYPE:
 			{
-				if (wParam == 1) {
-					if (IsWindowVisible(hwndDlg) && g_mql && g_mql->GetNumQueues()) {
-						KillTimer(hwndDlg,wParam);
-						if (g_searchcache[0]->lastsearchtext[0] == '/') {
-							SendMessage(hwndDlg,WM_COMMAND,IDC_SEARCH,0);
-						};
+				if (!metadata[0]) {
+					char *p=::extension(name);
+					if (!*p) strcpy(metadata,"(no info)");
+					else {
+						int x;
+						for (x=0; *p && x < ((int) sizeof(metadata))-1; x++, p++) metadata[x]=(char)(toupper(*p)&0xff);
+						metadata[x]=0;
 					};
 				};
-				return 0;
+				nameptr=metadata;
+				break;
 			};
-		case WM_DESTROY:
+		case COL_TIME:
 			{
-				g_config->WriteInt(CONFIG_search_col1,g_lvsearchres.GetColumnWidth(0));
-				g_config->WriteInt(CONFIG_search_col2,g_lvsearchres.GetColumnWidth(1));
-				g_config->WriteInt(CONFIG_search_col3,g_lvsearchres.GetColumnWidth(2));
-				g_config->WriteInt(CONFIG_search_col6,g_lvsearchres.GetColumnWidth(3));
-				g_config->WriteInt(CONFIG_search_col4,g_lvsearchres.GetColumnWidth(4));
-				g_config->WriteInt(CONFIG_search_col5,g_lvsearchres.GetColumnWidth(5));
-				int a=!!g_config->ReadInt(CONFIG_srchcb_use,CONFIG_srchcb_use_DEFAULT);
-				int x;
-				for (x = 0; x < MAX_SRCHTEXTS; x ++) {
-					char buf[123];
-					char obuf[1024];
-					obuf[0]=0;
-					if (a) {
-						SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_GETLBTEXT,(LPARAM)x,(WPARAM)obuf);
-					};
-					sprintf(buf,"srchcb_%d",x);
-					g_config->WriteString(buf,obuf);
+				if (timev) {
+					struct tm *a=localtime((const time_t *)&timev);
+					if (!a) {
+						time_t b=0;
+						a=gmtime(&b);
 				};
-				return 0;
+
+					if (a) my_strftime(str,sizeof(str),"%c",a);
+					else snprintf(str,31,"?:%d",timev);
+					nameptr=str;
+				}
+				else nameptr="";
+				break;
 			};
-		case WM_SIZE:
+		case COL_SPEED:
 			{
-				if (wParam != SIZE_MINIMIZED) {
-					childresize_resize(hwndDlg,rlist,sizeof(rlist)/sizeof(rlist[0]));
-					handleDialogSizeMsgs(hwndDlg,uMsg,wParam,lParam,&sizeinf);
-				};
-				return 0;
+				sprintf(str,"%dms (",tr->_latency);
+				get_speedstr(tr->get_conspeed(),str+strlen(str));
+				strcat(str,")");
+				nameptr=str;
+				break;
 			};
-		case WM_MOVE:
+		case COL_LOC:
 			{
-				handleDialogSizeMsgs(hwndDlg,uMsg,wParam,lParam,&sizeinf);
-				return 0;
+				sprintf(str,"%s:%d",tr->_guidstr,id);
+				nameptr=str;
+				break;
 			};
-		case WM_NOTIFY:
+		default:
 			{
-				LPNMHDR l=(LPNMHDR)lParam;
-				if (l->idFrom == IDC_SEARCHRES) {
-					if (l->code == LVN_ODFINDITEM) {
-						NMLVFINDITEM *t = (NMLVFINDITEM *)lParam;
+				*nameptr=0;
+				break;
+			};
+		};
 
-						int i=t->iStart;
-						if (i >= m_srch_sort_len) i=0;
+		return cstr_to_wxstr(nameptr);
+	}
 
-						int cnt=m_srch_sort_len-i;
-						if (t->lvfi.flags & LVFI_WRAP) cnt+=i;
+	int SrchWnd_GetItemImage (long item)
+	{
+		if (!m_srch_sort || item < 0 || item >= m_srch_sort_len) return 0;
+		int repidx=m_srch_sort[item]&0xffff;
+		C_MessageSearchReply *tr=g_searchcache[0]->searchreplies.Get(m_srch_sort[item]>>16);
 
-						while (cnt-->0) {
-							int repidx=m_srch_sort[i]&0xffff;
-							C_MessageSearchReply *tr=g_searchcache[0]->searchreplies.Get(m_srch_sort[i]>>16);
 							char name[SEARCHREPLY_MAX_FILESIZE];
-							tr->get_item(repidx,NULL,name,NULL,NULL,NULL,NULL);
-							if (t->lvfi.flags & (4|LVFI_PARTIAL)) {
-								if (!strnicmp(name,t->lvfi.psz,strlen(t->lvfi.psz))) {
-									SetWindowLong(hwndDlg,DWL_MSGRESULT,i);
-									return 1;
-								};
-							}
-							else if (t->lvfi.flags & LVFI_STRING) {
-								if (!stricmp(name,t->lvfi.psz)) {
-									SetWindowLong(hwndDlg,DWL_MSGRESULT,i);
-									return 1;
-								};
-							}
-							else {
-								SetWindowLong(hwndDlg,DWL_MSGRESULT,-1);
-								return 1;
-							};
-							if (++i == m_srch_sort_len) i=0;
-						};
-						SetWindowLong(hwndDlg,DWL_MSGRESULT,-1);
-						return 1;
+		char metadata[SEARCHREPLY_MAX_METASIZE];
+		int id;
+		unsigned int length_low,length_high;
+		int timev;
+		tr->get_item(repidx,&id,name,metadata,(int*)&length_low,(int*)&length_high,&timev);
+		//MessageBox(hwndDlg,name, APP_NAME " Info stuff",MB_OK|MB_ICONEXCLAMATION);
+		//"name" hold the path of the download path including
+		//the client name
+		int isnode=!stricmp(metadata,USER_STRING);
+		int isdir=!stricmp(metadata,DIRECTORY_STRING);
+
+		return isdir?1:isnode?2:0;
 					}
-					else if (l->code == LVN_GETDISPINFO) {
+
+#if 0
+	int SrchWnd_GETDISPINFO(int want, long item, long column) {
 						NMLVDISPINFO *lpdi = (NMLVDISPINFO*) lParam;
 						int item=lpdi->item.iItem;
 						if (!m_srch_sort || item < 0 || item >= m_srch_sort_len) return 0;
@@ -1083,91 +1232,550 @@
 						};
 						return 0;
 					}
-					else if (l->code == NM_DBLCLK) {
-						SrchWnd_OnItemRun(hwndDlg,1);
-					}
-					else if (l->code == LVN_COLUMNCLICK) {
-						NMLISTVIEW *p=(NMLISTVIEW*)lParam;
-						int l_sc=g_config->ReadInt(CONFIG_search_sortcol,CONFIG_search_sortcol_DEFAULT);
-						int l_sd=g_config->ReadInt(CONFIG_search_sortdir,CONFIG_search_sortdir_DEFAULT);
-						if (p->iSubItem == l_sc) l_sd=!l_sd;
-						else l_sc=p->iSubItem;
+#endif
 
-						g_config->WriteInt(CONFIG_search_sortcol,l_sc);
-						g_config->WriteInt(CONFIG_search_sortdir,l_sd);
+#endif
 
-						Search_Resort();
+#if !defined(_DEFINE_WXUI) && !defined(_DEFINE_SRV)
+
+	static WNDPROC srch_oldWndProc;
+
+	static BOOL CALLBACK srch_newWndProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
+	{
+		if ((uMsg == WM_KEYDOWN || uMsg == WM_KEYUP)&&(wParam == VK_RETURN)) {
+			if (uMsg == WM_KEYUP) SendMessageSearch(GetParent(GetParent(hwndDlg)));
+			return 0;
+		};
+		return CallWindowProc(srch_oldWndProc,hwndDlg,uMsg,wParam,lParam);
 					}
-					else if (l->code == NM_RCLICK) {
-						int isRoot = !(g_searchcache[0]->lastsearchtext[0] != '/' ||
-							strstr(g_searchcache[0]->lastsearchtext+1,"/") ||
-							(g_searchcache[0]->lastsearchtext[1] &&
-							g_searchcache[0]->lastsearchtext[strlen(g_searchcache[0]->lastsearchtext)-1]!='*'));
 
-						int isDirSelected=0;
-						int sel=0;
-						int isParent=0;
+	static WNDPROC srchres_oldWndProc;
 
-						int l=g_lvsearchres.GetCount();
-						int x;//,a=0; //HACK "a" never used
-						for (x = 0; x < l; x ++) {
-							if (g_lvsearchres.GetSelected(x)) {
-								char name[SEARCHREPLY_MAX_FILESIZE];
-								char type[SEARCHREPLY_MAX_METASIZE];
-								sel++;
-								if (g_searchcache[0]->lastsearchtext[0] != '/') break;
-								int a=m_srch_sort[x];
-								C_MessageSearchReply *sr=g_searchcache[0]->searchreplies.Get(a>>16);
-								sr->get_item(a&0xffff,NULL,name,type,NULL,NULL,NULL);
-								if (!stricmp(type,DIRECTORY_STRING)) isDirSelected=1;
-								if (!strncmp(name,"..",2)) isParent=1;
+	static BOOL CALLBACK srchres_newWndProc(HWND hwndDlg, UINT uMsg, WPARAM wParam,LPARAM lParam)
+	{
+		if ((uMsg == WM_KEYDOWN || uMsg == WM_KEYUP)&&(wParam == VK_RETURN || wParam == VK_BACK)) {
+			if (uMsg == WM_KEYUP && wParam == VK_RETURN) SrchWnd_OnItemRun(GetParent(hwndDlg),1);
+
+			if (uMsg == WM_KEYUP && wParam == VK_BACK) {
+				PostMessage(GetParent(hwndDlg),WM_COMMAND,IDC_BACK,0);
 							};
+			return 0;
 						};
+		return CallWindowProc(srchres_oldWndProc,hwndDlg,uMsg,wParam,lParam);
+	}
 
-						HMENU hMenu=GetSubMenu(g_context_menus,
-							isRoot?6:g_searchcache[0]->lastsearchtext[0] == '/'?7:1);
-
-						EnableMenuItem(hMenu,ID_COPYLOC,sel==1?MF_ENABLED:MF_GRAYED);
+	static UINT CALLBACK fileHookProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM /*lParam*/)
+	{
+		if (uMsg == WM_INITDIALOG) {
+			SetDlgItemText(hwndDlg,IDC_UPATH,g_filedlg_ulpath);
+		};
+		if (uMsg == WM_COMMAND) {
+			if (LOWORD(wParam) == IDC_UPATH && HIWORD(wParam) == EN_CHANGE) {
+				GetDlgItemText(hwndDlg,IDC_UPATH,g_filedlg_ulpath,sizeof(g_filedlg_ulpath));
+				return 1;
+			};
+		};
 
-						if (isRoot) {
-							EnableMenuItem(hMenu,ID_BROWSENODE,sel==1?MF_ENABLED:MF_GRAYED);
-							EnableMenuItem(hMenu,ID_PRIVMSGNODE,sel?MF_ENABLED:MF_GRAYED);
-							EnableMenuItem(hMenu,ID_SENDFILENODE,sel?MF_ENABLED:MF_GRAYED);
+		return 0;
 						}
-						else if (g_searchcache[0]->lastsearchtext[0] == '/') {
-							if (isDirSelected) {
-								ModifyMenu(hMenu,0,MF_BYPOSITION,ID_BROWSEFOLDER,"Browse directory");
-								ModifyMenu(hMenu,1,MF_BYPOSITION,ID_DOWNLOADFOLDER,"Download");
-								EnableMenuItem(hMenu,ID_BROWSEFOLDER,sel==1?MF_ENABLED:MF_GRAYED);
+#endif /* _DEFINE_WXUI || _DEFINE_SRV */
+#endif
+
+#if !defined(_DEFINE_WXUI) && !defined(_DEFINE_SRV)
+int
+srch_WM_CLOSE ()
+{
+	ShowWindow(hwndDlg,SW_HIDE);
+	CheckMenuItem(GetMenu(g_mainwnd),IDC_SEARCH,MF_UNCHECKED|MF_BYCOMMAND);
+	g_config->WriteInt(CONFIG_search_vis,0);
+	return 0;
+}
+#endif
+
+#ifndef _DEFINE_SRV
+
+int srch_WM_COMMAND_IDC_SEARCH()
+{
+	//store nav position in last cached item
+	{
+		int n=g_lvsearchres.GetCount();
+		int x;
+		for (x = 0; x < n && !g_lvsearchres.GetSelected(x); x ++);
+		if (x >= 0 && x < m_srch_sort_len)
+			g_searchcache[0]->lastvisitem=m_srch_sort[x]; //save last pos
+	};
+
+	int ci;
+	int cached=0;
+	int replpos=0; //position to replace
+	char text[512];
+	wxGetDlgItemText(g_search_wnd->m_searchtext,text,511);
+	if (!strnicmp(text,"waste:",6)) {
+		char *in=text+6, *out=text;
+		while (*in) {
+			if (!strncmp(in,"%20",3)) {
+				*out++=' ';
+				in+=3;
 							}
-							else {
-								ModifyMenu(hMenu,0,MF_BYPOSITION,ID_DOWNLOADFOLDER,"Download");
-								ModifyMenu(hMenu,1,MF_BYPOSITION,ID_BROWSEFOLDER,"Browse directory");
-								EnableMenuItem(hMenu,ID_BROWSEFOLDER,MF_GRAYED);
+			else *out++=*in++;
 							};
-							EnableMenuItem(hMenu,ID_DOWNLOADFOLDER,(sel&&(!isParent||sel>1))?MF_ENABLED:MF_GRAYED);
+		*out=0;
+		wxSetDlgItemText(g_search_wnd->m_searchtext,text);
+	};
+
+#ifdef _DEFINE_WXUI
+	wxEnableWindow(g_search_wnd->m_goparent, text[0]=='/'&&text[1]);
+#else
+	EnableWindow(GetDlgItem(hwndDlg,IDC_GOPARENT),text[0]=='/'&&text[1]);
+#endif
+
+	if (strlen(text)<=0) return 0;
+
+	{
+		char *t=g_searchhistory.Get(g_searchhistory_position);
+		if (!t || strcmp(t,text)) {
+			if (g_searchhistory.GetSize()) g_searchhistory_position++;
+			while (g_searchhistory.GetSize() > g_searchhistory_position) {
+				free(g_searchhistory.Get(g_searchhistory_position));
+				g_searchhistory.Del(g_searchhistory_position);
+			};
+			g_searchhistory.Add(strdup(text));
+			if (g_searchhistory.GetSize() > MAX_SEARCH_HISTORY_LEN) {
+				free(g_searchhistory.Get(0));
+				g_searchhistory.Del(0);
+				g_searchhistory_position--;
+			};
+		};
+	};
+
+#ifdef _DEFINE_WXUI
+	wxEnableWindow(g_search_wnd->m_back,g_searchhistory_position>0);
+	wxEnableWindow(g_search_wnd->m_back2,g_searchhistory_position>0);
+	wxEnableWindow(g_search_wnd->m_forward,g_searchhistory_position<g_searchhistory.GetSize()-1);
+	wxEnableWindow(g_search_wnd->m_forward2,g_searchhistory_position<g_searchhistory.GetSize()-1);
+#else
+
+	EnableWindow(GetDlgItem(hwndDlg,IDC_BACK),g_searchhistory_position>0);
+	EnableWindow(GetDlgItem(hwndDlg,IDC_BACK2),g_searchhistory_position>0);
+	EnableWindow(GetDlgItem(hwndDlg,IDC_FORWARD),g_searchhistory_position<g_searchhistory.GetSize()-1);
+	EnableWindow(GetDlgItem(hwndDlg,IDC_FORWARD2),g_searchhistory_position<g_searchhistory.GetSize()-1);
+#endif
+
+	//see if we can't find 'text' in cache, that hasn't expired.
+	//if we do find it, and it is in entry 0, then we clear entry 0
+	//and go for it.
+	for (ci = 0; ci < SEARCHCACHE_NUMITEMS; ci ++) {
+		if (!strcmp(text,g_searchcache[ci]->lastsearchtext)) {
+			replpos=ci;
+			if (ci > 0 && g_searchcache[ci]->searchreplies.GetSize() &&
+				g_searchcache[ci]->search_id_time+SEARCHCACHE_EXPIRE_TIME >= GetTickCount() &&
+				g_searchcache[ci]->numcons*2 >= g_mql->GetNumQueues()
+				) cached=1;
+			break;
+		};
+		if (g_searchcache[ci]->search_id_time < g_searchcache[replpos]->search_id_time) replpos=ci;
+	};
+
+	if (replpos > 0) {
+		int x;
+		SearchCacheItem *tmp=g_searchcache[replpos];
+		for (x = replpos; x > 0; x --) g_searchcache[x]=g_searchcache[x-1];
+		g_searchcache[0]=tmp;
+	};
+
+#ifdef _DEFINE_WXUI
+
+	wxString wxtext = cstr_to_wxstr(text);
+	{
+		int findpos = g_search_wnd->m_searchtext->FindString(wxtext);
+		if (findpos != wxNOT_FOUND) { g_search_wnd->m_searchtext->Delete(findpos); }
 						}
-						else { //normal search menu
-							EnableMenuItem(hMenu,ID_DLPARENT,sel==1?MF_ENABLED:MF_GRAYED);
-							EnableMenuItem(hMenu,ID_BROWSELOC,sel==1?MF_ENABLED:MF_GRAYED);
-							EnableMenuItem(hMenu,ID_DOWNLOAD,sel?MF_ENABLED:MF_GRAYED);
+
+#if (wxMAJOR_VERSION >= 2 && wxMINOR_VERSION >= 5)
+	g_search_wnd->m_searchtext->Insert(wxtext, 0);
+	g_search_wnd->m_searchtext->SetSelection(0);
+#else
+	// wxWindows 2.4.x doesn't allow insertion at start of list! duh
+	g_search_wnd->m_searchtext->Append(wxtext);
+	int newpos = g_search_wnd->m_searchtext->GetCount() - 1;
+	g_search_wnd->m_searchtext->SetSelection(newpos);
+#endif
+
+#else
+
+	{
+		int findpos=SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_FINDSTRINGEXACT,(WPARAM)-1,(LPARAM)text);
+		if (findpos != CB_ERR) SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_DELETESTRING,findpos,0);
 						};
 
-						POINT p;
-						GetCursorPos(&p);
+	SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_INSERTSTRING,0,(LPARAM)text);
+	SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_SETCURSEL,0,0);
 
-						x=TrackPopupMenu(hMenu,TPM_RETURNCMD|TPM_RIGHTBUTTON|TPM_LEFTBUTTON|TPM_NONOTIFY,p.x,p.y,0,hwndDlg,NULL);
+#endif
 
-						if (x == ID_DOWNLOAD || x == ID_BROWSEFOLDER || x == ID_DOWNLOADFOLDER ||
-							x == ID_BROWSENODE)
+	g_lvsearchres.Clear();
+	free(m_srch_sort);
+	m_srch_sort=0;
+	m_srch_sort_len=0;
+	m_srch_sort_alloc=0;
+	m_fullsize=0;
+
+	if (cached) {
+		m_srch_sort_len=0;
+		int x;
+		for (x = 0; x < g_searchcache[0]->searchreplies.GetSize(); x ++) {
+			C_MessageSearchReply *sr=g_searchcache[0]->searchreplies.Get(x);
+			m_srch_sort_len+=sr->get_numitems();
+		};
+
+		if (m_srch_sort_len >= m_srch_sort_alloc) {
+			m_srch_sort_alloc=(m_srch_sort_len*3)/2;
+			m_srch_sort=(unsigned int *)realloc(m_srch_sort,m_srch_sort_alloc*sizeof(unsigned int));
+			if (!m_srch_sort) {
+				m_srch_sort_len=0;
+				m_srch_sort_alloc=0;
+			};
+		};
+		Search_Resort();
+		for (x = 0; x < m_srch_sort_len; x ++) {
+			if (m_srch_sort[x] == g_searchcache[0]->lastvisitem) {
+#ifdef _DEFINE_WXUI
+				g_lvsearchres.getwnd()->EnsureVisible(x);
+				g_lvsearchres.getwnd()->SetItemState(x, wxLIST_STATE_FOCUSED|wxLIST_STATE_SELECTED, wxLIST_STATE_FOCUSED|wxLIST_STATE_SELECTED);
+#else
+				ListView_EnsureVisible(g_lvsearchres.getwnd(),x,FALSE);
+				ListView_SetItemState(g_lvsearchres.getwnd(),x,LVIS_FOCUSED|LVIS_SELECTED,LVIS_FOCUSED|LVIS_SELECTED);
+#endif
+
+				break;
+			};
+		};
+	}
+	else { //not cached
+		while (g_searchcache[0]->searchreplies.GetSize()) {
+			int last=g_searchcache[0]->searchreplies.GetSize()-1;
+			C_MessageSearchReply *sr=g_searchcache[0]->searchreplies.Get(last);
+			delete sr;
+			g_searchcache[0]->searchreplies.Del(last);
+		};
+		T_Message msg={0,};
+		C_MessageSearchRequest req;
+		req.set_min_conspeed(0); //g_config->ReadInt(CONFIG_search_minspeed,CONFIG_search_minspeed_DEFAULT));
+		req.set_searchstring(text);
+		msg.data=req.Make();
+		if (msg.data) {
+			dbg_printf(ds_Debug,"sending search for %s!",text);
+			msg.message_type=MESSAGE_SEARCH;
+			msg.message_length=msg.data->GetLength();
+			g_mql->send(&msg);
+			g_searchcache[0]->search_id=msg.message_guid;
+			g_searchcache[0]->search_id_time=GetTickCount();
+			g_searchcache[0]->numcons=g_mql->GetNumQueues();
+		};
+		safe_strncpy(g_searchcache[0]->lastsearchtext,text,sizeof(g_searchcache[0]->lastsearchtext));
+		char text2[1024];
+		if (text[0] == '/')
+			sprintf(text2,"Browsing %s:",text);
+		else
+			sprintf(text2,"Searching for \'%s\'...",text);
+#ifdef _DEFINE_WXUI
+		wxSetDlgItemText(g_search_wnd->m_searchstats,text2);
+#else
+		SetDlgItemText(hwndDlg,IDC_SEARCHSTATS,text2);
+#endif
+		if (g_searchcache[0]->lastsearchtext[0] == '/') {
+			C_MessageSearchReply repl;
+			repl.set_conspeed(g_conspeed);
+			repl.clear_items();
+			repl.set_guid(&g_client_id);
+
+			if (g_searchcache[0]->lastsearchtext[1] && g_searchcache[0]->lastsearchtext[1] != '*' &&
+				strcmp(g_searchcache[0]->lastsearchtext+strlen(g_searchcache[0]->lastsearchtext)-2,"*s"))
 						{
-							SrchWnd_OnItemRun(hwndDlg,x != ID_DOWNLOADFOLDER);
+				//HACK init but unref
+				//T_Message msg={0,};
+				//HACK init but unref
+				//char *p=strstr(g_searchcache[0]->lastsearchtext+1,"/");
+				repl.add_item(-1,PARENT_DIRSTRING,DIRECTORY_STRING,0,0,0);
+				msg.message_guid=g_searchcache[0]->search_id;
+				msg.data=repl.Make();
+				if (msg.data) {
+					msg.message_type=MESSAGE_SEARCH_REPLY;
+					msg.message_length=msg.data->GetLength();
+					main_MsgCallback(&msg,NULL,NULL);
+					msg.data->Unlock();
+				};
+			};
+
+			repl.clear_items();
+			if (g_database->GetNumFiles() && (g_accept_downloads&5)==5)
+				g_database->Search(g_searchcache[0]->lastsearchtext,&repl,NULL,0,main_MsgCallback);
+		};
+		PostMessage(g_search_wnd,WM_USER_TITLEUPDATE,0,0);
+	} //!cached
+	return 0;
+}
+
+int srch_WM_COMMAND_IDC_GOPARENT()
+{
+	if (g_searchcache[0]->lastsearchtext[0] == '/') {
+		char buf[1024];
+		safe_strncpy(buf,g_searchcache[0]->lastsearchtext,sizeof(buf));
+
+		char *p=buf;
+		while (*p) p++;
+		while (p > buf+1 && p[-1] == '/') p--;
+		*p=0;
+		while (p >= buf && *p != '/') p--;
+		if (p >= buf) p[1]=0;
+		Search_Search(buf);
+	};
+	return 0;
+}
+
+
+#ifdef _DEFINE_WXUI
+/* create a menu-event-handling class for wxWidgets */
+
+class menuHandler : public wxEvtHandler {
+public:
+	menuHandler(int *resultstore) {
+	m_resultstore = resultstore;
+	}
+	void OnMenuEvent (wxCommandEvent &evt) {
+	*m_resultstore = evt.GetId();
+	}
+	int *m_resultstore;
+	DECLARE_EVENT_TABLE();
+};
+
+BEGIN_EVENT_TABLE(menuHandler, wxEvtHandler)
+EVT_MENU(wxID_ANY, menuHandler::OnMenuEvent)
+END_EVENT_TABLE()
+
+#endif
+
+
+int srch_WM_COMMAND_IDC_FORWARD(int is_forward2)
+{
+	if (g_searchhistory_position < g_searchhistory.GetSize()-1) {
+		if (is_forward2) {
+#ifdef _DEFINE_WXUI
+
+			wxMenu *hMenu = new wxMenu();
+			int x;
+			for (x = 0; x < 10; x ++) {
+				if (g_searchhistory_position + (x + 1) < 0) break;
+				char *str=g_searchhistory.Get(g_searchhistory_position + (x + 1));
+				if (!str) break;
+
+				hMenu->Append(1025+x, cstr_to_wxstr(str));
+			};
+
+			g_search_wnd->PushEventHandler(new menuHandler(&x));
+
+			wxRect r = g_search_wnd->m_forward2->GetRect();
+			(void) g_search_wnd->PopupMenu(hMenu, r.GetLeft(), r.GetBottom());
+			delete hMenu;
+
+			if (x > 1024) {
+				x-=1024;
+				Search_Search(g_searchhistory.Get(g_searchhistory_position += x));
+			};
+			g_search_wnd->m_forward->SetFocus();
+
+#else
+
+			HMENU hMenu = CreatePopupMenu();
+			int x;
+			for (x = 0; x < 10; x ++) {
+				char *str=g_searchhistory.Get(g_searchhistory_position + x + 1);
+				if (!str) break;
+				MENUITEMINFO mi={sizeof(mi),MIIM_ID|MIIM_TYPE,MFT_STRING,0,1025+x};
+				mi.dwTypeData=str;
+
+				InsertMenuItem(hMenu,x,TRUE,&mi);
+			};
+			RECT r;
+			GetWindowRect(GetDlgItem(hwndDlg,IDC_FORWARD2),&r);
+
+			x=TrackPopupMenu(hMenu,TPM_LEFTALIGN|TPM_TOPALIGN|TPM_RETURNCMD|TPM_NONOTIFY|TPM_LEFTBUTTON|TPM_RIGHTBUTTON,r.right,r.top,0,hwndDlg,NULL);
+			DestroyMenu(hMenu);
+			if (x > 1024) {
+				x-=1024;
+				Search_Search(g_searchhistory.Get(g_searchhistory_position += x));
+			};
+			SetFocus(GetDlgItem(hwndDlg,IDC_FORWARD));
+
+#endif
 						}
-						else if (x == ID_SENDFILENODE) {
+		else
+			Search_Search(g_searchhistory.Get(++g_searchhistory_position));
+	};
+	return 0;
+}
+
+int srch_WM_COMMAND_IDC_BACK(int is_back2)
+{
+	if (g_searchhistory_position > 0) {
+		if (is_back2) {
+#ifdef _DEFINE_WXUI
+
+			wxMenu *hMenu = new wxMenu();
+			int x;
+			for (x = 0; x < 10; x ++) {
+				if (g_searchhistory_position - (x + 1) < 0) break;
+				char *str=g_searchhistory.Get(g_searchhistory_position - (x + 1));
+				if (!str) break;
+
+				hMenu->Append(1025+x, cstr_to_wxstr(str));
+			};
+
+			g_search_wnd->PushEventHandler(new menuHandler(&x));
+
+			wxRect r = g_search_wnd->m_back2->GetRect();
+			(void) g_search_wnd->PopupMenu(hMenu, r.GetLeft(), r.GetBottom());
+			delete hMenu;
+
+			if (x > 1024) {
+				x-=1024;
+				Search_Search(g_searchhistory.Get(g_searchhistory_position -= x));
+			};
+			g_search_wnd->m_back->SetFocus();
+
+#else
+
+			HMENU hMenu = CreatePopupMenu();
+			int x;
+			for (x = 0; x < 10; x ++) {
+				if (g_searchhistory_position - (x + 1) < 0) break;
+				char *str=g_searchhistory.Get(g_searchhistory_position - (x + 1));
+				if (!str) break;
+				MENUITEMINFO mi={sizeof(mi),MIIM_ID|MIIM_TYPE,MFT_STRING,0,1025+x};
+				mi.dwTypeData=str;
+
+				InsertMenuItem(hMenu,x,TRUE,&mi);
+			};
+			RECT r;
+			GetWindowRect(GetDlgItem(hwndDlg,IDC_BACK2),&r);
+
+			x=TrackPopupMenu(hMenu,TPM_RIGHTALIGN|TPM_TOPALIGN|TPM_RETURNCMD|TPM_NONOTIFY|TPM_LEFTBUTTON|TPM_RIGHTBUTTON,r.left,r.top,0,hwndDlg,NULL);
+			DestroyMenu(hMenu);
+			if (x > 1024) {
+				x-=1024;
+				Search_Search(g_searchhistory.Get(g_searchhistory_position -= x));
+			};
+			SetFocus(GetDlgItem(hwndDlg,IDC_BACK));
+
+#endif
+		}
+		else
+			Search_Search(g_searchhistory.Get(--g_searchhistory_position));
+	};
+	return 0;
+}
+
+int srchwnd_WM_DESTROY()
+{
+	g_config->WriteInt(CONFIG_search_col1,g_lvsearchres.GetColumnWidth(0));
+	g_config->WriteInt(CONFIG_search_col2,g_lvsearchres.GetColumnWidth(1));
+	g_config->WriteInt(CONFIG_search_col3,g_lvsearchres.GetColumnWidth(2));
+	g_config->WriteInt(CONFIG_search_col6,g_lvsearchres.GetColumnWidth(3));
+	g_config->WriteInt(CONFIG_search_col4,g_lvsearchres.GetColumnWidth(4));
+	g_config->WriteInt(CONFIG_search_col5,g_lvsearchres.GetColumnWidth(5));
+	int a=!!g_config->ReadInt(CONFIG_srchcb_use,CONFIG_srchcb_use_DEFAULT);
+	int x;
+	for (x = 0; x < MAX_SRCHTEXTS; x ++) {
+		char buf[123];
+		char obuf[1024];
+		obuf[0]=0;
+		if (a) {
+#ifdef _DEFINE_WXUI
+			wxString wxstr = g_search_wnd->m_searchtext->GetString(x);
+			wxstr_to_cstr (obuf, wxstr, 1023);
+#else
+			SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_GETLBTEXT,(LPARAM)x,(WPARAM)obuf);
+#endif
+		};
+		sprintf(buf,"srchcb_%d",x);
+		g_config->WriteString(buf,obuf);
+	};
+	return 0;
+}
+
+int set_srch_title (char *buf, int len) 
+{
+	strcpy(buf,"Browser");
+	int numresults=m_srch_sort_len;
+	int numfresults=m_fullsize;
+	int a=0;
+
+	if (numfresults) {
+		if (numfresults != numresults)
+			sprintf(buf+strlen(buf),"%s%d of %d result%s",a++?", ":" (",numresults,numfresults,numfresults==1?"":"s");
+		else
+			sprintf(buf+strlen(buf),"%s%d result%s",a++?", ":" (",numresults,numresults==1?"":"s");
+	};
+	if (a) strcat(buf,")");
+
+	strcat(buf," - " APP_NAME);
+	return 1;
+}
+
+int srch_SEARCHTEXT_SELCHANGE() {
+	char buf[32];
+#ifdef _DEFINE_WXUI
+	wxGetDlgItemText(g_search_wnd->m_searchtext,buf,31);
+	wxEnableWindow(g_search_wnd->m_search,!!buf[0]);
+#else
+	GetDlgItemText(hwndDlg,IDC_SEARCHTEXT,buf,31);
+	EnableWindow(GetDlgItem(hwndDlg,IDC_SEARCH),!!buf[0]);
+#endif
+	return 0;
+}
+
+void srchwnd_ID_SENDFILENODE() {
+#ifdef _DEFINE_WXUI
+
+	wxFileDialog dlg(g_search_wnd,
+			_T("Open file(s) to send"),
+			_T(""),
+			_T(""),
+			_T("All files|*.*"),
+			wxMULTIPLE|wxOPEN);
+
+	if (dlg.ShowModal() == wxID_OK) {
+		wxArrayString strs;
+		wxString str;
+
+		dlg.GetPaths(strs);
+		int i;
+		for (i = 0; i < (int) strs.GetCount(); i++) {
+			char fullfn[4096];
+			str = strs.Item(i);
+			wxstr_to_cstr (fullfn, str, 4095);
+
+			int l=g_lvsearchres.GetCount();
+			int x;
+			for (x = 0; x < l; x ++) {
+				if (g_lvsearchres.GetSelected(x)) {
+					char host[33];
+					C_MessageSearchReply *sr=g_searchcache[0]->searchreplies.Get(m_srch_sort[x]>>16);
+					safe_strncpy(host,sr->_guidstr,sizeof(host));
+					if (strlen(host)==32) {
+						Xfer_UploadFileToUser(0,fullfn,host,g_filedlg_ulpath);
+					}
+				}
+			}
+		}
+	}
+
+#else
+
 							char *fnroot=(char*)malloc(65536*4);
+	fnroot[0]=0;
 
 							OPENFILENAME l={sizeof(l),};
-							fnroot[0]=0;
 							l.hwndOwner = hwndDlg;
 							l.lpstrFilter = "All files (*.*)\0*.*\0";
 							l.lpstrFile = fnroot;
@@ -1209,10 +1817,14 @@
 									fn+=strlen(fn)+1;
 								};
 							};
+
 							free(fnroot);
-						}
-						else if (x == ID_DLPARENT) {
+#endif
+}
+
+void srchwnd_ID_DLPARENT() {
 							int l=g_lvsearchres.GetCount();
+	int x;
 							for (x = 0; x < l; x ++) {
 								if (g_lvsearchres.GetSelected(x)) {
 									char buf[SEARCHREPLY_MAX_FILESIZE+36];
@@ -1253,8 +1865,9 @@
 									break;
 								};
 							};
-						}
-						else if (x == ID_BROWSELOC || x == ID_COPYLOC) {
+}
+
+void srchwnd_ID_BROWSECOPYLOC(int is_copyloc) {
 							int l=g_lvsearchres.GetCount();
 							int idx;
 							for (idx = 0; idx < l; idx ++) {
@@ -1264,7 +1877,7 @@
 
 									buf[0]=0;
 
-									if (x == ID_COPYLOC && g_searchcache[0]->lastsearchtext[0] == '/') { //we were browsing
+			if (is_copyloc && g_searchcache[0]->lastsearchtext[0] == '/') { //we were browsing
 										safe_strncpy(buf,g_searchcache[0]->lastsearchtext,SEARCHREPLY_MAX_FILESIZE);
 										while (buf[0] && buf[strlen(buf)-1]=='/') buf[strlen(buf)-1]=0;
 										strcat(buf,"/");
@@ -1293,15 +1906,19 @@
 										else buf[0]=0;
 									};
 									if (buf[0]) {
-										if (x == ID_BROWSELOC) {
+				if (!is_copyloc) {
 											char *p=buf+strlen(buf);
 											while (p > buf && *p != '/') p--;
 											*p=0;
 										};
 										if (buf[0]) {
-											if (x == ID_BROWSELOC) {
+					if (!is_copyloc) {
+#ifdef _DEFINE_WXUI
+						Search_Search(buf);
+#else
 												SetDlgItemText(hwndDlg,IDC_SEARCHTEXT,buf);
-												SendMessage(hwndDlg,WM_COMMAND,IDC_SEARCH,0);
+						SendMessageSearch(hwndDlg);
+#endif
 											}
 											else {
 												char buf2[SEARCHREPLY_MAX_FILESIZE*3+36*3+7];
@@ -1317,6 +1934,17 @@
 													else *out++=*in++;
 												};
 												*out=0;
+#ifdef _DEFINE_WXUI
+
+						if (wxTheClipboard->Open()) {
+							// clipboard will call delete()
+							wxTheClipboard->SetData(new
+								wxTextDataObject(cstr_to_wxstr(buf2)));
+							wxTheClipboard->Close();
+						}
+
+#else
+
 												HANDLE h=GlobalAlloc(GMEM_MOVEABLE,strlen(buf2)+1);
 												void *t=GlobalLock(h);
 												memcpy(t,buf2,strlen(buf2)+1);
@@ -1325,15 +1953,18 @@
 												EmptyClipboard();
 												SetClipboardData(CF_TEXT,h);
 												CloseClipboard();
+#endif
 											};
 										};
 									};
 									break;
 								};
 							};
-						}
-						else if (x == ID_PRIVMSGNODE) {
+}
+
+void srchwnd_ID_PRIVMSGNODE() {
 							int l=g_lvsearchres.GetCount();
+	int x;
 							for (x = 0; x < l; x ++) {
 								if (g_lvsearchres.GetSelected(x)) {
 									char buf[SEARCHREPLY_MAX_FILESIZE];
@@ -1343,9 +1974,11 @@
 									if (strlen(buf)<sizeof(g_regnick)) chat_ShowRoom(buf,1);
 								};
 							};
-						}
-						else if (x == ID_WHOISUSER) {
+}
+
+void srchwnd_ID_WHOISUSER() {
 							int l=g_lvsearchres.GetCount();
+	int x;
 							for (x = 0; x < l; x ++) {
 								if (g_lvsearchres.GetSelected(x)) {
 									char buf[SEARCHREPLY_MAX_FILESIZE];
@@ -1368,282 +2001,354 @@
 									};
 								};
 							};
+}
+
+void srchwnd_RCLICK(int mouse_x, int mouse_y) {
+	int isRoot = !(g_searchcache[0]->lastsearchtext[0] != '/' ||
+		strstr(g_searchcache[0]->lastsearchtext+1,"/") ||
+		(g_searchcache[0]->lastsearchtext[1] &&
+		g_searchcache[0]->lastsearchtext[strlen(g_searchcache[0]->lastsearchtext)-1]!='*'));
+
+	int isDirSelected=0;
+	int sel=0;
+	int isParent=0;
+
+	int l=g_lvsearchres.GetCount();
+	int x;//,a=0; //HACK "a" never used
+	for (x = 0; x < l; x ++) {
+		if (g_lvsearchres.GetSelected(x)) {
+			char name[SEARCHREPLY_MAX_FILESIZE];
+			char type[SEARCHREPLY_MAX_METASIZE];
+			sel++;
+			if (g_searchcache[0]->lastsearchtext[0] != '/') break;
+			int a=m_srch_sort[x];
+			C_MessageSearchReply *sr=g_searchcache[0]->searchreplies.Get(a>>16);
+			sr->get_item(a&0xffff,NULL,name,type,NULL,NULL,NULL);
+			if (!stricmp(type,DIRECTORY_STRING)) isDirSelected=1;
+			if (!strncmp(name,"..",2)) isParent=1;
 						};
 					};
+
+#ifdef _DEFINE_WXUI
+	wxMenu *hMenu;
+#define EnableMenuItem(menu,id,on)  menu->Enable(id,on)
+#define MF_ENABLED true
+#define MF_GRAYED false
+#else
+	HMENU hMenu=GetSubMenu(g_context_menus,
+		isRoot?6:g_searchcache[0]->lastsearchtext[0] == '/'?7:1);
+#endif
+
+	if (isRoot) {
+#ifdef _DEFINE_WXUI
+		hMenu = AppResources::CreateMenuSearchresUserPopup();
+#endif
+		EnableMenuItem(hMenu,ID_COPYLOC,sel==1?MF_ENABLED:MF_GRAYED);
+		EnableMenuItem(hMenu,ID_BROWSENODE,sel==1?MF_ENABLED:MF_GRAYED);
+		EnableMenuItem(hMenu,ID_PRIVMSGNODE,sel?MF_ENABLED:MF_GRAYED);
+		EnableMenuItem(hMenu,ID_SENDFILENODE,sel?MF_ENABLED:MF_GRAYED);
+	}
+	else if (g_searchcache[0]->lastsearchtext[0] == '/') {
+#ifdef _DEFINE_WXUI
+		hMenu = AppResources::CreateMenuSearchresFilePopup();
+#endif
+		EnableMenuItem(hMenu,ID_COPYLOC,sel==1?MF_ENABLED:MF_GRAYED);
+		if (isDirSelected) {
+#ifndef _DEFINE_WXUI
+			ModifyMenu(hMenu,0,MF_BYPOSITION,ID_BROWSEFOLDER,"Browse directory");
+			ModifyMenu(hMenu,1,MF_BYPOSITION,ID_DOWNLOADFOLDER,"Download");
+#endif
+			EnableMenuItem(hMenu,ID_BROWSEFOLDER,sel==1?MF_ENABLED:MF_GRAYED);
+		}
+		else {
+#ifndef _DEFINE_WXUI
+			ModifyMenu(hMenu,0,MF_BYPOSITION,ID_DOWNLOADFOLDER,"Download");
+			ModifyMenu(hMenu,1,MF_BYPOSITION,ID_BROWSEFOLDER,"Browse directory");
+#endif
+			EnableMenuItem(hMenu,ID_BROWSEFOLDER,MF_GRAYED);
 				};
-				return 0;
+		EnableMenuItem(hMenu,ID_DOWNLOADFOLDER,(sel&&(!isParent||sel>1))?MF_ENABLED:MF_GRAYED);
+	}
+	else { //normal search menu
+#ifdef _DEFINE_WXUI
+		hMenu = AppResources::CreateMenuSearchResPopup();
+#endif
+		EnableMenuItem(hMenu,ID_COPYLOC,sel==1?MF_ENABLED:MF_GRAYED);
+		EnableMenuItem(hMenu,ID_DLPARENT,sel==1?MF_ENABLED:MF_GRAYED);
+		EnableMenuItem(hMenu,ID_BROWSELOC,sel==1?MF_ENABLED:MF_GRAYED);
+		EnableMenuItem(hMenu,ID_DOWNLOAD,sel?MF_ENABLED:MF_GRAYED);
 			};
-		case WM_COMMAND:
-			{
-				switch (LOWORD(wParam))
+
+#ifndef _DEFINE_WXUI
+	void popup_menu_wait_and_dispatch(HMENU *);
+	popup_menu_wait_and_dispatch(hMenu);
+#else
+
+#if (wxMAJOR_VERSION >= 2 && wxMINOR_VERSION >= 5)
+	g_search_wnd->PopupMenu(hMenu); // no loc = current mouse pos
+#else
+	g_search_wnd->PopupMenu(hMenu, mouse_x, mouse_y);
+#endif
+
+#endif
+}
+
+void SrchWnd_LVN_COLUMNCLICK(int col) {
+	int l_sc=g_config->ReadInt(CONFIG_search_sortcol,CONFIG_search_sortcol_DEFAULT);
+	int l_sd=g_config->ReadInt(CONFIG_search_sortdir,CONFIG_search_sortdir_DEFAULT);
+	if (col == l_sc) l_sd=!l_sd;
+	else l_sc=col;
+
+	g_config->WriteInt(CONFIG_search_sortcol,l_sc);
+	g_config->WriteInt(CONFIG_search_sortdir,l_sd);
+
+	Search_Resort();
+}
+
+#ifndef _DEFINE_WXUI
+void popup_menu_wait_and_dispatch(HMENU *hMenu) {
+	POINT p;
+	GetCursorPos(&p);
+
+	x=TrackPopupMenu(hMenu,TPM_RETURNCMD|TPM_RIGHTBUTTON|TPM_LEFTBUTTON|TPM_NONOTIFY,p.x,p.y,0,hwndDlg,NULL);
+
+	if (x == ID_DOWNLOAD || x == ID_BROWSEFOLDER || x == ID_DOWNLOADFOLDER ||
+		x == ID_BROWSENODE)
 				{
-				case IDC_EDIT_FILTER:
+		SrchWnd_OnItemRun(hwndDlg,x != ID_DOWNLOADFOLDER);
+	}
+	else if (x == ID_SENDFILENODE) {
+		srchwnd_ID_SENDFILENODE();
+	}
+	else if (x == ID_DLPARENT) {
+		srchwnd_ID_DLPARENT();
+	}
+	else if (x == ID_BROWSELOC || x == ID_COPYLOC) {
+		srchwnd_ID_BROWSECOPYLOC(x == ID_COPYLOC);
+	}
+	else if (x == ID_PRIVMSGNODE) {
+		srchwnd_ID_PRIVMSGNODE();
+	}
+	else if (x == ID_WHOISUSER) {
+		srchwnd_ID_WHOISUSER();
+	};
+}
+#endif
+#endif /* _DEFINE_SRV */
+
+#if !defined(_DEFINE_WXUI) && !defined(_DEFINE_SRV)
+	BOOL WINAPI Search_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
 					{
-						if (HIWORD(wParam) == EN_CHANGE)
-							Search_Resort();
-						break;
+		static dlgSizeInfo sizeinf={"search",50,50,567,430};
+		static ChildWndResizeItem rlist[]={
+			{IDC_SEARCHTEXT,0x0010},
+			{IDC_SEARCH,0x1010},
+			{IDC_SEARCHSTATS,0x0111},
+			{IDC_SEARCHRES,0x0011},
+			{IDC_SRESULTLBL,0x0101},
+			{IDC_EDIT_FILTER,0x0101},
 					};
-				case IDC_GOROOT:
+		switch (uMsg)
 					{
-						Search_Search("/");
-						break;
+		case WM_GETMINMAXINFO:
+			{
+				LPMINMAXINFO m=(LPMINMAXINFO)lParam;
+				if (m) {
+					m->ptMinTrackSize.x=164;
+					m->ptMinTrackSize.y=134;
 					};
-				case IDC_BACK:
-				case IDC_BACK2:
+				return 0;
+			};
+		case WM_CLOSE:
+			return srch_WM_CLOSE();
+		case WM_INITDIALOG:
 					{
-						if (g_searchhistory_position > 0) {
-							if (LOWORD(wParam) == IDC_BACK2) {
-								HMENU hMenu = CreatePopupMenu();
-								int x;
-								for (x = 0; x < 10; x ++) {
-									if (g_searchhistory_position - (x + 1) < 0) break;
-									char *str=g_searchhistory.Get(g_searchhistory_position - (x + 1));
-									if (!str) break;
-									MENUITEMINFO mi={sizeof(mi),MIIM_ID|MIIM_TYPE,MFT_STRING,0,1025+x};
-									mi.dwTypeData=str;
+				srch_oldWndProc=(WNDPROC) SetWindowLong(FindWindowEx(GetDlgItem(hwndDlg,IDC_SEARCHTEXT),NULL,"Edit",NULL),GWL_WNDPROC,(LONG)srch_newWndProc);
+				srchres_oldWndProc=(WNDPROC) SetWindowLong(GetDlgItem(hwndDlg,IDC_SEARCHRES),GWL_WNDPROC,(LONG)srchres_newWndProc);
+				SetTimer(hwndDlg,1,1000,NULL);
+				CreateTooltip(GetDlgItem(hwndDlg,IDC_GOROOT),"Go to user list");
+				CreateTooltip(GetDlgItem(hwndDlg,IDC_GOPARENT),"Go to parent directory");
+				CreateTooltip(GetDlgItem(hwndDlg,IDC_BACK),"Go back");
+				CreateTooltip(GetDlgItem(hwndDlg,IDC_BACK2),"Go back (list)");
+				CreateTooltip(GetDlgItem(hwndDlg,IDC_FORWARD),"Go forward");
+				CreateTooltip(GetDlgItem(hwndDlg,IDC_FORWARD2),"Go forward (list)");
+				CreateTooltip(GetDlgItem(hwndDlg,IDC_SEARCH),"Go to location");
 
-									InsertMenuItem(hMenu,x,TRUE,&mi);
-								};
-								RECT r;
-								GetWindowRect(GetDlgItem(hwndDlg,IDC_BACK2),&r);
+				SendDlgItemMessage(hwndDlg,IDC_SEARCH,BM_SETIMAGE,IMAGE_ICON,
+					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_SEARCH),IMAGE_ICON,16,16,0));
 
-								x=TrackPopupMenu(hMenu,TPM_RIGHTALIGN|TPM_TOPALIGN|TPM_RETURNCMD|TPM_NONOTIFY|TPM_LEFTBUTTON|TPM_RIGHTBUTTON,r.left,r.top,0,hwndDlg,NULL);
-								DestroyMenu(hMenu);
-								if (x > 1024) {
-									x-=1024;
-									Search_Search(g_searchhistory.Get(g_searchhistory_position -= x));
-								};
-								SetFocus(GetDlgItem(hwndDlg,IDC_BACK));
-							}
-							else
-								Search_Search(g_searchhistory.Get(--g_searchhistory_position));
-						};
-						break;
+				SendDlgItemMessage(hwndDlg,IDC_GOROOT,BM_SETIMAGE,IMAGE_ICON,
+					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_ROOT),IMAGE_ICON,16,16,0));
+				SendDlgItemMessage(hwndDlg,IDC_GOPARENT,BM_SETIMAGE,IMAGE_ICON,
+					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_PARENT),IMAGE_ICON,16,16,0));
+
+				SendDlgItemMessage(hwndDlg,IDC_BACK,BM_SETIMAGE,IMAGE_ICON,
+					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_BACKWARD),IMAGE_ICON,16,16,0));
+				SendDlgItemMessage(hwndDlg,IDC_FORWARD,BM_SETIMAGE,IMAGE_ICON,
+					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_FORWARD),IMAGE_ICON,16,16,0));
+
+				SendDlgItemMessage(hwndDlg,IDC_BACK2,BM_SETIMAGE,IMAGE_ICON,
+					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_MORE),IMAGE_ICON,7,4,0));
+				SendDlgItemMessage(hwndDlg,IDC_FORWARD2,BM_SETIMAGE,IMAGE_ICON,
+					(LPARAM)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_MORE),IMAGE_ICON,7,4,0));
+
+				g_lvsearchres.setwnd(GetDlgItem(hwndDlg,IDC_SEARCHRES));
+				{
+					HIMAGELIST hImageList;
+					hImageList = ImageList_Create(16,16, ILC_COLOR32|ILC_MASK, 3, 3);
+					ImageList_AddIcon(hImageList,(HICON)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_FILE),IMAGE_ICON,16,16,0));
+					ImageList_AddIcon(hImageList,(HICON)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_DIR),IMAGE_ICON,16,16,0));
+					ImageList_AddIcon(hImageList,(HICON)LoadImage(g_hInst,MAKEINTRESOURCE(IDI_USER),IMAGE_ICON,16,16,0));
+					ListView_SetImageList(g_lvsearchres.getwnd(),hImageList,LVSIL_SMALL);
 					};
-				case IDC_FORWARD:
-				case IDC_FORWARD2:
+				g_lvsearchres.AddCol("Item",g_config->ReadInt(CONFIG_search_col1,CONFIG_search_col1_DEFAULT));
+				g_lvsearchres.AddCol("Size",g_config->ReadInt(CONFIG_search_col2,CONFIG_search_col2_DEFAULT));
+				g_lvsearchres.AddCol("Type",g_config->ReadInt(CONFIG_search_col3,CONFIG_search_col3_DEFAULT));
+				g_lvsearchres.AddCol("Date/Time",g_config->ReadInt(CONFIG_search_col6,CONFIG_search_col6_DEFAULT));
+				g_lvsearchres.AddCol("Speed",g_config->ReadInt(CONFIG_search_col4,CONFIG_search_col4_DEFAULT));
+				g_lvsearchres.AddCol("Location",g_config->ReadInt(CONFIG_search_col5,CONFIG_search_col5_DEFAULT));
+				childresize_init(hwndDlg,rlist,sizeof(rlist)/sizeof(rlist[0]));
 					{
-						if (g_searchhistory_position < g_searchhistory.GetSize()-1) {
-							if (LOWORD(wParam) == IDC_FORWARD2) {
-								HMENU hMenu = CreatePopupMenu();
 								int x;
-								for (x = 0; x < 10; x ++) {
-									char *str=g_searchhistory.Get(g_searchhistory_position + x + 1);
-									if (!str) break;
-									MENUITEMINFO mi={sizeof(mi),MIIM_ID|MIIM_TYPE,MFT_STRING,0,1025+x};
-									mi.dwTypeData=str;
-
-									InsertMenuItem(hMenu,x,TRUE,&mi);
+					for (x = 0 ; x < MAX_SRCHTEXTS; x ++) {
+						char buf[123];
+						sprintf(buf,"srchcb_%d",x);
+						const char *o=g_config->ReadString(buf,"");
+						if (*o) {
+							char buf[512];
+							safe_strncpy(buf,o,sizeof(buf));
+							SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_INSERTSTRING,x,(LPARAM)buf);
 								};
-								RECT r;
-								GetWindowRect(GetDlgItem(hwndDlg,IDC_FORWARD2),&r);
-
-								x=TrackPopupMenu(hMenu,TPM_LEFTALIGN|TPM_TOPALIGN|TPM_RETURNCMD|TPM_NONOTIFY|TPM_LEFTBUTTON|TPM_RIGHTBUTTON,r.right,r.top,0,hwndDlg,NULL);
-								DestroyMenu(hMenu);
-								if (x > 1024) {
-									x-=1024;
-									Search_Search(g_searchhistory.Get(g_searchhistory_position += x));
 								};
-								SetFocus(GetDlgItem(hwndDlg,IDC_FORWARD));
-							}
-							else
-								Search_Search(g_searchhistory.Get(++g_searchhistory_position));
+					EnableWindow(GetDlgItem(hwndDlg,IDC_SEARCH),0);
+					EnableWindow(GetDlgItem(hwndDlg,IDC_GOPARENT),0);
 						};
-						break;
 					};
-				case IDC_GOPARENT:
+		case WM_USER_TITLEUPDATE:
 					{
-						if (g_searchcache[0]->lastsearchtext[0] == '/') {
 							char buf[1024];
-							safe_strncpy(buf,g_searchcache[0]->lastsearchtext,sizeof(buf));
-
-							char *p=buf;
-							while (*p) p++;
-							while (p > buf+1 && p[-1] == '/') p--;
-							*p=0;
-							while (p >= buf && *p != '/') p--;
-							if (p >= buf) p[1]=0;
-							Search_Search(buf);
-						};
-						break;
+				set_srch_title(buf, 1023);
+				SetWndTitle(hwndDlg,buf);
+				return 0;
 					};
-				case IDC_SEARCH:
-					{
-						//store nav position in last cached item
+		case WM_SHOWWINDOW:
 						{
-							int n=g_lvsearchres.GetCount();
-							int x;
-							for (x = 0; x < n && !g_lvsearchres.GetSelected(x); x ++);
-							if (x >= 0 && x < m_srch_sort_len)
-								g_searchcache[0]->lastvisitem=m_srch_sort[x]; //save last pos
-						};
-
-						int ci;
-						int cached=0;
-						int replpos=0; //position to replace
-						char text[512];
-						GetDlgItemText(hwndDlg,IDC_SEARCHTEXT,text,511);
-						if (!strnicmp(text,"waste:",6)) {
-							char *in=text+6, *out=text;
-							while (*in) {
-								if (!strncmp(in,"%20",3)) {
-									*out++=' ';
-									in+=3;
-								}
-								else *out++=*in++;
+				static int m_hack;
+				if (!m_hack) {
+					m_hack=1;
+					int m=g_config->ReadInt(CONFIG_search_maximized,CONFIG_search_maximized_DEFAULT);
+					handleDialogSizeMsgs(hwndDlg,WM_INITDIALOG,0,0,&sizeinf);
+					if (m) ShowWindow(hwndDlg,SW_SHOWMAXIMIZED);
 							};
-							*out=0;
-							SetDlgItemText(hwndDlg,IDC_SEARCHTEXT,text);
+				return 0;
 						};
-
-						EnableWindow(GetDlgItem(hwndDlg,IDC_GOPARENT),text[0]=='/'&&text[1]);
-
-						if (strlen(text)<=0) return 0;
-
+		case WM_TIMER:
 						{
-							char *t=g_searchhistory.Get(g_searchhistory_position);
-							if (!t || strcmp(t,text)) {
-								if (g_searchhistory.GetSize()) g_searchhistory_position++;
-								while (g_searchhistory.GetSize() > g_searchhistory_position) {
-									free(g_searchhistory.Get(g_searchhistory_position));
-									g_searchhistory.Del(g_searchhistory_position);
-								};
-								g_searchhistory.Add(strdup(text));
-								if (g_searchhistory.GetSize() > MAX_SEARCH_HISTORY_LEN) {
-									free(g_searchhistory.Get(0));
-									g_searchhistory.Del(0);
-									g_searchhistory_position--;
+				if (wParam == 1) {
+					if (IsWindowVisible(hwndDlg) && g_mql && g_mql->GetNumQueues()) {
+						KillTimer(hwndDlg,wParam);
+						if (g_searchcache[0]->lastsearchtext[0] == '/') {
+							SendMessageSearch(hwndDlg);
 								};
 							};
 						};
-						EnableWindow(GetDlgItem(hwndDlg,IDC_BACK),g_searchhistory_position>0);
-						EnableWindow(GetDlgItem(hwndDlg,IDC_BACK2),g_searchhistory_position>0);
-						EnableWindow(GetDlgItem(hwndDlg,IDC_FORWARD),g_searchhistory_position<g_searchhistory.GetSize()-1);
-						EnableWindow(GetDlgItem(hwndDlg,IDC_FORWARD2),g_searchhistory_position<g_searchhistory.GetSize()-1);
-
-						//see if we can't find 'text' in cache, that hasn't expired.
-						//if we do find it, and it is in entry 0, then we clear entry 0
-						//and go for it.
-						for (ci = 0; ci < SEARCHCACHE_NUMITEMS; ci ++) {
-							if (!strcmp(text,g_searchcache[ci]->lastsearchtext)) {
-								replpos=ci;
-								if (ci > 0 && g_searchcache[ci]->searchreplies.GetSize() &&
-									g_searchcache[ci]->search_id_time+SEARCHCACHE_EXPIRE_TIME >= GetTickCount() &&
-									g_searchcache[ci]->numcons*2 >= g_mql->GetNumQueues()
-									) cached=1;
-								break;
+				return 0;
 							};
-							if (g_searchcache[ci]->search_id_time < g_searchcache[replpos]->search_id_time) replpos=ci;
+		case WM_DESTROY:
+			return srchwnd_WM_DESTROY();
+		case WM_SIZE:
+			{
+				if (wParam != SIZE_MINIMIZED) {
+					childresize_resize(hwndDlg,rlist,sizeof(rlist)/sizeof(rlist[0]));
+					handleDialogSizeMsgs(hwndDlg,uMsg,wParam,lParam,&sizeinf);
 						};
-
-						if (replpos > 0) {
-							int x;
-							SearchCacheItem *tmp=g_searchcache[replpos];
-							for (x = replpos; x > 0; x --) g_searchcache[x]=g_searchcache[x-1];
-							g_searchcache[0]=tmp;
+				return 0;
 						};
-
+		case WM_MOVE:
 						{
-							int findpos=SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_FINDSTRINGEXACT,(WPARAM)-1,(LPARAM)text);
-							if (findpos != CB_ERR) SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_DELETESTRING,findpos,0);
+				handleDialogSizeMsgs(hwndDlg,uMsg,wParam,lParam,&sizeinf);
+				return 0;
 						};
+		case WM_NOTIFY:
+			{
+				LPNMHDR l=(LPNMHDR)lParam;
+				if (l->idFrom == IDC_SEARCHRES) {
+					if (l->code == LVN_ODFINDITEM) {
+						NMLVFINDITEM *t = (NMLVFINDITEM *)lParam;
 
-						SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_INSERTSTRING,0,(LPARAM)text);
-						SendDlgItemMessage(hwndDlg,IDC_SEARCHTEXT,CB_SETCURSEL,0,0);
-
-						g_lvsearchres.Clear();
-						free(m_srch_sort);
-						m_srch_sort=0;
-						m_srch_sort_len=0;
-						m_srch_sort_alloc=0;
-						m_fullsize=0;
+						int i=t->iStart;
+						if (i >= m_srch_sort_len) i=0;
 
-						if (cached) {
-							m_srch_sort_len=0;
-							int x;
-							for (x = 0; x < g_searchcache[0]->searchreplies.GetSize(); x ++) {
-								C_MessageSearchReply *sr=g_searchcache[0]->searchreplies.Get(x);
-								m_srch_sort_len+=sr->get_numitems();
-							};
+						int cnt=m_srch_sort_len-i;
+						if (t->lvfi.flags & LVFI_WRAP) cnt+=i;
 
-							if (m_srch_sort_len >= m_srch_sort_alloc) {
-								m_srch_sort_alloc=(m_srch_sort_len*3)/2;
-								m_srch_sort=(unsigned int *)realloc(m_srch_sort,m_srch_sort_alloc*sizeof(unsigned int));
-								if (!m_srch_sort) {
-									m_srch_sort_len=0;
-									m_srch_sort_alloc=0;
+						while (cnt-->0) {
+							int repidx=m_srch_sort[i]&0xffff;
+							C_MessageSearchReply *tr=g_searchcache[0]->searchreplies.Get(m_srch_sort[i]>>16);
+							char name[SEARCHREPLY_MAX_FILESIZE];
+							tr->get_item(repidx,NULL,name,NULL,NULL,NULL,NULL);
+							if (t->lvfi.flags & (4|LVFI_PARTIAL)) {
+								if (!strnicmp(name,t->lvfi.psz,strlen(t->lvfi.psz))) {
+									SetWindowLong(hwndDlg,DWL_MSGRESULT,i);
+									return 1;
 								};
+							}
+							else if (t->lvfi.flags & LVFI_STRING) {
+								if (!stricmp(name,t->lvfi.psz)) {
+									SetWindowLong(hwndDlg,DWL_MSGRESULT,i);
+									return 1;
 							};
-							Search_Resort();
-							for (x = 0; x < m_srch_sort_len; x ++) {
-								if (m_srch_sort[x] == g_searchcache[0]->lastvisitem) {
-									ListView_EnsureVisible(g_lvsearchres.getwnd(),x,FALSE);
-									ListView_SetItemState(g_lvsearchres.getwnd(),x,LVIS_FOCUSED|LVIS_SELECTED,LVIS_FOCUSED|LVIS_SELECTED);
-
-									break;
+							}
+							else {
+								SetWindowLong(hwndDlg,DWL_MSGRESULT,-1);
+								return 1;
 								};
+							if (++i == m_srch_sort_len) i=0;
 							};
+						SetWindowLong(hwndDlg,DWL_MSGRESULT,-1);
+						return 1;
 						}
-						else { //not cached
-							while (g_searchcache[0]->searchreplies.GetSize()) {
-								int last=g_searchcache[0]->searchreplies.GetSize()-1;
-								C_MessageSearchReply *sr=g_searchcache[0]->searchreplies.Get(last);
-								delete sr;
-								g_searchcache[0]->searchreplies.Del(last);
-							};
-							T_Message msg={0,};
-							C_MessageSearchRequest req;
-							req.set_min_conspeed(0); //g_config->ReadInt(CONFIG_search_minspeed,CONFIG_search_minspeed_DEFAULT));
-							req.set_searchstring(text);
-							msg.data=req.Make();
-							if (msg.data) {
-								dbg_printf(ds_Debug,"sending search for %s!",text);
-								msg.message_type=MESSAGE_SEARCH;
-								msg.message_length=msg.data->GetLength();
-								g_mql->send(&msg);
-								g_searchcache[0]->search_id=msg.message_guid;
-								g_searchcache[0]->search_id_time=GetTickCount();
-								g_searchcache[0]->numcons=g_mql->GetNumQueues();
+					else if (l->code == LVN_GETDISPINFO) {
+						return SrchWnd_GETDISPINFO(lParam);
+					}
+					else if (l->code == NM_DBLCLK) {
+						SrchWnd_OnItemRun(hwndDlg,1);
+					}
+					else if (l->code == LVN_COLUMNCLICK) {
+						NMLISTVIEW *p=(NMLISTVIEW*)lParam;
+						SrchWnd_LVN_COLUMNCLICK(p->iSubItem);
+					}
+					else if (l->code == NM_RCLICK) {
+						srchwnd_RCLICK();
 							};
-							safe_strncpy(g_searchcache[0]->lastsearchtext,text,sizeof(g_searchcache[0]->lastsearchtext));
-							char text2[1024];
-							if (text[0] == '/')
-								sprintf(text2,"Browsing %s:",text);
-							else
-								sprintf(text2,"Searching for \'%s\'...",text);
-							SetDlgItemText(hwndDlg,IDC_SEARCHSTATS,text2);
-							if (g_searchcache[0]->lastsearchtext[0] == '/') {
-								C_MessageSearchReply repl;
-								repl.set_conspeed(g_conspeed);
-								repl.clear_items();
-								repl.set_guid(&g_client_id);
-
-								if (g_searchcache[0]->lastsearchtext[1] && g_searchcache[0]->lastsearchtext[1] != '*' &&
-									strcmp(g_searchcache[0]->lastsearchtext+strlen(g_searchcache[0]->lastsearchtext)-2,"*s"))
-								{
-									//HACK init but unref
-									//T_Message msg={0,};
-									//HACK init but unref
-									//char *p=strstr(g_searchcache[0]->lastsearchtext+1,"/");
-									repl.add_item(-1,PARENT_DIRSTRING,DIRECTORY_STRING,0,0,0);
-									msg.message_guid=g_searchcache[0]->search_id;
-									msg.data=repl.Make();
-									if (msg.data) {
-										msg.message_type=MESSAGE_SEARCH_REPLY;
-										msg.message_length=msg.data->GetLength();
-										main_MsgCallback(&msg,NULL,NULL);
-										msg.data->Unlock();
 									};
+				return 0;
 								};
-
-								repl.clear_items();
-								if (g_database->GetNumFiles() && (g_accept_downloads&5)==5)
-									g_database->Search(g_searchcache[0]->lastsearchtext,&repl,NULL,0,main_MsgCallback);
+		case WM_COMMAND:
+			{
+				switch (LOWORD(wParam))
+				{
+				case IDC_EDIT_FILTER:
+					{
+						if (HIWORD(wParam) == EN_CHANGE)
+							Search_Resort();
+						break;
 							};
-							PostMessage(g_search_wnd,WM_USER_TITLEUPDATE,0,0);
-						} //!cached
-						return 0;
+				case IDC_GOROOT:
+					{
+						Search_Search("/");
+						break;
 					};
+				case IDC_BACK:
+				case IDC_BACK2:
+					return srch_WM_COMMAND_IDC_BACK(LOWORD(wParam) == IDC_BACK2);
+				case IDC_FORWARD:
+				case IDC_FORWARD2:
+					return srch_WM_COMMAND_IDC_FORWARD(LOWORD(wParam) == IDC_FORWARD2);
+				case IDC_GOPARENT:
+					return srch_WM_COMMAND_IDC_GOPARENT();
+				case IDC_SEARCH:
+					return srch_WM_COMMAND_IDC_SEARCH();
 				case IDC_SEARCHTEXT:
 					{
 						if (HIWORD(wParam) == CBN_SELCHANGE) {
@@ -1651,9 +2356,7 @@
 							PostMessage(hwndDlg,WM_COMMAND,IDC_SEARCH,0);
 						}
 						else {
-							char buf[32];
-							GetDlgItemText(hwndDlg,IDC_SEARCHTEXT,buf,sizeof(buf));
-							EnableWindow(GetDlgItem(hwndDlg,IDC_SEARCH),!!buf[0]);
+							srch_SEARCHTEXT_SELCHANGE();
 						};
 						return 0;
 					};
@@ -1664,3 +2367,5 @@
 		return 0;
 	}
 #endif
+
+//vim:ts=4:sw=4:
diff -b -N -ru waste-source-1.5-beta-2/srvmain.cpp latest/srvmain.cpp
--- waste-source-1.5-beta-2/srvmain.cpp	2004-06-15 08:53:00.000000000 +0300
+++ latest/srvmain.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -31,15 +31,18 @@
 #include "m_lcaps.hpp"
 #include "xferwnd.hpp"
 #include "netkern.hpp"
+#include "srchwnd.hpp"
 #include "xfers.hpp"
 #include "d_chat.hpp"
 #include "license.hpp"
+#include "prefs.hpp"
 
 //T_GUID g_search_id;
 //unsigned int g_search_id_time;
 
 int g_exit=0;
 
+#ifndef _DEFINE_WXUI
 static void chat_AutoReply(C_MessageChat &chat)
 {
 	T_Message msg;
@@ -67,6 +70,7 @@
 	};
 	return 0;
 };
+#endif
 
 static void sighandler(int sig)
 {
@@ -132,7 +136,7 @@
 	#endif
 }
 
-int main(int argc, char **argv)
+int waste_srvmain_start(int argc, char **argv)
 {
 	SetProgramDirectory(argv[0]);
 
@@ -206,6 +210,7 @@
 	log_printf(ds_Console,"%s starting up...",g_nameverstr);
 
 	MYSRAND();
+
 	if (!g_exit) //emergency break!
 	{
 		strcat(g_config_prefix,"default");
@@ -234,15 +239,144 @@
 		};
 
 		InitializeNetworkparts();
+		}
+		return (g_exit);
+}
+
+int 
+waste_main_start(int argc, char **argv)
+{
+	SetProgramDirectory(argv[0]);
+
+	g_log_level=ds_Console;
+	//g_log_level=ds_Debug;
+	_logfile=stderr;
+
+	installsighandler();
+
+	log_printf(ds_Console,"%s starting up...",g_nameverstr);
+
+	MYSRAND();
+
+#ifdef _DEFINE_WXUI
+
+	extern void ParseArgv (const char *, bool);
+	int i;
+	for (i = 1; i < argc; i++) {
+		ParseArgv(argv[i], true);
+	}
+
+	extern int g_opt_forceProfileDlg;
+	if (Prefs_SelectProfile(g_opt_forceProfileDlg)) return 1;
+	strcat(g_config_prefix,g_profile_name);
+
+#else 
+
+	strcat(g_config_prefix,"default");
+
+#endif
+
+	if (!g_exit) //emergency break!
+	{
+		#ifdef _WIN32
+			WSADATA wsaData;
+			if (WSAStartup(MAKEWORD(2, 0), &wsaData)) {
+				memset(&g_key,0,sizeof(g_key));
+				MessageBox(NULL,"Error initializing Winsock\n",APP_NAME " Error",0);
+				return 1;
+			}
+		#endif
+
+		UnifiedReadConfig();
+
+		InitialLoadDb();
+
+		PrepareDownloadDirectory();
+
+		int need_setup=0;
+
+#ifndef _DEFINE_SRV
+
+		need_setup=g_config->ReadInt(CONFIG_valid,0)<5;
+		if (need_setup) {
 
+#ifdef _DEFINE_WXUI
+
+				::wxMessageBox(_T("This is your first time running WASTE.\n"
+						"Please open the 'Preferences' window and press\n"
+						"'Generate a new private key...', so that you can\n"
+						"join and use the WASTE network."),
+					_T("Welcome to WASTE"),
+					wxICON_HAND|wxOK);
+				g_config->WriteInt(CONFIG_valid,5);
+				g_config->Flush();
+
+
+#else
+
+				if (!DialogBox(hInstance,MAKEINTRESOURCE(IDD_SETUPWIZ),NULL,SetupWi
+zProc)) {
+						delete g_config;
+						memset(&g_key,0,sizeof(g_key));
+						return 1;
+				};
+				g_config->WriteInt(CONFIG_valid,5);
+				g_config->Flush();
+
+#endif
+
+		};
+
+#endif /* _DEFINE_SRV */
+
+		if (!g_key.bits && !need_setup) {
+			reloadKey(
+				g_config->ReadInt(CONFIG_storepass,CONFIG_storepass_DEFAULT)?
+				g_config->ReadString(CONFIG_keypass,CONFIG_keypass_DEFAULT):
+				NULL
+				);
+		};
+
+		InitializeNetworkparts();
+
+#ifdef _DEFINE_WXUI
+		int x;
+		for (x = 0; x < SEARCHCACHE_NUMITEMS; x ++) g_searchcache[x]=new SearchCacheItem;           
+#endif
+
+#ifndef _DEFINE_SRV
+
+		extern char *g_opt_wasteOpen;
+		if (g_opt_wasteOpen) {
+			handleWasteURL(g_opt_wasteOpen);
+			free(g_opt_wasteOpen);
+			g_opt_wasteOpen = NULL;
+		};
+
+#endif /* _DEFINE_SRV */
+
+	}
+	return (g_exit);
+}
+
+int
+waste_main_poll ()
+{
 		// run loop
 
-		while (!g_exit)
+	if (!g_exit)
 		{
 			DoMainLoop();
-			Sleep(33);
+		WasteSleep(33);
 		};
+	return (g_exit);
+}
 
+int
+waste_main_exit ()
+{
+	if (!g_exit) //emergency break!
+	{
 		// exit
 		log_printf(ds_Console,"cleaning up");
 
@@ -262,6 +396,12 @@
 	if (g_aclist) free(g_aclist);
 	KillPkList();
 
+#ifdef _DEFINE_WXUI
+		for (x = 0; x < SEARCHCACHE_NUMITEMS; x ++) delete g_searchcache[x];
+		KillDirgetlist();
+		KillSearchhistory();
+#endif
+
 	delete g_mql;
 
 	delete g_config;
@@ -273,3 +413,13 @@
 	log_UpdatePath(NULL);
 	return 0;
 }
+
+#ifndef _DEFINE_WXUI
+int main(int argc, char **argv)
+{
+	waste_srvmain_start (argc, argv);
+	while (!waste_main_poll()) { ; }
+	return waste_main_exit();
+}
+#endif /* _DEFINE_WXUI */
+
diff -b -N -ru waste-source-1.5-beta-2/stdafx.hpp latest/stdafx.hpp
--- waste-source-1.5-beta-2/stdafx.hpp	2004-06-15 07:01:00.000000000 +0300
+++ latest/stdafx.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -74,3 +74,11 @@
 #endif // _DEBUG
 
 #endif
+
+#ifdef _DEFINE_WXUI
+#ifdef _DEBUG
+#ifndef _NORMAL_BLOCK
+#define _NORMAL_BLOCK   1024
+#endif // _NORMAL_BLOCK
+#endif  // _DEFINE_WXUI
+#endif
diff -b -N -ru waste-source-1.5-beta-2/util.cpp latest/util.cpp
--- waste-source-1.5-beta-2/util.cpp	2004-06-16 17:53:00.000000000 +0300
+++ latest/util.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -37,6 +37,10 @@
 	#include "resource.hpp"
 #endif
 
+#ifdef _DEFINE_WXUI
+#include <wx/clipbrd.h>
+#endif
+
 //global strings
 
 extern const char szDotWastestate[]=".WASTESTATE";
@@ -54,7 +58,7 @@
 	Bin2Hex(str,id->idc,sizeof(id->idc));
 }
 
-#ifdef _DEBUG
+#if defined(_DEBUG) && defined(WIN32)
 	char* dbgstrdup(const char*str,const char *file, unsigned int line)
 	{
 		if (!str) return NULL;
@@ -479,10 +483,10 @@
 
 ////key shit
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-
 static char tmp_passbuf[256];
 
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+
 BOOL WINAPI PassWordProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM /*lParam*/)
 {
 	switch (uMsg)
@@ -679,40 +683,47 @@
 #endif
 {
 	int retry=10;
-	#if defined(_DEFINE_SRV)||(!defined(_WIN32))
-		char tmp_passbuf[256];
-	#endif
 
 	char keyfn[1024];
 	sprintf(keyfn,"%s.pr4",g_config_prefix);
 
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 		if (!passstr) {
 	giveitanothergo:
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 			if (DialogBox(g_hInst,MAKEINTRESOURCE(IDD_PASSWD),hwndParent,PassWordProc)) {
 				g_key.bits=0;
 				memset(g_pubkeyhash,0,sizeof(g_pubkeyhash));
 				return;
 			};
-			passstr=tmp_passbuf;
-		};
+
+	#elif defined(_DEFINE_WXUI)
+			extern void wx_get_key_password(char *buf, int len);
+
+			wx_get_key_password(tmp_passbuf, sizeof(tmp_passbuf));
+			if (tmp_passbuf[0] == '\0') {
+				g_key.bits=0;
+				memset(g_pubkeyhash,0,sizeof(g_pubkeyhash));
+				return;
+			}
+
 	#else
-		if (!passstr) {
-	giveitanothergo:
 			log_printf(ds_Console,"\nPassword: ");
 			fgets(tmp_passbuf,sizeof(tmp_passbuf),stdin);
 			if (tmp_passbuf[0] && tmp_passbuf[strlen(tmp_passbuf)-1] == '\n') {
 				tmp_passbuf[strlen(tmp_passbuf)-1]=0;
 			};
+	#endif
 			passstr=tmp_passbuf;
 		};
-	#endif
 
 	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 		int ret=doLoadKey(hwndParent,passstr,keyfn,&g_key);
 	#else
 		int ret=doLoadKey(passstr,keyfn,&g_key);
 	#endif
+
+		memset(tmp_passbuf,0,256);
+
 	if (ret) {
 		if (ret == 2) {
 			if (retry>0) {
@@ -865,22 +876,35 @@
 	return cnt;
 }
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-void copyMyPubKey(HWND hwndOwner)
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+void copyMyPubKey
+#ifdef _DEFINE_WXUI
+			()
+#else
+			(HWND hwndOwner)
+#endif
 {
 	char buf[(MAX_RSA_MODULUS_LEN/8)*2*2+4096];
 	char *buf2;
 
+#ifdef _WIN32
+		char *EOL = "\r\n";
+		bool wantCrLf = true;
+#else
+		char *EOL = "\n";
+		bool wantCrLf = false;
+#endif
+
 	buf[0]=0;buf2=buf;
 	int ks=(g_key.bits+7)/8;
 	if (!ks) return;
 
-	sprintf(buf2,"WASTE_PUBLIC_KEY 20 %d %s\r\n",g_key.bits,g_regnick[0]?g_regnick:"unknown");
+	sprintf(buf2,"WASTE_PUBLIC_KEY 20 %d %s%s",g_key.bits,g_regnick[0]?g_regnick:"unknown", EOL);
 	buf2+=strlen(buf);
 
 	int lc=0, lcm=30;
 
-	buf2=Bin2Hex_Lf(buf2,&g_key.modulus[MAX_RSA_MODULUS_LEN-ks],ks,lc,lcm,true);
+	buf2=Bin2Hex_Lf(buf2,&g_key.modulus[MAX_RSA_MODULUS_LEN-ks],ks,lc,lcm,wantCrLf);
 
 	int zeroes;
 	for (zeroes = MAX_RSA_MODULUS_LEN-ks; zeroes < MAX_RSA_MODULUS_LEN && !g_key.publicExponent[zeroes]; zeroes ++);
@@ -888,12 +912,23 @@
 	ks=MAX_RSA_MODULUS_LEN-zeroes;
 
 	unsigned char x;
-	x=(unsigned char)((ks>>8)&0xff);buf2=Bin2Hex_Lf(buf2,&x,1,lc,lcm,true);
-	x=(unsigned char)((ks>>0)&0xff);buf2=Bin2Hex_Lf(buf2,&x,1,lc,lcm,true);
+	x=(unsigned char)((ks>>8)&0xff);buf2=Bin2Hex_Lf(buf2,&x,1,lc,lcm,wantCrLf);
+	x=(unsigned char)((ks>>0)&0xff);buf2=Bin2Hex_Lf(buf2,&x,1,lc,lcm,wantCrLf);
+
+	buf2=Bin2Hex_Lf(buf2,&g_key.publicExponent[MAX_RSA_MODULUS_LEN-ks],ks,lc,lcm,wantCrLf);
+
+	sprintf(buf2,"%sWASTE_PUBLIC_KEY_END%s", EOL, EOL);
+
+#ifdef _DEFINE_WXUI
 
-	buf2=Bin2Hex_Lf(buf2,&g_key.publicExponent[MAX_RSA_MODULUS_LEN-ks],ks,lc,lcm,true);
+		if (wxTheClipboard->Open()) {
+			// clipboard will call delete()
+			wxTheClipboard->SetData(new
+				wxTextDataObject(cstr_to_wxstr(buf)));
+			wxTheClipboard->Close();
+		}
 
-	sprintf(buf2,"\r\nWASTE_PUBLIC_KEY_END\r\n");
+#else
 
 	HANDLE h=GlobalAlloc(GMEM_MOVEABLE,strlen(buf)+1);
 	void *t=GlobalLock(h);
@@ -903,6 +938,7 @@
 	EmptyClipboard();
 	SetClipboardData(CF_TEXT,h);
 	CloseClipboard();
+#endif
 }
 #endif
 
@@ -1124,7 +1160,8 @@
 		bool ret=false;
 		for (ifa = ifaces; ifa != NULL; ifa = ifa->ifa_next)
 		{
-			if ((ifa->ifa_flags & IFF_UP)!=0) {
+			if ((ifa->ifa_flags & IFF_UP)!=0 && ifa->ifa_addr != NULL)
+						{
 				if (ifa->ifa_addr->sa_family==AF_INET) {
 					sockaddr_in *in;
 					in=(sockaddr_in*)(ifa->ifa_addr);
@@ -1195,7 +1232,7 @@
 const char* sevString(dSeverity sev)
 {
 	static const char dummy[]="unknown!";
-	if ((sev>=1)&&(sev<=sizeof(dSevStArr))) {
+	if ((sev >= 1) && (sev <= (int) sizeof(dSevStArr))) {
 		return dSevStArr[sev-1];
 	}
 	else {
@@ -1222,9 +1259,9 @@
 		strcpy(strc,sevString(sev));strc+=strlen(strc);
 		strcpy(strc,":");strc+=1;
 		if (tm) sprintf(strc,"<%02d/%02d/%02d %02d:%02d:%02d:%d> ",tm->tm_year%100, tm->tm_mon+1, tm->tm_mday, tm->tm_hour, tm->tm_min, tm->tm_sec, logidx++);
-		else strcpy(strc,"<????> ");
+		else strcpy(strc,"<" "????" "> ");    /* avoid interpreting as trigraphs! */
 
-		#ifdef _DEBUG
+		#if defined(_DEBUG) || defined(_DEFINE_WXUI)
 			strc+=strlen(strc);
 			strcpy(strc,"{");strc+=1;
 			strcpy(strc,m_szFilename);strc+=strlen(strc);
@@ -1379,7 +1416,7 @@
 // autolen is decremented by return-source
 const char* CopySingleToken(char* dest,const char* source,char stopchar,int destLen,int sourceLen, int* autolen)
 {
-	int maxlen=min(destLen,sourceLen);
+	int maxlen=waste_min(destLen,sourceLen);
 
 	if (maxlen<=0) {
 		if (destLen>0) dest[0]=0;
@@ -1555,7 +1592,7 @@
 		unsigned int outlen;
 		int ret;
 		if (enable) {
-			Sleep(0);
+			WasteSleep(0);
 			DWORD tick=GetTickCount();
 			int i;
 			for (i=0;i<n;i++) {
diff -b -N -ru waste-source-1.5-beta-2/util.hpp latest/util.hpp
--- waste-source-1.5-beta-2/util.hpp	2004-06-15 16:55:00.000000000 +0300
+++ latest/util.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -23,7 +23,7 @@
 #include "rsa/global.hpp"
 #include "rsa/rsaref.hpp"
 #include "itemlist.hpp"
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if (defined(_WIN32)&&(!defined(_DEFINE_SRV))) || defined(_DEFINE_WXUI)
 	#include "listview.hpp"
 #endif
 #include "sha.hpp"
@@ -135,7 +135,7 @@
 class CLogfile
 {
 	public:
-		#ifdef _DEBUG
+		#if defined(_DEBUG) || defined(_DEFINE_WXUI)
 			CLogfile(const char* filename, const int lineno):m_szFilename(filename),m_line(lineno) {};
 		#else
 			CLogfile(){};
@@ -143,7 +143,7 @@
 		void operator ()(dSeverity sev,const char *text,...) const;
 	private:
 		void operator =(CLogfile&) const;
-		#ifdef _DEBUG
+		#if defined(_DEBUG) || defined(_DEFINE_WXUI)
 			const char* const m_szFilename;
 			const int m_line;
 		#endif
@@ -157,7 +157,7 @@
 #endif
 
 //debug
-#ifdef _DEBUG
+#if defined(_DEBUG) || defined(_DEFINE_WXUI)
 	#define dbg_printf CLogfile(__FILE__,__LINE__)
 	#define log_printf CLogfile(__FILE__,__LINE__)
 #else
diff -b -N -ru waste-source-1.5-beta-2/wxappresources.cpp latest/wxappresources.cpp
--- waste-source-1.5-beta-2/wxappresources.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxappresources.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,136 @@
+/*
+WASTE - wxWidgets application resources (menus etc)
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxappresources.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include "wx/xrc/xmlres.h"
+#include "wxappresources.h"
+
+////@begin XPM images
+////@end XPM images
+
+/*!
+* Resource functions
+*/
+
+////@begin AppResources resource functions
+/*!
+* Menu creation function for IDM_USERLIST_POPUP
+*/
+
+wxMenu* AppResources::CreateMenuUserlistPopup()
+{
+	return wxXmlResource::Get()->LoadMenu(_T("IDM_USERLIST_POPUP"));
+}
+
+/*!
+* Menu creation function for IDM_SEARCHRES_POPUP
+*/
+
+wxMenu* AppResources::CreateMenuSearchResPopup()
+{
+	return wxXmlResource::Get()->LoadMenu(_T("IDM_SEARCHRES_POPUP"));
+}
+
+/*!
+* Menu creation function for IDM_SEARCHRES_FILE_POPUP
+*/
+
+wxMenu* AppResources::CreateMenuSearchresFilePopup()
+{
+	return wxXmlResource::Get()->LoadMenu(_T("IDM_SEARCHRES_FILE_POPUP"));
+}
+
+/*!
+* Menu creation function for IDM_SEARCHRES_USER_POPUP
+*/
+
+wxMenu* AppResources::CreateMenuSearchresUserPopup()
+{
+	return wxXmlResource::Get()->LoadMenu(_T("IDM_SEARCHRES_USER_POPUP"));
+}
+
+/*!
+* Menu creation function for IDM_UPLOADS_MENU
+*/
+
+wxMenu* AppResources::CreateUploadsPopupMenu()
+{
+	return wxXmlResource::Get()->LoadMenu(_T("IDM_UPLOADS_MENU"));
+}
+
+/*!
+* Menu creation function for IDM_DL_POPUP
+*/
+
+wxMenu* AppResources::CreateDownloadPopupMenu()
+{
+	return wxXmlResource::Get()->LoadMenu(_T("IDM_DL_POPUP"));
+}
+
+/*!
+* Menu creation function for IDM_DLQ_POPUP
+*/
+
+wxMenu* AppResources::CreateDownloadQueuePopupMenu()
+{
+	return wxXmlResource::Get()->LoadMenu(_T("IDM_DLQ_POPUP"));
+}
+
+////@end AppResources resource functions
+
+/*!
+* Get bitmap resources
+*/
+
+wxBitmap AppResources::GetBitmapResource( const wxString& name )
+{
+	// Bitmap retrieval
+////@begin AppResources bitmap retrieval
+	return wxNullBitmap;
+////@end AppResources bitmap retrieval
+}
+
+/*!
+* Get icon resources
+*/
+
+wxIcon AppResources::GetIconResource( const wxString& name )
+{
+	// Icon retrieval
+////@begin AppResources icon retrieval
+	return wxNullIcon;
+////@end AppResources icon retrieval
+}
diff -b -N -ru waste-source-1.5-beta-2/wxappresources.h latest/wxappresources.h
--- waste-source-1.5-beta-2/wxappresources.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxappresources.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,75 @@
+/*
+WASTE - wxWidgets application resources (menus etc)
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXAPPRESOURCES_H_
+#define _WXAPPRESOURCES_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxappresources.cpp"
+#endif
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+////@end control identifiers
+
+class AppResources
+{
+public:
+	AppResources() {}
+
+/*!
+* Resource functions
+*/
+
+////@begin AppResources resource functions
+	/// Menu creation function for IDM_USERLIST_POPUP
+	static wxMenu* CreateMenuUserlistPopup();
+
+	/// Menu creation function for IDM_SEARCHRES_POPUP
+	static wxMenu* CreateMenuSearchResPopup();
+
+	/// Menu creation function for IDM_SEARCHRES_FILE_POPUP
+	static wxMenu* CreateMenuSearchresFilePopup();
+
+	/// Menu creation function for IDM_SEARCHRES_USER_POPUP
+	static wxMenu* CreateMenuSearchresUserPopup();
+
+	/// Menu creation function for IDM_UPLOADS_MENU
+	static wxMenu* CreateUploadsPopupMenu();
+
+	/// Menu creation function for IDM_DL_POPUP
+	static wxMenu* CreateDownloadPopupMenu();
+
+	/// Menu creation function for IDM_DLQ_POPUP
+	static wxMenu* CreateDownloadQueuePopupMenu();
+
+	/// Retrieves bitmap resources
+	static wxBitmap GetBitmapResource( const wxString& name );
+
+	/// Retrieves icon resources
+	static wxIcon GetIconResource( const wxString& name );
+////@end AppResources resource functions
+
+};
+
+#endif
+	// _WXAPPRESOURCES_H_
diff -b -N -ru waste-source-1.5-beta-2/wxbrowser.cpp latest/wxbrowser.cpp
--- waste-source-1.5-beta-2/wxbrowser.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxbrowser.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,625 @@
+/*
+WASTE - wxWidgets browser / search dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxbrowser.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include "wxbrowser.h"
+#include "main.hpp"
+
+////@begin XPM images
+#include "res/file.xpm"
+#include "res/dir.xpm"
+#include "res/user.xpm"
+////@end XPM images
+
+/*!
+* WxBrowser type definition
+*/
+
+IMPLEMENT_DYNAMIC_CLASS( WxBrowser, wxDialog )
+
+/*!
+* WxBrowser event table definition
+*/
+
+BEGIN_EVENT_TABLE( WxBrowser, wxDialog )
+
+////@begin WxBrowser event table entries
+	EVT_MENU( XRCID("ID_DOWNLOAD"), WxBrowser::OnDownloadClick )
+
+	EVT_MENU( XRCID("ID_DLPARENT"), WxBrowser::OnDlparentClick )
+
+	EVT_MENU( XRCID("ID_BROWSELOC"), WxBrowser::OnBrowselocClick )
+
+	EVT_MENU( XRCID("ID_COPYLOC"), WxBrowser::OnCopylocClick )
+
+	EVT_MENU( XRCID("ID_BROWSENODE"), WxBrowser::OnBrowsenodeClick )
+
+	EVT_MENU( XRCID("ID_PRIVMSGNODE"), WxBrowser::OnPrivmsgnodeClick )
+
+	EVT_MENU( XRCID("IDM_SEARCHRES_USER_WHOIS"), WxBrowser::OnMSearchresUserWhoisClick )
+
+	EVT_MENU( XRCID("ID_SENDFILENODE"), WxBrowser::OnSendfilenodeClick )
+
+	EVT_MENU( XRCID("ID_DOWNLOADFOLDER"), WxBrowser::OnDownloadfolderClick )
+
+	EVT_MENU( XRCID("ID_BROWSEFOLDER"), WxBrowser::OnBrowsefolderClick )
+
+	EVT_BUTTON( XRCID("ID_SRCH_USERLIST"), WxBrowser::OnSrchUserlistClick )
+
+	EVT_BUTTON( XRCID("IDC_GOPARENT"), WxBrowser::OnCGoparentClick )
+
+	EVT_BUTTON( XRCID("IDC_BACK"), WxBrowser::OnCBackClick )
+
+	EVT_BUTTON( XRCID("IDC_BACK2"), WxBrowser::OnCBack2Click )
+
+	EVT_BUTTON( XRCID("IDC_FORWARD"), WxBrowser::OnCForwardClick )
+
+	EVT_BUTTON( XRCID("IDC_FORWARD2"), WxBrowser::OnCForward2Click )
+
+	EVT_COMBOBOX( XRCID("IDC_SEARCHTEXT"), WxBrowser::OnCSearchtextSelected )
+	EVT_TEXT( XRCID("IDC_SEARCHTEXT"), WxBrowser::OnCSearchtextUpdated )
+
+	EVT_BUTTON( XRCID("IDC_SEARCH"), WxBrowser::OnCSearchClick )
+
+	EVT_TEXT( XRCID("IDC_EDIT_FILTER"), WxBrowser::OnCEditFilterUpdated )
+	EVT_TEXT_ENTER( XRCID("IDC_EDIT_FILTER"), WxBrowser::OnCEditFilterEnter )
+
+////@end WxBrowser event table entries
+
+	EVT_TEXT_ENTER( XRCID("IDC_SEARCHTEXT"), WxBrowser::OnCSearchtextActivate )
+
+END_EVENT_TABLE()
+
+/*!
+* WxBrowser constructors
+*/
+
+WxBrowser::WxBrowser( )
+{
+}
+
+WxBrowser::WxBrowser( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+	Create(parent, id, caption, pos, size, style);
+}
+
+WxBrowser::~WxBrowser( )
+{
+	delete m_imagelist;
+}
+
+/*!
+* WxBrowser creator
+*/
+
+bool WxBrowser::Create( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+////@begin WxBrowser member initialisation
+	m_srch_userlist = NULL;
+	m_goparent = NULL;
+	m_back = NULL;
+	m_back2 = NULL;
+	m_forward = NULL;
+	m_forward2 = NULL;
+	m_searchtext = NULL;
+	m_search = NULL;
+	m_searchres_panel = NULL;
+	m_edit_filter = NULL;
+	m_searchstats = NULL;
+////@end WxBrowser member initialisation
+
+////@begin WxBrowser creation
+	SetParent(parent);
+	CreateControls();
+	SetIcon(GetIconResource(wxT("res/browse.ico.gif")));
+	GetSizer()->Fit(this);
+	GetSizer()->SetSizeHints(this);
+	Centre();
+////@end WxBrowser creation
+
+#define ID_RESLISTCTRL          13042
+
+	m_ressizer = new wxBoxSizer(wxVERTICAL);
+
+	// create our ListCtrl
+	m_searchres = new WxWasteSearchResultsListCtrl((wxWindow*) m_searchres_panel,
+			(wxWindowID) ID_RESLISTCTRL, wxDefaultPosition, wxDefaultSize,
+			wxLC_REPORT | wxLC_VIRTUAL | wxSUNKEN_BORDER);
+
+	m_searchres->m_browser = this;
+
+	m_ressizer->Add(m_searchres, 1, wxEXPAND | wxALL);
+	m_searchres_panel->SetSizer(m_ressizer);
+	m_ressizer->SetSizeHints(m_searchres_panel);
+
+	{
+		wxImageList *hImageList = new wxImageList(16, 16, true);
+
+		// I implemented these with XPMs instead of GIFs etc. since according
+		// to the wxWidgets documentation, XPMs are more portable! go figure.
+		hImageList->Add(wxIcon(file_xpm));
+		hImageList->Add(wxIcon(dir_xpm));
+		hImageList->Add(wxIcon(user_xpm));
+		m_imagelist = hImageList;
+		m_searchres->SetImageList(hImageList, wxIMAGE_LIST_SMALL);
+	}
+
+	return TRUE;
+}
+
+/*!
+* Control creation for WxBrowser
+*/
+
+void WxBrowser::CreateControls()
+{    
+////@begin WxBrowser content construction
+
+	wxXmlResource::Get()->LoadDialog(this, GetParent(), _T("ID_BROWSER"));
+	m_srch_userlist = XRCCTRL(*this, "ID_SRCH_USERLIST", wxBitmapButton);
+	m_goparent = XRCCTRL(*this, "IDC_GOPARENT", wxBitmapButton);
+	m_back = XRCCTRL(*this, "IDC_BACK", wxBitmapButton);
+	m_back2 = XRCCTRL(*this, "IDC_BACK2", wxBitmapButton);
+	m_forward = XRCCTRL(*this, "IDC_FORWARD", wxBitmapButton);
+	m_forward2 = XRCCTRL(*this, "IDC_FORWARD2", wxBitmapButton);
+	m_searchtext = XRCCTRL(*this, "IDC_SEARCHTEXT", wxComboBox);
+	m_search = XRCCTRL(*this, "IDC_SEARCH", wxBitmapButton);
+	m_searchres_panel = XRCCTRL(*this, "IDC_SEARCHRES_PANEL", wxPanel);
+	m_edit_filter = XRCCTRL(*this, "IDC_EDIT_FILTER", wxTextCtrl);
+	m_searchstats = XRCCTRL(*this, "ID_SEARCH_DATA", wxStaticText);
+////@end WxBrowser content construction
+
+	// Create custom windows not generated automatically here.
+
+////@begin WxBrowser content initialisation
+
+////@end WxBrowser content initialisation
+}
+
+/*!
+* Should we show tooltips?
+*/
+
+bool WxBrowser::ShowToolTips()
+{
+	return TRUE;
+}
+
+/*!
+* Get bitmap resources
+*/
+
+wxBitmap WxBrowser::GetBitmapResource( const wxString& name )
+{
+	// Bitmap retrieval
+////@begin WxBrowser bitmap retrieval
+	if (name == wxT("res/allusers.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/allusers.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/updir.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/updir.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/backward.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/backward.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/more2.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/more2.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/forward.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/forward.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/search.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/search.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	return wxNullBitmap;
+////@end WxBrowser bitmap retrieval
+}
+
+/*!
+* Get icon resources
+*/
+
+wxIcon WxBrowser::GetIconResource( const wxString& name )
+{
+	// Icon retrieval
+////@begin WxBrowser icon retrieval
+	if (name == wxT("res/browse.ico.gif"))
+	{
+		wxIcon icon(_T("res/browse.ico.gif"), wxBITMAP_TYPE_GIF);
+		return icon;
+	}
+	return wxNullIcon;
+////@end WxBrowser icon retrieval
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_SRCH_USERLIST
+*/
+
+void WxBrowser::OnSrchUserlistClick( wxCommandEvent& event )
+{
+	extern void Search_Search(char *);
+	Search_Search("/");
+	event.Skip();
+}
+
+void WxBrowser::OnDestroy( )
+{
+	extern void srchwnd_WM_DESTROY();
+	srchwnd_WM_DESTROY();
+	g_config->WriteInt(CONFIG_search_vis,0);
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_GOPARENT
+*/
+
+void WxBrowser::OnCGoparentClick( wxCommandEvent& event )
+{
+	extern int srch_WM_COMMAND_IDC_GOPARENT();
+	srch_WM_COMMAND_IDC_GOPARENT();
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_BACK
+*/
+
+void WxBrowser::OnCBackClick( wxCommandEvent& event )
+{
+	extern int srch_WM_COMMAND_IDC_BACK(int);
+	srch_WM_COMMAND_IDC_BACK(0);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_BACK2
+*/
+
+void WxBrowser::OnCBack2Click( wxCommandEvent& event )
+{
+	extern int srch_WM_COMMAND_IDC_BACK(int);
+	srch_WM_COMMAND_IDC_BACK(1);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_FORWARD
+*/
+
+void WxBrowser::OnCForwardClick( wxCommandEvent& event )
+{
+	extern int srch_WM_COMMAND_IDC_FORWARD(int);
+	srch_WM_COMMAND_IDC_FORWARD(0);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_FORWARD2
+*/
+
+void WxBrowser::OnCForward2Click( wxCommandEvent& event )
+{
+	extern int srch_WM_COMMAND_IDC_FORWARD(int);
+	srch_WM_COMMAND_IDC_FORWARD(1);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_COMBOBOX_SELECTED event handler for IDC_SEARCHTEXT
+*/
+
+void WxBrowser::OnCSearchtextSelected( wxCommandEvent& event )
+{
+	extern int srch_SEARCHTEXT_SELCHANGE();
+	srch_SEARCHTEXT_SELCHANGE();
+	event.Skip();
+}
+
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_SEARCH
+*/
+
+void WxBrowser::OnCSearchClick( wxCommandEvent& event )
+{
+	extern int srch_WM_COMMAND_IDC_SEARCH();
+	srch_WM_COMMAND_IDC_SEARCH();
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_TEXT_UPDATED event handler for IDC_EDIT_FILTER
+*/
+
+void WxBrowser::OnCEditFilterUpdated( wxCommandEvent& event )
+{
+	extern void Search_Resort();
+	Search_Resort();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TEXT_ENTER event handler for IDC_EDIT_FILTER
+*/
+
+void WxBrowser::OnCEditFilterEnter( wxCommandEvent& event )
+{
+	extern void Search_Resort();
+	Search_Resort();
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_TEXT_UPDATED event handler for IDC_SEARCHTEXT
+*/
+
+void WxBrowser::OnCSearchtextUpdated( wxCommandEvent& event )
+{
+	extern int srch_SEARCHTEXT_SELCHANGE();
+	srch_SEARCHTEXT_SELCHANGE();
+	event.Skip();
+}
+
+
+BEGIN_EVENT_TABLE(WxWasteSearchResultsListCtrl, wxListCtrl)
+	EVT_LIST_ITEM_ACTIVATED(ID_RESLISTCTRL, WxWasteSearchResultsListCtrl::OnActivated)
+	EVT_LIST_COL_CLICK(ID_RESLISTCTRL, WxWasteSearchResultsListCtrl::OnColClick)
+	EVT_RIGHT_DOWN(WxWasteSearchResultsListCtrl::OnRightDown)
+	EVT_MOUSEWHEEL(WxWasteSearchResultsListCtrl::OnMousewheel)
+END_EVENT_TABLE()
+
+
+wxString WxWasteSearchResultsListCtrl::OnGetItemText(long item, long column) const
+{
+	extern wxString SrchWnd_GetItemText(long, long);
+	return SrchWnd_GetItemText(item, column);
+}
+
+int WxWasteSearchResultsListCtrl::OnGetItemImage(long item) const
+{
+	extern int SrchWnd_GetItemImage(long);
+	int ret = SrchWnd_GetItemImage(item);
+	return ret;
+}
+
+wxListItemAttr* WxWasteSearchResultsListCtrl::OnGetItemAttr(long item) const
+{
+	return NULL;
+}
+
+void WxWasteSearchResultsListCtrl::OnActivated(wxListEvent& event)
+{
+	extern void SrchWnd_Item_Run(int);
+	SrchWnd_Item_Run(1);
+	event.Skip();
+}
+
+void WxWasteSearchResultsListCtrl::OnColClick(wxListEvent& event)
+{
+	extern void SrchWnd_LVN_COLUMNCLICK(int col);
+	int col = event.GetColumn();
+	SrchWnd_LVN_COLUMNCLICK(col);
+}
+
+void WxBrowser::OnCSearchtextActivate( wxCommandEvent& event )
+{
+	extern int srch_WM_COMMAND_IDC_SEARCH();
+	srch_WM_COMMAND_IDC_SEARCH();
+	event.Skip();
+}
+
+
+void WxWasteSearchResultsListCtrl::OnRightDown (wxMouseEvent& event)
+{
+	wxPoint pt = event.GetPosition();
+
+	int hitflags = wxLIST_HITTEST_ONITEM;
+	long item_hit = HitTest(pt, hitflags);
+
+	if (hitflags) {
+		long cursel = -1;
+		bool in_cursel = false;
+
+		while (1) {
+		cursel = GetNextItem(cursel, wxLIST_NEXT_ALL, wxLIST_STATE_SELECTED);
+		if (cursel == -1) {
+			break;
+		}
+
+		if (cursel == item_hit) {
+			in_cursel = true;
+		}
+		}
+
+		// the item wasn't in the current selection.  clear that out
+		// and replace it
+		if (!in_cursel) {
+			while (1) {
+				cursel = GetNextItem(cursel, wxLIST_NEXT_ALL,
+											wxLIST_STATE_SELECTED);
+				if (cursel == -1) {
+					break;
+				}
+				SetItemState(cursel, 0L, wxLIST_STATE_SELECTED);
+			}
+
+			// set the new item as selected
+			SetItemState(item_hit, wxLIST_STATE_SELECTED|wxLIST_STATE_FOCUSED,
+								wxLIST_STATE_SELECTED|wxLIST_STATE_FOCUSED);
+		}
+	}
+
+	extern void srchwnd_RCLICK(int, int);
+	srchwnd_RCLICK(event.GetX(), event.GetY());
+	event.Skip();
+}
+
+void WxWasteSearchResultsListCtrl::OnMousewheel (wxMouseEvent& event )
+{
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_SEARCHRES_USER_WHOIS
+*/
+
+void WxBrowser::OnMSearchresUserWhoisClick( wxCommandEvent& event )
+{
+	extern void srchwnd_ID_WHOISUSER();
+	srchwnd_ID_WHOISUSER();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_COPYLOC
+*/
+
+void WxBrowser::OnCopylocClick( wxCommandEvent& event )
+{
+	extern void srchwnd_ID_BROWSECOPYLOC(int);
+	srchwnd_ID_BROWSECOPYLOC(1);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_DOWNLOAD
+*/
+
+void WxBrowser::OnDownloadClick( wxCommandEvent& event )
+{
+	extern void SrchWnd_Item_Run(int);
+	SrchWnd_Item_Run(1);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_DLPARENT
+*/
+
+void WxBrowser::OnDlparentClick( wxCommandEvent& event )
+{
+	extern void srchwnd_ID_DLPARENT();
+	srchwnd_ID_DLPARENT();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_BROWSELOC
+*/
+
+void WxBrowser::OnBrowselocClick( wxCommandEvent& event )
+{
+	extern void srchwnd_ID_BROWSECOPYLOC(int);
+	srchwnd_ID_BROWSECOPYLOC(0);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_BROWSENODE
+*/
+
+void WxBrowser::OnBrowsenodeClick( wxCommandEvent& event )
+{
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_PRIVMSGNODE
+*/
+
+void WxBrowser::OnPrivmsgnodeClick( wxCommandEvent& event )
+{
+	extern void srchwnd_ID_PRIVMSGNODE();
+	srchwnd_ID_PRIVMSGNODE();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_SENDFILENODE
+*/
+
+void WxBrowser::OnSendfilenodeClick( wxCommandEvent& event )
+{
+	extern void srchwnd_ID_SENDFILENODE();
+	srchwnd_ID_SENDFILENODE();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_DOWNLOADFOLDER
+*/
+
+void WxBrowser::OnDownloadfolderClick( wxCommandEvent& event )
+{
+	extern void SrchWnd_Item_Run(int);
+	SrchWnd_Item_Run(0);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_BROWSEFOLDER
+*/
+
+void WxBrowser::OnBrowsefolderClick( wxCommandEvent& event )
+{
+	extern void SrchWnd_Item_Run(int);
+	SrchWnd_Item_Run(1);
+	event.Skip();
+}
+
+
diff -b -N -ru waste-source-1.5-beta-2/wxbrowser.h latest/wxbrowser.h
--- waste-source-1.5-beta-2/wxbrowser.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxbrowser.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,217 @@
+/*
+WASTE - wxWidgets browser / search dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXBROWSER_H_
+#define _WXBROWSER_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxbrowser.cpp"
+#endif
+
+/*!
+* Includes
+*/
+#include <wx/listctrl.h>
+
+////@begin includes
+#include "wx/xrc/xmlres.h"
+////@end includes
+
+class WxBrowser;
+class WxWasteSearchResultsListCtrl : public wxListCtrl {
+public:
+	WxWasteSearchResultsListCtrl(wxWindow *parent,
+			const wxWindowID id,
+			const wxPoint& pos,
+			const wxSize& size,
+			long style)
+		: wxListCtrl(parent, id, pos, size, style)
+		{ }
+
+	virtual wxString OnGetItemText(long item, long column) const;
+	virtual int OnGetItemImage(long item) const;
+	virtual wxListItemAttr * OnGetItemAttr(long item) const;
+
+	virtual void OnActivated(wxListEvent& event);
+	virtual void OnColClick(wxListEvent& event);
+	virtual void OnRightDown(wxMouseEvent& event);
+	virtual void OnMousewheel(wxMouseEvent& event);
+
+	WxBrowser *m_browser;
+
+	DECLARE_NO_COPY_CLASS(WxWasteSearchResultsListCtrl)
+	DECLARE_EVENT_TABLE()
+};
+
+/*!
+* Forward declarations
+*/
+
+////@begin forward declarations
+////@end forward declarations
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+#define ID_BROWSER 10000
+#define SYMBOL_WXBROWSER_STYLE wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU
+#define SYMBOL_WXBROWSER_TITLE _("Browser")
+#define SYMBOL_WXBROWSER_IDNAME ID_BROWSER
+#define SYMBOL_WXBROWSER_SIZE wxDefaultSize
+#define SYMBOL_WXBROWSER_POSITION wxDefaultPosition
+////@end control identifiers
+
+/*!
+* Compatibility
+*/
+
+#ifndef wxCLOSE_BOX
+#define wxCLOSE_BOX 0x1000
+#endif
+#ifndef wxFIXED_MINSIZE
+#define wxFIXED_MINSIZE 0
+#endif
+
+/*!
+* WxBrowser class declaration
+*/
+
+class WxBrowser: public wxDialog
+{    
+	DECLARE_DYNAMIC_CLASS( WxBrowser )
+	DECLARE_EVENT_TABLE()
+
+public:
+	/// Constructors
+	WxBrowser( );
+	WxBrowser( wxWindow* parent, wxWindowID id = SYMBOL_WXBROWSER_IDNAME, const wxString& caption = SYMBOL_WXBROWSER_TITLE, const wxPoint& pos = SYMBOL_WXBROWSER_POSITION, const wxSize& size = SYMBOL_WXBROWSER_SIZE, long style = SYMBOL_WXBROWSER_STYLE );
+	virtual ~WxBrowser( );
+
+	/// Creation
+	bool Create( wxWindow* parent, wxWindowID id = SYMBOL_WXBROWSER_IDNAME, const wxString& caption = SYMBOL_WXBROWSER_TITLE, const wxPoint& pos = SYMBOL_WXBROWSER_POSITION, const wxSize& size = SYMBOL_WXBROWSER_SIZE, long style = SYMBOL_WXBROWSER_STYLE );
+
+	/// Creates the controls and sizers
+	void CreateControls();
+
+////@begin WxBrowser event handler declarations
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_DOWNLOAD
+	void OnDownloadClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_DLPARENT
+	void OnDlparentClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_BROWSELOC
+	void OnBrowselocClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_COPYLOC
+	void OnCopylocClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_BROWSENODE
+	void OnBrowsenodeClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_PRIVMSGNODE
+	void OnPrivmsgnodeClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_SEARCHRES_USER_WHOIS
+	void OnMSearchresUserWhoisClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_SENDFILENODE
+	void OnSendfilenodeClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_DOWNLOADFOLDER
+	void OnDownloadfolderClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_BROWSEFOLDER
+	void OnBrowsefolderClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_SRCH_USERLIST
+	void OnSrchUserlistClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_GOPARENT
+	void OnCGoparentClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_BACK
+	void OnCBackClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_BACK2
+	void OnCBack2Click( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_FORWARD
+	void OnCForwardClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_FORWARD2
+	void OnCForward2Click( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_COMBOBOX_SELECTED event handler for IDC_SEARCHTEXT
+	void OnCSearchtextSelected( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_UPDATED event handler for IDC_SEARCHTEXT
+	void OnCSearchtextUpdated( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_SEARCH
+	void OnCSearchClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_UPDATED event handler for IDC_EDIT_FILTER
+	void OnCEditFilterUpdated( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_ENTER event handler for IDC_EDIT_FILTER
+	void OnCEditFilterEnter( wxCommandEvent& event );
+
+////@end WxBrowser event handler declarations
+
+	void OnCSearchtextActivate( wxCommandEvent& event );
+
+////@begin WxBrowser member function declarations
+
+	/// Retrieves bitmap resources
+	wxBitmap GetBitmapResource( const wxString& name );
+
+	/// Retrieves icon resources
+	wxIcon GetIconResource( const wxString& name );
+////@end WxBrowser member function declarations
+
+	void OnDestroy();
+
+	/// Should we show tooltips?
+	static bool ShowToolTips();
+
+////@begin WxBrowser member variables
+	wxBitmapButton* m_srch_userlist;
+	wxBitmapButton* m_goparent;
+	wxBitmapButton* m_back;
+	wxBitmapButton* m_back2;
+	wxBitmapButton* m_forward;
+	wxBitmapButton* m_forward2;
+	wxComboBox* m_searchtext;
+	wxBitmapButton* m_search;
+	wxPanel* m_searchres_panel;
+	wxTextCtrl* m_edit_filter;
+	wxStaticText* m_searchstats;
+////@end WxBrowser member variables
+
+	wxBoxSizer *m_ressizer;
+	WxWasteSearchResultsListCtrl* m_searchres;
+	wxImageList *m_imagelist;
+};
+
+#endif
+	// _WXBROWSER_H_
diff -b -N -ru waste-source-1.5-beta-2/wxchat.cpp latest/wxchat.cpp
--- waste-source-1.5-beta-2/wxchat.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxchat.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,284 @@
+/*
+WASTE - wxWidgets chat dialogs
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxchat.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include "stdafx.hpp"
+#include "main.hpp"
+#include "d_chat.hpp"
+#include "m_chat.hpp"
+#include "wxappresources.h"
+#include "wxchat.h"
+
+////@begin XPM images
+////@end XPM images
+
+/*!
+* WxChat type definition
+*/
+
+IMPLEMENT_DYNAMIC_CLASS( WxChat, wxDialog )
+
+/*!
+* WxChat event table definition
+*/
+
+BEGIN_EVENT_TABLE( WxChat, wxDialog )
+
+////@begin WxChat event table entries
+	EVT_CLOSE( WxChat::OnCloseWindow )
+
+	EVT_MENU( XRCID("IDM_CHAT_USER"), WxChat::OnMChatUserClick )
+
+	EVT_MENU( XRCID("IDM_WHOIS_USER"), WxChat::OnMWhoisUserClick )
+
+	EVT_MENU( XRCID("IDM_BROWSE_USER"), WxChat::OnMBrowseUserClick )
+
+	EVT_MENU( XRCID("IDM_SENDFILE_USER"), WxChat::OnMSendfileUserClick )
+
+	EVT_TREE_BEGIN_RDRAG( XRCID("IDC_TREE_CHATROOM"), WxChat::OnCTreeChatroomBeginRDrag )
+	EVT_TREE_ITEM_ACTIVATED( XRCID("IDC_TREE_CHATROOM"), WxChat::OnCTreeChatroomItemActivated )
+
+	EVT_TEXT_ENTER( XRCID("IDC_CHATEDIT"), WxChat::OnCChateditEnter )
+
+////@end WxChat event table entries
+
+END_EVENT_TABLE()
+
+/*!
+* WxChat constructors
+*/
+
+WxChat::WxChat( )
+{
+}
+
+WxChat::WxChat( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+	Create(parent, id, caption, pos, size, style);
+}
+
+/*!
+* WxChat creator
+*/
+
+bool WxChat::Create( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+////@begin WxChat member initialisation
+	m_chattext = NULL;
+	m_tree_chatroom = NULL;
+	m_chatedit = NULL;
+	m_status = NULL;
+////@end WxChat member initialisation
+
+////@begin WxChat creation
+	SetParent(parent);
+	CreateControls();
+	SetIcon(GetIconResource(wxT("res/chat_icon.gif")));
+	Centre();
+////@end WxChat creation
+
+	SetSize(-1, -1, 420, 270, wxSIZE_USE_EXISTING);
+
+	return TRUE;
+}
+
+/*!
+* Control creation for WxChat
+*/
+
+void WxChat::CreateControls()
+{    
+////@begin WxChat content construction
+
+	wxXmlResource::Get()->LoadDialog(this, GetParent(), _T("ID_CHAT_DLG"));
+	m_chattext = XRCCTRL(*this, "IDC_CHATTEXT", wxTextCtrl);
+	m_tree_chatroom = XRCCTRL(*this, "IDC_TREE_CHATROOM", wxTreeCtrl);
+	m_chatedit = XRCCTRL(*this, "IDC_CHATEDIT", wxTextCtrl);
+	m_status = XRCCTRL(*this, "IDC_STATUS", wxStaticText);
+////@end WxChat content construction
+
+////@begin WxChat content initialisation
+
+////@end WxChat content initialisation
+}
+
+void WxChat::set_chatroom_item(chatroom_item *item)
+{
+	extern void wx_setup_chat_window(WxChat *, chatroom_item *);
+	wx_setup_chat_window(this, item);
+	m_userdata = (long) item;
+}
+
+/*!
+* Should we show tooltips?
+*/
+
+bool WxChat::ShowToolTips()
+{
+	return TRUE;
+}
+
+/*!
+* Get bitmap resources
+*/
+
+wxBitmap WxChat::GetBitmapResource( const wxString& name )
+{
+	// Bitmap retrieval
+////@begin WxChat bitmap retrieval
+	return wxNullBitmap;
+////@end WxChat bitmap retrieval
+}
+
+/*!
+* Get icon resources
+*/
+
+wxIcon WxChat::GetIconResource( const wxString& name )
+{
+	// Icon retrieval
+////@begin WxChat icon retrieval
+	if (name == wxT("res/chat_icon.gif"))
+	{
+		wxIcon icon(_T("res/chat_icon.gif"), wxBITMAP_TYPE_GIF);
+		return icon;
+	}
+	return wxNullIcon;
+////@end WxChat icon retrieval
+}
+/*!
+* wxEVT_COMMAND_TREE_BEGIN_RDRAG event handler for IDC_TREE_CHATROOM
+*/
+
+void WxChat::OnCTreeChatroomBeginRDrag( wxTreeEvent& event )
+{
+	wxMenu *menu = AppResources::CreateMenuUserlistPopup();
+	extern bool showTreeCtrlContextMenu (wxTreeCtrl *tree, wxMenu *menu, wxPoint, bool);
+	showTreeCtrlContextMenu(m_tree_chatroom, menu, wxGetMousePosition(), true);
+}
+
+/*!
+* wxEVT_COMMAND_TREE_ITEM_ACTIVATED event handler for IDC_TREE_CHATROOM
+*/
+
+void WxChat::OnCTreeChatroomItemActivated( wxTreeEvent& event )
+{
+	extern chatroom_item *chat_ShowRoom(const char *channel, int activate);
+	wxString name = m_tree_chatroom->GetItemText(event.GetItem());
+	if (!name.IsEmpty()) {
+		char buf[256];
+		wxstr_to_cstr(buf, name, 255);
+		chat_ShowRoom(buf, 2);
+	}
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_TEXT_ENTER event handler for IDC_CHATEDIT
+*/
+
+void WxChat::OnCChateditEnter( wxCommandEvent& event )
+{
+	extern int chat_WM_COMMAND_IDC_CHAT(wxWindow *hwndDlg);
+	chat_WM_COMMAND_IDC_CHAT(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_CLOSE_WINDOW event handler for ID_CHAT_DLG
+*/
+
+void WxChat::OnCloseWindow( wxCloseEvent& event )
+{
+	extern int chat_WM_CLOSE(wxWindow *hwndDlg);
+	chat_WM_CLOSE(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_CHAT_USER
+*/
+
+void WxChat::OnMChatUserClick( wxCommandEvent& event )
+{
+	char buf[1024];
+	wxString text = m_tree_chatroom->GetItemText(m_users_hit_id);
+	wxstr_to_cstr(buf, text, 1023);
+
+	extern chatroom_item *chat_ShowRoom(const char *channel, int activate);
+	chat_ShowRoom(buf, 1);
+
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_WHOIS_USER
+*/
+
+void WxChat::OnMWhoisUserClick( wxCommandEvent& event )
+{
+	char buf[1024];
+	wxString text = m_tree_chatroom->GetItemText(m_users_hit_id);
+	wxstr_to_cstr(buf, text, 1023);
+	extern void main_ID_WHOISUSER(char *);
+	main_ID_WHOISUSER(buf);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_BROWSE_USER
+*/
+
+void WxChat::OnMBrowseUserClick( wxCommandEvent& event )
+{
+	m_mainframe->BrowseUser(m_tree_chatroom->GetItemText(m_users_hit_id));
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_SENDFILE_USER
+*/
+
+void WxChat::OnMSendfileUserClick( wxCommandEvent& event )
+{
+	// XXXX todo
+	event.Skip();
+}
+
+
diff -b -N -ru waste-source-1.5-beta-2/wxchat.h latest/wxchat.h
--- waste-source-1.5-beta-2/wxchat.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxchat.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,144 @@
+/*
+WASTE - wxWidgets chat dialogs
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXCHAT_H_
+#define _WXCHAT_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxchat.cpp"
+#endif
+
+/*!
+* Includes
+*/
+
+////@begin includes
+#include "wx/xrc/xmlres.h"
+#include "wx/treectrl.h"
+////@end includes
+#include "wxmainframe.h"
+
+/*!
+* Forward declarations
+*/
+
+////@begin forward declarations
+class wxTreeCtrl;
+////@end forward declarations
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+#define ID_CHAT_DLG 10078
+#define SYMBOL_WXCHAT_STYLE wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU
+#define SYMBOL_WXCHAT_TITLE _("Chat")
+#define SYMBOL_WXCHAT_IDNAME ID_CHAT_DLG
+#define SYMBOL_WXCHAT_SIZE wxSize(400, 300)
+#define SYMBOL_WXCHAT_POSITION wxDefaultPosition
+////@end control identifiers
+
+/*!
+* Compatibility
+*/
+
+#ifndef wxCLOSE_BOX
+#define wxCLOSE_BOX 0x1000
+#endif
+#ifndef wxFIXED_MINSIZE
+#define wxFIXED_MINSIZE 0
+#endif
+
+/*!
+* WxChat class declaration
+*/
+
+class WxChat: public wxDialog
+{    
+	DECLARE_DYNAMIC_CLASS( WxChat )
+	DECLARE_EVENT_TABLE()
+
+public:
+	/// Constructors
+	WxChat( );
+	WxChat( wxWindow* parent, wxWindowID id = SYMBOL_WXCHAT_IDNAME, const wxString& caption = SYMBOL_WXCHAT_TITLE, const wxPoint& pos = SYMBOL_WXCHAT_POSITION, const wxSize& size = SYMBOL_WXCHAT_SIZE, long style = SYMBOL_WXCHAT_STYLE );
+
+	/// Creation
+	bool Create( wxWindow* parent, wxWindowID id = SYMBOL_WXCHAT_IDNAME, const wxString& caption = SYMBOL_WXCHAT_TITLE, const wxPoint& pos = SYMBOL_WXCHAT_POSITION, const wxSize& size = SYMBOL_WXCHAT_SIZE, long style = SYMBOL_WXCHAT_STYLE );
+
+	/// Creates the controls and sizers
+	void CreateControls();
+
+////@begin WxChat event handler declarations
+
+	/// wxEVT_CLOSE_WINDOW event handler for ID_CHAT_DLG
+	void OnCloseWindow( wxCloseEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_CHAT_USER
+	void OnMChatUserClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_WHOIS_USER
+	void OnMWhoisUserClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_BROWSE_USER
+	void OnMBrowseUserClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_SENDFILE_USER
+	void OnMSendfileUserClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TREE_BEGIN_RDRAG event handler for IDC_TREE_CHATROOM
+	void OnCTreeChatroomBeginRDrag( wxTreeEvent& event );
+
+	/// wxEVT_COMMAND_TREE_ITEM_ACTIVATED event handler for IDC_TREE_CHATROOM
+	void OnCTreeChatroomItemActivated( wxTreeEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_ENTER event handler for IDC_CHATEDIT
+	void OnCChateditEnter( wxCommandEvent& event );
+
+////@end WxChat event handler declarations
+
+////@begin WxChat member function declarations
+
+	/// Retrieves bitmap resources
+	wxBitmap GetBitmapResource( const wxString& name );
+
+	/// Retrieves icon resources
+	wxIcon GetIconResource( const wxString& name );
+////@end WxChat member function declarations
+
+	void set_chatroom_item(chatroom_item *item);
+
+	/// Should we show tooltips?
+	static bool ShowToolTips();
+
+////@begin WxChat member variables
+	wxTextCtrl* m_chattext;
+	wxTreeCtrl* m_tree_chatroom;
+	wxTextCtrl* m_chatedit;
+	wxStaticText* m_status;
+////@end WxChat member variables
+
+	wxTreeItemId m_users_hit_id;
+	MainFrame *m_mainframe;
+	long    m_userdata;
+};
+
+#endif
+	// _WXCHAT_H_
diff -b -N -ru waste-source-1.5-beta-2/wxkgrand.cpp latest/wxkgrand.cpp
--- waste-source-1.5-beta-2/wxkgrand.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxkgrand.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,194 @@
+/*
+WASTE - wxWidgets key-generation dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxkgrand.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include "wxkgrand.h"
+
+////@begin XPM images
+////@end XPM images
+
+/*!
+* WxKeyGenRandomnessDialog type definition
+*/
+
+IMPLEMENT_DYNAMIC_CLASS( WxKeyGenRandomnessDialog, wxDialog )
+
+/*!
+* WxKeyGenRandomnessDialog event table definition
+*/
+
+BEGIN_EVENT_TABLE( WxKeyGenRandomnessDialog, wxDialog )
+
+////@begin WxKeyGenRandomnessDialog event table entries
+	EVT_CLOSE( WxKeyGenRandomnessDialog::OnCloseWindow )
+	EVT_MOTION( WxKeyGenRandomnessDialog::OnMotion )
+
+	EVT_BUTTON( XRCID("ID_CANCEL"), WxKeyGenRandomnessDialog::OnCancelClick )
+
+////@end WxKeyGenRandomnessDialog event table entries
+
+END_EVENT_TABLE()
+
+/*!
+* WxKeyGenRandomnessDialog constructors
+*/
+
+WxKeyGenRandomnessDialog::WxKeyGenRandomnessDialog( )
+{
+}
+
+WxKeyGenRandomnessDialog::WxKeyGenRandomnessDialog( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+	Create(parent, id, caption, pos, size, style);
+}
+
+/*!
+* WxKeyGenRandomnessDialog creator
+*/
+
+bool WxKeyGenRandomnessDialog::Create( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+////@begin WxKeyGenRandomnessDialog member initialisation
+	m_dialog_text = NULL;
+	m_kg_progress = NULL;
+////@end WxKeyGenRandomnessDialog member initialisation
+
+////@begin WxKeyGenRandomnessDialog creation
+	SetParent(parent);
+	CreateControls();
+	SetIcon(GetIconResource(wxT("res/icon1.ico.gif")));
+	GetSizer()->Fit(this);
+	GetSizer()->SetSizeHints(this);
+	Centre();
+////@end WxKeyGenRandomnessDialog creation
+
+	m_cancel_pressed = false;
+	return TRUE;
+}
+
+/*!
+* Control creation for WxKeyGenRandomnessDialog
+*/
+
+void WxKeyGenRandomnessDialog::CreateControls()
+{    
+////@begin WxKeyGenRandomnessDialog content construction
+
+	wxXmlResource::Get()->LoadDialog(this, GetParent(), _T("ID_KEYGEN_DLG"));
+	m_dialog_text = XRCCTRL(*this, "wxID_STATIC", wxStaticText);
+	m_kg_progress = XRCCTRL(*this, "ID_KG_PROGRESS", wxGauge);
+////@end WxKeyGenRandomnessDialog content construction
+
+	// Create custom windows not generated automatically here.
+
+////@begin WxKeyGenRandomnessDialog content initialisation
+
+////@end WxKeyGenRandomnessDialog content initialisation
+}
+
+/*!
+* Should we show tooltips?
+*/
+
+bool WxKeyGenRandomnessDialog::ShowToolTips()
+{
+	return TRUE;
+}
+
+/*!
+* Get bitmap resources
+*/
+
+wxBitmap WxKeyGenRandomnessDialog::GetBitmapResource( const wxString& name )
+{
+	// Bitmap retrieval
+////@begin WxKeyGenRandomnessDialog bitmap retrieval
+	return wxNullBitmap;
+////@end WxKeyGenRandomnessDialog bitmap retrieval
+}
+
+/*!
+* Get icon resources
+*/
+
+wxIcon WxKeyGenRandomnessDialog::GetIconResource( const wxString& name )
+{
+	// Icon retrieval
+////@begin WxKeyGenRandomnessDialog icon retrieval
+	if (name == wxT("res/icon1.ico.gif"))
+	{
+		wxIcon icon(_T("res/icon1.ico.gif"), wxBITMAP_TYPE_GIF);
+		return icon;
+	}
+	return wxNullIcon;
+////@end WxKeyGenRandomnessDialog icon retrieval
+}
+/*!
+* wxEVT_MOTION event handler for ID_DIALOG
+*/
+
+void WxKeyGenRandomnessDialog::OnMotion( wxMouseEvent& event )
+{
+////@begin wxEVT_MOTION event handler for ID_DIALOG in WxKeyGenRandomnessDialog.
+	// Before editing this code, remove the block markers.
+	event.Skip();
+////@end wxEVT_MOTION event handler for ID_DIALOG in WxKeyGenRandomnessDialog. 
+}
+
+
+/*!
+* wxEVT_CLOSE_WINDOW event handler for ID_DIALOG
+*/
+
+void WxKeyGenRandomnessDialog::OnCloseWindow( wxCloseEvent& event )
+{
+	m_cancel_pressed = true;
+	this->EndModal(wxID_CANCEL);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_CANCEL
+*/
+
+void WxKeyGenRandomnessDialog::OnCancelClick( wxCommandEvent& event )
+{
+	m_cancel_pressed = true;
+	this->EndModal(wxID_CANCEL);
+	event.Skip();
+}
+
diff -b -N -ru waste-source-1.5-beta-2/wxkgrand.h latest/wxkgrand.h
--- waste-source-1.5-beta-2/wxkgrand.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxkgrand.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,120 @@
+/*
+WASTE - wxWidgets key-generation dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXKGRAND_H_
+#define _WXKGRAND_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxkgrand.cpp"
+#endif
+
+/*!
+* Includes
+*/
+
+////@begin includes
+#include "wx/xrc/xmlres.h"
+////@end includes
+
+/*!
+* Forward declarations
+*/
+
+////@begin forward declarations
+////@end forward declarations
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+#define ID_KEYGEN_DLG 10081
+#define SYMBOL_WXKEYGENRANDOMNESSDIALOG_STYLE wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU
+#define SYMBOL_WXKEYGENRANDOMNESSDIALOG_TITLE _("WASTE Key Generator")
+#define SYMBOL_WXKEYGENRANDOMNESSDIALOG_IDNAME ID_KEYGEN_DLG
+#define SYMBOL_WXKEYGENRANDOMNESSDIALOG_SIZE wxSize(400, 500)
+#define SYMBOL_WXKEYGENRANDOMNESSDIALOG_POSITION wxDefaultPosition
+////@end control identifiers
+
+/*!
+* Compatibility
+*/
+
+#ifndef wxCLOSE_BOX
+#define wxCLOSE_BOX 0x1000
+#endif
+#ifndef wxFIXED_MINSIZE
+#define wxFIXED_MINSIZE 0
+#endif
+
+/*!
+* WxKeyGenRandomnessDialog class declaration
+*/
+
+class WxKeyGenRandomnessDialog: public wxDialog
+{    
+	DECLARE_DYNAMIC_CLASS( WxKeyGenRandomnessDialog )
+	DECLARE_EVENT_TABLE()
+
+public:
+	/// Constructors
+	WxKeyGenRandomnessDialog( );
+	WxKeyGenRandomnessDialog( wxWindow* parent, wxWindowID id = SYMBOL_WXKEYGENRANDOMNESSDIALOG_IDNAME, const wxString& caption = SYMBOL_WXKEYGENRANDOMNESSDIALOG_TITLE, const wxPoint& pos = SYMBOL_WXKEYGENRANDOMNESSDIALOG_POSITION, const wxSize& size = SYMBOL_WXKEYGENRANDOMNESSDIALOG_SIZE, long style = SYMBOL_WXKEYGENRANDOMNESSDIALOG_STYLE );
+
+	/// Creation
+	bool Create( wxWindow* parent, wxWindowID id = SYMBOL_WXKEYGENRANDOMNESSDIALOG_IDNAME, const wxString& caption = SYMBOL_WXKEYGENRANDOMNESSDIALOG_TITLE, const wxPoint& pos = SYMBOL_WXKEYGENRANDOMNESSDIALOG_POSITION, const wxSize& size = SYMBOL_WXKEYGENRANDOMNESSDIALOG_SIZE, long style = SYMBOL_WXKEYGENRANDOMNESSDIALOG_STYLE );
+
+	/// Creates the controls and sizers
+	void CreateControls();
+
+////@begin WxKeyGenRandomnessDialog event handler declarations
+
+	/// wxEVT_CLOSE_WINDOW event handler for ID_KEYGEN_DLG
+	void OnCloseWindow( wxCloseEvent& event );
+
+	/// wxEVT_MOTION event handler for ID_KEYGEN_DLG
+	void OnMotion( wxMouseEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_CANCEL
+	void OnCancelClick( wxCommandEvent& event );
+
+////@end WxKeyGenRandomnessDialog event handler declarations
+
+////@begin WxKeyGenRandomnessDialog member function declarations
+
+	/// Retrieves bitmap resources
+	wxBitmap GetBitmapResource( const wxString& name );
+
+	/// Retrieves icon resources
+	wxIcon GetIconResource( const wxString& name );
+////@end WxKeyGenRandomnessDialog member function declarations
+
+	/// Should we show tooltips?
+	static bool ShowToolTips();
+
+////@begin WxKeyGenRandomnessDialog member variables
+	wxStaticText* m_dialog_text;
+	wxGauge* m_kg_progress;
+////@end WxKeyGenRandomnessDialog member variables
+
+	bool m_cancel_pressed;
+};
+
+#endif
+	// _WXKGRAND_H_
diff -b -N -ru waste-source-1.5-beta-2/wxmain.cpp latest/wxmain.cpp
--- waste-source-1.5-beta-2/wxmain.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxmain.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,236 @@
+/*
+WASTE - wxWidgets main application class
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxmain.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include "wxmain.h"
+#include <wx/string.h>
+#include <wx/textdlg.h>
+#include <wx/treectrl.h>
+#include "main.hpp"
+
+////@begin XPM images
+////@end XPM images
+
+/*!
+* Application instance implementation
+*/
+
+////@begin implement app
+IMPLEMENT_APP( WxwasteApp )
+////@end implement app
+
+/*!
+* WxwasteApp type definition
+*/
+
+IMPLEMENT_CLASS( WxwasteApp, wxApp )
+
+/*!
+* WxwasteApp event table definition
+*/
+
+BEGIN_EVENT_TABLE( WxwasteApp, wxApp )
+
+////@begin WxwasteApp event table entries
+////@end WxwasteApp event table entries
+
+END_EVENT_TABLE()
+
+/*!
+* Constructor for WxwasteApp
+*/
+
+WxwasteApp::WxwasteApp()
+{
+////@begin WxwasteApp member initialisation
+////@end WxwasteApp member initialisation
+}
+
+/*!
+* Initialisation for WxwasteApp
+*/
+
+bool WxwasteApp::OnInit()
+{
+	wxXmlResource::Get()->InitAllHandlers();
+	//wxXmlResource::Get()->Load( wxT("wxwaste.xrc") );
+
+	extern void InitXmlResource();
+	InitXmlResource();
+
+#if wxUSE_XPM
+	wxImage::AddHandler( new wxXPMHandler );
+#endif
+#if wxUSE_LIBPNG
+	wxImage::AddHandler( new wxPNGHandler );
+#endif
+#if wxUSE_LIBJPEG
+	wxImage::AddHandler( new wxJPEGHandler );
+#endif
+#if wxUSE_GIF
+	wxImage::AddHandler( new wxGIFHandler );
+#endif
+
+	// annoying.  wxWindows has taken over argc/argv and made
+	// them into Unicode strings.  recreate them
+	char **argv_str_copy = (char **) malloc(sizeof(char *) * wxApp::argc);
+	// we never free this, since it's traditional under UNIX
+	// that argv remains valid until exit()
+	int i;
+	for (i = 0; i < wxApp::argc; i++) {
+#if wxUSE_UNICODE
+	// ugh! it's a wxChar*
+	argv_str_copy[i] = strdup (wxConvCurrent->cWX2MB(wxApp::argv[i]));
+#else
+	argv_str_copy[i] = strdup (wxApp::argv[i]);
+#endif
+	}
+
+	if (waste_main_start(wxApp::argc, argv_str_copy) != 0) {
+		return false;
+	}
+
+	MainFrame* mainWindow = new MainFrame( NULL, ID_MAIN_FRAME );
+	mainWindow->Show(true);
+	
+	m_mainframe = mainWindow;
+
+	return true;
+}
+
+/*!
+* Cleanup for WxwasteApp
+*/
+int WxwasteApp::OnExit()
+{    
+	//waste_main_exit();
+	
+////@begin WxwasteApp cleanup
+	return wxApp::OnExit();
+////@end WxwasteApp cleanup
+}
+
+int WxwasteApp::MainLoop()
+{
+	return wxApp::MainLoop();
+}
+
+
+void
+wx_get_key_password(char *buf, int len) {
+	wxString str;
+	str = wxGetPasswordFromUser(
+			_T("Please enter WASTE private key password"),
+			_T("WASTE Password"));
+
+	safe_strncpy(buf, (char *) str.c_str(), len - 1);
+}
+
+void
+wxSetDlgItemText(wxObject *ptr, const char *buf) {
+	wxString str = cstr_to_wxstr(buf);
+	if (ptr->IsKindOf(CLASSINFO(wxTextCtrl))) {
+		wxDynamicCast(ptr, wxTextCtrl)->SetValue(str);
+	}
+	else if (ptr->IsKindOf(CLASSINFO(wxComboBox))) {
+		wxDynamicCast(ptr, wxComboBox)->SetValue(str);
+	}
+	else if (ptr->IsKindOf(CLASSINFO(wxStaticText))) {
+		wxDynamicCast(ptr, wxStaticText)->SetLabel(str);
+	}
+	else {
+		wxLogError (_T("wxSetDlgItemText doesn't support this type (%lx)"), (long) ptr);
+	}
+}
+
+void
+wxGetDlgItemText(wxObject *ptr, char *buf, int len) {
+	wxString str;
+	if (ptr->IsKindOf(CLASSINFO(wxTextCtrl))) {
+		str = wxDynamicCast(ptr, wxTextCtrl)->GetValue();
+	}
+	else if (ptr->IsKindOf(CLASSINFO(wxComboBox))) {
+		str = wxDynamicCast(ptr, wxComboBox)->GetValue();
+	}
+	else if (ptr->IsKindOf(CLASSINFO(wxStaticText))) {
+		str = wxDynamicCast(ptr, wxStaticText)->GetLabel();
+	}
+	else {
+		wxLogError (_T("wxGetDlgItemText doesn't support this type (%lx)"), (long) ptr);
+		*buf = '\0';
+		return;
+	}
+	wxstr_to_cstr(buf, str, len);
+}
+
+bool
+showTreeCtrlContextMenu (wxTreeCtrl *tree, wxMenu *menu, wxPoint pt, bool is_screen) {
+	// this is from the wxWidgets "treectrl" example
+	// check if event was generated by keyboard (MSW-specific?)
+	if (pt.x==-1 && pt.y==-1) //(this is how MSW indicates it)
+	{
+		//attempt to guess where to show the menu
+		wxTreeItemId item = tree->GetSelection();
+		if (item.IsOk()) {
+			//if an item was clicked, show menu to the right of it
+			wxRect rect;
+			tree->GetBoundingRect(item, rect, true); //true = only the label
+			pt = wxPoint(rect.GetRight(), rect.GetTop());
+		} else {
+			pt = wxPoint(0, 0);
+		}
+	}
+	else
+	{
+		// event was generated by mouse, use supplied coords
+		if (is_screen) {
+			pt = tree->ScreenToClient(pt);
+		}
+
+		// select the item under the mouse ptr 
+		int hitflags = (wxTREE_HITTEST_ONITEMBUTTON|wxTREE_HITTEST_ONITEMICON|
+				wxTREE_HITTEST_ONITEMINDENT|wxTREE_HITTEST_ONITEMLABEL|
+				wxTREE_HITTEST_ONITEMRIGHT|wxTREE_HITTEST_ONITEMSTATEICON);
+
+		wxTreeItemId id = tree->HitTest(pt, hitflags);
+		if (hitflags) {
+			tree->SelectItem(id, true);
+		}
+	}
+
+	return tree->PopupMenu(menu, pt);
+}
+
diff -b -N -ru waste-source-1.5-beta-2/wxmain.h latest/wxmain.h
--- waste-source-1.5-beta-2/wxmain.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxmain.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,95 @@
+/*
+WASTE - wxWidgets main application class
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXMAIN_H_
+#define _WXMAIN_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxmain.cpp"
+#endif
+
+/*!
+* Includes
+*/
+
+////@begin includes
+#include "wx/xrc/xmlres.h"
+#include "wx/image.h"
+#include "wxmainframe.h"
+////@end includes
+
+/*!
+* Forward declarations
+*/
+
+////@begin forward declarations
+////@end forward declarations
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+////@end control identifiers
+
+/*!
+* WxwasteApp class declaration
+*/
+
+class WxwasteApp: public wxApp
+{    
+	DECLARE_CLASS( WxwasteApp )
+	DECLARE_EVENT_TABLE()
+
+public:
+	/// Constructor
+	WxwasteApp();
+
+	/// Initialises the application
+	virtual bool OnInit();
+
+	/// Called on exit
+	virtual int OnExit();
+	
+	virtual int MainLoop();
+
+////@begin WxwasteApp event handler declarations
+
+////@end WxwasteApp event handler declarations
+
+////@begin WxwasteApp member function declarations
+
+////@end WxwasteApp member function declarations
+
+////@begin WxwasteApp member variables
+////@end WxwasteApp member variables
+
+	MainFrame *m_mainframe;
+};
+
+/*!
+* Application instance declaration 
+*/
+
+////@begin declare app
+DECLARE_APP(WxwasteApp)
+////@end declare app
+
+#endif
+	// _WXMAIN_H_
diff -b -N -ru waste-source-1.5-beta-2/wxmainframe.cpp latest/wxmainframe.cpp
--- waste-source-1.5-beta-2/wxmainframe.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxmainframe.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,605 @@
+/*
+WASTE - wxWidgets main application window
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxmainframe.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include <wx/window.h>
+#include "wxmainframe.h"
+#include "wxappresources.h"
+#include "wxchat.h"
+#include "main.hpp"
+
+
+// globals
+
+////@begin XPM images
+////@end XPM images
+
+/*!
+* MainFrame type definition
+*/
+
+IMPLEMENT_CLASS( MainFrame, wxFrame )
+
+/*!
+* MainFrame event table definition
+*/
+
+BEGIN_EVENT_TABLE( MainFrame, wxFrame )
+
+////@begin MainFrame event table entries
+	EVT_CLOSE( MainFrame::OnCloseWindow )
+
+	EVT_MENU( XRCID("IDM_CHAT_USER"), MainFrame::OnMChatUserClick )
+
+	EVT_MENU( XRCID("IDM_WHOIS_USER"), MainFrame::OnMWhoisUserClick )
+
+	EVT_MENU( XRCID("IDM_BROWSE_USER"), MainFrame::OnMBrowseUserClick )
+
+	EVT_MENU( XRCID("IDM_SENDFILE_USER"), MainFrame::OnMSendfileUserClick )
+
+	EVT_MENU( XRCID("ID_MENU_PREFS"), MainFrame::OnMenuPrefsClick )
+
+	EVT_MENU( XRCID("ID_MENU_QUIT"), MainFrame::OnMenuQuitClick )
+
+	EVT_MENU( XRCID("ID_MENU_NETSTAT"), MainFrame::OnMenuNetstatClick )
+
+	EVT_MENU( XRCID("ID_MENU_BROWSER"), MainFrame::OnMenuBrowserClick )
+
+	EVT_MENU( XRCID("ID_MENU_XFERS"), MainFrame::OnMenuXfersClick )
+
+	EVT_MENU( XRCID("ID_MENU_UPLOADS"), MainFrame::OnMenuUploadClick )
+
+	EVT_MENU( XRCID("ID_MENU_JOINCHAT"), MainFrame::OnMenuJoinchatClick )
+
+	EVT_BUTTON( XRCID("ID_BITMAPBUTTON_NETSTAT"), MainFrame::OnBitmapbuttonNetstatClick )
+
+	EVT_BUTTON( XRCID("ID_BUTTON_BROWSER"), MainFrame::OnButtonBrowserClick )
+
+	EVT_BUTTON( XRCID("ID_JOINCHAT"), MainFrame::OnJoinchatClick )
+
+	EVT_TREE_SEL_CHANGED( XRCID("IDC_USERS"), MainFrame::OnCUsersSelChanged )
+	EVT_TREE_SEL_CHANGING( XRCID("IDC_USERS"), MainFrame::OnCUsersSelChanging )
+	EVT_TREE_BEGIN_RDRAG( XRCID("IDC_USERS"), MainFrame::OnCUsersBeginRDrag )
+	EVT_TREE_ITEM_ACTIVATED( XRCID("IDC_USERS"), MainFrame::OnCUsersItemActivated )
+
+	EVT_TREE_ITEM_ACTIVATED( XRCID("IDC_CHATROOMS"), MainFrame::OnCChatroomsItemActivated )
+
+////@end MainFrame event table entries
+
+END_EVENT_TABLE()
+
+/*!
+* MainFrame constructors
+*/
+
+MainFrame::MainFrame( )
+{
+}
+
+MainFrame::MainFrame( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+	Create( parent, id, caption, pos, size, style );
+}
+
+/*!
+* MainFrame creator
+*/
+
+bool MainFrame::Create( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+	m_exit_requested = false;
+
+////@begin MainFrame member initialisation
+	m_netstatus = NULL;
+	m_users = NULL;
+	m_chatrooms = NULL;
+////@end MainFrame member initialisation
+
+	m_netstat_dlg = new WxNetStatDialog(NULL, ID_NETSTAT, _("Network Status"));
+	m_browser_dlg = new WxBrowser(NULL, ID_BROWSER, _("Browser"));
+	m_xfers_dlg = new WxXfers(NULL, ID_BROWSER, _("Downloads"));
+	m_uploads_dlg = new WxUploads(NULL, ID_BROWSER, _("Uploads"));
+	m_prefs_dlg = new WxPrefs(NULL, ID_BROWSER, _("Preferences"));
+
+	extern void xferwnd_find_wxwidgets(WxXfers *dlg, WxUploads *uploaddlg);
+	xferwnd_find_wxwidgets(m_xfers_dlg, m_uploads_dlg);
+
+////@begin MainFrame creation
+	SetParent(parent);
+	CreateControls();
+	SetIcon(GetIconResource(wxT("res/icon1.ico.gif")));
+	GetSizer()->Fit(this);
+	GetSizer()->SetSizeHints(this);
+	Centre();
+////@end MainFrame creation
+
+	wasteInitPostwindowcreation();
+
+	m_global_timer = new MainTimer();
+	m_global_timer->m_mainframe = this;
+	m_global_timer->Start(500);
+
+	return TRUE;
+}
+
+void MainFrame::wasteInitPostwindowcreation () {
+	extern void main_find_wxwidgets(MainFrame *dlg);
+	extern void netkern_find_wxwidgets(WxNetStatDialog *dlg);
+	extern void srchwnd_find_wxwidgets(WxBrowser *dlg);
+	extern void LoadNetQ();
+
+	main_find_wxwidgets(this);
+	srchwnd_find_wxwidgets(m_browser_dlg);
+	netkern_find_wxwidgets(m_netstat_dlg);
+	LoadNetQ();
+
+	if (g_config->ReadInt(CONFIG_net_vis,CONFIG_net_vis_DEFAULT))
+		FlipShownStatus(m_netstat_dlg);
+
+	if (g_config->ReadInt(CONFIG_xfers_vis,CONFIG_xfers_vis_DEFAULT)) {
+		FlipShownStatus(m_xfers_dlg);
+		FlipShownStatus(m_uploads_dlg);
+	}
+
+	if (g_config->ReadInt(CONFIG_search_vis,CONFIG_search_vis_DEFAULT))
+		FlipShownStatus(m_browser_dlg);
+
+}
+
+/*!
+* Control creation for MainFrame
+*/
+
+void MainFrame::CreateControls()
+{    
+////@begin MainFrame content construction
+
+	wxXmlResource::Get()->LoadFrame(this, GetParent(), _T("ID_MAIN_FRAME"));
+	m_netstatus = XRCCTRL(*this, "IDC_NETSTATUS", wxStaticText);
+	m_users = XRCCTRL(*this, "IDC_USERS", wxTreeCtrl);
+	m_chatrooms = XRCCTRL(*this, "IDC_CHATROOMS", wxTreeCtrl);
+////@end MainFrame content construction
+
+	// Create custom windows not generated automatically here.
+
+////@begin MainFrame content initialisation
+
+////@end MainFrame content initialisation
+}
+
+/*!
+* Should we show tooltips?
+*/
+
+bool MainFrame::ShowToolTips()
+{
+	return TRUE;
+}
+
+MainFrame::~MainFrame ()
+{
+	m_netstat_dlg->Destroy(); m_netstat_dlg = NULL;
+	m_browser_dlg->Destroy(); m_browser_dlg = NULL;
+	m_xfers_dlg->Destroy(); m_xfers_dlg = NULL;
+	m_uploads_dlg->Destroy(); m_uploads_dlg = NULL;
+	m_prefs_dlg->Destroy(); m_prefs_dlg = NULL;
+
+	//delete m_netstat_dlg; m_netstat_dlg = NULL;
+	//delete m_browser_dlg; m_browser_dlg = NULL;
+	//delete m_xfers_dlg; m_xfers_dlg = NULL;
+	//delete m_uploads_dlg; m_uploads_dlg = NULL;
+	//delete m_prefs_dlg; m_prefs_dlg = NULL;
+}
+
+/*!
+* Get bitmap resources
+*/
+
+wxBitmap MainFrame::GetBitmapResource( const wxString& name )
+{
+	// Bitmap retrieval
+////@begin MainFrame bitmap retrieval
+	if (name == wxT("res/connect.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/connect.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/search.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/search.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/chat.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/chat.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	return wxNullBitmap;
+////@end MainFrame bitmap retrieval
+}
+
+/*!
+* Get icon resources
+*/
+
+wxIcon MainFrame::GetIconResource( const wxString& name )
+{
+	// Icon retrieval
+////@begin MainFrame icon retrieval
+	if (name == wxT("res/icon1.ico.gif"))
+	{
+		wxIcon icon(_T("res/icon1.ico.gif"), wxBITMAP_TYPE_GIF);
+		return icon;
+	}
+	return wxNullIcon;
+////@end MainFrame icon retrieval
+}
+
+void MainFrame::WriteConfigVis (wxWindow *win, int vis) {
+	int menuid;
+	if (win == m_netstat_dlg) {
+		g_config->WriteInt(CONFIG_net_vis,vis);
+		menuid = GetMenuBar()->FindMenuItem(_T("View"), _T("Network Status..."));
+	}
+	else if (win == m_browser_dlg) {
+		g_config->WriteInt(CONFIG_search_vis,vis);
+		menuid = GetMenuBar()->FindMenuItem(_T("View"), _T("Browser..."));
+	}
+	else if (win == m_xfers_dlg) {
+		g_config->WriteInt(CONFIG_xfers_vis,vis);
+		menuid = GetMenuBar()->FindMenuItem(_T("View"), _T("Transfers..."));
+	}
+	else if (win == m_uploads_dlg) {
+		g_config->WriteInt(CONFIG_xfers_vis,vis);
+		menuid = GetMenuBar()->FindMenuItem(_T("View"), _T("Uploads..."));
+	}
+	else {
+		return; /* prefs, or similar */
+	}
+	GetMenuBar()->FindItem(menuid)->Check(vis != 0);
+}
+
+void MainFrame::FlipShownStatus (wxWindow *win) {
+	int vis = 0;
+	if (win->IsShown()) {
+		win->Show(false);
+	} else {
+		win->Show(true);
+		win->Raise();
+		vis = 1;
+	}
+	WriteConfigVis(win, vis);
+}
+
+void MainFrame::ViewWindow (wxWindow *win, bool raise) {
+	int vis = 0;
+	if (win->IsShown()) {
+		if (raise) { win->Raise(); }
+	} else {
+		win->Show(true);
+		if (raise) { win->Raise(); }
+		vis = 1;
+	}
+	WriteConfigVis(win, vis);
+}
+
+/*!
+* wxEVT_CLOSE_WINDOW event handler for ID_MAIN_FRAME
+*/
+
+void MainFrame::OnCloseWindow( wxCloseEvent& event )
+{
+	exitRequested();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_BITMAPBUTTON_NETSTAT
+*/
+
+void MainFrame::OnBitmapbuttonNetstatClick( wxCommandEvent& event )
+{
+	FlipShownStatus(m_netstat_dlg);
+}
+
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_QUIT
+*/
+
+void MainFrame::OnMenuQuitClick( wxCommandEvent& event )
+{
+	this->Close();
+}
+
+void MainFrame::exitRequested ()
+{
+	m_netstat_dlg->Show(false);
+	m_browser_dlg->Show(false);
+	m_xfers_dlg->Show(false);
+	m_uploads_dlg->Show(false);
+	m_prefs_dlg->Show(false);
+	this->Show(false);
+
+	delete m_global_timer;
+	m_exit_requested = true;
+
+	extern void CloseAllChatWindows();
+	CloseAllChatWindows();
+
+	extern void main_WM_DESTROY();
+	main_WM_DESTROY();
+
+	waste_main_exit();
+
+	this->Destroy();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_NETSTAT
+*/
+
+void MainFrame::OnMenuNetstatClick( wxCommandEvent& event )
+{
+	FlipShownStatus(m_netstat_dlg);
+}
+
+
+void MainTimer::Notify ()
+{
+	if (m_mainframe->m_exit_requested) {
+		return;
+	}
+
+        main_onGotNick(NULL,0);
+        main_onGotChannel(NULL);
+
+	if (waste_main_poll()) {
+		m_mainframe->exitRequested();
+		return;
+	}
+	if (m_mainframe->m_netstat_dlg->IsShown()) {
+		extern int netkern_WM_TIMER();
+		netkern_WM_TIMER();
+	}
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_BUTTON_BROWSER
+*/
+
+void MainFrame::OnButtonBrowserClick( wxCommandEvent& event )
+{
+	FlipShownStatus(m_browser_dlg);
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_JOINCHAT
+*/
+
+void MainFrame::OnJoinchatClick( wxCommandEvent& event )
+{
+	extern void CreateChatDialog (const char *chatname);
+	CreateChatDialog(NULL);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU
+*/
+
+void MainFrame::OnMenuBrowserClick( wxCommandEvent& event )
+{
+	FlipShownStatus(m_browser_dlg);
+}
+
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENUITEM
+*/
+
+void MainFrame::OnMenuXfersClick( wxCommandEvent& event )
+{
+	FlipShownStatus(m_xfers_dlg);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENUITEM1
+*/
+
+void MainFrame::OnMenuUploadClick( wxCommandEvent& event )
+{
+	FlipShownStatus(m_uploads_dlg);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_PREFS
+*/
+
+void MainFrame::OnMenuPrefsClick( wxCommandEvent& event )
+{
+	FlipShownStatus(m_prefs_dlg);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_TREE_ITEM_ACTIVATED event handler for IDC_USERS
+*/
+
+void MainFrame::OnCUsersItemActivated( wxTreeEvent& event )
+{
+	extern int main_USERS_clicked(bool);
+	main_USERS_clicked(true);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TREE_ITEM_ACTIVATED event handler for IDC_CHATS
+*/
+
+void MainFrame::OnCChatroomsItemActivated( wxTreeEvent& event )
+{
+	extern int main_USERS_clicked(bool);
+	main_USERS_clicked(false);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TREE_BEGIN_RDRAG event handler for IDC_USERS
+*/
+
+void MainFrame::OnCUsersBeginRDrag( wxTreeEvent& event )
+{
+	// this is crazy -- we have to get the mouse pos and adjust from
+	// that!  wxTreeCtrls need a proper context-menu event
+	wxPoint where = wxGetMousePosition();
+
+	wxMenu *menu = AppResources::CreateMenuUserlistPopup();
+	extern bool showTreeCtrlContextMenu (wxTreeCtrl *tree, wxMenu *menu, wxPoint, bool);
+	showTreeCtrlContextMenu(m_users, menu, where, true);
+
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_TREE_SEL_CHANGED event handler for IDC_USERS
+*/
+
+void MainFrame::OnCUsersSelChanged( wxTreeEvent& event )
+{
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TREE_SEL_CHANGING event handler for IDC_USERS
+*/
+
+void MainFrame::OnCUsersSelChanging( wxTreeEvent& event )
+{
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_CHAT_USER
+*/
+
+void MainFrame::OnMChatUserClick( wxCommandEvent& event )
+{
+	char buf[1024];
+	m_users_hit_id = m_users->GetSelection();
+	wxString text = m_users->GetItemText(m_users_hit_id);
+	wxstr_to_cstr(buf, text, 1023);
+
+	extern chatroom_item *chat_ShowRoom(const char *channel, int activate);
+	chat_ShowRoom(buf, 1);
+
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_WHOIS_USER
+*/
+
+void MainFrame::OnMWhoisUserClick( wxCommandEvent& event )
+{
+	char buf[1024];
+	m_users_hit_id = m_users->GetSelection();
+	wxString text = m_users->GetItemText(m_users_hit_id);
+	wxstr_to_cstr(buf, text, 1023);
+	extern void main_ID_WHOISUSER(char *);
+	main_ID_WHOISUSER(buf);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_BROWSE_USER
+*/
+
+void MainFrame::OnMBrowseUserClick( wxCommandEvent& event )
+{
+	m_users_hit_id = m_users->GetSelection();
+	BrowseUser(m_users->GetItemText(m_users_hit_id));
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_SENDFILE_USER
+*/
+
+void MainFrame::OnMSendfileUserClick( wxCommandEvent& event )
+{
+	// XXXX todo
+	event.Skip();
+}
+
+void MainFrame::CreateChatWindow (chatroom_item *cli) {
+	WxChat *dlg = new WxChat(NULL, ID_CHAT_DLG, _("Chat"));
+	dlg->set_chatroom_item (cli);
+	dlg->m_mainframe = this;
+	dlg->Show(true);
+	dlg->Raise();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_JOINCHAT
+*/
+
+void MainFrame::OnMenuJoinchatClick( wxCommandEvent& event )
+{
+	extern void CreateChatDialog (const char *chatname);
+	CreateChatDialog(NULL);
+	event.Skip();
+}
+
+void MainFrame::BrowseUser (wxString who)
+{
+	m_browser_dlg->Show(true);
+	m_browser_dlg->Raise();
+
+	char buf[1024];
+	wxString text = _T("/") + who;
+	wxstr_to_cstr(buf, text, 1023);
+
+	extern void Search_Search(char *);
+	Search_Search(buf);
+}
+
diff -b -N -ru waste-source-1.5-beta-2/wxmainframe.h latest/wxmainframe.h
--- waste-source-1.5-beta-2/wxmainframe.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxmainframe.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,214 @@
+/*
+WASTE - wxWidgets main application window
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXMAINFRAME_H_
+#define _WXMAINFRAME_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxmainframe.cpp"
+#endif
+
+/*!
+* Includes
+*/
+
+////@begin includes
+#include "wx/xrc/xmlres.h"
+#include "wx/frame.h"
+#include "wx/treectrl.h"
+#include "wx/statline.h"
+////@end includes
+
+#include "wxnetstat.h"
+#include "wxbrowser.h"
+#include "wxuploads.h"
+#include "wxxfers.h"
+#include "wxprefs.h"
+
+struct ChatroomItem;
+typedef struct ChatroomItem chatroom_item;
+
+/*!
+* Forward declarations
+*/
+
+////@begin forward declarations
+class wxTreeCtrl;
+////@end forward declarations
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+#define ID_MAIN_FRAME 10003
+#define SYMBOL_MAINFRAME_STYLE wxDEFAULT_FRAME_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU|wxTAB_TRAVERSAL
+#define SYMBOL_MAINFRAME_TITLE _("WxWASTE")
+#define SYMBOL_MAINFRAME_IDNAME ID_MAIN_FRAME
+#define SYMBOL_MAINFRAME_SIZE wxSize(400, 300)
+#define SYMBOL_MAINFRAME_POSITION wxDefaultPosition
+////@end control identifiers
+
+/*!
+* Compatibility
+*/
+
+#ifndef wxCLOSE_BOX
+#define wxCLOSE_BOX 0x1000
+#endif
+#ifndef wxFIXED_MINSIZE
+#define wxFIXED_MINSIZE 0
+#endif
+
+#include <wx/timer.h>
+class MainFrame;
+class MainTimer : public wxTimer
+{
+public:
+class MainFrame *m_mainframe;
+virtual void Notify ();
+};
+
+/*!
+* MainFrame class declaration
+*/
+
+class MainFrame: public wxFrame
+{    
+	DECLARE_CLASS( MainFrame )
+	DECLARE_EVENT_TABLE()
+
+public:
+	/// Constructors
+	MainFrame( );
+	MainFrame( wxWindow* parent, wxWindowID id = SYMBOL_MAINFRAME_IDNAME, const wxString& caption = SYMBOL_MAINFRAME_TITLE, const wxPoint& pos = SYMBOL_MAINFRAME_POSITION, const wxSize& size = SYMBOL_MAINFRAME_SIZE, long style = SYMBOL_MAINFRAME_STYLE );
+
+	bool Create( wxWindow* parent, wxWindowID id = SYMBOL_MAINFRAME_IDNAME, const wxString& caption = SYMBOL_MAINFRAME_TITLE, const wxPoint& pos = SYMBOL_MAINFRAME_POSITION, const wxSize& size = SYMBOL_MAINFRAME_SIZE, long style = SYMBOL_MAINFRAME_STYLE );
+
+	virtual ~MainFrame( );
+
+	/// Creates the controls and sizers
+	void CreateControls();
+
+////@begin MainFrame event handler declarations
+
+	/// wxEVT_CLOSE_WINDOW event handler for ID_MAIN_FRAME
+	void OnCloseWindow( wxCloseEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_CHAT_USER
+	void OnMChatUserClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_WHOIS_USER
+	void OnMWhoisUserClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_BROWSE_USER
+	void OnMBrowseUserClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_SENDFILE_USER
+	void OnMSendfileUserClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_PREFS
+	void OnMenuPrefsClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_QUIT
+	void OnMenuQuitClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_NETSTAT
+	void OnMenuNetstatClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_BROWSER
+	void OnMenuBrowserClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_XFERS
+	void OnMenuXfersClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_UPLOADS
+	void OnMenuUploadClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_MENU_JOINCHAT
+	void OnMenuJoinchatClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_BITMAPBUTTON_NETSTAT
+	void OnBitmapbuttonNetstatClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_BUTTON_BROWSER
+	void OnButtonBrowserClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_JOINCHAT
+	void OnJoinchatClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TREE_SEL_CHANGED event handler for IDC_USERS
+	void OnCUsersSelChanged( wxTreeEvent& event );
+
+	/// wxEVT_COMMAND_TREE_SEL_CHANGING event handler for IDC_USERS
+	void OnCUsersSelChanging( wxTreeEvent& event );
+
+	/// wxEVT_COMMAND_TREE_BEGIN_RDRAG event handler for IDC_USERS
+	void OnCUsersBeginRDrag( wxTreeEvent& event );
+
+	/// wxEVT_COMMAND_TREE_ITEM_ACTIVATED event handler for IDC_USERS
+	void OnCUsersItemActivated( wxTreeEvent& event );
+
+	/// wxEVT_COMMAND_TREE_ITEM_ACTIVATED event handler for IDC_CHATROOMS
+	void OnCChatroomsItemActivated( wxTreeEvent& event );
+
+////@end MainFrame event handler declarations
+
+	void BrowseUser (wxString who);
+
+////@begin MainFrame member function declarations
+
+	/// Retrieves bitmap resources
+	wxBitmap GetBitmapResource( const wxString& name );
+
+	/// Retrieves icon resources
+	wxIcon GetIconResource( const wxString& name );
+////@end MainFrame member function declarations
+
+	/// Should we show tooltips?
+	static bool ShowToolTips();
+	
+	void exitRequested();
+	void wasteInitPostwindowcreation();
+
+	void CreateChatWindow (chatroom_item *cli);
+	void ViewWindow (wxWindow *win, bool raise);
+	void WriteConfigVis (wxWindow *win, int vis);
+	void FlipShownStatus (wxWindow *win);
+
+////@begin MainFrame member variables
+	wxStaticText* m_netstatus;
+	wxTreeCtrl* m_users;
+	wxTreeCtrl* m_chatrooms;
+////@end MainFrame member variables
+
+	WxNetStatDialog *m_netstat_dlg;
+	WxBrowser *m_browser_dlg;
+	WxXfers *m_xfers_dlg;
+	WxUploads *m_uploads_dlg;
+	WxPrefs *m_prefs_dlg;
+
+	wxTreeItemId m_users_hit_id;
+	wxTreeItemId m_chats_hit_id;
+
+	MainTimer *m_global_timer;
+	bool m_exit_requested;
+};
+
+#endif // _WXMAINFRAME_H_
diff -b -N -ru waste-source-1.5-beta-2/wxnetstat.cpp latest/wxnetstat.cpp
--- waste-source-1.5-beta-2/wxnetstat.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxnetstat.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,330 @@
+/*
+WASTE - wxWidgets network status dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxnetstat.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include "wxnetstat.h"
+#include "main.hpp"
+
+////@begin XPM images
+////@end XPM images
+
+/*!
+* WxNetStatDialog type definition
+*/
+
+IMPLEMENT_DYNAMIC_CLASS( WxNetStatDialog, wxDialog )
+
+/*!
+* WxNetStatDialog event table definition
+*/
+
+BEGIN_EVENT_TABLE( WxNetStatDialog, wxDialog )
+
+////@begin WxNetStatDialog event table entries
+	EVT_COMBOBOX( XRCID("IDC_NEWCONNECTION"), WxNetStatDialog::OnCNewconnectionSelected )
+	EVT_TEXT( XRCID("IDC_NEWCONNECTION"), WxNetStatDialog::OnCNewconnectionUpdated )
+
+	EVT_BUTTON( XRCID("IDC_ADDCONNECTION"), WxNetStatDialog::OnCAddconnectionClick )
+
+	EVT_BUTTON( XRCID("IDC_CONNECTCATCH"), WxNetStatDialog::OnCConnectcatchClick )
+
+	EVT_BUTTON( XRCID("IDC_REMOVECONNECTION"), WxNetStatDialog::OnCRemoveconnectionClick )
+
+	EVT_BUTTON( XRCID("IDC_REMOVECATCH"), WxNetStatDialog::OnCRemovecatchClick )
+
+	EVT_TEXT( XRCID("IDC_NUMCONUP"), WxNetStatDialog::OnCNumconupUpdated )
+
+	EVT_LIST_ITEM_SELECTED( XRCID("ID_NS_HOST_LISTCTRL"), WxNetStatDialog::OnNsHostListctrlSelected )
+	EVT_LIST_ITEM_DESELECTED( XRCID("ID_NS_HOST_LISTCTRL"), WxNetStatDialog::OnNsHostListctrlDeselected )
+	EVT_LIST_ITEM_ACTIVATED( XRCID("ID_NS_HOST_LISTCTRL"), WxNetStatDialog::OnNsHostListctrlItemActivated )
+
+////@end WxNetStatDialog event table entries
+
+	EVT_TEXT_ENTER( XRCID("IDC_NEWCONNECTION"), WxNetStatDialog::OnCNewconnectionActivate )
+
+END_EVENT_TABLE()
+
+/*!
+* WxNetStatDialog constructors
+*/
+
+WxNetStatDialog::WxNetStatDialog( )
+{
+}
+
+WxNetStatDialog::WxNetStatDialog( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+	Create(parent, id, caption, pos, size, style);
+}
+
+/*!
+* WxNetStatDialog creator
+*/
+
+bool WxNetStatDialog::Create( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+////@begin WxNetStatDialog member initialisation
+	m_newconnection = NULL;
+	m_addconnection = NULL;
+	m_connectcatch = NULL;
+	m_removeconnection = NULL;
+	m_removecatch = NULL;
+	m_num_con_up = NULL;
+	m_hostlist = NULL;
+////@end WxNetStatDialog member initialisation
+
+////@begin WxNetStatDialog creation
+	SetParent(parent);
+	CreateControls();
+	SetIcon(GetIconResource(wxT("res/connect_icon.gif")));
+	GetSizer()->Fit(this);
+	GetSizer()->SetSizeHints(this);
+	Centre();
+////@end WxNetStatDialog creation
+	return TRUE;
+}
+
+/*!
+* Control creation for WxNetStatDialog
+*/
+
+void WxNetStatDialog::CreateControls()
+{    
+////@begin WxNetStatDialog content construction
+
+	wxXmlResource::Get()->LoadDialog(this, GetParent(), _T("ID_NETSTAT"));
+	m_newconnection = XRCCTRL(*this, "IDC_NEWCONNECTION", wxComboBox);
+	m_addconnection = XRCCTRL(*this, "IDC_ADDCONNECTION", wxBitmapButton);
+	m_connectcatch = XRCCTRL(*this, "IDC_CONNECTCATCH", wxBitmapButton);
+	m_removeconnection = XRCCTRL(*this, "IDC_REMOVECONNECTION", wxBitmapButton);
+	m_removecatch = XRCCTRL(*this, "IDC_REMOVECATCH", wxBitmapButton);
+	m_num_con_up = XRCCTRL(*this, "IDC_NUMCONUP", wxTextCtrl);
+	m_hostlist = XRCCTRL(*this, "ID_NS_HOST_LISTCTRL", wxListCtrl);
+////@end WxNetStatDialog content construction
+
+	// Create custom windows not generated automatically here.
+
+////@begin WxNetStatDialog content initialisation
+
+////@end WxNetStatDialog content initialisation
+}
+
+/*!
+* Should we show tooltips?
+*/
+
+bool WxNetStatDialog::ShowToolTips()
+{
+	return TRUE;
+}
+
+/*!
+* Get bitmap resources
+*/
+
+wxBitmap WxNetStatDialog::GetBitmapResource( const wxString& name )
+{
+	// Bitmap retrieval
+////@begin WxNetStatDialog bitmap retrieval
+	if (name == wxT("res/connect.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/connect.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/stopdl.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/stopdl.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/disconnect.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/disconnect.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	return wxNullBitmap;
+////@end WxNetStatDialog bitmap retrieval
+}
+
+/*!
+* Get icon resources
+*/
+
+wxIcon WxNetStatDialog::GetIconResource( const wxString& name )
+{
+	// Icon retrieval
+////@begin WxNetStatDialog icon retrieval
+	if (name == wxT("res/connect_icon.gif"))
+	{
+		wxIcon icon(_T("res/connect_icon.gif"), wxBITMAP_TYPE_GIF);
+		return icon;
+	}
+	return wxNullIcon;
+////@end WxNetStatDialog icon retrieval
+}
+
+
+/*!
+* wxEVT_COMMAND_TEXT_UPDATED event handler for IDC_NUMCONUP
+*/
+
+void WxNetStatDialog::OnCNumconupUpdated( wxCommandEvent& event )
+{
+	extern int netkern_WM_COMMAND_IDC_NUMCONUP();
+	netkern_WM_COMMAND_IDC_NUMCONUP();
+	event.Skip();
+}
+
+void WxNetStatDialog::OnDestroy( )
+{
+	extern void netkern_WM_DESTROY();
+	netkern_WM_DESTROY();
+	g_config->WriteInt(CONFIG_net_vis,0);
+}
+
+/*!
+* wxEVT_COMMAND_COMBOBOX_SELECTED event handler for IDC_NEWCONNECTION
+*/
+
+void WxNetStatDialog::OnCNewconnectionSelected( wxCommandEvent& event )
+{
+	extern int netkern_WM_COMMAND_IDC_NEWCONNECTION(int);
+	netkern_WM_COMMAND_IDC_NEWCONNECTION(0);
+	event.Skip();
+}
+
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_ADDCONNECTION
+*/
+
+void WxNetStatDialog::OnCAddconnectionClick( wxCommandEvent& event )
+{
+	extern int netkern_WM_COMMAND_IDC_ADDCONNECTION();
+	netkern_WM_COMMAND_IDC_ADDCONNECTION();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CONNECTCATCH
+*/
+
+void WxNetStatDialog::OnCConnectcatchClick( wxCommandEvent& event )
+{
+	extern int netkern_WM_COMMAND_IDC_CONNECTCATCH();
+	netkern_WM_COMMAND_IDC_CONNECTCATCH();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_REMOVECONNECTION
+*/
+
+void WxNetStatDialog::OnCRemoveconnectionClick( wxCommandEvent& event )
+{
+	extern int netkern_WM_COMMAND_IDC_REMOVECONNECTION();
+	netkern_WM_COMMAND_IDC_REMOVECONNECTION();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_REMOVECATCH
+*/
+
+void WxNetStatDialog::OnCRemovecatchClick( wxCommandEvent& event )
+{
+	extern int netkern_WM_COMMAND_IDC_REMOVECATCH();
+	netkern_WM_COMMAND_IDC_REMOVECATCH();
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_LIST_ITEM_ACTIVATED event handler for ID_NS_HOST_LISTCTRL
+*/
+
+void WxNetStatDialog::OnNsHostListctrlItemActivated( wxListEvent& event )
+{
+	extern int netkern_WM_COMMAND_IDC_CONNECTCATCH();
+	netkern_WM_COMMAND_IDC_CONNECTCATCH();
+	event.Skip();
+}
+
+
+
+/*!
+* wxEVT_COMMAND_LIST_ITEM_SELECTED event handler for ID_NS_HOST_LISTCTRL
+*/
+
+void WxNetStatDialog::OnNsHostListctrlSelected( wxListEvent& event )
+{
+	extern int netkern_WM_NOTIFY_IDC_NETCONS();
+	netkern_WM_NOTIFY_IDC_NETCONS();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_LIST_ITEM_DESELECTED event handler for ID_NS_HOST_LISTCTRL
+*/
+
+void WxNetStatDialog::OnNsHostListctrlDeselected( wxListEvent& event )
+{
+	extern int netkern_WM_NOTIFY_IDC_NETCONS();
+	netkern_WM_NOTIFY_IDC_NETCONS();
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_TEXT_UPDATED event handler for IDC_NEWCONNECTION
+*/
+
+void WxNetStatDialog::OnCNewconnectionUpdated( wxCommandEvent& event )
+{
+	extern int netkern_WM_COMMAND_IDC_NEWCONNECTION(int);
+	netkern_WM_COMMAND_IDC_NEWCONNECTION(0);
+	event.Skip();
+}
+
+void WxNetStatDialog::OnCNewconnectionActivate( wxCommandEvent& event )
+{
+	extern int netkern_WM_COMMAND_IDC_ADDCONNECTION();
+	netkern_WM_COMMAND_IDC_ADDCONNECTION();
+	event.Skip();
+}
+
+
+
diff -b -N -ru waste-source-1.5-beta-2/wxnetstat.h latest/wxnetstat.h
--- waste-source-1.5-beta-2/wxnetstat.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxnetstat.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,154 @@
+/*
+WASTE - wxWidgets implementation of network status dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXNETSTAT_H_
+#define _WXNETSTAT_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxnetstat.cpp"
+#endif
+
+/*!
+* Includes
+*/
+
+////@begin includes
+#include "wx/xrc/xmlres.h"
+#include "wx/listctrl.h"
+////@end includes
+
+/*!
+* Forward declarations
+*/
+
+////@begin forward declarations
+class wxListCtrl;
+////@end forward declarations
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+#define ID_NETSTAT 10004
+#define SYMBOL_WXNETSTATDIALOG_STYLE wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU
+#define SYMBOL_WXNETSTATDIALOG_TITLE _("Network Status")
+#define SYMBOL_WXNETSTATDIALOG_IDNAME ID_NETSTAT
+#define SYMBOL_WXNETSTATDIALOG_SIZE wxSize(400, 300)
+#define SYMBOL_WXNETSTATDIALOG_POSITION wxDefaultPosition
+////@end control identifiers
+
+/*!
+* Compatibility
+*/
+
+#ifndef wxCLOSE_BOX
+#define wxCLOSE_BOX 0x1000
+#endif
+#ifndef wxFIXED_MINSIZE
+#define wxFIXED_MINSIZE 0
+#endif
+
+/*!
+* WxNetStatDialog class declaration
+*/
+
+class WxNetStatDialog: public wxDialog
+{    
+	DECLARE_DYNAMIC_CLASS( WxNetStatDialog )
+	DECLARE_EVENT_TABLE()
+
+public:
+	/// Constructors
+	WxNetStatDialog( );
+	WxNetStatDialog( wxWindow* parent, wxWindowID id = SYMBOL_WXNETSTATDIALOG_IDNAME, const wxString& caption = SYMBOL_WXNETSTATDIALOG_TITLE, const wxPoint& pos = SYMBOL_WXNETSTATDIALOG_POSITION, const wxSize& size = SYMBOL_WXNETSTATDIALOG_SIZE, long style = SYMBOL_WXNETSTATDIALOG_STYLE );
+
+	/// Creation
+	bool Create( wxWindow* parent, wxWindowID id = SYMBOL_WXNETSTATDIALOG_IDNAME, const wxString& caption = SYMBOL_WXNETSTATDIALOG_TITLE, const wxPoint& pos = SYMBOL_WXNETSTATDIALOG_POSITION, const wxSize& size = SYMBOL_WXNETSTATDIALOG_SIZE, long style = SYMBOL_WXNETSTATDIALOG_STYLE );
+
+	/// Creates the controls and sizers
+	void CreateControls();
+
+////@begin WxNetStatDialog event handler declarations
+
+	/// wxEVT_COMMAND_COMBOBOX_SELECTED event handler for IDC_NEWCONNECTION
+	void OnCNewconnectionSelected( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_UPDATED event handler for IDC_NEWCONNECTION
+	void OnCNewconnectionUpdated( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_ADDCONNECTION
+	void OnCAddconnectionClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CONNECTCATCH
+	void OnCConnectcatchClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_REMOVECONNECTION
+	void OnCRemoveconnectionClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_REMOVECATCH
+	void OnCRemovecatchClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_UPDATED event handler for IDC_NUMCONUP
+	void OnCNumconupUpdated( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_LIST_ITEM_SELECTED event handler for ID_NS_HOST_LISTCTRL
+	void OnNsHostListctrlSelected( wxListEvent& event );
+
+	/// wxEVT_COMMAND_LIST_ITEM_DESELECTED event handler for ID_NS_HOST_LISTCTRL
+	void OnNsHostListctrlDeselected( wxListEvent& event );
+
+	/// wxEVT_COMMAND_LIST_ITEM_ACTIVATED event handler for ID_NS_HOST_LISTCTRL
+	void OnNsHostListctrlItemActivated( wxListEvent& event );
+
+////@end WxNetStatDialog event handler declarations
+
+	void OnCNewconnectionActivate( wxCommandEvent& event );
+
+	void OnDestroy();
+
+////@begin WxNetStatDialog member function declarations
+
+	wxString GetHostListSel() const { return m_host_list_sel ; }
+	void SetHostListSel(wxString value) { m_host_list_sel = value ; }
+
+	/// Retrieves bitmap resources
+	wxBitmap GetBitmapResource( const wxString& name );
+
+	/// Retrieves icon resources
+	wxIcon GetIconResource( const wxString& name );
+////@end WxNetStatDialog member function declarations
+
+	/// Should we show tooltips?
+	static bool ShowToolTips();
+
+////@begin WxNetStatDialog member variables
+	wxComboBox* m_newconnection;
+	wxBitmapButton* m_addconnection;
+	wxBitmapButton* m_connectcatch;
+	wxBitmapButton* m_removeconnection;
+	wxBitmapButton* m_removecatch;
+	wxTextCtrl* m_num_con_up;
+	wxListCtrl* m_hostlist;
+	wxString m_host_list_sel;
+////@end WxNetStatDialog member variables
+};
+
+#endif
+	// _WXNETSTAT_H_
diff -b -N -ru waste-source-1.5-beta-2/wxplatform.hpp latest/wxplatform.hpp
--- waste-source-1.5-beta-2/wxplatform.hpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxplatform.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,101 @@
+/*
+WASTE - wxWidgets platform-specific header
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _INCLD_WXWASTE_HPP
+#define _INCLD_WXWASTE_HPP 1
+
+#ifdef _DEFINE_WXUI
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+#include <wx/string.h>
+
+// wxWindow is the closest type to a HWND.  typedef it here
+class wxWindow;
+typedef wxWindow* HWND;
+
+extern void wxSetDlgItemText(wxObject *ptr, const char *buf);
+extern void wxGetDlgItemText(wxObject *ptr, char *buf, int len);
+
+#define PostMessage(x,y,z,a)        ;
+#define InvalidateRect(x,y,z)       ;
+#define wxEnableWindow(x,y)         x->Enable(y)
+
+/* our policy: should we consider all strings to be encoded as UTF-8?
+* this seems to be a bad idea, as it includes strings downloaded
+* from remote peers.  they're more like truncated wchar_t's...
+*/
+#undef WX_COPY_STRINGS_AS_UTF8
+
+static inline char *wxstr_to_cstr(char *out, const wxString &in, int maxl) {
+#ifdef WX_COPY_STRINGS_AS_UTF8
+
+	const char *buf;
+#if wxUSE_UNICODE
+	// use a temp var to avoid it going out of scope and deleting the buffer!
+	wxCharBuffer unibuf = in.mb_str(*wxConvCurrent);
+	buf = unibuf.data();
+#else
+	buf = in.mb_str(*wxConvCurrent);
+#endif
+	strncpy(out,buf,maxl);
+
+#else
+
+	int i;
+	unsigned char *ucout = (unsigned char *) out;
+	int len = in.Length();
+	for (i = 0; i < len; i++) {
+		if (i == maxl-1) {
+		ucout[i] = '\0';
+		break;
+		}
+		
+		// truncate to 8 bits
+		wxChar c = in.GetChar((size_t) i);
+		ucout[i] = (unsigned char) (c & 0xff);
+	}
+	ucout[i]='\0';        // terminate
+
+#endif
+
+	out[maxl-1]='\0';     // paranoia
+	return out;
+}
+
+/* copy an ISO-8859-1 string to a wxString buffer, doing extremely
+* stupid conversion -- namely assume that the string is in ISO-8859-1
+* and not UTF-8 etc. */
+static inline wxString &cstr_to_wxstr(const char *buf) {
+	const char *p;
+	wxString *ret = new wxString();
+	for (p = buf; *p != '\0'; p++) {
+		wxChar wc = (unsigned char) *p;    /* force conversion */
+		*ret << wc;
+	}
+	return *ret;
+}
+
+#endif
+
+#endif // _INCLD_WXWASTE_HPP
diff -b -N -ru waste-source-1.5-beta-2/wxprefs.cpp latest/wxprefs.cpp
--- waste-source-1.5-beta-2/wxprefs.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxprefs.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,450 @@
+/*
+WASTE - wxWidgets preferences dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxprefs.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include "wxprefs.h"
+#include "wxpubkeys.h"
+#include "main.hpp"
+
+////@begin XPM images
+////@end XPM images
+
+/*!
+* WxPrefs type definition
+*/
+
+IMPLEMENT_DYNAMIC_CLASS( WxPrefs, wxDialog )
+
+/*!
+* WxPrefs event table definition
+*/
+
+BEGIN_EVENT_TABLE( WxPrefs, wxDialog )
+
+////@begin WxPrefs event table entries
+	EVT_CLOSE( WxPrefs::OnCloseWindow )
+
+	EVT_CHOICE( XRCID("ID_CONN_SPEED"), WxPrefs::OnConnSpeedSelected )
+
+	EVT_TEXT( XRCID("ID_NICKNAME"), WxPrefs::OnNicknameUpdated )
+	EVT_TEXT_ENTER( XRCID("ID_NICKNAME"), WxPrefs::OnNicknameEnter )
+
+	EVT_BUTTON( XRCID("ID_UPD_NICK"), WxPrefs::OnUpdNickClick )
+
+	EVT_TEXT( XRCID("ID_USER_INFO"), WxPrefs::OnUserInfoUpdated )
+	EVT_TEXT_ENTER( XRCID("ID_USER_INFO"), WxPrefs::OnUserInfoEnter )
+
+	EVT_TEXT( XRCID("ID_NET_NAME"), WxPrefs::OnNetNameUpdated )
+	EVT_TEXT_ENTER( XRCID("ID_NET_NAME"), WxPrefs::OnNetNameEnter )
+
+	EVT_BUTTON( XRCID("ID_GEN_PRIVKEY"), WxPrefs::OnGenPrivkeyClick )
+
+	EVT_BUTTON( XRCID("ID_COPY_PUBKEY"), WxPrefs::OnCopyPubkeyClick )
+
+	EVT_BUTTON( XRCID("ID_VIEW_PUBKEYS"), WxPrefs::OnViewPubkeysClick )
+
+	EVT_BUTTON( XRCID("ID_ADD_PUB_KEYS"), WxPrefs::OnAddPubKeysClick )
+
+	EVT_BUTTON( XRCID("ID_BROADCAST_PUBKEY"), WxPrefs::OnBroadcastPubkeyClick )
+
+	EVT_TEXT( XRCID("ID_DOWNLOAD_PATH"), WxPrefs::OnDownloadPathUpdated )
+
+	EVT_BUTTON( XRCID("ID_BROWSE_DL_PATH"), WxPrefs::OnBrowseDlPathClick )
+
+	EVT_TEXT( XRCID("ID_SHARE_PATH"), WxPrefs::OnSharePathUpdated )
+
+	EVT_BUTTON( XRCID("ID_ADD_SHARE_PATH"), WxPrefs::OnAddSharePathClick )
+
+	EVT_BUTTON( XRCID("ID_CLOSE_PREFS"), WxPrefs::OnClosePrefsClick )
+
+////@end WxPrefs event table entries
+
+END_EVENT_TABLE()
+
+/*!
+* WxPrefs constructors
+*/
+
+WxPrefs::WxPrefs( )
+{
+}
+
+WxPrefs::WxPrefs( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+	Create(parent, id, caption, pos, size, style);
+}
+
+/*!
+* WxPrefs creator
+*/
+
+bool WxPrefs::Create( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+////@begin WxPrefs member initialisation
+	m_conn_speed = NULL;
+	m_nickname = NULL;
+	m_user_info = NULL;
+	m_net_name = NULL;
+	m_download_path = NULL;
+	m_share_path = NULL;
+////@end WxPrefs member initialisation
+
+////@begin WxPrefs creation
+	SetParent(parent);
+	CreateControls();
+	SetIcon(GetIconResource(wxT("res/icon1.ico.gif")));
+	GetSizer()->Fit(this);
+	GetSizer()->SetSizeHints(this);
+	Centre();
+////@end WxPrefs creation
+
+	extern void prefs_find_wxwidgets(WxPrefs *);
+	prefs_find_wxwidgets(this);
+
+	return TRUE;
+}
+
+/*!
+* Control creation for WxPrefs
+*/
+
+void WxPrefs::CreateControls()
+{    
+////@begin WxPrefs content construction
+
+	wxXmlResource::Get()->LoadDialog(this, GetParent(), _T("ID_PREFS_DIALOG"));
+	m_conn_speed = XRCCTRL(*this, "ID_CONN_SPEED", wxChoice);
+	m_nickname = XRCCTRL(*this, "ID_NICKNAME", wxTextCtrl);
+	m_user_info = XRCCTRL(*this, "ID_USER_INFO", wxTextCtrl);
+	m_net_name = XRCCTRL(*this, "ID_NET_NAME", wxTextCtrl);
+	m_download_path = XRCCTRL(*this, "ID_DOWNLOAD_PATH", wxTextCtrl);
+	m_share_path = XRCCTRL(*this, "ID_SHARE_PATH", wxTextCtrl);
+////@end WxPrefs content construction
+
+	// Create custom windows not generated automatically here.
+
+////@begin WxPrefs content initialisation
+
+////@end WxPrefs content initialisation
+}
+
+/*!
+* Should we show tooltips?
+*/
+
+bool WxPrefs::ShowToolTips()
+{
+	return TRUE;
+}
+
+/*!
+* Get bitmap resources
+*/
+
+wxBitmap WxPrefs::GetBitmapResource( const wxString& name )
+{
+	// Bitmap retrieval
+////@begin WxPrefs bitmap retrieval
+	return wxNullBitmap;
+////@end WxPrefs bitmap retrieval
+}
+
+/*!
+* Get icon resources
+*/
+
+wxIcon WxPrefs::GetIconResource( const wxString& name )
+{
+	// Icon retrieval
+////@begin WxPrefs icon retrieval
+	if (name == wxT("res/icon1.ico.gif"))
+	{
+		wxIcon icon(_T("res/icon1.ico.gif"), wxBITMAP_TYPE_GIF);
+		return icon;
+	}
+	return wxNullIcon;
+////@end WxPrefs icon retrieval
+}
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_UPD_NICK
+*/
+
+void WxPrefs::OnUpdNickClick( wxCommandEvent& event )
+{
+	extern void clicked_IDC_BUTTON_UPDATE_NICK();
+	clicked_IDC_BUTTON_UPDATE_NICK();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TEXT_UPDATED event handler for ID_NET_NAME
+*/
+
+extern void prefs_update_from_textboxes();
+
+void WxPrefs::OnNetNameUpdated( wxCommandEvent& event )
+{
+	prefs_update_from_textboxes();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_GEN_PRIVKEY
+*/
+
+void WxPrefs::OnGenPrivkeyClick( wxCommandEvent& event )
+{
+	char buf[2048];
+	sprintf(buf,"%s.pr4",g_config_prefix);
+	RunKeyGen(this, buf);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_COPY_PUBKEY
+*/
+
+void WxPrefs::OnCopyPubkeyClick( wxCommandEvent& event )
+{
+	extern void copyMyPubKey();
+	copyMyPubKey();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_BROADCAST_PUBKEY
+*/
+
+void WxPrefs::OnBroadcastPubkeyClick( wxCommandEvent& event )
+{
+	main_BroadcastPublicKey();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_VIEW_PUBKEYS
+*/
+
+void WxPrefs::OnViewPubkeysClick( wxCommandEvent& event )
+{
+	WxPubkeyViewer *viewer = new WxPubkeyViewer(this, ID_PUBKEYVIEWER, _("Public Keys"));
+	viewer->Show(true);
+
+	char str[2048];
+	sprintf(str,"%s.pr3",g_config_prefix);
+	viewer->ShowFile(str);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TEXT_UPDATED event handler for ID_DOWNLOAD_PATH
+*/
+
+void WxPrefs::OnDownloadPathUpdated( wxCommandEvent& event )
+{
+	prefs_update_from_textboxes();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_BROWSE_DL_PATH
+*/
+
+void WxPrefs::OnBrowseDlPathClick( wxCommandEvent& event )
+{
+	const wxString &dir = ::wxDirSelector(_T("Select a directory:"));
+			//m_download_path->GetValue());
+	if (!dir.empty()) {
+		m_download_path->SetValue(dir);
+		prefs_update_from_textboxes();
+	}
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TEXT_UPDATED event handler for ID_SHARE_PATH
+*/
+
+void WxPrefs::OnSharePathUpdated( wxCommandEvent& event )
+{
+	prefs_update_from_textboxes();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_ADD_SHARE_PATH
+*/
+
+void WxPrefs::OnAddSharePathClick( wxCommandEvent& event )
+{
+	wxString dir = ::wxDirSelector(_T("Select a directory:"));
+	if (!dir.empty()) {
+		wxString prevdirs = m_share_path->GetValue();
+		if (prevdirs.Length() > 0 && prevdirs.Last() != L';') {
+			prevdirs += _T(";");
+		}
+		prevdirs += dir;
+		m_share_path->SetValue(prevdirs);
+		prefs_update_from_textboxes();
+	}
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_CLOSE_PREFS
+*/
+
+void WxPrefs::OnClosePrefsClick( wxCommandEvent& event )
+{
+	this->Show(false);
+        doDatabaseRescan();     /* always trigger a rescan */
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_CLOSE_WINDOW event handler for ID_DIALOG
+*/
+
+void WxPrefs::OnCloseWindow( wxCloseEvent& event )
+{
+	this->Show(false);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_CHOICE_SELECTED event handler for ID_CONN_SPEED
+*/
+
+void WxPrefs::OnConnSpeedSelected( wxCommandEvent& event )
+{
+	prefs_update_from_textboxes();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TEXT_UPDATED event handler for ID_USER_INFO
+*/
+
+void WxPrefs::OnUserInfoUpdated( wxCommandEvent& event )
+{
+	prefs_update_from_textboxes();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TEXT_ENTER event handler for ID_USER_INFO
+*/
+
+void WxPrefs::OnUserInfoEnter( wxCommandEvent& event )
+{
+	prefs_update_from_textboxes();
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_TEXT_UPDATED event handler for ID_NICKNAME
+*/
+
+void WxPrefs::OnNicknameUpdated( wxCommandEvent& event )
+{
+	prefs_update_from_textboxes();
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TEXT_ENTER event handler for ID_NICKNAME
+*/
+
+void WxPrefs::OnNicknameEnter( wxCommandEvent& event )
+{
+	prefs_update_from_textboxes();
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_TEXT_ENTER event handler for ID_NET_NAME
+*/
+
+void WxPrefs::OnNetNameEnter( wxCommandEvent& event )
+{
+	prefs_update_from_textboxes();
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_ADD_PUB_KEYS
+*/
+
+void WxPrefs::OnAddPubKeysClick( wxCommandEvent& event )
+{
+	wxFileDialog dialog(this, _T("Import public key file:"),
+			_T(""), _T(""),
+			_T("Public key files (*.pub, *.txt)|*.pub;*.txt|All files (*.*)|*.*"),
+			wxOPEN|wxMULTIPLE);
+
+	if (dialog.ShowModal() == wxID_OK)
+	{
+		wxArrayString paths, filenames;
+		dialog.GetPaths(paths);
+
+		wxString msg, s;
+		int count = paths.GetCount();
+		int num = 0;
+		for (int n = 0; n < count; n++)
+		{
+			char buf[1024];
+			wxstr_to_cstr(buf, paths[n], 1023);
+			num+=loadPKList(buf);
+		}
+
+		if (num) {
+			savePKList();
+
+			wxString str = wxString::Format(_T("Imported %d public keys successfully."), num);
+			::wxMessageBox(str, _T("Public Key Import"));
+		}
+	}
+
+	event.Skip();
+}
+
+
diff -b -N -ru waste-source-1.5-beta-2/wxprefs.h latest/wxprefs.h
--- waste-source-1.5-beta-2/wxprefs.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxprefs.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,171 @@
+/*
+WASTE - wxWidgets preferences dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXPREFS_H_
+#define _WXPREFS_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxprefs.cpp"
+#endif
+
+/*!
+* Includes
+*/
+
+////@begin includes
+#include "wx/xrc/xmlres.h"
+////@end includes
+
+/*!
+* Forward declarations
+*/
+
+////@begin forward declarations
+////@end forward declarations
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+#define ID_PREFS_DIALOG 10057
+#define SYMBOL_WXPREFS_STYLE wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU
+#define SYMBOL_WXPREFS_TITLE _("Preferences")
+#define SYMBOL_WXPREFS_IDNAME ID_PREFS_DIALOG
+#define SYMBOL_WXPREFS_SIZE wxSize(400, 300)
+#define SYMBOL_WXPREFS_POSITION wxDefaultPosition
+////@end control identifiers
+
+/*!
+* Compatibility
+*/
+
+#ifndef wxCLOSE_BOX
+#define wxCLOSE_BOX 0x1000
+#endif
+#ifndef wxFIXED_MINSIZE
+#define wxFIXED_MINSIZE 0
+#endif
+
+/*!
+* WxPrefs class declaration
+*/
+
+class WxPrefs: public wxDialog
+{    
+	DECLARE_DYNAMIC_CLASS( WxPrefs )
+	DECLARE_EVENT_TABLE()
+
+public:
+	/// Constructors
+	WxPrefs( );
+	WxPrefs( wxWindow* parent, wxWindowID id = SYMBOL_WXPREFS_IDNAME, const wxString& caption = SYMBOL_WXPREFS_TITLE, const wxPoint& pos = SYMBOL_WXPREFS_POSITION, const wxSize& size = SYMBOL_WXPREFS_SIZE, long style = SYMBOL_WXPREFS_STYLE );
+
+	/// Creation
+	bool Create( wxWindow* parent, wxWindowID id = SYMBOL_WXPREFS_IDNAME, const wxString& caption = SYMBOL_WXPREFS_TITLE, const wxPoint& pos = SYMBOL_WXPREFS_POSITION, const wxSize& size = SYMBOL_WXPREFS_SIZE, long style = SYMBOL_WXPREFS_STYLE );
+
+	/// Creates the controls and sizers
+	void CreateControls();
+
+////@begin WxPrefs event handler declarations
+
+	/// wxEVT_CLOSE_WINDOW event handler for ID_PREFS_DIALOG
+	void OnCloseWindow( wxCloseEvent& event );
+
+	/// wxEVT_COMMAND_CHOICE_SELECTED event handler for ID_CONN_SPEED
+	void OnConnSpeedSelected( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_UPDATED event handler for ID_NICKNAME
+	void OnNicknameUpdated( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_ENTER event handler for ID_NICKNAME
+	void OnNicknameEnter( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_UPD_NICK
+	void OnUpdNickClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_UPDATED event handler for ID_USER_INFO
+	void OnUserInfoUpdated( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_ENTER event handler for ID_USER_INFO
+	void OnUserInfoEnter( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_UPDATED event handler for ID_NET_NAME
+	void OnNetNameUpdated( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_ENTER event handler for ID_NET_NAME
+	void OnNetNameEnter( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_GEN_PRIVKEY
+	void OnGenPrivkeyClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_COPY_PUBKEY
+	void OnCopyPubkeyClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_VIEW_PUBKEYS
+	void OnViewPubkeysClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_ADD_PUB_KEYS
+	void OnAddPubKeysClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_BROADCAST_PUBKEY
+	void OnBroadcastPubkeyClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_UPDATED event handler for ID_DOWNLOAD_PATH
+	void OnDownloadPathUpdated( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_BROWSE_DL_PATH
+	void OnBrowseDlPathClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_UPDATED event handler for ID_SHARE_PATH
+	void OnSharePathUpdated( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_ADD_SHARE_PATH
+	void OnAddSharePathClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_CLOSE_PREFS
+	void OnClosePrefsClick( wxCommandEvent& event );
+
+////@end WxPrefs event handler declarations
+
+////@begin WxPrefs member function declarations
+
+	/// Retrieves bitmap resources
+	wxBitmap GetBitmapResource( const wxString& name );
+
+	/// Retrieves icon resources
+	wxIcon GetIconResource( const wxString& name );
+////@end WxPrefs member function declarations
+
+	/// Should we show tooltips?
+	static bool ShowToolTips();
+
+////@begin WxPrefs member variables
+	wxChoice* m_conn_speed;
+	wxTextCtrl* m_nickname;
+	wxTextCtrl* m_user_info;
+	wxTextCtrl* m_net_name;
+	wxTextCtrl* m_download_path;
+	wxTextCtrl* m_share_path;
+////@end WxPrefs member variables
+};
+
+
+#endif
+// _WXPREFS_H_
diff -b -N -ru waste-source-1.5-beta-2/wxpubkeys.cpp latest/wxpubkeys.cpp
--- waste-source-1.5-beta-2/wxpubkeys.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxpubkeys.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,212 @@
+/*
+WASTE - wxWidgets public-keys viewer dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxpubkeys.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include "platform.hpp"
+#include <wx/ffile.h>
+#include "wxpubkeys.h"
+
+////@begin XPM images
+////@end XPM images
+
+/*!
+* WxPubkeyViewer type definition
+*/
+
+IMPLEMENT_DYNAMIC_CLASS( WxPubkeyViewer, wxDialog )
+
+/*!
+* WxPubkeyViewer event table definition
+*/
+
+BEGIN_EVENT_TABLE( WxPubkeyViewer, wxDialog )
+
+////@begin WxPubkeyViewer event table entries
+	EVT_BUTTON( XRCID("ID_CLOSE"), WxPubkeyViewer::OnCloseClick )
+
+////@end WxPubkeyViewer event table entries
+
+END_EVENT_TABLE()
+
+/*!
+* WxPubkeyViewer constructors
+*/
+
+WxPubkeyViewer::WxPubkeyViewer( )
+{
+}
+
+WxPubkeyViewer::WxPubkeyViewer( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+	Create(parent, id, caption, pos, size, style);
+}
+
+/*!
+* WxPubkeyViewer creator
+*/
+
+bool WxPubkeyViewer::Create( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+////@begin WxPubkeyViewer member initialisation
+	m_keys_text = NULL;
+////@end WxPubkeyViewer member initialisation
+
+////@begin WxPubkeyViewer creation
+	SetParent(parent);
+	CreateControls();
+	SetIcon(GetIconResource(wxT("res/icon1.ico.gif")));
+	GetSizer()->Fit(this);
+	GetSizer()->SetSizeHints(this);
+////@end WxPubkeyViewer creation
+	return TRUE;
+}
+
+/*!
+* Control creation for WxPubkeyViewer
+*/
+
+void WxPubkeyViewer::CreateControls()
+{    
+////@begin WxPubkeyViewer content construction
+
+	wxXmlResource::Get()->LoadDialog(this, GetParent(), _T("ID_PUBKEYVIEWER"));
+	m_keys_text = XRCCTRL(*this, "ID_KEYS_TEXT", wxTextCtrl);
+////@end WxPubkeyViewer content construction
+
+	// Create custom windows not generated automatically here.
+
+////@begin WxPubkeyViewer content initialisation
+
+////@end WxPubkeyViewer content initialisation
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_CLOSE
+*/
+
+void WxPubkeyViewer::OnCloseClick( wxCommandEvent& event )
+{
+	this->Destroy();
+	event.Skip();
+}
+
+/*!
+* Should we show tooltips?
+*/
+
+bool WxPubkeyViewer::ShowToolTips()
+{
+	return TRUE;
+}
+
+/*!
+* Get bitmap resources
+*/
+
+wxBitmap WxPubkeyViewer::GetBitmapResource( const wxString& name )
+{
+	// Bitmap retrieval
+////@begin WxPubkeyViewer bitmap retrieval
+	return wxNullBitmap;
+////@end WxPubkeyViewer bitmap retrieval
+}
+
+/*!
+* Get icon resources
+*/
+
+wxIcon WxPubkeyViewer::GetIconResource( const wxString& name )
+{
+	// Icon retrieval
+////@begin WxPubkeyViewer icon retrieval
+	if (name == wxT("res/icon1.ico.gif"))
+	{
+		wxIcon icon(_T("res/icon1.ico.gif"), wxBITMAP_TYPE_GIF);
+		return icon;
+	}
+	return wxNullIcon;
+////@end WxPubkeyViewer icon retrieval
+}
+
+void WxPubkeyViewer::ShowFile (const char *fpath) {
+// do this by hand - wxTextFile is way too slow and LoadFile()
+// gives GTK errors
+wxString wxpath = cstr_to_wxstr(fpath);
+wxFFile file(wxpath.c_str(), _T("r"));
+
+size_t len = file.Length();
+char *buf = new char[len+1];
+int readsofar = 0;
+int toread, ret;
+wxString bigbuf;
+
+if (!file.IsOpened()) {
+	m_keys_text->SetValue(_T("(Failed to open '") + wxpath + _T("'!)"));
+	goto cleanup;
+}
+
+for (toread = (int) len; toread > 0; ) {
+	ret = file.Read(buf+readsofar, toread);
+	if (ret < 0) {
+	m_keys_text->SetValue(_T("(Failed to open '") + wxpath + _T("'!)"));
+	goto cleanup;
+	}
+	readsofar += ret;
+	toread -= ret;
+}
+
+char *ptr;
+char *startofline;
+for (ptr = startofline = buf; *ptr != '\0'; ptr++) {
+	if (*ptr == '\r') {
+	*ptr = '\0';      // strip CRs too
+	}
+	else if (*ptr == '\n') {
+	*ptr = '\0';      // terminate
+	wxString wxstr = cstr_to_wxstr(startofline);
+	bigbuf << wxstr << _T("\n");
+	startofline = ptr+1;
+	}
+}
+m_keys_text->SetValue(bigbuf);
+
+cleanup:
+delete[] buf;
+m_keys_text->SetInsertionPoint(0L);
+file.Close();
+}
+
+
diff -b -N -ru waste-source-1.5-beta-2/wxpubkeys.h latest/wxpubkeys.h
--- waste-source-1.5-beta-2/wxpubkeys.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxpubkeys.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,113 @@
+/*
+WASTE - wxWidgets public-keys viewer dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXPUBKEYS_H_
+#define _WXPUBKEYS_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxpubkeys.cpp"
+#endif
+
+/*!
+* Includes
+*/
+
+////@begin includes
+#include "wx/xrc/xmlres.h"
+////@end includes
+
+/*!
+* Forward declarations
+*/
+
+////@begin forward declarations
+////@end forward declarations
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+#define ID_PUBKEYVIEWER 10075
+#define SYMBOL_WXPUBKEYVIEWER_STYLE wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU
+#define SYMBOL_WXPUBKEYVIEWER_TITLE _("Public Keys")
+#define SYMBOL_WXPUBKEYVIEWER_IDNAME ID_PUBKEYVIEWER
+#define SYMBOL_WXPUBKEYVIEWER_SIZE wxSize(400, 450)
+#define SYMBOL_WXPUBKEYVIEWER_POSITION wxDefaultPosition
+////@end control identifiers
+
+/*!
+* Compatibility
+*/
+
+#ifndef wxCLOSE_BOX
+#define wxCLOSE_BOX 0x1000
+#endif
+#ifndef wxFIXED_MINSIZE
+#define wxFIXED_MINSIZE 0
+#endif
+
+/*!
+* WxPubkeyViewer class declaration
+*/
+
+class WxPubkeyViewer: public wxDialog
+{    
+	DECLARE_DYNAMIC_CLASS( WxPubkeyViewer )
+	DECLARE_EVENT_TABLE()
+
+public:
+	/// Constructors
+	WxPubkeyViewer( );
+	WxPubkeyViewer( wxWindow* parent, wxWindowID id = SYMBOL_WXPUBKEYVIEWER_IDNAME, const wxString& caption = SYMBOL_WXPUBKEYVIEWER_TITLE, const wxPoint& pos = SYMBOL_WXPUBKEYVIEWER_POSITION, const wxSize& size = SYMBOL_WXPUBKEYVIEWER_SIZE, long style = SYMBOL_WXPUBKEYVIEWER_STYLE );
+
+	/// Creation
+	bool Create( wxWindow* parent, wxWindowID id = SYMBOL_WXPUBKEYVIEWER_IDNAME, const wxString& caption = SYMBOL_WXPUBKEYVIEWER_TITLE, const wxPoint& pos = SYMBOL_WXPUBKEYVIEWER_POSITION, const wxSize& size = SYMBOL_WXPUBKEYVIEWER_SIZE, long style = SYMBOL_WXPUBKEYVIEWER_STYLE );
+
+	/// Creates the controls and sizers
+	void CreateControls();
+
+////@begin WxPubkeyViewer event handler declarations
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for ID_CLOSE
+	void OnCloseClick( wxCommandEvent& event );
+
+////@end WxPubkeyViewer event handler declarations
+
+////@begin WxPubkeyViewer member function declarations
+
+	/// Retrieves bitmap resources
+	wxBitmap GetBitmapResource( const wxString& name );
+
+	/// Retrieves icon resources
+	wxIcon GetIconResource( const wxString& name );
+////@end WxPubkeyViewer member function declarations
+
+	void ShowFile (const char *path);
+
+	/// Should we show tooltips?
+	static bool ShowToolTips();
+
+////@begin WxPubkeyViewer member variables
+	wxTextCtrl* m_keys_text;
+////@end WxPubkeyViewer member variables
+};
+
+#endif
+	// _WXPUBKEYS_H_
diff -b -N -ru waste-source-1.5-beta-2/wxuploads.cpp latest/wxuploads.cpp
--- waste-source-1.5-beta-2/wxuploads.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxuploads.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,285 @@
+/*
+WASTE - wxWidgets uploads dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxuploads.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include "wxuploads.h"
+#include "wxappresources.h"
+#include "main.hpp"
+
+typedef wxWindow * HWND;
+
+////@begin XPM images
+////@end XPM images
+
+/*!
+* WxUploads type definition
+*/
+
+IMPLEMENT_DYNAMIC_CLASS( WxUploads, wxDialog )
+
+/*!
+* WxUploads event table definition
+*/
+
+BEGIN_EVENT_TABLE( WxUploads, wxDialog )
+
+////@begin WxUploads event table entries
+	EVT_CLOSE( WxUploads::OnCloseWindow )
+
+	EVT_MENU( XRCID("IDM_ABORT_UPLOAD"), WxUploads::OnMAbortUploadClick )
+
+	EVT_LIST_ITEM_ACTIVATED( XRCID("IDD_UPLOADS"), WxUploads::OnDUploadsItemActivated )
+	EVT_LIST_ITEM_RIGHT_CLICK( XRCID("IDD_UPLOADS"), WxUploads::OnDUploadsRightClick )
+
+	EVT_BUTTON( XRCID("IDC_ABORTSEL"), WxUploads::OnCAbortselClick )
+
+	EVT_BUTTON( XRCID("IDC_CLEARCOMP"), WxUploads::OnCClearcompClick )
+
+	EVT_BUTTON( XRCID("IDC_CLEARCOMP2"), WxUploads::OnCClearcomp2Click )
+
+	EVT_CHOICE( XRCID("IDC_AUTOCLEAR"), WxUploads::OnCAutoclearSelected )
+
+////@end WxUploads event table entries
+
+END_EVENT_TABLE()
+
+/*!
+* WxUploads constructors
+*/
+
+WxUploads::WxUploads( )
+{
+}
+
+WxUploads::WxUploads( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+	Create(parent, id, caption, pos, size, style);
+}
+
+/*!
+* WxUploads creator
+*/
+
+bool WxUploads::Create( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+////@begin WxUploads member initialisation
+	m_uploads = NULL;
+	m_abortsel = NULL;
+	m_clearcomp = NULL;
+	m_clearcomp2 = NULL;
+	m_autoclear = NULL;
+////@end WxUploads member initialisation
+
+////@begin WxUploads creation
+	SetParent(parent);
+	CreateControls();
+	SetIcon(GetIconResource(wxT("res/transfers.ico.gif")));
+	GetSizer()->Fit(this);
+	GetSizer()->SetSizeHints(this);
+	Centre();
+////@end WxUploads creation
+
+	SetSize(-1, -1, 420, 250, wxSIZE_USE_EXISTING);
+
+	return TRUE;
+}
+
+/*!
+* Control creation for WxUploads
+*/
+
+void WxUploads::CreateControls()
+{    
+////@begin WxUploads content construction
+
+	wxXmlResource::Get()->LoadDialog(this, GetParent(), _T("ID_UPLOADS"));
+	m_uploads = XRCCTRL(*this, "IDD_UPLOADS", wxListCtrl);
+	m_abortsel = XRCCTRL(*this, "IDC_ABORTSEL", wxBitmapButton);
+	m_clearcomp = XRCCTRL(*this, "IDC_CLEARCOMP", wxBitmapButton);
+	m_clearcomp2 = XRCCTRL(*this, "IDC_CLEARCOMP2", wxBitmapButton);
+	m_autoclear = XRCCTRL(*this, "IDC_AUTOCLEAR", wxChoice);
+////@end WxUploads content construction
+
+	// Create custom windows not generated automatically here.
+
+////@begin WxUploads content initialisation
+
+////@end WxUploads content initialisation
+}
+
+/*!
+* Should we show tooltips?
+*/
+
+bool WxUploads::ShowToolTips()
+{
+	return TRUE;
+}
+
+/*!
+* Get bitmap resources
+*/
+
+wxBitmap WxUploads::GetBitmapResource( const wxString& name )
+{
+	// Bitmap retrieval
+////@begin WxUploads bitmap retrieval
+	if (name == wxT("res/stopdl.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/stopdl.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/clear-inactive2.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/clear-inactive2.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/clear-completed2.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/clear-completed2.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	return wxNullBitmap;
+////@end WxUploads bitmap retrieval
+}
+
+/*!
+* Get icon resources
+*/
+
+wxIcon WxUploads::GetIconResource( const wxString& name )
+{
+	// Icon retrieval
+////@begin WxUploads icon retrieval
+	if (name == wxT("res/transfers.ico.gif"))
+	{
+		wxIcon icon(_T("res/transfers.ico.gif"), wxBITMAP_TYPE_GIF);
+		return icon;
+	}
+	return wxNullIcon;
+////@end WxUploads icon retrieval
+}
+
+/*!
+* wxEVT_COMMAND_CHOICE_SELECTED event handler for IDC_AUTOCLEAR
+*/
+
+void WxUploads::OnCAutoclearSelected( wxCommandEvent& event )
+{
+	extern int xferwnd_uploads_IDC_AUTOCLEAR(HWND hwndDlg);
+	xferwnd_uploads_IDC_AUTOCLEAR(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_LIST_ITEM_ACTIVATED event handler for IDD_UPLOADS
+*/
+
+void WxUploads::OnDUploadsItemActivated( wxListEvent& event )
+{
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK event handler for IDD_UPLOADS
+*/
+
+void WxUploads::OnDUploadsRightClick( wxListEvent& event )
+{
+	m_uploads->SetItemState(event.GetIndex(),
+				wxLIST_STATE_SELECTED, wxLIST_STATE_SELECTED);
+
+	void xferwnd_uploads_IDC_SENDLIST_NM_RCLICK(HWND, int , int );
+	xferwnd_uploads_IDC_SENDLIST_NM_RCLICK(this, (int) event.GetPoint().x,
+				(int) event.GetPoint().y);
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_ABORTSEL
+*/
+
+void WxUploads::OnCAbortselClick( wxCommandEvent& event )
+{
+	extern int xferwnd_uploads_IDC_ABORTSEL(HWND, bool);
+	xferwnd_uploads_IDC_ABORTSEL(this, false);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARCOMP
+*/
+
+void WxUploads::OnCClearcompClick( wxCommandEvent& event )
+{
+	extern int xferwnd_uploads_IDC_CLEARCOMP(HWND hwndDlg);
+	xferwnd_uploads_IDC_CLEARCOMP(this);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARCOMP2
+*/
+
+void WxUploads::OnCClearcomp2Click( wxCommandEvent& event )
+{
+	extern int xferwnd_uploads_IDC_CLEARCOMP2(HWND hwndDlg);
+	xferwnd_uploads_IDC_CLEARCOMP2(this);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_ABORT_UPLOAD
+*/
+
+void WxUploads::OnMAbortUploadClick( wxCommandEvent& event )
+{
+	extern int xferwnd_uploads_IDC_ABORTSEL(HWND, bool);
+	xferwnd_uploads_IDC_ABORTSEL(this, false);
+	event.Skip();
+}
+/*!
+* wxEVT_CLOSE_WINDOW event handler for ID_UPLOADS
+*/
+
+void WxUploads::OnCloseWindow( wxCloseEvent& event )
+{
+	g_config->WriteInt(CONFIG_xfers_vis,0);
+	event.Skip();
+}
+
+
diff -b -N -ru waste-source-1.5-beta-2/wxuploads.h latest/wxuploads.h
--- waste-source-1.5-beta-2/wxuploads.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxuploads.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,138 @@
+/*
+WASTE - wxWidgets uploads dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXUPLOADS_H_
+#define _WXUPLOADS_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxuploads.cpp"
+#endif
+
+/*!
+* Includes
+*/
+
+////@begin includes
+#include "wx/xrc/xmlres.h"
+#include "wx/listctrl.h"
+////@end includes
+
+/*!
+* Forward declarations
+*/
+
+////@begin forward declarations
+class wxListCtrl;
+////@end forward declarations
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+#define ID_UPLOADS 10039
+#define SYMBOL_WXUPLOADS_STYLE wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU
+#define SYMBOL_WXUPLOADS_TITLE _("Uploads")
+#define SYMBOL_WXUPLOADS_IDNAME ID_UPLOADS
+#define SYMBOL_WXUPLOADS_SIZE wxSize(550, 300)
+#define SYMBOL_WXUPLOADS_POSITION wxDefaultPosition
+////@end control identifiers
+
+/*!
+* Compatibility
+*/
+
+#ifndef wxCLOSE_BOX
+#define wxCLOSE_BOX 0x1000
+#endif
+#ifndef wxFIXED_MINSIZE
+#define wxFIXED_MINSIZE 0
+#endif
+
+/*!
+* WxUploads class declaration
+*/
+
+class WxUploads: public wxDialog
+{    
+	DECLARE_DYNAMIC_CLASS( WxUploads )
+	DECLARE_EVENT_TABLE()
+
+public:
+	/// Constructors
+	WxUploads( );
+	WxUploads( wxWindow* parent, wxWindowID id = SYMBOL_WXUPLOADS_IDNAME, const wxString& caption = SYMBOL_WXUPLOADS_TITLE, const wxPoint& pos = SYMBOL_WXUPLOADS_POSITION, const wxSize& size = SYMBOL_WXUPLOADS_SIZE, long style = SYMBOL_WXUPLOADS_STYLE );
+
+	/// Creation
+	bool Create( wxWindow* parent, wxWindowID id = SYMBOL_WXUPLOADS_IDNAME, const wxString& caption = SYMBOL_WXUPLOADS_TITLE, const wxPoint& pos = SYMBOL_WXUPLOADS_POSITION, const wxSize& size = SYMBOL_WXUPLOADS_SIZE, long style = SYMBOL_WXUPLOADS_STYLE );
+
+	/// Creates the controls and sizers
+	void CreateControls();
+
+////@begin WxUploads event handler declarations
+
+	/// wxEVT_CLOSE_WINDOW event handler for ID_UPLOADS
+	void OnCloseWindow( wxCloseEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_ABORT_UPLOAD
+	void OnMAbortUploadClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_LIST_ITEM_ACTIVATED event handler for IDD_UPLOADS
+	void OnDUploadsItemActivated( wxListEvent& event );
+
+	/// wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK event handler for IDD_UPLOADS
+	void OnDUploadsRightClick( wxListEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_ABORTSEL
+	void OnCAbortselClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARCOMP
+	void OnCClearcompClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARCOMP2
+	void OnCClearcomp2Click( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_CHOICE_SELECTED event handler for IDC_AUTOCLEAR
+	void OnCAutoclearSelected( wxCommandEvent& event );
+
+////@end WxUploads event handler declarations
+
+////@begin WxUploads member function declarations
+
+	/// Retrieves bitmap resources
+	wxBitmap GetBitmapResource( const wxString& name );
+
+	/// Retrieves icon resources
+	wxIcon GetIconResource( const wxString& name );
+////@end WxUploads member function declarations
+
+	/// Should we show tooltips?
+	static bool ShowToolTips();
+
+////@begin WxUploads member variables
+	wxListCtrl* m_uploads;
+	wxBitmapButton* m_abortsel;
+	wxBitmapButton* m_clearcomp;
+	wxBitmapButton* m_clearcomp2;
+	wxChoice* m_autoclear;
+////@end WxUploads member variables
+};
+
+#endif
+	// _WXUPLOADS_H_
diff -b -N -ru waste-source-1.5-beta-2/wxwaste.pjd latest/wxwaste.pjd
--- waste-source-1.5-beta-2/wxwaste.pjd	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxwaste.pjd	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,8632 @@
+<?xml version="1.0" ?>
+
+<path name="Header">
+	<value name="FileVersion" type="string">1.0</value>
+	<value name="AppName" type="string">dialogblocks</value>
+	<value name="VendorName" type="string"></value>
+	<value name="FileType" type="string">Project File</value>
+</path>
+<path name="projtree">
+	<value name="name_counter" type="Integer">1</value>
+	<value name="html_path" type="string"></value>
+	<value name="title" type="string"></value>
+	<value name="author" type="string"></value>
+	<value name="description" type="string"></value>
+	<value name="doc_count" type="Integer">245</value>
+	<value name="xrc_filename" type="string">wxwaste.xrc</value>
+	<value name="convert_images_to_xpm" type="bool">FALSE</value>
+	<value name="inline_images" type="bool">FALSE</value>
+	<value name="generate_cpp_for_xrc" type="bool">TRUE</value>
+	<value name="use_help_text_for_tooltips" type="bool">TRUE</value>
+	<value name="translate_strings" type="bool">TRUE</value>
+	<value name="extract_strings" type="bool">FALSE</value>
+	<value name="user_name" type="string"></value>
+	<value name="copyright_string" type="string"></value>
+	<value name="resource_prefix" type="string"></value>
+	<value name="use_two_step_construction" type="bool">FALSE</value>
+	<value name="current_platform" type="string">&lt;All platforms&gt;</value>
+	<value name="target_wx_version" type="string">&lt;Any&gt;</value>
+	<value name="cpp_header_comment" type="string">/////////////////////////////////////////////////////////////////////////////
+// Name:        %HEADER-FILENAME%
+// Licence:     
+/////////////////////////////////////////////////////////////////////////////
+
+</value>
+	<value name="cpp_implementation_comment" type="string">/////////////////////////////////////////////////////////////////////////////
+// Name:        %SOURCE-FILENAME%
+// Purpose:     
+// Author:      %AUTHOR%
+// Modified by: 
+// Created:     %DATE%
+// RCS-ID:      
+// Copyright:   %COPYRIGHT%
+// Licence:     
+/////////////////////////////////////////////////////////////////////////////
+
+</value>
+	<value name="cpp_function_comment" type="string">/*!
+ * %BODY%
+ */
+
+</value>
+	<value name="cpp_symbols_file_comment" type="string">/////////////////////////////////////////////////////////////////////////////
+// Name:        %SYMBOLS-FILENAME%
+// Purpose:     Symbols file
+// Author:      %AUTHOR%
+// Modified by: 
+// Created:     %DATE%
+// RCS-ID:      
+// Copyright:   %COPYRIGHT%
+// Licence:     
+/////////////////////////////////////////////////////////////////////////////
+
+</value>
+	<value name="resource_file_header" type="string">wxappresources.h</value>
+	<value name="resource_file_implementation" type="string">wxappresources.cpp</value>
+	<value name="resource_class_name" type="string">AppResources</value>
+	<value name="app_file_header" type="string">app.h</value>
+	<value name="app_file_implementation" type="string">app.cpp</value>
+	<value name="app_class_name" type="string">Application</value>
+	<value name="generate_app_class" type="bool">FALSE</value>
+	<value name="external_symbol_filenames" type="string"></value>
+	<value name="configuration" type="string">linux</value>
+	<value name="makefile_dirty" type="bool">TRUE</value>
+	<path name="ID000000">
+		<value name="title" type="string"></value>
+		<value name="id" type="Integer">146543920</value>
+		<value name="type" type="string">data-document</value>
+		<value name="filename" type="string"></value>
+		<value name="icon-name" type="string"></value>
+		<value name="is-transient" type="Integer">0</value>
+		<value name="owns-file" type="Integer">1</value>
+		<value name="title-mode" type="Integer">0</value>
+		<value name="parent" type="Integer">0</value>
+		<value name="locked" type="Integer">0</value>
+		<path name="ID000001">
+			<value name="title" type="string">Configurations</value>
+			<value name="id" type="Integer">146540664</value>
+			<value name="type" type="string">config-data-document</value>
+			<value name="filename" type="string"></value>
+			<value name="icon-name" type="string"></value>
+			<value name="is-transient" type="Integer">0</value>
+			<value name="owns-file" type="Integer">1</value>
+			<value name="title-mode" type="Integer">0</value>
+			<value name="parent" type="Integer">146543920</value>
+			<value name="locked" type="Integer">0</value>
+			<value name="template-name" type="string"></value>
+			<value name="Compiler name" type="string"></value>
+			<value name="Build mode" type="string">Debug</value>
+			<value name="Unicode mode" type="string">ANSI</value>
+			<value name="Shared mode" type="string">Static</value>
+			<value name="Modularity" type="string">Modular</value>
+			<value name="GUI mode" type="string">GUI</value>
+			<value name="Toolkit" type="string">wxGTK+2</value>
+			<value name="Runtime linking" type="string">Dynamic</value>
+			<value name="Use exceptions" type="string">Yes</value>
+			<value name="Use ODBC" type="string">No</value>
+			<value name="Use OpenGL" type="string">No</value>
+			<value name="wxWidgets version" type="string">%WXVERSION%</value>
+			<value name="Executable name" type="string">%EXECUTABLE%</value>
+			<value name="Program arguments" type="string"></value>
+			<value name="Working path" type="string">%AUTO%</value>
+			<value name="Output path" type="string">%AUTO%</value>
+			<value name="Objects path" type="string">%AUTO%</value>
+			<value name="Compiler location" type="string">%AUTO%</value>
+			<value name="wxWidgets location" type="string">%AUTO%</value>
+			<value name="C++ command" type="string">%AUTO%</value>
+			<value name="Resource compiler" type="string">%AUTO%</value>
+			<value name="Make command" type="string">%AUTO%</value>
+			<value name="Project makefile" type="string">%AUTO%</value>
+			<value name="wxWidgets makefile" type="string">%AUTO%</value>
+			<value name="Compiler bin path" type="string">%AUTO%</value>
+			<value name="Compiler include path" type="string">%AUTO%</value>
+			<value name="Compiler lib path" type="string">%AUTO%</value>
+			<value name="Preprocessor flags" type="string">%AUTO%</value>
+			<value name="Optimizations" type="string">%AUTO%</value>
+			<value name="Warnings" type="string">%AUTO%</value>
+			<value name="Debug flags" type="string">%AUTO%</value>
+			<value name="Libraries" type="string">%AUTO%</value>
+			<value name="Linker flags" type="string">%AUTO%</value>
+			<value name="Include path" type="string">%AUTO%</value>
+			<value name="Library path" type="string">%AUTO%</value>
+			<value name="Resource flags" type="string">%AUTO%</value>
+			<value name="Resource path" type="string">%AUTO%</value>
+			<value name="wxWidgets build path" type="string">%AUTO%</value>
+			<value name="wxWidgets build command" type="string">%AUTO%</value>
+			<value name="wxWidgets clean command" type="string">%AUTO%</value>
+			<path name="ID000002">
+				<value name="title" type="string">GCC Debug</value>
+				<value name="id" type="Integer">146565616</value>
+				<value name="type" type="string">gcc-config-data-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string"></value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146540664</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="template-name" type="string">GCC</value>
+				<value name="Compiler name" type="string">GCC</value>
+				<value name="Build mode" type="string">Debug</value>
+				<value name="Unicode mode" type="string">ANSI</value>
+				<value name="Shared mode" type="string">Static</value>
+				<value name="Modularity" type="string">Modular</value>
+				<value name="GUI mode" type="string">GUI</value>
+				<value name="Toolkit" type="string">wxGTK+2</value>
+				<value name="Runtime linking" type="string">Dynamic</value>
+				<value name="Use exceptions" type="string">Yes</value>
+				<value name="Use ODBC" type="string">No</value>
+				<value name="Use OpenGL" type="string">No</value>
+				<value name="wxWidgets version" type="string">%WXVERSION%</value>
+				<value name="Executable name" type="string">%EXECUTABLE%</value>
+				<value name="Program arguments" type="string"></value>
+				<value name="Working path" type="string">%AUTO%</value>
+				<value name="Output path" type="string">%AUTO%</value>
+				<value name="Objects path" type="string">%AUTO%</value>
+				<value name="Compiler location" type="string">%AUTO%</value>
+				<value name="wxWidgets location" type="string">%AUTO%</value>
+				<value name="C++ command" type="string">%AUTO%</value>
+				<value name="Resource compiler" type="string">%AUTO%</value>
+				<value name="Make command" type="string">%AUTO%</value>
+				<value name="Project makefile" type="string">%AUTO%</value>
+				<value name="wxWidgets makefile" type="string">%AUTO%</value>
+				<value name="Compiler bin path" type="string">%AUTO%</value>
+				<value name="Compiler include path" type="string">%AUTO%</value>
+				<value name="Compiler lib path" type="string">%AUTO%</value>
+				<value name="Preprocessor flags" type="string">%AUTO%</value>
+				<value name="Optimizations" type="string">%AUTO%</value>
+				<value name="Warnings" type="string">%AUTO%</value>
+				<value name="Debug flags" type="string">%AUTO%</value>
+				<value name="Libraries" type="string">%AUTO%</value>
+				<value name="Linker flags" type="string">%AUTO%</value>
+				<value name="Include path" type="string">%AUTO%</value>
+				<value name="Library path" type="string">%AUTO%</value>
+				<value name="Resource flags" type="string">%AUTO%</value>
+				<value name="Resource path" type="string">%AUTO%</value>
+				<value name="wxWidgets build path" type="string">%AUTO%</value>
+				<value name="wxWidgets build command" type="string">%AUTO%</value>
+				<value name="wxWidgets clean command" type="string">%AUTO%</value>
+				<value name="Use wx-config" type="string">Yes</value>
+			</path>
+			<path name="ID000003">
+				<value name="title" type="string">GCC Release</value>
+				<value name="id" type="Integer">146576936</value>
+				<value name="type" type="string">gcc-config-data-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string"></value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146540664</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="template-name" type="string">GCC</value>
+				<value name="Compiler name" type="string">GCC</value>
+				<value name="Build mode" type="string">Release</value>
+				<value name="Unicode mode" type="string">ANSI</value>
+				<value name="Shared mode" type="string">Static</value>
+				<value name="Modularity" type="string">Modular</value>
+				<value name="GUI mode" type="string">GUI</value>
+				<value name="Toolkit" type="string">wxGTK+2</value>
+				<value name="Runtime linking" type="string">Dynamic</value>
+				<value name="Use exceptions" type="string">Yes</value>
+				<value name="Use ODBC" type="string">No</value>
+				<value name="Use OpenGL" type="string">No</value>
+				<value name="wxWidgets version" type="string">%WXVERSION%</value>
+				<value name="Executable name" type="string">%EXECUTABLE%</value>
+				<value name="Program arguments" type="string"></value>
+				<value name="Working path" type="string">%AUTO%</value>
+				<value name="Output path" type="string">%AUTO%</value>
+				<value name="Objects path" type="string">%AUTO%</value>
+				<value name="Compiler location" type="string">%AUTO%</value>
+				<value name="wxWidgets location" type="string">%AUTO%</value>
+				<value name="C++ command" type="string">%AUTO%</value>
+				<value name="Resource compiler" type="string">%AUTO%</value>
+				<value name="Make command" type="string">%AUTO%</value>
+				<value name="Project makefile" type="string">%AUTO%</value>
+				<value name="wxWidgets makefile" type="string">%AUTO%</value>
+				<value name="Compiler bin path" type="string">%AUTO%</value>
+				<value name="Compiler include path" type="string">%AUTO%</value>
+				<value name="Compiler lib path" type="string">%AUTO%</value>
+				<value name="Preprocessor flags" type="string">%AUTO%</value>
+				<value name="Optimizations" type="string">%AUTO%</value>
+				<value name="Warnings" type="string">%AUTO%</value>
+				<value name="Debug flags" type="string">%AUTO%</value>
+				<value name="Libraries" type="string">%AUTO%</value>
+				<value name="Linker flags" type="string">%AUTO%</value>
+				<value name="Include path" type="string">%AUTO%</value>
+				<value name="Library path" type="string">%AUTO%</value>
+				<value name="Resource flags" type="string">%AUTO%</value>
+				<value name="Resource path" type="string">%AUTO%</value>
+				<value name="wxWidgets build path" type="string">%AUTO%</value>
+				<value name="wxWidgets build command" type="string">%AUTO%</value>
+				<value name="wxWidgets clean command" type="string">%AUTO%</value>
+				<value name="Use wx-config" type="string">Yes</value>
+			</path>
+			<path name="ID000004">
+				<value name="title" type="string">linux</value>
+				<value name="id" type="Integer">146588328</value>
+				<value name="type" type="string">gcc-config-data-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string"></value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146540664</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="template-name" type="string">GCC</value>
+				<value name="Compiler name" type="string">GCC</value>
+				<value name="Build mode" type="string">Debug</value>
+				<value name="Unicode mode" type="string">ANSI</value>
+				<value name="Shared mode" type="string">Static</value>
+				<value name="Modularity" type="string">Modular</value>
+				<value name="GUI mode" type="string">GUI</value>
+				<value name="Toolkit" type="string">wxGTK+2</value>
+				<value name="Runtime linking" type="string">Dynamic</value>
+				<value name="Use exceptions" type="string">Yes</value>
+				<value name="Use ODBC" type="string">No</value>
+				<value name="Use OpenGL" type="string">No</value>
+				<value name="wxWidgets version" type="string">%WXVERSION%</value>
+				<value name="Executable name" type="string">%EXECUTABLE%</value>
+				<value name="Program arguments" type="string"></value>
+				<value name="Working path" type="string">%AUTO%</value>
+				<value name="Output path" type="string">%AUTO%</value>
+				<value name="Objects path" type="string">%AUTO%</value>
+				<value name="Compiler location" type="string">%AUTO%</value>
+				<value name="wxWidgets location" type="string">/usr/bin</value>
+				<value name="C++ command" type="string">g++</value>
+				<value name="Resource compiler" type="string">windres.exe</value>
+				<value name="Make command" type="string">make</value>
+				<value name="Project makefile" type="string">Makefile</value>
+				<value name="wxWidgets makefile" type="string">Makefile</value>
+				<value name="Compiler bin path" type="string"></value>
+				<value name="Compiler include path" type="string">`wx-config --cflags` -D_DEFINE_WXUI -D_DEFINE_SRV -DNDEBUG -I. -Irsa</value>
+				<value name="Compiler lib path" type="string"></value>
+				<value name="Preprocessor flags" type="string"></value>
+				<value name="Optimizations" type="string"></value>
+				<value name="Warnings" type="string">-Wall</value>
+				<value name="Debug flags" type="string">-g</value>
+				<value name="Libraries" type="string">`wx-config --inplace --libs`</value>
+				<value name="Linker flags" type="string"></value>
+				<value name="Include path" type="string"></value>
+				<value name="Library path" type="string"></value>
+				<value name="Resource flags" type="string">%AUTO%</value>
+				<value name="Resource path" type="string">%AUTO%</value>
+				<value name="wxWidgets build path" type="string"></value>
+				<value name="wxWidgets build command" type="string">echo</value>
+				<value name="wxWidgets clean command" type="string"></value>
+				<value name="Use wx-config" type="string">Yes</value>
+			</path>
+		</path>
+	</path>
+	<path name="ID000005">
+		<value name="title" type="string">Projects</value>
+		<value name="id" type="Integer">146543728</value>
+		<value name="type" type="string">root-document</value>
+		<value name="filename" type="string"></value>
+		<value name="icon-name" type="string">project</value>
+		<value name="is-transient" type="Integer">1</value>
+		<value name="owns-file" type="Integer">1</value>
+		<value name="title-mode" type="Integer">0</value>
+		<value name="parent" type="Integer">0</value>
+		<value name="locked" type="Integer">0</value>
+		<path name="ID000006">
+			<value name="title" type="string">Windows</value>
+			<value name="id" type="Integer">146564944</value>
+			<value name="type" type="string">html-document</value>
+			<value name="filename" type="string"></value>
+			<value name="icon-name" type="string">dialogsfolder</value>
+			<value name="is-transient" type="Integer">1</value>
+			<value name="owns-file" type="Integer">1</value>
+			<value name="title-mode" type="Integer">0</value>
+			<value name="parent" type="Integer">146543728</value>
+			<value name="locked" type="Integer">1</value>
+			<path name="ID000007">
+				<value name="title" type="string">WxwasteApp</value>
+				<value name="id" type="Integer">146599720</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">app</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="proxy-type" type="string">wbAppProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="proxy-Class" type="string">WxwasteApp</value>
+				<value name="proxy-Base class" type="string">wxApp</value>
+				<value name="proxy-Implementation filename" type="string">wxmain.cpp</value>
+				<value name="proxy-Header filename" type="string">wxmain.h</value>
+				<value name="proxy-Event sources" type="string"></value>
+				<value name="proxy-Main window" type="string">ID_MAIN_FRAME</value>
+			</path>
+			<path name="ID000008">
+				<value name="title" type="string">WxWASTE</value>
+				<value name="id" type="Integer">146540232</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">frame</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="proxy-type" type="string">wbFrameProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="event-handler-0" type="string">wxEVT_CLOSE_WINDOW|OnCloseWindow|DESTROYWINDOW|</value>
+				<value name="proxy-Id name" type="string">ID_MAIN_FRAME</value>
+				<value name="proxy-Id value" type="Integer">10003</value>
+				<value name="proxy-Class" type="string">MainFrame</value>
+				<value name="proxy-Base class" type="string">wxFrame</value>
+				<value name="proxy-Implementation filename" type="string">wxmainframe.cpp</value>
+				<value name="proxy-Header filename" type="string">wxmainframe.h</value>
+				<value name="proxy-XRC filename" type="string"></value>
+				<value name="proxy-Title" type="string">WxWASTE</value>
+				<value name="proxy-Centre" type="bool">TRUE</value>
+				<value name="proxy-Icon" type="string">res/icon1.ico.gif</value>
+				<value name="proxy-Dialog units" type="bool">FALSE</value>
+				<value name="proxy-Help text" type="string"></value>
+				<value name="proxy-Tooltip text" type="string"></value>
+				<value name="proxy-Background colour" type="string"></value>
+				<value name="proxy-Foreground colour" type="string"></value>
+				<value name="proxy-Font" type="string"></value>
+				<value name="proxy-Hidden" type="bool">FALSE</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<value name="proxy-wxDEFAULT_FRAME_STYLE" type="bool">TRUE</value>
+				<value name="proxy-wxCAPTION" type="bool">TRUE</value>
+				<value name="proxy-wxRESIZE_BORDER" type="bool">TRUE</value>
+				<value name="proxy-wxSYSTEM_MENU" type="bool">TRUE</value>
+				<value name="proxy-wxMINIMIZE" type="bool">FALSE</value>
+				<value name="proxy-wxMAXIMIZE" type="bool">FALSE</value>
+				<value name="proxy-wxMINIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMAXIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxCLOSE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxFRAME_TOOL_WINDOW" type="bool">FALSE</value>
+				<value name="proxy-wxFRAME_FLOAT_ON_PARENT" type="bool">FALSE</value>
+				<value name="proxy-wxFRAME_NO_TASKBAR" type="bool">FALSE</value>
+				<value name="proxy-wxSTAY_ON_TOP" type="bool">FALSE</value>
+				<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+				<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+				<value name="proxy-wxTAB_TRAVERSAL" type="bool">TRUE</value>
+				<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_TRANSIENT" type="bool">FALSE</value>
+				<value name="proxy-Custom styles" type="string"></value>
+				<value name="proxy-wxFRAME_EX_CONTEXTHELP" type="bool">FALSE</value>
+				<value name="proxy-Fit to content" type="bool">TRUE</value>
+				<value name="proxy-X" type="Integer">-1</value>
+				<value name="proxy-Y" type="Integer">-1</value>
+				<value name="proxy-Width" type="Integer">400</value>
+				<value name="proxy-Height" type="Integer">300</value>
+				<value name="proxy-Event sources" type="string">IDM_USERLIST_POPUP</value>
+				<path name="ID000009">
+					<value name="title" type="string">wxMenuBar: ID_MAIN_MENUBAR</value>
+					<value name="id" type="Integer">146616984</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menubar</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">146540232</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">30/0/2005</value>
+					<value name="proxy-type" type="string">wbMenuBarProxy</value>
+					<value name="proxy-Id name" type="string">ID_MAIN_MENUBAR</value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+					<path name="ID00000a">
+						<value name="title" type="string">File</value>
+						<value name="id" type="Integer">146619152</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">menu</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146616984</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">31/0/2005</value>
+						<value name="proxy-type" type="string">wbMenuProxy</value>
+						<value name="proxy-Label" type="string">File</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID00000b">
+							<value name="title" type="string">&amp;Preferences...: ID_MENU_PREFS</value>
+							<value name="id" type="Integer">146622016</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">menuitem</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146619152</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">31/0/2005</value>
+							<value name="proxy-type" type="string">wbMenuItemProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMenuPrefsClick</value>
+							<value name="proxy-Id name" type="string">ID_MENU_PREFS</value>
+							<value name="proxy-Id value" type="Integer">10019</value>
+							<value name="proxy-Label" type="string">&amp;Preferences...</value>
+							<value name="proxy-Kind" type="string">Normal</value>
+							<value name="proxy-Checked" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Bitmap" type="string"></value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						</path>
+						<path name="ID00000c">
+							<value name="title" type="string">&amp;Quit: ID_MENU_QUIT</value>
+							<value name="id" type="Integer">146626032</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">menuitem</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146619152</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">31/0/2005</value>
+							<value name="proxy-type" type="string">wbMenuItemProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMenuQuitClick|DESTROYWINDOW|</value>
+							<value name="proxy-Id name" type="string">ID_MENU_QUIT</value>
+							<value name="proxy-Id value" type="Integer">10020</value>
+							<value name="proxy-Label" type="string">&amp;Quit</value>
+							<value name="proxy-Kind" type="string">Normal</value>
+							<value name="proxy-Checked" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Bitmap" type="string"></value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						</path>
+					</path>
+					<path name="ID00000d">
+						<value name="title" type="string">View</value>
+						<value name="id" type="Integer">146629800</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">menu</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146616984</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">31/0/2005</value>
+						<value name="proxy-type" type="string">wbMenuProxy</value>
+						<value name="proxy-Label" type="string">View</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID00000e">
+							<value name="title" type="string">&amp;Network Status...: ID_MENU_NETSTAT</value>
+							<value name="id" type="Integer">146631784</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">menuitem</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146629800</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">31/0/2005</value>
+							<value name="proxy-type" type="string">wbMenuItemProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMenuNetstatClick</value>
+							<value name="proxy-Id name" type="string">ID_MENU_NETSTAT</value>
+							<value name="proxy-Id value" type="Integer">10018</value>
+							<value name="proxy-Label" type="string">&amp;Network Status...</value>
+							<value name="proxy-Kind" type="string">Check</value>
+							<value name="proxy-Checked" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Bitmap" type="string"></value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						</path>
+						<path name="ID00000f">
+							<value name="title" type="string">&amp;Browser...: ID_MENU_BROWSER</value>
+							<value name="id" type="Integer">146635576</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">menuitem</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146629800</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbMenuItemProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMenuBrowserClick</value>
+							<value name="proxy-Id name" type="string">ID_MENU_BROWSER</value>
+							<value name="proxy-Id value" type="Integer">10044</value>
+							<value name="proxy-Label" type="string">&amp;Browser...</value>
+							<value name="proxy-Kind" type="string">Check</value>
+							<value name="proxy-Checked" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Bitmap" type="string"></value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						</path>
+						<path name="ID000010">
+							<value name="title" type="string">&amp;Transfers...: ID_MENU_XFERS</value>
+							<value name="id" type="Integer">146639416</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">menuitem</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146629800</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbMenuItemProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMenuXfersClick</value>
+							<value name="proxy-Id name" type="string">ID_MENU_XFERS</value>
+							<value name="proxy-Id value" type="Integer">10045</value>
+							<value name="proxy-Label" type="string">&amp;Transfers...</value>
+							<value name="proxy-Kind" type="string">Check</value>
+							<value name="proxy-Checked" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Bitmap" type="string"></value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						</path>
+						<path name="ID000011">
+							<value name="title" type="string">&amp;Uploads...: ID_MENU_UPLOADS</value>
+							<value name="id" type="Integer">146643136</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">menuitem</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146629800</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbMenuItemProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMenuUploadClick</value>
+							<value name="proxy-Id name" type="string">ID_MENU_UPLOADS</value>
+							<value name="proxy-Id value" type="Integer">10046</value>
+							<value name="proxy-Label" type="string">&amp;Uploads...</value>
+							<value name="proxy-Kind" type="string">Check</value>
+							<value name="proxy-Checked" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Bitmap" type="string"></value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						</path>
+						<path name="ID000012">
+							<value name="title" type="string">------------</value>
+							<value name="id" type="Integer">146621360</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">menuitem</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146629800</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbMenuSeparatorProxy</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						</path>
+						<path name="ID000013">
+							<value name="title" type="string">Create/&amp;Join Chat...: ID_MENU_JOINCHAT</value>
+							<value name="id" type="Integer">146648616</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">menuitem</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146629800</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbMenuItemProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMenuJoinchatClick</value>
+							<value name="proxy-Id name" type="string">ID_MENU_JOINCHAT</value>
+							<value name="proxy-Id value" type="Integer">10047</value>
+							<value name="proxy-Label" type="string">Create/&amp;Join Chat...</value>
+							<value name="proxy-Kind" type="string">Normal</value>
+							<value name="proxy-Checked" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Bitmap" type="string"></value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						</path>
+						<path name="ID000014">
+							<value name="title" type="string">Chat Windows...: ID_CHATS</value>
+							<value name="id" type="Integer">146652400</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">menu</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146629800</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbSubmenuProxy</value>
+							<value name="proxy-Id name" type="string">ID_CHATS</value>
+							<value name="proxy-Id value" type="Integer">10048</value>
+							<value name="proxy-Label" type="string">Chat Windows...</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						</path>
+					</path>
+				</path>
+				<path name="ID000015">
+					<value name="title" type="string">wxBoxSizer V</value>
+					<value name="id" type="Integer">146655272</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">sizer</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">146540232</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">30/0/2005</value>
+					<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+					<value name="proxy-Orientation" type="string">Vertical</value>
+					<value name="proxy-Member variable name" type="string"></value>
+					<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+					<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+					<path name="ID000016">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">146661848</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146655272</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">30/0/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Centre</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID000017">
+							<value name="title" type="string">wxBitmapButton: ID_BITMAPBUTTON_NETSTAT</value>
+							<value name="id" type="Integer">146670072</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146661848</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnBitmapbuttonNetstatClick</value>
+							<value name="proxy-Id name" type="string">ID_BITMAPBUTTON_NETSTAT</value>
+							<value name="proxy-Id value" type="Integer">10010</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Bitmap" type="string">res/connect.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000018">
+							<value name="title" type="string">wxStaticText: IDC_NETSTATUS</value>
+							<value name="id" type="Integer">146669480</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">statictext</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146661848</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbStaticTextProxy</value>
+							<value name="proxy-Id name" type="string">IDC_NETSTATUS</value>
+							<value name="proxy-Id value" type="Integer">10011</value>
+							<value name="proxy-Class" type="string">wxStaticText</value>
+							<value name="proxy-Member variable name" type="string">m_netstatus</value>
+							<value name="proxy-Label" type="string">:0</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000019">
+							<value name="title" type="string">wxBitmapButton: ID_BUTTON_BROWSER</value>
+							<value name="id" type="Integer">146684008</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146661848</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnButtonBrowserClick</value>
+							<value name="proxy-Id name" type="string">ID_BUTTON_BROWSER</value>
+							<value name="proxy-Id value" type="Integer">10012</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Bitmap" type="string">res/search.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00001a">
+							<value name="title" type="string">wxBitmapButton: ID_JOINCHAT</value>
+							<value name="id" type="Integer">146713768</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146661848</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnJoinchatClick</value>
+							<value name="proxy-Id name" type="string">ID_JOINCHAT</value>
+							<value name="proxy-Id value" type="Integer">10013</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Bitmap" type="string">res/chat.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID00001b">
+						<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+						<value name="id" type="Integer">146700320</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">statictext</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146655272</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">30/0/2005</value>
+						<value name="proxy-type" type="string">wbStaticTextProxy</value>
+						<value name="proxy-Id name" type="string">wxID_STATIC</value>
+						<value name="proxy-Id value" type="Integer">5105</value>
+						<value name="proxy-Class" type="string">wxStaticText</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string">Users:</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxALIGN_LEFT" type="bool">TRUE</value>
+						<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+						<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Left</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID00001c">
+						<value name="title" type="string">wxTreeCtrl: IDC_USERS</value>
+						<value name="id" type="Integer">146743336</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">treectrl</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146655272</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">7/1/2005</value>
+						<value name="proxy-type" type="string">wbTreeCtrlProxy</value>
+						<value name="event-handler-0" type="string">wxEVT_COMMAND_TREE_SEL_CHANGED|OnCUsersSelChanged</value>
+						<value name="event-handler-1" type="string">wxEVT_COMMAND_TREE_SEL_CHANGING|OnCUsersSelChanging</value>
+						<value name="event-handler-2" type="string">wxEVT_COMMAND_TREE_BEGIN_RDRAG|OnCUsersBeginRDrag</value>
+						<value name="event-handler-3" type="string">wxEVT_COMMAND_TREE_ITEM_ACTIVATED|OnCUsersItemActivated</value>
+						<value name="proxy-Id name" type="string">IDC_USERS</value>
+						<value name="proxy-Id value" type="Integer">10049</value>
+						<value name="proxy-Class" type="string">wxTreeCtrl</value>
+						<value name="proxy-Member variable name" type="string">m_users</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxTR_EDIT_LABELS" type="bool">FALSE</value>
+						<value name="proxy-wxTR_NO_BUTTONS" type="bool">TRUE</value>
+						<value name="proxy-wxTR_HAS_BUTTONS " type="bool">FALSE</value>
+						<value name="proxy-wxTR_TWIST_BUTTONS" type="bool">FALSE</value>
+						<value name="proxy-wxTR_NO_LINES" type="bool">TRUE</value>
+						<value name="proxy-wxTR_FULL_ROW_HIGHLIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTR_LINES_AT_ROOT" type="bool">FALSE</value>
+						<value name="proxy-wxTR_HIDE_ROOT" type="bool">TRUE</value>
+						<value name="proxy-wxTR_ROW_LINES" type="bool">FALSE</value>
+						<value name="proxy-wxTR_HAS_VARIABLE_ROW_HEIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxTR_SINGLE" type="bool">FALSE</value>
+						<value name="proxy-wxTR_MULTIPLE" type="bool">FALSE</value>
+						<value name="proxy-wxTR_EXTENDED" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">TRUE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">100</value>
+						<value name="proxy-Height" type="Integer">130</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">1</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID00001d">
+						<value name="title" type="string">wxStaticLine: wxID_STATIC</value>
+						<value name="id" type="Integer">146727768</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">staticline</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146655272</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">30/0/2005</value>
+						<value name="proxy-type" type="string">wbStaticLineProxy</value>
+						<value name="proxy-Id name" type="string">wxID_STATIC</value>
+						<value name="proxy-Id value" type="Integer">5105</value>
+						<value name="proxy-Class" type="string">wxStaticLine</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-wxLI_HORIZONTAL" type="bool">TRUE</value>
+						<value name="proxy-wxLI_VERTICAL" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+					</path>
+					<path name="ID00001e">
+						<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+						<value name="id" type="Integer">146762984</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">statictext</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146655272</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">30/0/2005</value>
+						<value name="proxy-type" type="string">wbStaticTextProxy</value>
+						<value name="proxy-Id name" type="string">wxID_STATIC</value>
+						<value name="proxy-Id value" type="Integer">5105</value>
+						<value name="proxy-Class" type="string">wxStaticText</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string">Chats:</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxALIGN_LEFT" type="bool">TRUE</value>
+						<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+						<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Left</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID00001f">
+						<value name="title" type="string">wxTreeCtrl: IDC_CHATROOMS</value>
+						<value name="id" type="Integer">146791672</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">treectrl</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146655272</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">7/1/2005</value>
+						<value name="proxy-type" type="string">wbTreeCtrlProxy</value>
+						<value name="event-handler-0" type="string">wxEVT_COMMAND_TREE_ITEM_ACTIVATED|OnCChatroomsItemActivated</value>
+						<value name="proxy-Id name" type="string">IDC_CHATROOMS</value>
+						<value name="proxy-Id value" type="Integer">10008</value>
+						<value name="proxy-Class" type="string">wxTreeCtrl</value>
+						<value name="proxy-Member variable name" type="string">m_chatrooms</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxTR_EDIT_LABELS" type="bool">FALSE</value>
+						<value name="proxy-wxTR_NO_BUTTONS" type="bool">TRUE</value>
+						<value name="proxy-wxTR_HAS_BUTTONS " type="bool">FALSE</value>
+						<value name="proxy-wxTR_TWIST_BUTTONS" type="bool">FALSE</value>
+						<value name="proxy-wxTR_NO_LINES" type="bool">TRUE</value>
+						<value name="proxy-wxTR_FULL_ROW_HIGHLIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTR_LINES_AT_ROOT" type="bool">FALSE</value>
+						<value name="proxy-wxTR_HIDE_ROOT" type="bool">TRUE</value>
+						<value name="proxy-wxTR_ROW_LINES" type="bool">FALSE</value>
+						<value name="proxy-wxTR_HAS_VARIABLE_ROW_HEIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxTR_SINGLE" type="bool">TRUE</value>
+						<value name="proxy-wxTR_MULTIPLE" type="bool">FALSE</value>
+						<value name="proxy-wxTR_EXTENDED" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">TRUE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">100</value>
+						<value name="proxy-Height" type="Integer">60</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+				</path>
+			</path>
+			<path name="ID000020">
+				<value name="title" type="string">Network Status</value>
+				<value name="id" type="Integer">146791184</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">dialog</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="proxy-type" type="string">wbDialogProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="variable-0" type="string">m_host_list_sel|wxString|HostListSel|</value>
+				<value name="proxy-Id name" type="string">ID_NETSTAT</value>
+				<value name="proxy-Id value" type="Integer">10004</value>
+				<value name="proxy-Class" type="string">WxNetStatDialog</value>
+				<value name="proxy-Base class" type="string">wxDialog</value>
+				<value name="proxy-Window kind" type="string">wxDialog</value>
+				<value name="proxy-Implementation filename" type="string">wxnetstat.cpp</value>
+				<value name="proxy-Header filename" type="string">wxnetstat.h</value>
+				<value name="proxy-XRC filename" type="string"></value>
+				<value name="proxy-Title" type="string">Network Status</value>
+				<value name="proxy-Centre" type="bool">TRUE</value>
+				<value name="proxy-Icon" type="string">res/connect_icon.gif</value>
+				<value name="proxy-Dialog units" type="bool">FALSE</value>
+				<value name="proxy-Help text" type="string"></value>
+				<value name="proxy-Tooltip text" type="string"></value>
+				<value name="proxy-Background colour" type="string"></value>
+				<value name="proxy-Foreground colour" type="string"></value>
+				<value name="proxy-Font" type="string"></value>
+				<value name="proxy-Hidden" type="bool">FALSE</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<value name="proxy-wxDEFAULT_DIALOG_STYLE" type="bool">TRUE</value>
+				<value name="proxy-wxCAPTION" type="bool">TRUE</value>
+				<value name="proxy-wxRESIZE_BORDER" type="bool">TRUE</value>
+				<value name="proxy-wxTHICK_FRAME" type="bool">FALSE</value>
+				<value name="proxy-wxSYSTEM_MENU" type="bool">TRUE</value>
+				<value name="proxy-wxSTAY_ON_TOP" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_NO_PARENT" type="bool">FALSE</value>
+				<value name="proxy-wxCLOSE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMAXIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMINIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_MODAL" type="bool">FALSE</value>
+				<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+				<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+				<value name="proxy-wxTAB_TRAVERSAL" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_TRANSIENT" type="bool">FALSE</value>
+				<value name="proxy-Custom styles" type="string"></value>
+				<value name="proxy-wxDIALOG_EX_CONTEXTHELP" type="bool">FALSE</value>
+				<value name="proxy-Fit to content" type="bool">TRUE</value>
+				<value name="proxy-X" type="Integer">-1</value>
+				<value name="proxy-Y" type="Integer">-1</value>
+				<value name="proxy-Width" type="Integer">400</value>
+				<value name="proxy-Height" type="Integer">300</value>
+				<value name="proxy-Event sources" type="string"></value>
+				<path name="ID000021">
+					<value name="title" type="string">wxBoxSizer V</value>
+					<value name="id" type="Integer">146828304</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">sizer</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">146791184</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+					<value name="proxy-Orientation" type="string">Vertical</value>
+					<value name="proxy-Member variable name" type="string"></value>
+					<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+					<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+					<path name="ID000022">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">146834768</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146828304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">30/0/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID000023">
+							<value name="title" type="string">wxComboBox: IDC_NEWCONNECTION</value>
+							<value name="id" type="Integer">146842000</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">combobox</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146834768</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbComboBoxProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_COMBOBOX_SELECTED|OnCNewconnectionSelected</value>
+							<value name="event-handler-1" type="string">wxEVT_COMMAND_TEXT_UPDATED|OnCNewconnectionUpdated</value>
+							<value name="proxy-Id name" type="string">IDC_NEWCONNECTION</value>
+							<value name="proxy-Id value" type="Integer">10005</value>
+							<value name="proxy-Class" type="string">wxComboBox</value>
+							<value name="proxy-Member variable name" type="string">m_newconnection</value>
+							<value name="proxy-Strings" type="string"></value>
+							<value name="proxy-Initial value" type="string"></value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxCB_SIMPLE" type="bool">FALSE</value>
+							<value name="proxy-wxCB_DROPDOWN" type="bool">TRUE</value>
+							<value name="proxy-wxCB_READONLY" type="bool">FALSE</value>
+							<value name="proxy-wxCB_SORT" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">9</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000024">
+							<value name="title" type="string">wxBitmapButton: IDC_ADDCONNECTION</value>
+							<value name="id" type="Integer">146856688</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146834768</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCAddconnectionClick</value>
+							<value name="proxy-Id name" type="string">IDC_ADDCONNECTION</value>
+							<value name="proxy-Id value" type="Integer">10006</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_addconnection</value>
+							<value name="proxy-Bitmap" type="string">res/connect.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID000025">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">146870464</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146828304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">30/0/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Left</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">FALSE</value>
+						<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID000026">
+							<value name="title" type="string">wxBitmapButton: IDC_CONNECTCATCH</value>
+							<value name="id" type="Integer">146841568</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146870464</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCConnectcatchClick</value>
+							<value name="proxy-Id name" type="string">IDC_CONNECTCATCH</value>
+							<value name="proxy-Id value" type="Integer">10007</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_connectcatch</value>
+							<value name="proxy-Bitmap" type="string">res/connect.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">Connect to selected host</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000027">
+							<value name="title" type="string">wxBitmapButton: IDC_REMOVECONNECTION</value>
+							<value name="id" type="Integer">146890576</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146870464</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCRemoveconnectionClick</value>
+							<value name="proxy-Id name" type="string">IDC_REMOVECONNECTION</value>
+							<value name="proxy-Id value" type="Integer">10014</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_removeconnection</value>
+							<value name="proxy-Bitmap" type="string">res/stopdl.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">Disconnect from selected host</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000028">
+							<value name="title" type="string">wxBitmapButton: IDC_REMOVECATCH</value>
+							<value name="id" type="Integer">146904352</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146870464</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCRemovecatchClick</value>
+							<value name="proxy-Id name" type="string">IDC_REMOVECATCH</value>
+							<value name="proxy-Id value" type="Integer">10015</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_removecatch</value>
+							<value name="proxy-Bitmap" type="string">res/disconnect.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">Disconnect and remove selected host</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000029">
+							<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+							<value name="id" type="Integer">146917984</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">statictext</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146870464</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbStaticTextProxy</value>
+							<value name="proxy-Id name" type="string">wxID_STATIC</value>
+							<value name="proxy-Id value" type="Integer">5105</value>
+							<value name="proxy-Class" type="string">wxStaticText</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Maintain</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00002a">
+							<value name="title" type="string">wxTextCtrl: IDC_NUMCONUP</value>
+							<value name="id" type="Integer">146934088</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">textctrl</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146870464</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_TEXT_UPDATED|OnCNumconupUpdated</value>
+							<value name="proxy-Id name" type="string">IDC_NUMCONUP</value>
+							<value name="proxy-Id value" type="Integer">1036</value>
+							<value name="proxy-Class" type="string">wxTextCtrl</value>
+							<value name="proxy-Member variable name" type="string">m_num_con_up</value>
+							<value name="proxy-Initial value" type="string">1</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxTE_MULTILINE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_ENTER" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+							<value name="proxy-wxTE_READONLY" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+							<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxTE_WORDWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">30</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00002b">
+							<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+							<value name="id" type="Integer">146954240</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">statictext</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">146870464</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">30/0/2005</value>
+							<value name="proxy-type" type="string">wbStaticTextProxy</value>
+							<value name="proxy-Id name" type="string">wxID_STATIC</value>
+							<value name="proxy-Id value" type="Integer">5105</value>
+							<value name="proxy-Class" type="string">wxStaticText</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">connections</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID00002c">
+						<value name="title" type="string">wxListCtrl: ID_NS_HOST_LISTCTRL</value>
+						<value name="id" type="Integer">146970152</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">listctrl</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">146828304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">30/0/2005</value>
+						<value name="proxy-type" type="string">wbListCtrlProxy</value>
+						<value name="event-handler-0" type="string">wxEVT_COMMAND_LIST_ITEM_SELECTED|OnNsHostListctrlSelected</value>
+						<value name="event-handler-1" type="string">wxEVT_COMMAND_LIST_ITEM_DESELECTED|OnNsHostListctrlDeselected</value>
+						<value name="event-handler-2" type="string">wxEVT_COMMAND_LIST_ITEM_ACTIVATED|OnNsHostListctrlItemActivated</value>
+						<value name="proxy-Id name" type="string">ID_NS_HOST_LISTCTRL</value>
+						<value name="proxy-Id value" type="Integer">10017</value>
+						<value name="proxy-Class" type="string">wxListCtrl</value>
+						<value name="proxy-Member variable name" type="string">m_hostlist</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxLC_LIST " type="bool">FALSE</value>
+						<value name="proxy-wxLC_REPORT" type="bool">TRUE</value>
+						<value name="proxy-wxLC_ICON" type="bool">FALSE</value>
+						<value name="proxy-wxLC_SMALL_ICON" type="bool">FALSE</value>
+						<value name="proxy-wxLC_VIRTUAL" type="bool">FALSE</value>
+						<value name="proxy-wxLC_ALIGN_TOP" type="bool">FALSE</value>
+						<value name="proxy-wxLC_ALIGN_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxLC_AUTOARRANGE" type="bool">FALSE</value>
+						<value name="proxy-wxLC_USER_TEXT" type="bool">FALSE</value>
+						<value name="proxy-wxLC_EDIT_LABELS" type="bool">FALSE</value>
+						<value name="proxy-wxLC_NO_HEADER" type="bool">FALSE</value>
+						<value name="proxy-wxLC_SINGLE_SEL" type="bool">TRUE</value>
+						<value name="proxy-wxLC_SORT_ASCENDING" type="bool">FALSE</value>
+						<value name="proxy-wxLC_SORT_DESCENDING" type="bool">FALSE</value>
+						<value name="proxy-wxLC_HRULES" type="bool">FALSE</value>
+						<value name="proxy-wxLC_VRULES" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">TRUE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">400</value>
+						<value name="proxy-Height" type="Integer">170</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">9</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+				</path>
+			</path>
+			<path name="ID00002d">
+				<value name="title" type="string">Browser</value>
+				<value name="id" type="Integer">146601344</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">dialog</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">1/1/2005</value>
+				<value name="proxy-type" type="string">wbDialogProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="proxy-Id name" type="string">ID_BROWSER</value>
+				<value name="proxy-Id value" type="Integer">10000</value>
+				<value name="proxy-Class" type="string">WxBrowser</value>
+				<value name="proxy-Base class" type="string">wxDialog</value>
+				<value name="proxy-Window kind" type="string">wxDialog</value>
+				<value name="proxy-Implementation filename" type="string">wxbrowser.cpp</value>
+				<value name="proxy-Header filename" type="string">wxbrowser.h</value>
+				<value name="proxy-XRC filename" type="string"></value>
+				<value name="proxy-Title" type="string">Browser</value>
+				<value name="proxy-Centre" type="bool">TRUE</value>
+				<value name="proxy-Icon" type="string">res/browse.ico.gif</value>
+				<value name="proxy-Dialog units" type="bool">FALSE</value>
+				<value name="proxy-Help text" type="string"></value>
+				<value name="proxy-Tooltip text" type="string"></value>
+				<value name="proxy-Background colour" type="string"></value>
+				<value name="proxy-Foreground colour" type="string"></value>
+				<value name="proxy-Font" type="string"></value>
+				<value name="proxy-Hidden" type="bool">FALSE</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<value name="proxy-wxDEFAULT_DIALOG_STYLE" type="bool">TRUE</value>
+				<value name="proxy-wxCAPTION" type="bool">TRUE</value>
+				<value name="proxy-wxRESIZE_BORDER" type="bool">TRUE</value>
+				<value name="proxy-wxTHICK_FRAME" type="bool">FALSE</value>
+				<value name="proxy-wxSYSTEM_MENU" type="bool">TRUE</value>
+				<value name="proxy-wxSTAY_ON_TOP" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_NO_PARENT" type="bool">FALSE</value>
+				<value name="proxy-wxCLOSE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMAXIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMINIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_MODAL" type="bool">FALSE</value>
+				<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+				<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+				<value name="proxy-wxTAB_TRAVERSAL" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_TRANSIENT" type="bool">FALSE</value>
+				<value name="proxy-Custom styles" type="string"></value>
+				<value name="proxy-wxDIALOG_EX_CONTEXTHELP" type="bool">FALSE</value>
+				<value name="proxy-Fit to content" type="bool">TRUE</value>
+				<value name="proxy-X" type="Integer">-1</value>
+				<value name="proxy-Y" type="Integer">-1</value>
+				<value name="proxy-Width" type="Integer">-1</value>
+				<value name="proxy-Height" type="Integer">-1</value>
+				<value name="proxy-Event sources" type="string">IDM_SEARCHRES_POPUP,IDM_SEARCHRES_USER_POPUP,IDM_SEARCHRES_FILE_POPUP,IDM_SEARCHRES_USER_POPUP</value>
+				<path name="ID00002e">
+					<value name="title" type="string">wxBoxSizer V</value>
+					<value name="id" type="Integer">147006176</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">sizer</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">146601344</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+					<value name="proxy-Orientation" type="string">Vertical</value>
+					<value name="proxy-Member variable name" type="string"></value>
+					<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+					<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+					<path name="ID00002f">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">147012824</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">147006176</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">1/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID000030">
+							<value name="title" type="string">wxBitmapButton: ID_SRCH_USERLIST</value>
+							<value name="id" type="Integer">147020056</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147012824</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">1/1/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnSrchUserlistClick</value>
+							<value name="proxy-Id name" type="string">ID_SRCH_USERLIST</value>
+							<value name="proxy-Id value" type="Integer">10001</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_srch_userlist</value>
+							<value name="proxy-Bitmap" type="string">res/allusers.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000031">
+							<value name="title" type="string">wxBitmapButton: IDC_GOPARENT</value>
+							<value name="id" type="Integer">147033808</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147012824</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">1/1/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCGoparentClick</value>
+							<value name="proxy-Id name" type="string">IDC_GOPARENT</value>
+							<value name="proxy-Id value" type="Integer">1105</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_goparent</value>
+							<value name="proxy-Bitmap" type="string">res/updir.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000032">
+							<value name="title" type="string">wxBitmapButton: IDC_BACK</value>
+							<value name="id" type="Integer">147047584</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147012824</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">1/1/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCBackClick</value>
+							<value name="proxy-Id name" type="string">IDC_BACK</value>
+							<value name="proxy-Id value" type="Integer">1124</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_back</value>
+							<value name="proxy-Bitmap" type="string">res/backward.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000033">
+							<value name="title" type="string">wxBitmapButton: IDC_BACK2</value>
+							<value name="id" type="Integer">147061360</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147012824</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCBack2Click</value>
+							<value name="proxy-Id name" type="string">IDC_BACK2</value>
+							<value name="proxy-Id value" type="Integer">10042</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_back2</value>
+							<value name="proxy-Bitmap" type="string">res/more2.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Expand</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">FALSE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000034">
+							<value name="title" type="string">wxBitmapButton: IDC_FORWARD</value>
+							<value name="id" type="Integer">147075232</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147012824</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">1/1/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCForwardClick</value>
+							<value name="proxy-Id name" type="string">IDC_FORWARD</value>
+							<value name="proxy-Id value" type="Integer">1107</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_forward</value>
+							<value name="proxy-Bitmap" type="string">res/forward.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000035">
+							<value name="title" type="string">wxBitmapButton: IDC_FORWARD2</value>
+							<value name="id" type="Integer">147088856</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147012824</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCForward2Click</value>
+							<value name="proxy-Id name" type="string">IDC_FORWARD2</value>
+							<value name="proxy-Id value" type="Integer">10043</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_forward2</value>
+							<value name="proxy-Bitmap" type="string">res/more2.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Expand</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">FALSE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000036">
+							<value name="title" type="string">wxComboBox: IDC_SEARCHTEXT</value>
+							<value name="id" type="Integer">147102600</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">combobox</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147012824</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">1/1/2005</value>
+							<value name="proxy-type" type="string">wbComboBoxProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_COMBOBOX_SELECTED|OnCSearchtextSelected</value>
+							<value name="event-handler-1" type="string">wxEVT_COMMAND_TEXT_UPDATED|OnCSearchtextUpdated</value>
+							<value name="proxy-Id name" type="string">IDC_SEARCHTEXT</value>
+							<value name="proxy-Id value" type="Integer">1007</value>
+							<value name="proxy-Class" type="string">wxComboBox</value>
+							<value name="proxy-Member variable name" type="string">m_searchtext</value>
+							<value name="proxy-Strings" type="string"></value>
+							<value name="proxy-Initial value" type="string"></value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxCB_SIMPLE" type="bool">FALSE</value>
+							<value name="proxy-wxCB_DROPDOWN" type="bool">TRUE</value>
+							<value name="proxy-wxCB_READONLY" type="bool">FALSE</value>
+							<value name="proxy-wxCB_SORT" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">9</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000037">
+							<value name="title" type="string">wxBitmapButton: IDC_SEARCH</value>
+							<value name="id" type="Integer">147116808</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147012824</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">1/1/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCSearchClick</value>
+							<value name="proxy-Id name" type="string">IDC_SEARCH</value>
+							<value name="proxy-Id value" type="Integer">1006</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_search</value>
+							<value name="proxy-Bitmap" type="string">res/search.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID000038">
+						<value name="title" type="string">wxPanel: IDC_SEARCHRES_PANEL</value>
+						<value name="id" type="Integer">147019752</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">panel</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">147006176</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">8/1/2005</value>
+						<value name="proxy-type" type="string">wbPanelProxy</value>
+						<value name="proxy-Id name" type="string">IDC_SEARCHRES_PANEL</value>
+						<value name="proxy-Id value" type="Integer">10009</value>
+						<value name="proxy-Class" type="string">wxPanel</value>
+						<value name="proxy-Base class" type="string">wxPanel</value>
+						<value name="proxy-Member variable name" type="string">m_searchres_panel</value>
+						<value name="proxy-External implementation" type="bool">FALSE</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-wxNO_BORDER" type="bool">TRUE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+						<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+						<value name="proxy-wxVSCROLL" type="bool">FALSE</value>
+						<value name="proxy-wxTAB_TRAVERSAL" type="bool">TRUE</value>
+						<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+						<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-Fit to content" type="bool">TRUE</value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">670</value>
+						<value name="proxy-Height" type="Integer">450</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">1</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+						<value name="proxy-Event sources" type="string"></value>
+					</path>
+					<path name="ID000039">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">147147384</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">147006176</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">1/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID00003a">
+							<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+							<value name="id" type="Integer">147153504</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">statictext</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147147384</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">1/1/2005</value>
+							<value name="proxy-type" type="string">wbStaticTextProxy</value>
+							<value name="proxy-Id name" type="string">wxID_STATIC</value>
+							<value name="proxy-Id value" type="Integer">5105</value>
+							<value name="proxy-Class" type="string">wxStaticText</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Filter search results</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00003b">
+							<value name="title" type="string">wxTextCtrl: IDC_EDIT_FILTER</value>
+							<value name="id" type="Integer">147170448</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">textctrl</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147147384</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">1/1/2005</value>
+							<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_TEXT_UPDATED|OnCEditFilterUpdated</value>
+							<value name="event-handler-1" type="string">wxEVT_COMMAND_TEXT_ENTER|OnCEditFilterEnter</value>
+							<value name="proxy-Id name" type="string">IDC_EDIT_FILTER</value>
+							<value name="proxy-Id value" type="Integer">10026</value>
+							<value name="proxy-Class" type="string">wxTextCtrl</value>
+							<value name="proxy-Member variable name" type="string">m_edit_filter</value>
+							<value name="proxy-Initial value" type="string"></value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxTE_MULTILINE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_ENTER" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+							<value name="proxy-wxTE_READONLY" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+							<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxTE_WORDWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00003c">
+							<value name="title" type="string">wxStaticText: ID_SEARCH_DATA</value>
+							<value name="id" type="Integer">147190256</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">statictext</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147147384</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">1/1/2005</value>
+							<value name="proxy-type" type="string">wbStaticTextProxy</value>
+							<value name="proxy-Id name" type="string">ID_SEARCH_DATA</value>
+							<value name="proxy-Id value" type="Integer">10027</value>
+							<value name="proxy-Class" type="string">wxStaticText</value>
+							<value name="proxy-Member variable name" type="string">m_searchstats</value>
+							<value name="proxy-Label" type="string">Ready</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string">929292</value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">9</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+				</path>
+			</path>
+			<path name="ID00003d">
+				<value name="title" type="string">Transfers</value>
+				<value name="id" type="Integer">146918208</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">dialog</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">3/1/2005</value>
+				<value name="proxy-type" type="string">wbDialogProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="event-handler-0" type="string">wxEVT_CLOSE_WINDOW|OnCloseWindow</value>
+				<value name="proxy-Id name" type="string">ID_XFERS</value>
+				<value name="proxy-Id value" type="Integer">10002</value>
+				<value name="proxy-Class" type="string">WxXfers</value>
+				<value name="proxy-Base class" type="string">wxDialog</value>
+				<value name="proxy-Window kind" type="string">wxDialog</value>
+				<value name="proxy-Implementation filename" type="string">wxxfers.cpp</value>
+				<value name="proxy-Header filename" type="string">wxxfers.h</value>
+				<value name="proxy-XRC filename" type="string"></value>
+				<value name="proxy-Title" type="string">Transfers</value>
+				<value name="proxy-Centre" type="bool">TRUE</value>
+				<value name="proxy-Icon" type="string">res/transfers.ico.gif</value>
+				<value name="proxy-Dialog units" type="bool">FALSE</value>
+				<value name="proxy-Help text" type="string"></value>
+				<value name="proxy-Tooltip text" type="string"></value>
+				<value name="proxy-Background colour" type="string"></value>
+				<value name="proxy-Foreground colour" type="string"></value>
+				<value name="proxy-Font" type="string"></value>
+				<value name="proxy-Hidden" type="bool">FALSE</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<value name="proxy-wxDEFAULT_DIALOG_STYLE" type="bool">TRUE</value>
+				<value name="proxy-wxCAPTION" type="bool">TRUE</value>
+				<value name="proxy-wxRESIZE_BORDER" type="bool">TRUE</value>
+				<value name="proxy-wxTHICK_FRAME" type="bool">FALSE</value>
+				<value name="proxy-wxSYSTEM_MENU" type="bool">TRUE</value>
+				<value name="proxy-wxSTAY_ON_TOP" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_NO_PARENT" type="bool">FALSE</value>
+				<value name="proxy-wxCLOSE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMAXIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMINIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_MODAL" type="bool">FALSE</value>
+				<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+				<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+				<value name="proxy-wxTAB_TRAVERSAL" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_TRANSIENT" type="bool">FALSE</value>
+				<value name="proxy-Custom styles" type="string"></value>
+				<value name="proxy-wxDIALOG_EX_CONTEXTHELP" type="bool">FALSE</value>
+				<value name="proxy-Fit to content" type="bool">TRUE</value>
+				<value name="proxy-X" type="Integer">-1</value>
+				<value name="proxy-Y" type="Integer">-1</value>
+				<value name="proxy-Width" type="Integer">550</value>
+				<value name="proxy-Height" type="Integer">300</value>
+				<value name="proxy-Event sources" type="string">IDM_DL_POPUP,IDM_DLQ_POPUP</value>
+				<path name="ID00003e">
+					<value name="title" type="string">wxBoxSizer V</value>
+					<value name="id" type="Integer">147222808</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">sizer</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">146918208</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+					<value name="proxy-Orientation" type="string">Vertical</value>
+					<value name="proxy-Member variable name" type="string"></value>
+					<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+					<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+					<path name="ID00003f">
+						<value name="title" type="string">wxNotebook: ID_NOTEBOOK</value>
+						<value name="id" type="Integer">147229944</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">notebook</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">147222808</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">3/1/2005</value>
+						<value name="proxy-type" type="string">wbNotebookProxy</value>
+						<value name="proxy-Id name" type="string">ID_NOTEBOOK</value>
+						<value name="proxy-Id value" type="Integer">10016</value>
+						<value name="proxy-Class" type="string">wxNotebook</value>
+						<value name="proxy-Member variable name" type="string">m_notebook</value>
+						<value name="proxy-Notebook sizer" type="bool">FALSE</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxNB_TOP" type="bool">FALSE</value>
+						<value name="proxy-wxNB_BOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxNB_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxNB_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxNB_FIXEDWIDTH" type="bool">FALSE</value>
+						<value name="proxy-wxNB_MULTILINE" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+						<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">1</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+						<path name="ID000040">
+							<value name="title" type="string">wxPanel: ID_DL_PANEL</value>
+							<value name="id" type="Integer">147249248</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">panel</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147229944</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbPanelProxy</value>
+							<value name="proxy-Id name" type="string">ID_DL_PANEL</value>
+							<value name="proxy-Id value" type="Integer">10021</value>
+							<value name="proxy-Class" type="string">wxPanel</value>
+							<value name="proxy-Tab label" type="string">Downloads</value>
+							<value name="proxy-Tab icon" type="string"></value>
+							<value name="proxy-Base class" type="string">wxPanel</value>
+							<value name="proxy-Member variable name" type="string">m_dl_panel</value>
+							<value name="proxy-External implementation" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">TRUE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+							<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxVSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxTAB_TRAVERSAL" type="bool">TRUE</value>
+							<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+							<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-Fit to content" type="bool">TRUE</value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">1</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+							<value name="proxy-Event sources" type="string"></value>
+							<path name="ID000041">
+								<value name="title" type="string">wxBoxSizer V</value>
+								<value name="id" type="Integer">147267672</value>
+								<value name="type" type="string">dialog-control-document</value>
+								<value name="filename" type="string"></value>
+								<value name="icon-name" type="string">sizer</value>
+								<value name="is-transient" type="Integer">0</value>
+								<value name="owns-file" type="Integer">1</value>
+								<value name="title-mode" type="Integer">0</value>
+								<value name="parent" type="Integer">147249248</value>
+								<value name="locked" type="Integer">0</value>
+								<value name="created" type="string">3/1/2005</value>
+								<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+								<value name="proxy-Orientation" type="string">Vertical</value>
+								<value name="proxy-Member variable name" type="string"></value>
+								<value name="proxy-AlignH" type="string">Centre</value>
+								<value name="proxy-AlignV" type="string">Centre</value>
+								<value name="proxy-Stretch factor" type="Integer">0</value>
+								<value name="proxy-Border" type="Integer">5</value>
+								<value name="proxy-wxLEFT" type="bool">TRUE</value>
+								<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+								<value name="proxy-wxTOP" type="bool">TRUE</value>
+								<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+								<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+								<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+								<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+								<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+								<path name="ID000042">
+									<value name="title" type="string">wxListCtrl: IDD_XFERS</value>
+									<value name="id" type="Integer">147277072</value>
+									<value name="type" type="string">dialog-control-document</value>
+									<value name="filename" type="string"></value>
+									<value name="icon-name" type="string">listctrl</value>
+									<value name="is-transient" type="Integer">0</value>
+									<value name="owns-file" type="Integer">1</value>
+									<value name="title-mode" type="Integer">0</value>
+									<value name="parent" type="Integer">147267672</value>
+									<value name="locked" type="Integer">0</value>
+									<value name="created" type="string">3/1/2005</value>
+									<value name="proxy-type" type="string">wbListCtrlProxy</value>
+									<value name="event-handler-0" type="string">wxEVT_COMMAND_LIST_ITEM_ACTIVATED|OnDXfersItemActivated</value>
+									<value name="event-handler-1" type="string">wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK|OnDXfersRightClick</value>
+									<value name="proxy-Id name" type="string">IDD_XFERS</value>
+									<value name="proxy-Id value" type="Integer">10022</value>
+									<value name="proxy-Class" type="string">wxListCtrl</value>
+									<value name="proxy-Member variable name" type="string">m_xfers</value>
+									<value name="proxy-Help text" type="string"></value>
+									<value name="proxy-Tooltip text" type="string"></value>
+									<value name="proxy-Background colour" type="string"></value>
+									<value name="proxy-Foreground colour" type="string"></value>
+									<value name="proxy-Font" type="string"></value>
+									<value name="proxy-Hidden" type="bool">FALSE</value>
+									<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+									<value name="proxy-Data variable" type="string"></value>
+									<value name="proxy-Data validator" type="string"></value>
+									<value name="proxy-wxLC_LIST " type="bool">FALSE</value>
+									<value name="proxy-wxLC_REPORT" type="bool">TRUE</value>
+									<value name="proxy-wxLC_ICON" type="bool">FALSE</value>
+									<value name="proxy-wxLC_SMALL_ICON" type="bool">FALSE</value>
+									<value name="proxy-wxLC_VIRTUAL" type="bool">FALSE</value>
+									<value name="proxy-wxLC_ALIGN_TOP" type="bool">FALSE</value>
+									<value name="proxy-wxLC_ALIGN_LEFT" type="bool">FALSE</value>
+									<value name="proxy-wxLC_AUTOARRANGE" type="bool">FALSE</value>
+									<value name="proxy-wxLC_USER_TEXT" type="bool">FALSE</value>
+									<value name="proxy-wxLC_EDIT_LABELS" type="bool">FALSE</value>
+									<value name="proxy-wxLC_NO_HEADER" type="bool">FALSE</value>
+									<value name="proxy-wxLC_SINGLE_SEL" type="bool">FALSE</value>
+									<value name="proxy-wxLC_SORT_ASCENDING" type="bool">FALSE</value>
+									<value name="proxy-wxLC_SORT_DESCENDING" type="bool">FALSE</value>
+									<value name="proxy-wxLC_HRULES" type="bool">FALSE</value>
+									<value name="proxy-wxLC_VRULES" type="bool">FALSE</value>
+									<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+									<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+									<value name="proxy-Custom styles" type="string"></value>
+									<value name="proxy-X" type="Integer">-1</value>
+									<value name="proxy-Y" type="Integer">-1</value>
+									<value name="proxy-Width" type="Integer">100</value>
+									<value name="proxy-Height" type="Integer">80</value>
+									<value name="proxy-AlignH" type="string">Expand</value>
+									<value name="proxy-AlignV" type="string">Centre</value>
+									<value name="proxy-Stretch factor" type="Integer">2</value>
+									<value name="proxy-Border" type="Integer">5</value>
+									<value name="proxy-wxLEFT" type="bool">TRUE</value>
+									<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+									<value name="proxy-wxTOP" type="bool">TRUE</value>
+									<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+									<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+									<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+									<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+									<value name="proxy-Custom arguments" type="string"></value>
+									<value name="proxy-Custom ctor arguments" type="string"></value>
+								</path>
+								<path name="ID000043">
+									<value name="title" type="string">wxBoxSizer H</value>
+									<value name="id" type="Integer">147297192</value>
+									<value name="type" type="string">dialog-control-document</value>
+									<value name="filename" type="string"></value>
+									<value name="icon-name" type="string">sizer</value>
+									<value name="is-transient" type="Integer">0</value>
+									<value name="owns-file" type="Integer">1</value>
+									<value name="title-mode" type="Integer">0</value>
+									<value name="parent" type="Integer">147267672</value>
+									<value name="locked" type="Integer">0</value>
+									<value name="created" type="string">3/1/2005</value>
+									<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+									<value name="proxy-Orientation" type="string">Horizontal</value>
+									<value name="proxy-Member variable name" type="string"></value>
+									<value name="proxy-AlignH" type="string">Left</value>
+									<value name="proxy-AlignV" type="string">Centre</value>
+									<value name="proxy-Stretch factor" type="Integer">0</value>
+									<value name="proxy-Border" type="Integer">5</value>
+									<value name="proxy-wxLEFT" type="bool">TRUE</value>
+									<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+									<value name="proxy-wxTOP" type="bool">TRUE</value>
+									<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+									<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+									<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+									<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+									<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+									<path name="ID000044">
+										<value name="title" type="string">wxChoice: IDC_AUTOCLEAR</value>
+										<value name="id" type="Integer">147303656</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">choice</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">147297192</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbChoiceProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_CHOICE_SELECTED|OnCAutoclearSelected</value>
+										<value name="proxy-Id name" type="string">IDC_AUTOCLEAR</value>
+										<value name="proxy-Id value" type="Integer">10032</value>
+										<value name="proxy-Class" type="string">wxChoice</value>
+										<value name="proxy-Member variable name" type="string">m_autoclear</value>
+										<value name="proxy-Strings" type="string">Do not clear completed downloads|Clear when complete</value>
+										<value name="proxy-Initial value" type="string">Do not clear completed downloads</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string"></value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-Data variable" type="string"></value>
+										<value name="proxy-Data validator" type="string"></value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID000045">
+										<value name="title" type="string">wxChoice: IDC_AUTORESUME</value>
+										<value name="id" type="Integer">147316568</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">choice</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">147297192</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbChoiceProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_CHOICE_SELECTED|OnCAutoresumeSelected</value>
+										<value name="proxy-Id name" type="string">IDC_AUTORESUME</value>
+										<value name="proxy-Id value" type="Integer">10033</value>
+										<value name="proxy-Class" type="string">wxChoice</value>
+										<value name="proxy-Member variable name" type="string">m_autoresume</value>
+										<value name="proxy-Strings" type="string">Auto-resume downloads|Do not auto-resume</value>
+										<value name="proxy-Initial value" type="string">Auto-resume downloads</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string"></value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-Data variable" type="string"></value>
+										<value name="proxy-Data validator" type="string"></value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+								</path>
+								<path name="ID000046">
+									<value name="title" type="string">wxBoxSizer H</value>
+									<value name="id" type="Integer">147303328</value>
+									<value name="type" type="string">dialog-control-document</value>
+									<value name="filename" type="string"></value>
+									<value name="icon-name" type="string">sizer</value>
+									<value name="is-transient" type="Integer">0</value>
+									<value name="owns-file" type="Integer">1</value>
+									<value name="title-mode" type="Integer">0</value>
+									<value name="parent" type="Integer">147267672</value>
+									<value name="locked" type="Integer">0</value>
+									<value name="created" type="string">3/1/2005</value>
+									<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+									<value name="proxy-Orientation" type="string">Horizontal</value>
+									<value name="proxy-Member variable name" type="string"></value>
+									<value name="proxy-AlignH" type="string">Left</value>
+									<value name="proxy-AlignV" type="string">Centre</value>
+									<value name="proxy-Stretch factor" type="Integer">0</value>
+									<value name="proxy-Border" type="Integer">5</value>
+									<value name="proxy-wxLEFT" type="bool">TRUE</value>
+									<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+									<value name="proxy-wxTOP" type="bool">FALSE</value>
+									<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+									<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+									<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+									<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+									<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+									<path name="ID000047">
+										<value name="title" type="string">wxBitmapButton: IDC_RESUME</value>
+										<value name="id" type="Integer">147335672</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">bitmapbutton</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">147303328</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCResumeClick</value>
+										<value name="proxy-Id name" type="string">IDC_RESUME</value>
+										<value name="proxy-Id value" type="Integer">10034</value>
+										<value name="proxy-Class" type="string">wxBitmapButton</value>
+										<value name="proxy-Member variable name" type="string">m_resume</value>
+										<value name="proxy-Bitmap" type="string">res/dlnow.ico.gif</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Resume selected download(s)</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+										<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+										<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID000048">
+										<value name="title" type="string">wxBitmapButton: IDC_ABORTSEL</value>
+										<value name="id" type="Integer">147349584</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">bitmapbutton</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">147303328</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCAbortselClick</value>
+										<value name="proxy-Id name" type="string">IDC_ABORTSEL</value>
+										<value name="proxy-Id value" type="Integer">10029</value>
+										<value name="proxy-Class" type="string">wxBitmapButton</value>
+										<value name="proxy-Member variable name" type="string">m_abortsel</value>
+										<value name="proxy-Bitmap" type="string">res/stopdl.ico.gif</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Abort selected download(s)</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+										<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+										<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID000049">
+										<value name="title" type="string">wxBitmapButton: IDC_CLEARCOMP</value>
+										<value name="id" type="Integer">147363240</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">bitmapbutton</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">147303328</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCClearcompClick</value>
+										<value name="proxy-Id name" type="string">IDC_CLEARCOMP</value>
+										<value name="proxy-Id value" type="Integer">10030</value>
+										<value name="proxy-Class" type="string">wxBitmapButton</value>
+										<value name="proxy-Member variable name" type="string">m_clearcomp</value>
+										<value name="proxy-Bitmap" type="string">res/clear-completed2.ico.gif</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Clear completed download(s)</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+										<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+										<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID00004a">
+										<value name="title" type="string">wxBitmapButton: IDC_CLEARCOMP3</value>
+										<value name="id" type="Integer">147377048</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">bitmapbutton</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">147303328</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCClearcomp3Click</value>
+										<value name="proxy-Id name" type="string">IDC_CLEARCOMP3</value>
+										<value name="proxy-Id value" type="Integer">10031</value>
+										<value name="proxy-Class" type="string">wxBitmapButton</value>
+										<value name="proxy-Member variable name" type="string">m_clearcomp3</value>
+										<value name="proxy-Bitmap" type="string">res/clear-inactive2.ico.gif</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Clear inactive download(s)</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+										<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+										<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID00004b">
+										<value name="title" type="string">wxBitmapButton: IDC_CLEARALL</value>
+										<value name="id" type="Integer">147390856</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">bitmapbutton</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">147303328</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCClearallClick</value>
+										<value name="proxy-Id name" type="string">IDC_CLEARALL</value>
+										<value name="proxy-Id value" type="Integer">10036</value>
+										<value name="proxy-Class" type="string">wxBitmapButton</value>
+										<value name="proxy-Member variable name" type="string">m_clearall</value>
+										<value name="proxy-Bitmap" type="string">res/clear-all2.ico.gif</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Clear all download(s)</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+										<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+										<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID00004c">
+										<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+										<value name="id" type="Integer">147404784</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">statictext</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">147303328</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbStaticTextProxy</value>
+										<value name="proxy-Id name" type="string">wxID_STATIC</value>
+										<value name="proxy-Id value" type="Integer">5105</value>
+										<value name="proxy-Class" type="string">wxStaticText</value>
+										<value name="proxy-Member variable name" type="string"></value>
+										<value name="proxy-Label" type="string">Max simultaneous</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string"></value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-Data variable" type="string"></value>
+										<value name="proxy-Data validator" type="string"></value>
+										<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+										<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+										<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID00004d">
+										<value name="title" type="string">wxTextCtrl: IDC_MAXSIMULDL</value>
+										<value name="id" type="Integer">147421792</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">textctrl</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">147303328</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_TEXT_UPDATED|OnCMaxsimuldlUpdated</value>
+										<value name="event-handler-1" type="string">wxEVT_COMMAND_TEXT_ENTER|OnCMaxsimuldlEnter</value>
+										<value name="proxy-Id name" type="string">IDC_MAXSIMULDL</value>
+										<value name="proxy-Id value" type="Integer">10037</value>
+										<value name="proxy-Class" type="string">wxTextCtrl</value>
+										<value name="proxy-Member variable name" type="string">m_maxsimuldl</value>
+										<value name="proxy-Initial value" type="string">1</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Max simultaneous downloads</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-Data variable" type="string"></value>
+										<value name="proxy-Data validator" type="string"></value>
+										<value name="proxy-wxTE_MULTILINE" type="bool">FALSE</value>
+										<value name="proxy-wxTE_PROCESS_ENTER" type="bool">FALSE</value>
+										<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+										<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+										<value name="proxy-wxTE_READONLY" type="bool">FALSE</value>
+										<value name="proxy-wxTE_RICH" type="bool">FALSE</value>
+										<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+										<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+										<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+										<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+										<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+										<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+										<value name="proxy-wxTE_WORDWRAP" type="bool">FALSE</value>
+										<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">40</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+								</path>
+							</path>
+						</path>
+						<path name="ID00004e">
+							<value name="title" type="string">wxPanel: ID_DLQUEUE_PANEL</value>
+							<value name="id" type="Integer">147248920</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">panel</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">147229944</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbPanelProxy</value>
+							<value name="proxy-Id name" type="string">ID_DLQUEUE_PANEL</value>
+							<value name="proxy-Id value" type="Integer">10023</value>
+							<value name="proxy-Class" type="string">wxPanel</value>
+							<value name="proxy-Tab label" type="string">Download Queue</value>
+							<value name="proxy-Tab icon" type="string"></value>
+							<value name="proxy-Base class" type="string">wxPanel</value>
+							<value name="proxy-Member variable name" type="string">m_dlqueue_panel</value>
+							<value name="proxy-External implementation" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">TRUE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+							<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxVSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxTAB_TRAVERSAL" type="bool">TRUE</value>
+							<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+							<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-Fit to content" type="bool">TRUE</value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">1</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+							<value name="proxy-Event sources" type="string"></value>
+							<path name="ID00004f">
+								<value name="title" type="string">wxBoxSizer V</value>
+								<value name="id" type="Integer">156471520</value>
+								<value name="type" type="string">dialog-control-document</value>
+								<value name="filename" type="string"></value>
+								<value name="icon-name" type="string">sizer</value>
+								<value name="is-transient" type="Integer">0</value>
+								<value name="owns-file" type="Integer">1</value>
+								<value name="title-mode" type="Integer">0</value>
+								<value name="parent" type="Integer">147248920</value>
+								<value name="locked" type="Integer">0</value>
+								<value name="created" type="string">3/1/2005</value>
+								<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+								<value name="proxy-Orientation" type="string">Vertical</value>
+								<value name="proxy-Member variable name" type="string"></value>
+								<value name="proxy-AlignH" type="string">Centre</value>
+								<value name="proxy-AlignV" type="string">Centre</value>
+								<value name="proxy-Stretch factor" type="Integer">0</value>
+								<value name="proxy-Border" type="Integer">5</value>
+								<value name="proxy-wxLEFT" type="bool">TRUE</value>
+								<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+								<value name="proxy-wxTOP" type="bool">TRUE</value>
+								<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+								<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+								<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+								<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+								<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+								<path name="ID000050">
+									<value name="title" type="string">wxListCtrl: ID_RECVLISTQ</value>
+									<value name="id" type="Integer">156480224</value>
+									<value name="type" type="string">dialog-control-document</value>
+									<value name="filename" type="string"></value>
+									<value name="icon-name" type="string">listctrl</value>
+									<value name="is-transient" type="Integer">0</value>
+									<value name="owns-file" type="Integer">1</value>
+									<value name="title-mode" type="Integer">0</value>
+									<value name="parent" type="Integer">156471520</value>
+									<value name="locked" type="Integer">0</value>
+									<value name="created" type="string">3/1/2005</value>
+									<value name="proxy-type" type="string">wbListCtrlProxy</value>
+									<value name="event-handler-0" type="string">wxEVT_COMMAND_LIST_ITEM_ACTIVATED|OnRecvlistqItemActivated</value>
+									<value name="event-handler-1" type="string">wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK|OnRecvlistqRightClick</value>
+									<value name="proxy-Id name" type="string">ID_RECVLISTQ</value>
+									<value name="proxy-Id value" type="Integer">10024</value>
+									<value name="proxy-Class" type="string">wxListCtrl</value>
+									<value name="proxy-Member variable name" type="string">m_recvlistq</value>
+									<value name="proxy-Help text" type="string"></value>
+									<value name="proxy-Tooltip text" type="string"></value>
+									<value name="proxy-Background colour" type="string"></value>
+									<value name="proxy-Foreground colour" type="string"></value>
+									<value name="proxy-Font" type="string"></value>
+									<value name="proxy-Hidden" type="bool">FALSE</value>
+									<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+									<value name="proxy-Data variable" type="string"></value>
+									<value name="proxy-Data validator" type="string"></value>
+									<value name="proxy-wxLC_LIST " type="bool">FALSE</value>
+									<value name="proxy-wxLC_REPORT" type="bool">TRUE</value>
+									<value name="proxy-wxLC_ICON" type="bool">FALSE</value>
+									<value name="proxy-wxLC_SMALL_ICON" type="bool">FALSE</value>
+									<value name="proxy-wxLC_VIRTUAL" type="bool">FALSE</value>
+									<value name="proxy-wxLC_ALIGN_TOP" type="bool">FALSE</value>
+									<value name="proxy-wxLC_ALIGN_LEFT" type="bool">FALSE</value>
+									<value name="proxy-wxLC_AUTOARRANGE" type="bool">FALSE</value>
+									<value name="proxy-wxLC_USER_TEXT" type="bool">FALSE</value>
+									<value name="proxy-wxLC_EDIT_LABELS" type="bool">FALSE</value>
+									<value name="proxy-wxLC_NO_HEADER" type="bool">FALSE</value>
+									<value name="proxy-wxLC_SINGLE_SEL" type="bool">FALSE</value>
+									<value name="proxy-wxLC_SORT_ASCENDING" type="bool">FALSE</value>
+									<value name="proxy-wxLC_SORT_DESCENDING" type="bool">FALSE</value>
+									<value name="proxy-wxLC_HRULES" type="bool">FALSE</value>
+									<value name="proxy-wxLC_VRULES" type="bool">FALSE</value>
+									<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+									<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+									<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+									<value name="proxy-Custom styles" type="string"></value>
+									<value name="proxy-X" type="Integer">-1</value>
+									<value name="proxy-Y" type="Integer">-1</value>
+									<value name="proxy-Width" type="Integer">100</value>
+									<value name="proxy-Height" type="Integer">80</value>
+									<value name="proxy-AlignH" type="string">Expand</value>
+									<value name="proxy-AlignV" type="string">Centre</value>
+									<value name="proxy-Stretch factor" type="Integer">2</value>
+									<value name="proxy-Border" type="Integer">5</value>
+									<value name="proxy-wxLEFT" type="bool">TRUE</value>
+									<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+									<value name="proxy-wxTOP" type="bool">TRUE</value>
+									<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+									<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+									<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+									<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+									<value name="proxy-Custom arguments" type="string"></value>
+									<value name="proxy-Custom ctor arguments" type="string"></value>
+								</path>
+								<path name="ID000051">
+									<value name="title" type="string">wxBoxSizer H</value>
+									<value name="id" type="Integer">156500184</value>
+									<value name="type" type="string">dialog-control-document</value>
+									<value name="filename" type="string"></value>
+									<value name="icon-name" type="string">sizer</value>
+									<value name="is-transient" type="Integer">0</value>
+									<value name="owns-file" type="Integer">1</value>
+									<value name="title-mode" type="Integer">0</value>
+									<value name="parent" type="Integer">156471520</value>
+									<value name="locked" type="Integer">0</value>
+									<value name="created" type="string">3/1/2005</value>
+									<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+									<value name="proxy-Orientation" type="string">Horizontal</value>
+									<value name="proxy-Member variable name" type="string"></value>
+									<value name="proxy-AlignH" type="string">Left</value>
+									<value name="proxy-AlignV" type="string">Centre</value>
+									<value name="proxy-Stretch factor" type="Integer">0</value>
+									<value name="proxy-Border" type="Integer">5</value>
+									<value name="proxy-wxLEFT" type="bool">TRUE</value>
+									<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+									<value name="proxy-wxTOP" type="bool">TRUE</value>
+									<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+									<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+									<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+									<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+									<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+									<path name="ID000052">
+										<value name="title" type="string">wxBitmapButton: IDC_DLNOW</value>
+										<value name="id" type="Integer">156506896</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">bitmapbutton</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">156500184</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCDlnowClick</value>
+										<value name="proxy-Id name" type="string">IDC_DLNOW</value>
+										<value name="proxy-Id value" type="Integer">10038</value>
+										<value name="proxy-Class" type="string">wxBitmapButton</value>
+										<value name="proxy-Member variable name" type="string">m_dlnow</value>
+										<value name="proxy-Bitmap" type="string">res/dlnow.ico.gif</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Download item(s) immediately</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+										<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+										<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID000053">
+										<value name="title" type="string">wxBitmapButton: IDC_MOVETOTOP</value>
+										<value name="id" type="Integer">156520584</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">bitmapbutton</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">156500184</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCMovetotopClick</value>
+										<value name="proxy-Id name" type="string">IDC_MOVETOTOP</value>
+										<value name="proxy-Id value" type="Integer">10025</value>
+										<value name="proxy-Class" type="string">wxBitmapButton</value>
+										<value name="proxy-Member variable name" type="string">m_movetotop</value>
+										<value name="proxy-Bitmap" type="string">res/move2top.ico.gif</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Move item(s) to top of queue</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+										<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+										<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID000054">
+										<value name="title" type="string">wxBitmapButton: IDC_MOVETOBOTTOM</value>
+										<value name="id" type="Integer">156534336</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">bitmapbutton</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">156500184</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCMovetobottomClick</value>
+										<value name="proxy-Id name" type="string">IDC_MOVETOBOTTOM</value>
+										<value name="proxy-Id value" type="Integer">10028</value>
+										<value name="proxy-Class" type="string">wxBitmapButton</value>
+										<value name="proxy-Member variable name" type="string">m_movetobottom</value>
+										<value name="proxy-Bitmap" type="string">res/move2end.ico.gif</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Move item(s) to bottom of queue</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+										<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+										<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID000055">
+										<value name="title" type="string">wxBitmapButton: IDC_REMOVEQUEUE</value>
+										<value name="id" type="Integer">156548576</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">bitmapbutton</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">156500184</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCRemovequeueClick</value>
+										<value name="proxy-Id name" type="string">IDC_REMOVEQUEUE</value>
+										<value name="proxy-Id value" type="Integer">10031</value>
+										<value name="proxy-Class" type="string">wxBitmapButton</value>
+										<value name="proxy-Member variable name" type="string">m_removequeue</value>
+										<value name="proxy-Bitmap" type="string">res/stopdl.ico.gif</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Remove item(s) from queue</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+										<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+										<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID000056">
+										<value name="title" type="string">wxBitmapButton: IDC_CLEARQUEUE</value>
+										<value name="id" type="Integer">156561976</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">bitmapbutton</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">156500184</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+										<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCClearqueueClick</value>
+										<value name="proxy-Id name" type="string">IDC_CLEARQUEUE</value>
+										<value name="proxy-Id value" type="Integer">10040</value>
+										<value name="proxy-Class" type="string">wxBitmapButton</value>
+										<value name="proxy-Member variable name" type="string">m_clearqueue</value>
+										<value name="proxy-Bitmap" type="string">res/clear-all2.ico.gif</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string">Clear queue</value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+										<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+										<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+									<path name="ID000057">
+										<value name="title" type="string">wxStaticText: IDC_QUEUEITEMS</value>
+										<value name="id" type="Integer">156575792</value>
+										<value name="type" type="string">dialog-control-document</value>
+										<value name="filename" type="string"></value>
+										<value name="icon-name" type="string">statictext</value>
+										<value name="is-transient" type="Integer">0</value>
+										<value name="owns-file" type="Integer">1</value>
+										<value name="title-mode" type="Integer">0</value>
+										<value name="parent" type="Integer">156500184</value>
+										<value name="locked" type="Integer">0</value>
+										<value name="created" type="string">3/1/2005</value>
+										<value name="proxy-type" type="string">wbStaticTextProxy</value>
+										<value name="proxy-Id name" type="string">IDC_QUEUEITEMS</value>
+										<value name="proxy-Id value" type="Integer">10041</value>
+										<value name="proxy-Class" type="string">wxStaticText</value>
+										<value name="proxy-Member variable name" type="string">m_queueitems</value>
+										<value name="proxy-Label" type="string">0 items in queue</value>
+										<value name="proxy-Help text" type="string"></value>
+										<value name="proxy-Tooltip text" type="string"></value>
+										<value name="proxy-Background colour" type="string"></value>
+										<value name="proxy-Foreground colour" type="string"></value>
+										<value name="proxy-Font" type="string"></value>
+										<value name="proxy-Hidden" type="bool">FALSE</value>
+										<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+										<value name="proxy-Data variable" type="string"></value>
+										<value name="proxy-Data validator" type="string"></value>
+										<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+										<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+										<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+										<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+										<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+										<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+										<value name="proxy-Custom styles" type="string"></value>
+										<value name="proxy-X" type="Integer">-1</value>
+										<value name="proxy-Y" type="Integer">-1</value>
+										<value name="proxy-Width" type="Integer">-1</value>
+										<value name="proxy-Height" type="Integer">-1</value>
+										<value name="proxy-AlignH" type="string">Centre</value>
+										<value name="proxy-AlignV" type="string">Centre</value>
+										<value name="proxy-Stretch factor" type="Integer">0</value>
+										<value name="proxy-Border" type="Integer">5</value>
+										<value name="proxy-wxLEFT" type="bool">TRUE</value>
+										<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+										<value name="proxy-wxTOP" type="bool">TRUE</value>
+										<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+										<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+										<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+										<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+										<value name="proxy-Custom arguments" type="string"></value>
+										<value name="proxy-Custom ctor arguments" type="string"></value>
+									</path>
+								</path>
+							</path>
+						</path>
+					</path>
+				</path>
+			</path>
+			<path name="ID000058">
+				<value name="title" type="string">Uploads</value>
+				<value name="id" type="Integer">147170120</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">dialog</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">3/1/2005</value>
+				<value name="proxy-type" type="string">wbDialogProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="event-handler-0" type="string">wxEVT_CLOSE_WINDOW|OnCloseWindow</value>
+				<value name="proxy-Id name" type="string">ID_UPLOADS</value>
+				<value name="proxy-Id value" type="Integer">10039</value>
+				<value name="proxy-Class" type="string">WxUploads</value>
+				<value name="proxy-Base class" type="string">wxDialog</value>
+				<value name="proxy-Window kind" type="string">wxDialog</value>
+				<value name="proxy-Implementation filename" type="string">wxuploads.cpp</value>
+				<value name="proxy-Header filename" type="string">wxuploads.h</value>
+				<value name="proxy-XRC filename" type="string"></value>
+				<value name="proxy-Title" type="string">Uploads</value>
+				<value name="proxy-Centre" type="bool">TRUE</value>
+				<value name="proxy-Icon" type="string">res/transfers.ico.gif</value>
+				<value name="proxy-Dialog units" type="bool">FALSE</value>
+				<value name="proxy-Help text" type="string"></value>
+				<value name="proxy-Tooltip text" type="string"></value>
+				<value name="proxy-Background colour" type="string"></value>
+				<value name="proxy-Foreground colour" type="string"></value>
+				<value name="proxy-Font" type="string"></value>
+				<value name="proxy-Hidden" type="bool">FALSE</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<value name="proxy-wxDEFAULT_DIALOG_STYLE" type="bool">TRUE</value>
+				<value name="proxy-wxCAPTION" type="bool">TRUE</value>
+				<value name="proxy-wxRESIZE_BORDER" type="bool">TRUE</value>
+				<value name="proxy-wxTHICK_FRAME" type="bool">FALSE</value>
+				<value name="proxy-wxSYSTEM_MENU" type="bool">TRUE</value>
+				<value name="proxy-wxSTAY_ON_TOP" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_NO_PARENT" type="bool">FALSE</value>
+				<value name="proxy-wxCLOSE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMAXIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMINIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_MODAL" type="bool">FALSE</value>
+				<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+				<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+				<value name="proxy-wxTAB_TRAVERSAL" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_TRANSIENT" type="bool">FALSE</value>
+				<value name="proxy-Custom styles" type="string"></value>
+				<value name="proxy-wxDIALOG_EX_CONTEXTHELP" type="bool">FALSE</value>
+				<value name="proxy-Fit to content" type="bool">TRUE</value>
+				<value name="proxy-X" type="Integer">-1</value>
+				<value name="proxy-Y" type="Integer">-1</value>
+				<value name="proxy-Width" type="Integer">550</value>
+				<value name="proxy-Height" type="Integer">300</value>
+				<value name="proxy-Event sources" type="string">IDM_UPLOADS_MENU</value>
+				<path name="ID000059">
+					<value name="title" type="string">wxBoxSizer V</value>
+					<value name="id" type="Integer">156506296</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">sizer</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">147170120</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">3/1/2005</value>
+					<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+					<value name="proxy-Orientation" type="string">Vertical</value>
+					<value name="proxy-Member variable name" type="string"></value>
+					<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+					<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+					<path name="ID00005a">
+						<value name="title" type="string">wxListCtrl: IDD_UPLOADS</value>
+						<value name="id" type="Integer">156609800</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">listctrl</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156506296</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">3/1/2005</value>
+						<value name="proxy-type" type="string">wbListCtrlProxy</value>
+						<value name="event-handler-0" type="string">wxEVT_COMMAND_LIST_ITEM_ACTIVATED|OnDUploadsItemActivated</value>
+						<value name="event-handler-1" type="string">wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK|OnDUploadsRightClick</value>
+						<value name="proxy-Id name" type="string">IDD_UPLOADS</value>
+						<value name="proxy-Id value" type="Integer">10001</value>
+						<value name="proxy-Class" type="string">wxListCtrl</value>
+						<value name="proxy-Member variable name" type="string">m_uploads</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxLC_LIST " type="bool">FALSE</value>
+						<value name="proxy-wxLC_REPORT" type="bool">TRUE</value>
+						<value name="proxy-wxLC_ICON" type="bool">FALSE</value>
+						<value name="proxy-wxLC_SMALL_ICON" type="bool">FALSE</value>
+						<value name="proxy-wxLC_VIRTUAL" type="bool">FALSE</value>
+						<value name="proxy-wxLC_ALIGN_TOP" type="bool">FALSE</value>
+						<value name="proxy-wxLC_ALIGN_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxLC_AUTOARRANGE" type="bool">FALSE</value>
+						<value name="proxy-wxLC_USER_TEXT" type="bool">FALSE</value>
+						<value name="proxy-wxLC_EDIT_LABELS" type="bool">FALSE</value>
+						<value name="proxy-wxLC_NO_HEADER" type="bool">FALSE</value>
+						<value name="proxy-wxLC_SINGLE_SEL" type="bool">FALSE</value>
+						<value name="proxy-wxLC_SORT_ASCENDING" type="bool">FALSE</value>
+						<value name="proxy-wxLC_SORT_DESCENDING" type="bool">FALSE</value>
+						<value name="proxy-wxLC_HRULES" type="bool">FALSE</value>
+						<value name="proxy-wxLC_VRULES" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">100</value>
+						<value name="proxy-Height" type="Integer">80</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">2</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID00005b">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">156629536</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156506296</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">3/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Left</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID00005c">
+							<value name="title" type="string">wxBitmapButton: IDC_ABORTSEL</value>
+							<value name="id" type="Integer">156636896</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156629536</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCAbortselClick</value>
+							<value name="proxy-Id name" type="string">IDC_ABORTSEL</value>
+							<value name="proxy-Id value" type="Integer">10002</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_abortsel</value>
+							<value name="proxy-Bitmap" type="string">res/stopdl.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">Abort selected upload(s)</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00005d">
+							<value name="title" type="string">wxBitmapButton: IDC_CLEARCOMP</value>
+							<value name="id" type="Integer">156650680</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156629536</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCClearcompClick</value>
+							<value name="proxy-Id name" type="string">IDC_CLEARCOMP</value>
+							<value name="proxy-Id value" type="Integer">10003</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_clearcomp</value>
+							<value name="proxy-Bitmap" type="string">res/clear-inactive2.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">Clear inactive upload(s)</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00005e">
+							<value name="title" type="string">wxBitmapButton: IDC_CLEARCOMP2</value>
+							<value name="id" type="Integer">156663952</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">bitmapbutton</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156629536</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbBitmapButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCClearcomp2Click</value>
+							<value name="proxy-Id name" type="string">IDC_CLEARCOMP2</value>
+							<value name="proxy-Id value" type="Integer">10004</value>
+							<value name="proxy-Class" type="string">wxBitmapButton</value>
+							<value name="proxy-Member variable name" type="string">m_clearcomp2</value>
+							<value name="proxy-Bitmap" type="string">res/clear-completed2.ico.gif</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">Clear all upload(s)</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_AUTODRAW" type="bool">TRUE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00005f">
+							<value name="title" type="string">wxChoice: IDC_AUTOCLEAR</value>
+							<value name="id" type="Integer">156678016</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">choice</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156629536</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">3/1/2005</value>
+							<value name="proxy-type" type="string">wbChoiceProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_CHOICE_SELECTED|OnCAutoclearSelected</value>
+							<value name="proxy-Id name" type="string">IDC_AUTOCLEAR</value>
+							<value name="proxy-Id value" type="Integer">10005</value>
+							<value name="proxy-Class" type="string">wxChoice</value>
+							<value name="proxy-Member variable name" type="string">m_autoclear</value>
+							<value name="proxy-Strings" type="string">Do not clear completed uploads|Clear when complete</value>
+							<value name="proxy-Initial value" type="string">Do not clear completed uploads</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+				</path>
+			</path>
+			<path name="ID000060">
+				<value name="title" type="string">wxMenu: IDM_USERLIST_POPUP</value>
+				<value name="id" type="Integer">156677792</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">menu</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="proxy-type" type="string">wbStandaloneMenuProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="proxy-Id name" type="string">IDM_USERLIST_POPUP</value>
+				<value name="proxy-Resource function" type="string">CreateMenuUserlistPopup</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<path name="ID000061">
+					<value name="title" type="string">Chat user: IDM_CHAT_USER</value>
+					<value name="id" type="Integer">156692000</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156677792</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMChatUserClick</value>
+					<value name="proxy-Id name" type="string">IDM_CHAT_USER</value>
+					<value name="proxy-Id value" type="Integer">10050</value>
+					<value name="proxy-Label" type="string">Chat user</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID000062">
+					<value name="title" type="string">Whois user: IDM_WHOIS_USER</value>
+					<value name="id" type="Integer">156695896</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156677792</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMWhoisUserClick</value>
+					<value name="proxy-Id name" type="string">IDM_WHOIS_USER</value>
+					<value name="proxy-Id value" type="Integer">10051</value>
+					<value name="proxy-Label" type="string">Whois user</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID000063">
+					<value name="title" type="string">Browse user: IDM_BROWSE_USER</value>
+					<value name="id" type="Integer">156699560</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156677792</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMBrowseUserClick</value>
+					<value name="proxy-Id name" type="string">IDM_BROWSE_USER</value>
+					<value name="proxy-Id value" type="Integer">10052</value>
+					<value name="proxy-Label" type="string">Browse user</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID000064">
+					<value name="title" type="string">Send file(s) to user: IDM_SENDFILE_USER</value>
+					<value name="id" type="Integer">156703256</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156677792</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMSendfileUserClick</value>
+					<value name="proxy-Id name" type="string">IDM_SENDFILE_USER</value>
+					<value name="proxy-Id value" type="Integer">10053</value>
+					<value name="proxy-Label" type="string">Send file(s) to user</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+			</path>
+			<path name="ID000065">
+				<value name="title" type="string">wxMenu: IDM_SEARCHRES_POPUP</value>
+				<value name="id" type="Integer">156706952</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">menu</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="proxy-type" type="string">wbStandaloneMenuProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="proxy-Id name" type="string">IDM_SEARCHRES_POPUP</value>
+				<value name="proxy-Resource function" type="string">CreateMenuSearchResPopup</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<path name="ID000066">
+					<value name="title" type="string">Download: ID_DOWNLOAD</value>
+					<value name="id" type="Integer">156708960</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156706952</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnDownloadClick</value>
+					<value name="proxy-Id name" type="string">ID_DOWNLOAD</value>
+					<value name="proxy-Id value" type="Integer">10054</value>
+					<value name="proxy-Label" type="string">Download</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID000067">
+					<value name="title" type="string">Download parent: ID_DLPARENT</value>
+					<value name="id" type="Integer">156712784</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156706952</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnDlparentClick</value>
+					<value name="proxy-Id name" type="string">ID_DLPARENT</value>
+					<value name="proxy-Id value" type="Integer">10055</value>
+					<value name="proxy-Label" type="string">Download parent</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID000068">
+					<value name="title" type="string">Browse parent: ID_BROWSELOC</value>
+					<value name="id" type="Integer">156716480</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156706952</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnBrowselocClick</value>
+					<value name="proxy-Id name" type="string">ID_BROWSELOC</value>
+					<value name="proxy-Id value" type="Integer">10056</value>
+					<value name="proxy-Label" type="string">Browse parent</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID000069">
+					<value name="title" type="string">Copy location: ID_COPYLOC</value>
+					<value name="id" type="Integer">156720144</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156706952</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnCopylocClick</value>
+					<value name="proxy-Id name" type="string">ID_COPYLOC</value>
+					<value name="proxy-Id value" type="Integer">10065</value>
+					<value name="proxy-Label" type="string">Copy location</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+			</path>
+			<path name="ID00006a">
+				<value name="title" type="string">wxMenu: IDM_SEARCHRES_FILE_POPUP</value>
+				<value name="id" type="Integer">156723808</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">menu</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="proxy-type" type="string">wbStandaloneMenuProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="proxy-Id name" type="string">IDM_SEARCHRES_FILE_POPUP</value>
+				<value name="proxy-Resource function" type="string">CreateMenuSearchresFilePopup</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<path name="ID00006b">
+					<value name="title" type="string">Download: ID_DOWNLOADFOLDER</value>
+					<value name="id" type="Integer">156725816</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156723808</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnDownloadfolderClick</value>
+					<value name="proxy-Id name" type="string">ID_DOWNLOADFOLDER</value>
+					<value name="proxy-Id value" type="Integer">10058</value>
+					<value name="proxy-Label" type="string">Download</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID00006c">
+					<value name="title" type="string">Browse directory: ID_BROWSEFOLDER</value>
+					<value name="id" type="Integer">156729640</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156723808</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnBrowsefolderClick</value>
+					<value name="proxy-Id name" type="string">ID_BROWSEFOLDER</value>
+					<value name="proxy-Id value" type="Integer">10059</value>
+					<value name="proxy-Label" type="string">Browse directory</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID00006d">
+					<value name="title" type="string">Copy location: ID_COPYLOC</value>
+					<value name="id" type="Integer">156733304</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156723808</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnCopylocClick</value>
+					<value name="proxy-Id name" type="string">ID_COPYLOC</value>
+					<value name="proxy-Id value" type="Integer">10065</value>
+					<value name="proxy-Label" type="string">Copy location</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+			</path>
+			<path name="ID00006e">
+				<value name="title" type="string">wxMenu: IDM_SEARCHRES_USER_POPUP</value>
+				<value name="id" type="Integer">156736968</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">menu</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="proxy-type" type="string">wbStandaloneMenuProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="proxy-Id name" type="string">IDM_SEARCHRES_USER_POPUP</value>
+				<value name="proxy-Resource function" type="string">CreateMenuSearchresUserPopup</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<path name="ID00006f">
+					<value name="title" type="string">Browse user: ID_BROWSENODE</value>
+					<value name="id" type="Integer">156738944</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156736968</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnBrowsenodeClick</value>
+					<value name="proxy-Id name" type="string">ID_BROWSENODE</value>
+					<value name="proxy-Id value" type="Integer">10061</value>
+					<value name="proxy-Label" type="string">Browse user</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID000070">
+					<value name="title" type="string">Chat user(s): ID_PRIVMSGNODE</value>
+					<value name="id" type="Integer">156742616</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156736968</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnPrivmsgnodeClick</value>
+					<value name="proxy-Id name" type="string">ID_PRIVMSGNODE</value>
+					<value name="proxy-Id value" type="Integer">10062</value>
+					<value name="proxy-Label" type="string">Chat user(s)</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID000071">
+					<value name="title" type="string">Whois user: IDM_SEARCHRES_USER_WHOIS</value>
+					<value name="id" type="Integer">156746312</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156736968</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMSearchresUserWhoisClick</value>
+					<value name="proxy-Id name" type="string">IDM_SEARCHRES_USER_WHOIS</value>
+					<value name="proxy-Id value" type="Integer">10063</value>
+					<value name="proxy-Label" type="string">Whois user</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID000072">
+					<value name="title" type="string">Send file(s) to user(s): ID_SENDFILENODE</value>
+					<value name="id" type="Integer">156750008</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156736968</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnSendfilenodeClick</value>
+					<value name="proxy-Id name" type="string">ID_SENDFILENODE</value>
+					<value name="proxy-Id value" type="Integer">10064</value>
+					<value name="proxy-Label" type="string">Send file(s) to user(s)</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID000073">
+					<value name="title" type="string">Copy location: ID_COPYLOC</value>
+					<value name="id" type="Integer">156753704</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156736968</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">9/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnCopylocClick</value>
+					<value name="proxy-Id name" type="string">ID_COPYLOC</value>
+					<value name="proxy-Id value" type="Integer">10065</value>
+					<value name="proxy-Label" type="string">Copy location</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+			</path>
+			<path name="ID000074">
+				<value name="title" type="string">Preferences</value>
+				<value name="id" type="Integer">156757264</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">dialog</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">14/1/2005</value>
+				<value name="proxy-type" type="string">wbDialogProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="event-handler-0" type="string">wxEVT_CLOSE_WINDOW|OnCloseWindow</value>
+				<value name="proxy-Id name" type="string">ID_PREFS_DIALOG</value>
+				<value name="proxy-Id value" type="Integer">10057</value>
+				<value name="proxy-Class" type="string">WxPrefs</value>
+				<value name="proxy-Base class" type="string">wxDialog</value>
+				<value name="proxy-Window kind" type="string">wxDialog</value>
+				<value name="proxy-Implementation filename" type="string">wxprefs.cpp</value>
+				<value name="proxy-Header filename" type="string">wxprefs.h</value>
+				<value name="proxy-XRC filename" type="string"></value>
+				<value name="proxy-Title" type="string">Preferences</value>
+				<value name="proxy-Centre" type="bool">TRUE</value>
+				<value name="proxy-Icon" type="string">res/icon1.ico.gif</value>
+				<value name="proxy-Dialog units" type="bool">FALSE</value>
+				<value name="proxy-Help text" type="string"></value>
+				<value name="proxy-Tooltip text" type="string"></value>
+				<value name="proxy-Background colour" type="string"></value>
+				<value name="proxy-Foreground colour" type="string"></value>
+				<value name="proxy-Font" type="string"></value>
+				<value name="proxy-Hidden" type="bool">FALSE</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<value name="proxy-wxDEFAULT_DIALOG_STYLE" type="bool">FALSE</value>
+				<value name="proxy-wxCAPTION" type="bool">TRUE</value>
+				<value name="proxy-wxRESIZE_BORDER" type="bool">TRUE</value>
+				<value name="proxy-wxTHICK_FRAME" type="bool">FALSE</value>
+				<value name="proxy-wxSYSTEM_MENU" type="bool">TRUE</value>
+				<value name="proxy-wxSTAY_ON_TOP" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_NO_PARENT" type="bool">FALSE</value>
+				<value name="proxy-wxCLOSE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMAXIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMINIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_MODAL" type="bool">FALSE</value>
+				<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+				<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+				<value name="proxy-wxTAB_TRAVERSAL" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_TRANSIENT" type="bool">FALSE</value>
+				<value name="proxy-Custom styles" type="string"></value>
+				<value name="proxy-wxDIALOG_EX_CONTEXTHELP" type="bool">FALSE</value>
+				<value name="proxy-Fit to content" type="bool">TRUE</value>
+				<value name="proxy-X" type="Integer">-1</value>
+				<value name="proxy-Y" type="Integer">-1</value>
+				<value name="proxy-Width" type="Integer">400</value>
+				<value name="proxy-Height" type="Integer">300</value>
+				<value name="proxy-Event sources" type="string"></value>
+				<path name="ID000075">
+					<value name="title" type="string">wxBoxSizer V</value>
+					<value name="id" type="Integer">156775304</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">sizer</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">156757264</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+					<value name="proxy-Orientation" type="string">Vertical</value>
+					<value name="proxy-Member variable name" type="string"></value>
+					<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+					<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+					<path name="ID000076">
+						<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+						<value name="id" type="Integer">156782696</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">statictext</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">14/1/2005</value>
+						<value name="proxy-type" type="string">wbStaticTextProxy</value>
+						<value name="proxy-Id name" type="string">wxID_STATIC</value>
+						<value name="proxy-Id value" type="Integer">5105</value>
+						<value name="proxy-Class" type="string">wxStaticText</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string">(This is a very basic preferences dialog.  The full dialog is yet to be implemented.
+Edit the configuration file directly for more options.)</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+						<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Centre</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID000077">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">156799592</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">14/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID000078">
+							<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+							<value name="id" type="Integer">156806120</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">statictext</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156799592</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">14/1/2005</value>
+							<value name="proxy-type" type="string">wbStaticTextProxy</value>
+							<value name="proxy-Id name" type="string">wxID_STATIC</value>
+							<value name="proxy-Id value" type="Integer">5105</value>
+							<value name="proxy-Class" type="string">wxStaticText</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Connection speed:</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">Select your connection&apos;s speed.  If you select modem or ISDN, your node will not route traffic
+for other nodes and network stability may be affected.</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000079">
+							<value name="title" type="string">wxChoice: ID_CONN_SPEED</value>
+							<value name="id" type="Integer">156806864</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">choice</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156799592</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">14/1/2005</value>
+							<value name="proxy-type" type="string">wbChoiceProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_CHOICE_SELECTED|OnConnSpeedSelected</value>
+							<value name="proxy-Id name" type="string">ID_CONN_SPEED</value>
+							<value name="proxy-Id value" type="Integer">10071</value>
+							<value name="proxy-Class" type="string">wxChoice</value>
+							<value name="proxy-Member variable name" type="string">m_conn_speed</value>
+							<value name="proxy-Strings" type="string">Modem|ISDN|Slow DSL/Cable|T1/Fast DSL/Cable|T3/LAN</value>
+							<value name="proxy-Initial value" type="string">Slow DSL/Cable</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">9</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID00007a">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">156835368</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">15/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">FALSE</value>
+						<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID00007b">
+							<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+							<value name="id" type="Integer">156841680</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">statictext</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156835368</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">15/1/2005</value>
+							<value name="proxy-type" type="string">wbStaticTextProxy</value>
+							<value name="proxy-Id name" type="string">wxID_STATIC</value>
+							<value name="proxy-Id value" type="Integer">5105</value>
+							<value name="proxy-Class" type="string">wxStaticText</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Your nickname:</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">Your nickname to use in WASTE.</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00007c">
+							<value name="title" type="string">wxTextCtrl: ID_NICKNAME</value>
+							<value name="id" type="Integer">156858432</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">textctrl</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156835368</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">15/1/2005</value>
+							<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_TEXT_UPDATED|OnNicknameUpdated</value>
+							<value name="event-handler-1" type="string">wxEVT_COMMAND_TEXT_ENTER|OnNicknameEnter</value>
+							<value name="proxy-Id name" type="string">ID_NICKNAME</value>
+							<value name="proxy-Id value" type="Integer">10000</value>
+							<value name="proxy-Class" type="string">wxTextCtrl</value>
+							<value name="proxy-Member variable name" type="string">m_nickname</value>
+							<value name="proxy-Initial value" type="string"></value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxTE_MULTILINE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_ENTER" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+							<value name="proxy-wxTE_READONLY" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+							<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxTE_WORDWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">9</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00007d">
+							<value name="title" type="string">wxButton: ID_UPD_NICK</value>
+							<value name="id" type="Integer">156841936</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">dialogcontrol</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156835368</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">15/1/2005</value>
+							<value name="proxy-type" type="string">wbButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnUpdNickClick</value>
+							<value name="proxy-Id name" type="string">ID_UPD_NICK</value>
+							<value name="proxy-Id value" type="Integer">10001</value>
+							<value name="proxy-Class" type="string">wxButton</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Update nickname</value>
+							<value name="proxy-Default" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID00007e">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">156891720</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">15/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">FALSE</value>
+						<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID00007f">
+							<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+							<value name="id" type="Integer">156897928</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">statictext</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156891720</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">15/1/2005</value>
+							<value name="proxy-type" type="string">wbStaticTextProxy</value>
+							<value name="proxy-Id name" type="string">wxID_STATIC</value>
+							<value name="proxy-Id value" type="Integer">5105</value>
+							<value name="proxy-Class" type="string">wxStaticText</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Real name / user info:</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">Your real name.</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000080">
+							<value name="title" type="string">wxTextCtrl: ID_USER_INFO</value>
+							<value name="id" type="Integer">156914232</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">textctrl</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156891720</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">15/1/2005</value>
+							<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_TEXT_UPDATED|OnUserInfoUpdated</value>
+							<value name="event-handler-1" type="string">wxEVT_COMMAND_TEXT_ENTER|OnUserInfoEnter</value>
+							<value name="proxy-Id name" type="string">ID_USER_INFO</value>
+							<value name="proxy-Id value" type="Integer">10000</value>
+							<value name="proxy-Class" type="string">wxTextCtrl</value>
+							<value name="proxy-Member variable name" type="string">m_user_info</value>
+							<value name="proxy-Initial value" type="string"></value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxTE_MULTILINE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_ENTER" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+							<value name="proxy-wxTE_READONLY" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+							<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxTE_WORDWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">9</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID000081">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">156934360</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">14/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID000082">
+							<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+							<value name="id" type="Integer">156940368</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">statictext</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156934360</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">14/1/2005</value>
+							<value name="proxy-type" type="string">wbStaticTextProxy</value>
+							<value name="proxy-Id name" type="string">wxID_STATIC</value>
+							<value name="proxy-Id value" type="Integer">5105</value>
+							<value name="proxy-Class" type="string">wxStaticText</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Network name / ID / passphrase:</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">Network name.  You can only connect to nodes with EXACTLY
+the same network name setting.</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">FALSE</value>
+							<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000083">
+							<value name="title" type="string">wxTextCtrl: ID_NET_NAME</value>
+							<value name="id" type="Integer">156956824</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">textctrl</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156934360</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">14/1/2005</value>
+							<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_TEXT_UPDATED|OnNetNameUpdated</value>
+							<value name="event-handler-1" type="string">wxEVT_COMMAND_TEXT_ENTER|OnNetNameEnter</value>
+							<value name="proxy-Id name" type="string">ID_NET_NAME</value>
+							<value name="proxy-Id value" type="Integer">10002</value>
+							<value name="proxy-Class" type="string">wxTextCtrl</value>
+							<value name="proxy-Member variable name" type="string">m_net_name</value>
+							<value name="proxy-Initial value" type="string"></value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxTE_MULTILINE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_ENTER" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+							<value name="proxy-wxTE_READONLY" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+							<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxTE_WORDWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">9</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID000084">
+						<value name="title" type="string">wxButton: ID_GEN_PRIVKEY</value>
+						<value name="id" type="Integer">156940848</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">dialogcontrol</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">14/1/2005</value>
+						<value name="proxy-type" type="string">wbButtonProxy</value>
+						<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnGenPrivkeyClick</value>
+						<value name="proxy-Id name" type="string">ID_GEN_PRIVKEY</value>
+						<value name="proxy-Id value" type="Integer">10060</value>
+						<value name="proxy-Class" type="string">wxButton</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string">Generate new private key...</value>
+						<value name="proxy-Default" type="bool">FALSE</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+						<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID000085">
+						<value name="title" type="string">wxButton: ID_COPY_PUBKEY</value>
+						<value name="id" type="Integer">156989640</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">dialogcontrol</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">14/1/2005</value>
+						<value name="proxy-type" type="string">wbButtonProxy</value>
+						<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCopyPubkeyClick</value>
+						<value name="proxy-Id name" type="string">ID_COPY_PUBKEY</value>
+						<value name="proxy-Id value" type="Integer">10066</value>
+						<value name="proxy-Class" type="string">wxButton</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string">Copy my public key to the clipboard</value>
+						<value name="proxy-Default" type="bool">FALSE</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+						<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID000086">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">156976680</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">17/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">FALSE</value>
+						<value name="proxy-wxRIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxTOP" type="bool">FALSE</value>
+						<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID000087">
+							<value name="title" type="string">wxButton: ID_VIEW_PUBKEYS</value>
+							<value name="id" type="Integer">157023608</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">dialogcontrol</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156976680</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">17/1/2005</value>
+							<value name="proxy-type" type="string">wbButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnViewPubkeysClick</value>
+							<value name="proxy-Id name" type="string">ID_VIEW_PUBKEYS</value>
+							<value name="proxy-Id value" type="Integer">10003</value>
+							<value name="proxy-Class" type="string">wxButton</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">View authorized public keys</value>
+							<value name="proxy-Default" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Expand</value>
+							<value name="proxy-AlignV" type="string">Expand</value>
+							<value name="proxy-Stretch factor" type="Integer">1</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000088">
+							<value name="title" type="string">wxButton: ID_ADD_PUB_KEYS</value>
+							<value name="id" type="Integer">157037440</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">dialogcontrol</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">156976680</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">17/1/2005</value>
+							<value name="proxy-type" type="string">wbButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnAddPubKeysClick</value>
+							<value name="proxy-Id name" type="string">ID_ADD_PUB_KEYS</value>
+							<value name="proxy-Id value" type="Integer">10004</value>
+							<value name="proxy-Class" type="string">wxButton</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Add public key(s)...</value>
+							<value name="proxy-Default" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Expand</value>
+							<value name="proxy-AlignV" type="string">Expand</value>
+							<value name="proxy-Stretch factor" type="Integer">1</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID000089">
+						<value name="title" type="string">wxButton: ID_BROADCAST_PUBKEY</value>
+						<value name="id" type="Integer">153424136</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">dialogcontrol</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">4/2/2005</value>
+						<value name="proxy-type" type="string">wbButtonProxy</value>
+						<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnBroadcastPubkeyClick</value>
+						<value name="proxy-Id name" type="string">ID_BROADCAST_PUBKEY</value>
+						<value name="proxy-Id value" type="Integer">10005</value>
+						<value name="proxy-Class" type="string">wxButton</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string">Broadcast my public key on network now</value>
+						<value name="proxy-Default" type="bool">FALSE</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+						<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID00008a">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">157051296</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">14/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">FALSE</value>
+						<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID00008b">
+							<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+							<value name="id" type="Integer">157057632</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">statictext</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">157051296</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">14/1/2005</value>
+							<value name="proxy-type" type="string">wbStaticTextProxy</value>
+							<value name="proxy-Id name" type="string">wxID_STATIC</value>
+							<value name="proxy-Id value" type="Integer">5105</value>
+							<value name="proxy-Class" type="string">wxStaticText</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Path to save downloaded files:</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string">A directory where downloaded files will be saved.</value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00008c">
+							<value name="title" type="string">wxTextCtrl: ID_DOWNLOAD_PATH</value>
+							<value name="id" type="Integer">157074000</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">textctrl</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">157051296</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">14/1/2005</value>
+							<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_TEXT_UPDATED|OnDownloadPathUpdated</value>
+							<value name="proxy-Id name" type="string">ID_DOWNLOAD_PATH</value>
+							<value name="proxy-Id value" type="Integer">10072</value>
+							<value name="proxy-Class" type="string">wxTextCtrl</value>
+							<value name="proxy-Member variable name" type="string">m_download_path</value>
+							<value name="proxy-Initial value" type="string"></value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxTE_MULTILINE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_ENTER" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+							<value name="proxy-wxTE_READONLY" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+							<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxTE_WORDWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">9</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00008d">
+							<value name="title" type="string">wxButton: ID_BROWSE_DL_PATH</value>
+							<value name="id" type="Integer">157057920</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">dialogcontrol</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">157051296</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">14/1/2005</value>
+							<value name="proxy-type" type="string">wbButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnBrowseDlPathClick</value>
+							<value name="proxy-Id name" type="string">ID_BROWSE_DL_PATH</value>
+							<value name="proxy-Id value" type="Integer">10073</value>
+							<value name="proxy-Class" type="string">wxButton</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Browse...</value>
+							<value name="proxy-Default" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID00008e">
+						<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+						<value name="id" type="Integer">157094072</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">statictext</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">14/1/2005</value>
+						<value name="proxy-type" type="string">wbStaticTextProxy</value>
+						<value name="proxy-Id name" type="string">wxID_STATIC</value>
+						<value name="proxy-Id value" type="Integer">5105</value>
+						<value name="proxy-Class" type="string">wxStaticText</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string">Directories to share: (separate multiple dirs with &quot;;&quot;)</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string">The list of directories to share to other users.</value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+						<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Left</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID00008f">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">157123176</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">14/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">FALSE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID000090">
+							<value name="title" type="string">wxTextCtrl: ID_SHARE_PATH</value>
+							<value name="id" type="Integer">157130336</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">textctrl</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">157123176</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">14/1/2005</value>
+							<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_TEXT_UPDATED|OnSharePathUpdated</value>
+							<value name="proxy-Id name" type="string">ID_SHARE_PATH</value>
+							<value name="proxy-Id value" type="Integer">10074</value>
+							<value name="proxy-Class" type="string">wxTextCtrl</value>
+							<value name="proxy-Member variable name" type="string">m_share_path</value>
+							<value name="proxy-Initial value" type="string"></value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxTE_MULTILINE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_ENTER" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+							<value name="proxy-wxTE_READONLY" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+							<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxTE_WORDWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">9</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID000091">
+							<value name="title" type="string">wxButton: ID_ADD_SHARE_PATH</value>
+							<value name="id" type="Integer">157130008</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">dialogcontrol</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">157123176</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">14/1/2005</value>
+							<value name="proxy-type" type="string">wbButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnAddSharePathClick</value>
+							<value name="proxy-Id name" type="string">ID_ADD_SHARE_PATH</value>
+							<value name="proxy-Id value" type="Integer">10069</value>
+							<value name="proxy-Class" type="string">wxButton</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Add...</value>
+							<value name="proxy-Default" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">0</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID000092">
+						<value name="title" type="string">wxButton: ID_CLOSE_PREFS</value>
+						<value name="id" type="Integer">157150168</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">dialogcontrol</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">156775304</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">14/1/2005</value>
+						<value name="proxy-type" type="string">wbButtonProxy</value>
+						<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnClosePrefsClick</value>
+						<value name="proxy-Id name" type="string">ID_CLOSE_PREFS</value>
+						<value name="proxy-Id value" type="Integer">10070</value>
+						<value name="proxy-Class" type="string">wxButton</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string">Close</value>
+						<value name="proxy-Default" type="bool">FALSE</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+						<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">200</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Centre</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+				</path>
+			</path>
+			<path name="ID000093">
+				<value name="title" type="string">Public Keys</value>
+				<value name="id" type="Integer">157163496</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">dialog</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">15/1/2005</value>
+				<value name="proxy-type" type="string">wbDialogProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="proxy-Id name" type="string">ID_PUBKEYVIEWER</value>
+				<value name="proxy-Id value" type="Integer">10075</value>
+				<value name="proxy-Class" type="string">WxPubkeyViewer</value>
+				<value name="proxy-Base class" type="string">wxDialog</value>
+				<value name="proxy-Window kind" type="string">wxDialog</value>
+				<value name="proxy-Implementation filename" type="string">wxpubkeys.cpp</value>
+				<value name="proxy-Header filename" type="string">wxpubkeys.h</value>
+				<value name="proxy-XRC filename" type="string"></value>
+				<value name="proxy-Title" type="string">Public Keys</value>
+				<value name="proxy-Centre" type="bool">FALSE</value>
+				<value name="proxy-Icon" type="string">res/icon1.ico.gif</value>
+				<value name="proxy-Dialog units" type="bool">FALSE</value>
+				<value name="proxy-Help text" type="string"></value>
+				<value name="proxy-Tooltip text" type="string"></value>
+				<value name="proxy-Background colour" type="string"></value>
+				<value name="proxy-Foreground colour" type="string"></value>
+				<value name="proxy-Font" type="string"></value>
+				<value name="proxy-Hidden" type="bool">FALSE</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<value name="proxy-wxDEFAULT_DIALOG_STYLE" type="bool">TRUE</value>
+				<value name="proxy-wxCAPTION" type="bool">TRUE</value>
+				<value name="proxy-wxRESIZE_BORDER" type="bool">TRUE</value>
+				<value name="proxy-wxTHICK_FRAME" type="bool">FALSE</value>
+				<value name="proxy-wxSYSTEM_MENU" type="bool">TRUE</value>
+				<value name="proxy-wxSTAY_ON_TOP" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_NO_PARENT" type="bool">FALSE</value>
+				<value name="proxy-wxCLOSE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMAXIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMINIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_MODAL" type="bool">FALSE</value>
+				<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+				<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+				<value name="proxy-wxTAB_TRAVERSAL" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_TRANSIENT" type="bool">FALSE</value>
+				<value name="proxy-Custom styles" type="string"></value>
+				<value name="proxy-wxDIALOG_EX_CONTEXTHELP" type="bool">FALSE</value>
+				<value name="proxy-Fit to content" type="bool">TRUE</value>
+				<value name="proxy-X" type="Integer">-1</value>
+				<value name="proxy-Y" type="Integer">-1</value>
+				<value name="proxy-Width" type="Integer">400</value>
+				<value name="proxy-Height" type="Integer">450</value>
+				<value name="proxy-Event sources" type="string"></value>
+				<path name="ID000094">
+					<value name="title" type="string">wxBoxSizer V</value>
+					<value name="id" type="Integer">157194256</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">sizer</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157163496</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+					<value name="proxy-Orientation" type="string">Vertical</value>
+					<value name="proxy-Member variable name" type="string"></value>
+					<value name="proxy-AlignH" type="string">Centre</value>
+					<value name="proxy-AlignV" type="string">Centre</value>
+					<value name="proxy-Stretch factor" type="Integer">0</value>
+					<value name="proxy-Border" type="Integer">5</value>
+					<value name="proxy-wxLEFT" type="bool">TRUE</value>
+					<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+					<value name="proxy-wxTOP" type="bool">TRUE</value>
+					<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+					<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+					<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+					<path name="ID000095">
+						<value name="title" type="string">wxTextCtrl: ID_KEYS_TEXT</value>
+						<value name="id" type="Integer">157201328</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">textctrl</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">157194256</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">15/1/2005</value>
+						<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+						<value name="proxy-Id name" type="string">ID_KEYS_TEXT</value>
+						<value name="proxy-Id value" type="Integer">10076</value>
+						<value name="proxy-Class" type="string">wxTextCtrl</value>
+						<value name="proxy-Member variable name" type="string">m_keys_text</value>
+						<value name="proxy-Initial value" type="string"></value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxTE_MULTILINE" type="bool">TRUE</value>
+						<value name="proxy-wxTE_PROCESS_ENTER" type="bool">FALSE</value>
+						<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+						<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+						<value name="proxy-wxTE_READONLY" type="bool">TRUE</value>
+						<value name="proxy-wxTE_RICH" type="bool">FALSE</value>
+						<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+						<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+						<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+						<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+						<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+						<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+						<value name="proxy-wxTE_WORDWRAP" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">500</value>
+						<value name="proxy-Height" type="Integer">400</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">9</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID000096">
+						<value name="title" type="string">wxButton: ID_CLOSE</value>
+						<value name="id" type="Integer">157221480</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">dialogcontrol</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">157194256</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">15/1/2005</value>
+						<value name="proxy-type" type="string">wbButtonProxy</value>
+						<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCloseClick</value>
+						<value name="proxy-Id name" type="string">ID_CLOSE</value>
+						<value name="proxy-Id value" type="Integer">10077</value>
+						<value name="proxy-Class" type="string">wxButton</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string">Close</value>
+						<value name="proxy-Default" type="bool">FALSE</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+						<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Centre</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+				</path>
+			</path>
+			<path name="ID000097">
+				<value name="title" type="string">Chat</value>
+				<value name="id" type="Integer">157221160</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">dialog</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">15/1/2005</value>
+				<value name="proxy-type" type="string">wbDialogProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="event-handler-0" type="string">wxEVT_CLOSE_WINDOW|OnCloseWindow</value>
+				<value name="proxy-Id name" type="string">ID_CHAT_DLG</value>
+				<value name="proxy-Id value" type="Integer">10078</value>
+				<value name="proxy-Class" type="string">WxChat</value>
+				<value name="proxy-Base class" type="string">wxDialog</value>
+				<value name="proxy-Window kind" type="string">wxDialog</value>
+				<value name="proxy-Implementation filename" type="string">wxchat.cpp</value>
+				<value name="proxy-Header filename" type="string">wxchat.h</value>
+				<value name="proxy-XRC filename" type="string"></value>
+				<value name="proxy-Title" type="string">Chat</value>
+				<value name="proxy-Centre" type="bool">TRUE</value>
+				<value name="proxy-Icon" type="string">res/chat_icon.gif</value>
+				<value name="proxy-Dialog units" type="bool">FALSE</value>
+				<value name="proxy-Help text" type="string"></value>
+				<value name="proxy-Tooltip text" type="string"></value>
+				<value name="proxy-Background colour" type="string"></value>
+				<value name="proxy-Foreground colour" type="string"></value>
+				<value name="proxy-Font" type="string"></value>
+				<value name="proxy-Hidden" type="bool">FALSE</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<value name="proxy-wxDEFAULT_DIALOG_STYLE" type="bool">TRUE</value>
+				<value name="proxy-wxCAPTION" type="bool">TRUE</value>
+				<value name="proxy-wxRESIZE_BORDER" type="bool">TRUE</value>
+				<value name="proxy-wxTHICK_FRAME" type="bool">FALSE</value>
+				<value name="proxy-wxSYSTEM_MENU" type="bool">TRUE</value>
+				<value name="proxy-wxSTAY_ON_TOP" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_NO_PARENT" type="bool">FALSE</value>
+				<value name="proxy-wxCLOSE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMAXIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMINIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_MODAL" type="bool">FALSE</value>
+				<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+				<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+				<value name="proxy-wxTAB_TRAVERSAL" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_TRANSIENT" type="bool">FALSE</value>
+				<value name="proxy-Custom styles" type="string"></value>
+				<value name="proxy-wxDIALOG_EX_CONTEXTHELP" type="bool">FALSE</value>
+				<value name="proxy-Fit to content" type="bool">FALSE</value>
+				<value name="proxy-X" type="Integer">-1</value>
+				<value name="proxy-Y" type="Integer">-1</value>
+				<value name="proxy-Width" type="Integer">400</value>
+				<value name="proxy-Height" type="Integer">300</value>
+				<value name="proxy-Event sources" type="string">IDM_USERLIST_POPUP</value>
+				<path name="ID000098">
+					<value name="title" type="string">wxBoxSizer V</value>
+					<value name="id" type="Integer">157252360</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">sizer</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157221160</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+					<value name="proxy-Orientation" type="string">Vertical</value>
+					<value name="proxy-Member variable name" type="string"></value>
+					<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+					<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+					<path name="ID000099">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">157259232</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">157252360</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">15/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">3</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID00009a">
+							<value name="title" type="string">wxTextCtrl: IDC_CHATTEXT</value>
+							<value name="id" type="Integer">157266968</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">textctrl</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">157259232</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">15/1/2005</value>
+							<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+							<value name="proxy-Id name" type="string">IDC_CHATTEXT</value>
+							<value name="proxy-Id value" type="Integer">10000</value>
+							<value name="proxy-Class" type="string">wxTextCtrl</value>
+							<value name="proxy-Member variable name" type="string">m_chattext</value>
+							<value name="proxy-Initial value" type="string"></value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxTE_MULTILINE" type="bool">TRUE</value>
+							<value name="proxy-wxTE_PROCESS_ENTER" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+							<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+							<value name="proxy-wxTE_READONLY" type="bool">TRUE</value>
+							<value name="proxy-wxTE_RICH" type="bool">TRUE</value>
+							<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+							<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+							<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+							<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+							<value name="proxy-wxTE_WORDWRAP" type="bool">TRUE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Expand</value>
+							<value name="proxy-Stretch factor" type="Integer">3</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+						<path name="ID00009b">
+							<value name="title" type="string">wxTreeCtrl: IDC_TREE_CHATROOM</value>
+							<value name="id" type="Integer">157286720</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">treectrl</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">157259232</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">15/1/2005</value>
+							<value name="proxy-type" type="string">wbTreeCtrlProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_TREE_BEGIN_RDRAG|OnCTreeChatroomBeginRDrag</value>
+							<value name="event-handler-1" type="string">wxEVT_COMMAND_TREE_ITEM_ACTIVATED|OnCTreeChatroomItemActivated</value>
+							<value name="proxy-Id name" type="string">IDC_TREE_CHATROOM</value>
+							<value name="proxy-Id value" type="Integer">10001</value>
+							<value name="proxy-Class" type="string">wxTreeCtrl</value>
+							<value name="proxy-Member variable name" type="string">m_tree_chatroom</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-Data variable" type="string"></value>
+							<value name="proxy-Data validator" type="string"></value>
+							<value name="proxy-wxTR_EDIT_LABELS" type="bool">FALSE</value>
+							<value name="proxy-wxTR_NO_BUTTONS" type="bool">TRUE</value>
+							<value name="proxy-wxTR_HAS_BUTTONS " type="bool">FALSE</value>
+							<value name="proxy-wxTR_TWIST_BUTTONS" type="bool">FALSE</value>
+							<value name="proxy-wxTR_NO_LINES" type="bool">TRUE</value>
+							<value name="proxy-wxTR_FULL_ROW_HIGHLIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxTR_LINES_AT_ROOT" type="bool">FALSE</value>
+							<value name="proxy-wxTR_HIDE_ROOT" type="bool">TRUE</value>
+							<value name="proxy-wxTR_ROW_LINES" type="bool">FALSE</value>
+							<value name="proxy-wxTR_HAS_VARIABLE_ROW_HEIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxTR_SINGLE" type="bool">TRUE</value>
+							<value name="proxy-wxTR_MULTIPLE" type="bool">FALSE</value>
+							<value name="proxy-wxTR_EXTENDED" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSUNKEN_BORDER" type="bool">TRUE</value>
+							<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">80</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Expand</value>
+							<value name="proxy-Stretch factor" type="Integer">1</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+					<path name="ID00009c">
+						<value name="title" type="string">wxTextCtrl: IDC_CHATEDIT</value>
+						<value name="id" type="Integer">157306112</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">textctrl</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">157252360</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">15/1/2005</value>
+						<value name="proxy-type" type="string">wbTextCtrlProxy</value>
+						<value name="event-handler-0" type="string">wxEVT_COMMAND_TEXT_ENTER|OnCChateditEnter</value>
+						<value name="proxy-Id name" type="string">IDC_CHATEDIT</value>
+						<value name="proxy-Id value" type="Integer">10079</value>
+						<value name="proxy-Class" type="string">wxTextCtrl</value>
+						<value name="proxy-Member variable name" type="string">m_chatedit</value>
+						<value name="proxy-Initial value" type="string"></value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxTE_MULTILINE" type="bool">FALSE</value>
+						<value name="proxy-wxTE_PROCESS_ENTER" type="bool">TRUE</value>
+						<value name="proxy-wxTE_PROCESS_TAB" type="bool">FALSE</value>
+						<value name="proxy-wxTE_PASSWORD" type="bool">FALSE</value>
+						<value name="proxy-wxTE_READONLY" type="bool">FALSE</value>
+						<value name="proxy-wxTE_RICH" type="bool">FALSE</value>
+						<value name="proxy-wxTE_RICH2" type="bool">FALSE</value>
+						<value name="proxy-wxTE_AUTO_URL" type="bool">FALSE</value>
+						<value name="proxy-wxTE_NOHIDESEL" type="bool">FALSE</value>
+						<value name="proxy-wxTE_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxTE_CENTRE" type="bool">FALSE</value>
+						<value name="proxy-wxTE_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxHSCROLL" type="bool">FALSE</value>
+						<value name="proxy-wxTE_LINEWRAP" type="bool">FALSE</value>
+						<value name="proxy-wxTE_WORDWRAP" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID00009d">
+						<value name="title" type="string">wxStaticText: IDC_STATUS</value>
+						<value name="id" type="Integer">157325120</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">statictext</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">157252360</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">15/1/2005</value>
+						<value name="proxy-type" type="string">wbStaticTextProxy</value>
+						<value name="proxy-Id name" type="string">IDC_STATUS</value>
+						<value name="proxy-Id value" type="Integer">10080</value>
+						<value name="proxy-Class" type="string">wxStaticText</value>
+						<value name="proxy-Member variable name" type="string">m_status</value>
+						<value name="proxy-Label" type="string"></value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string">9E9E9E</value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+						<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Left</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">FALSE</value>
+						<value name="proxy-wxBOTTOM" type="bool">FALSE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+				</path>
+			</path>
+			<path name="ID00009e">
+				<value name="title" type="string">wxMenu: IDM_UPLOADS_MENU</value>
+				<value name="id" type="Integer">157266744</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">menu</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="proxy-type" type="string">wbStandaloneMenuProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="proxy-Id name" type="string">IDM_UPLOADS_MENU</value>
+				<value name="proxy-Resource function" type="string">CreateUploadsPopupMenu</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<path name="ID00009f">
+					<value name="title" type="string">Abort upload(s): IDM_ABORT_UPLOAD</value>
+					<value name="id" type="Integer">157341960</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157266744</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">18/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMAbortUploadClick</value>
+					<value name="proxy-Id name" type="string">IDM_ABORT_UPLOAD</value>
+					<value name="proxy-Id value" type="Integer">10068</value>
+					<value name="proxy-Label" type="string">Abort upload(s)</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+			</path>
+			<path name="ID0000a0">
+				<value name="title" type="string">WASTE Key Generator</value>
+				<value name="id" type="Integer">157345752</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">dialog</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">22/1/2005</value>
+				<value name="proxy-type" type="string">wbDialogProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="event-handler-0" type="string">wxEVT_CLOSE_WINDOW|OnCloseWindow</value>
+				<value name="event-handler-1" type="string">wxEVT_MOTION|OnMotion</value>
+				<value name="proxy-Id name" type="string">ID_KEYGEN_DLG</value>
+				<value name="proxy-Id value" type="Integer">10081</value>
+				<value name="proxy-Class" type="string">WxKeyGenRandomnessDialog</value>
+				<value name="proxy-Base class" type="string">wxDialog</value>
+				<value name="proxy-Window kind" type="string">wxDialog</value>
+				<value name="proxy-Implementation filename" type="string">wxkgrand.cpp</value>
+				<value name="proxy-Header filename" type="string">wxkgrand.h</value>
+				<value name="proxy-XRC filename" type="string"></value>
+				<value name="proxy-Title" type="string">WASTE Key Generator</value>
+				<value name="proxy-Centre" type="bool">TRUE</value>
+				<value name="proxy-Icon" type="string">res/icon1.ico.gif</value>
+				<value name="proxy-Dialog units" type="bool">FALSE</value>
+				<value name="proxy-Help text" type="string"></value>
+				<value name="proxy-Tooltip text" type="string"></value>
+				<value name="proxy-Background colour" type="string"></value>
+				<value name="proxy-Foreground colour" type="string"></value>
+				<value name="proxy-Font" type="string"></value>
+				<value name="proxy-Hidden" type="bool">FALSE</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<value name="proxy-wxDEFAULT_DIALOG_STYLE" type="bool">FALSE</value>
+				<value name="proxy-wxCAPTION" type="bool">TRUE</value>
+				<value name="proxy-wxRESIZE_BORDER" type="bool">TRUE</value>
+				<value name="proxy-wxTHICK_FRAME" type="bool">FALSE</value>
+				<value name="proxy-wxSYSTEM_MENU" type="bool">TRUE</value>
+				<value name="proxy-wxSTAY_ON_TOP" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_NO_PARENT" type="bool">FALSE</value>
+				<value name="proxy-wxCLOSE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMAXIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxMINIMIZE_BOX" type="bool">FALSE</value>
+				<value name="proxy-wxDIALOG_MODAL" type="bool">FALSE</value>
+				<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+				<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+				<value name="proxy-wxCLIP_CHILDREN " type="bool">FALSE</value>
+				<value name="proxy-wxTAB_TRAVERSAL" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_VALIDATE_RECURSIVELY" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_BLOCK_EVENTS" type="bool">FALSE</value>
+				<value name="proxy-wxWS_EX_TRANSIENT" type="bool">FALSE</value>
+				<value name="proxy-Custom styles" type="string"></value>
+				<value name="proxy-wxDIALOG_EX_CONTEXTHELP" type="bool">FALSE</value>
+				<value name="proxy-Fit to content" type="bool">TRUE</value>
+				<value name="proxy-X" type="Integer">-1</value>
+				<value name="proxy-Y" type="Integer">-1</value>
+				<value name="proxy-Width" type="Integer">400</value>
+				<value name="proxy-Height" type="Integer">500</value>
+				<value name="proxy-Event sources" type="string"></value>
+				<path name="ID0000a1">
+					<value name="title" type="string">wxBoxSizer V</value>
+					<value name="id" type="Integer">157363504</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">sizer</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157345752</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+					<value name="proxy-Orientation" type="string">Vertical</value>
+					<value name="proxy-Member variable name" type="string"></value>
+					<value name="proxy-AlignH" type="string">Centre</value>
+					<value name="proxy-AlignV" type="string">Centre</value>
+					<value name="proxy-Stretch factor" type="Integer">0</value>
+					<value name="proxy-Border" type="Integer">5</value>
+					<value name="proxy-wxLEFT" type="bool">TRUE</value>
+					<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+					<value name="proxy-wxTOP" type="bool">TRUE</value>
+					<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+					<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+					<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+					<path name="ID0000a2">
+						<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+						<value name="id" type="Integer">157370504</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">statictext</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">157363504</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">22/1/2005</value>
+						<value name="proxy-type" type="string">wbStaticTextProxy</value>
+						<value name="proxy-Id name" type="string">wxID_STATIC</value>
+						<value name="proxy-Id value" type="Integer">5105</value>
+						<value name="proxy-Class" type="string">wxStaticText</value>
+						<value name="proxy-Member variable name" type="string">m_dialog_text</value>
+						<value name="proxy-Label" type="string">Giving random number generator more randomness, please move
+the mouse around randomly within this window.</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+						<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Left</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID0000a3">
+						<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+						<value name="id" type="Integer">157386928</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">statictext</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">157363504</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">22/1/2005</value>
+						<value name="proxy-type" type="string">wbStaticTextProxy</value>
+						<value name="proxy-Id name" type="string">wxID_STATIC</value>
+						<value name="proxy-Id value" type="Integer">5105</value>
+						<value name="proxy-Class" type="string">wxStaticText</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string"></value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+						<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">66</value>
+						<value name="proxy-AlignH" type="string">Centre</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID0000a4">
+						<value name="title" type="string">wxGauge: ID_KG_PROGRESS</value>
+						<value name="id" type="Integer">157402800</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">gauge</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">157363504</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">22/1/2005</value>
+						<value name="proxy-type" type="string">wbGaugeProxy</value>
+						<value name="proxy-Id name" type="string">ID_KG_PROGRESS</value>
+						<value name="proxy-Id value" type="Integer">10082</value>
+						<value name="proxy-Class" type="string">wxGauge</value>
+						<value name="proxy-Member variable name" type="string">m_kg_progress</value>
+						<value name="proxy-Initial value" type="Integer">1</value>
+						<value name="proxy-Range" type="Integer">64</value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxGA_HORIZONTAL" type="bool">TRUE</value>
+						<value name="proxy-wxGA_VERTICAL" type="bool">FALSE</value>
+						<value name="proxy-wxGA_PROGRESSBAR" type="bool">TRUE</value>
+						<value name="proxy-wxGA_SMOOTH" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">400</value>
+						<value name="proxy-Height" type="Integer">-1</value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">1</value>
+						<value name="proxy-Border" type="Integer">20</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID0000a5">
+						<value name="title" type="string">wxStaticText: wxID_STATIC</value>
+						<value name="id" type="Integer">157370976</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">statictext</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">157363504</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">22/1/2005</value>
+						<value name="proxy-type" type="string">wbStaticTextProxy</value>
+						<value name="proxy-Id name" type="string">wxID_STATIC</value>
+						<value name="proxy-Id value" type="Integer">5105</value>
+						<value name="proxy-Class" type="string">wxStaticText</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-Label" type="string"></value>
+						<value name="proxy-Help text" type="string"></value>
+						<value name="proxy-Tooltip text" type="string"></value>
+						<value name="proxy-Background colour" type="string"></value>
+						<value name="proxy-Foreground colour" type="string"></value>
+						<value name="proxy-Font" type="string"></value>
+						<value name="proxy-Hidden" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<value name="proxy-Data variable" type="string"></value>
+						<value name="proxy-Data validator" type="string"></value>
+						<value name="proxy-wxALIGN_LEFT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_RIGHT" type="bool">FALSE</value>
+						<value name="proxy-wxALIGN_CENTRE" type="bool">FALSE</value>
+						<value name="proxy-wxST_NO_AUTORESIZE" type="bool">FALSE</value>
+						<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSIMPLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxDOUBLE_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSUNKEN_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxRAISED_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxSTATIC_BORDER" type="bool">FALSE</value>
+						<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+						<value name="proxy-Custom styles" type="string"></value>
+						<value name="proxy-X" type="Integer">-1</value>
+						<value name="proxy-Y" type="Integer">-1</value>
+						<value name="proxy-Width" type="Integer">-1</value>
+						<value name="proxy-Height" type="Integer">111</value>
+						<value name="proxy-AlignH" type="string">Centre</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">TRUE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Custom arguments" type="string"></value>
+						<value name="proxy-Custom ctor arguments" type="string"></value>
+					</path>
+					<path name="ID0000a6">
+						<value name="title" type="string">wxBoxSizer H</value>
+						<value name="id" type="Integer">157434656</value>
+						<value name="type" type="string">dialog-control-document</value>
+						<value name="filename" type="string"></value>
+						<value name="icon-name" type="string">sizer</value>
+						<value name="is-transient" type="Integer">0</value>
+						<value name="owns-file" type="Integer">1</value>
+						<value name="title-mode" type="Integer">0</value>
+						<value name="parent" type="Integer">157363504</value>
+						<value name="locked" type="Integer">0</value>
+						<value name="created" type="string">22/1/2005</value>
+						<value name="proxy-type" type="string">wbBoxSizerProxy</value>
+						<value name="proxy-Orientation" type="string">Horizontal</value>
+						<value name="proxy-Member variable name" type="string"></value>
+						<value name="proxy-AlignH" type="string">Expand</value>
+						<value name="proxy-AlignV" type="string">Centre</value>
+						<value name="proxy-Stretch factor" type="Integer">0</value>
+						<value name="proxy-Border" type="Integer">5</value>
+						<value name="proxy-wxLEFT" type="bool">TRUE</value>
+						<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+						<value name="proxy-wxTOP" type="bool">TRUE</value>
+						<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+						<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+						<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+						<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+						<path name="ID0000a7">
+							<value name="title" type="string">wxButton: ID_CANCEL</value>
+							<value name="id" type="Integer">157441696</value>
+							<value name="type" type="string">dialog-control-document</value>
+							<value name="filename" type="string"></value>
+							<value name="icon-name" type="string">dialogcontrol</value>
+							<value name="is-transient" type="Integer">0</value>
+							<value name="owns-file" type="Integer">1</value>
+							<value name="title-mode" type="Integer">0</value>
+							<value name="parent" type="Integer">157434656</value>
+							<value name="locked" type="Integer">0</value>
+							<value name="created" type="string">22/1/2005</value>
+							<value name="proxy-type" type="string">wbButtonProxy</value>
+							<value name="event-handler-0" type="string">wxEVT_COMMAND_BUTTON_CLICKED|OnCancelClick</value>
+							<value name="proxy-Id name" type="string">ID_CANCEL</value>
+							<value name="proxy-Id value" type="Integer">10083</value>
+							<value name="proxy-Class" type="string">wxButton</value>
+							<value name="proxy-Member variable name" type="string"></value>
+							<value name="proxy-Label" type="string">Cancel</value>
+							<value name="proxy-Default" type="bool">FALSE</value>
+							<value name="proxy-Help text" type="string"></value>
+							<value name="proxy-Tooltip text" type="string"></value>
+							<value name="proxy-Background colour" type="string"></value>
+							<value name="proxy-Foreground colour" type="string"></value>
+							<value name="proxy-Font" type="string"></value>
+							<value name="proxy-Hidden" type="bool">FALSE</value>
+							<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+							<value name="proxy-wxBU_LEFT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_RIGHT" type="bool">FALSE</value>
+							<value name="proxy-wxBU_TOP" type="bool">FALSE</value>
+							<value name="proxy-wxBU_BOTTOM" type="bool">FALSE</value>
+							<value name="proxy-wxBU_EXACTFIT" type="bool">FALSE</value>
+							<value name="proxy-wxNO_BORDER" type="bool">FALSE</value>
+							<value name="proxy-wxWANTS_CHARS" type="bool">FALSE</value>
+							<value name="proxy-Custom styles" type="string"></value>
+							<value name="proxy-X" type="Integer">-1</value>
+							<value name="proxy-Y" type="Integer">-1</value>
+							<value name="proxy-Width" type="Integer">-1</value>
+							<value name="proxy-Height" type="Integer">-1</value>
+							<value name="proxy-AlignH" type="string">Centre</value>
+							<value name="proxy-AlignV" type="string">Centre</value>
+							<value name="proxy-Stretch factor" type="Integer">1</value>
+							<value name="proxy-Border" type="Integer">5</value>
+							<value name="proxy-wxLEFT" type="bool">TRUE</value>
+							<value name="proxy-wxRIGHT" type="bool">TRUE</value>
+							<value name="proxy-wxTOP" type="bool">TRUE</value>
+							<value name="proxy-wxBOTTOM" type="bool">TRUE</value>
+							<value name="proxy-wxSHAPED" type="bool">FALSE</value>
+							<value name="proxy-wxADJUST_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-wxFIXED_MINSIZE" type="bool">FALSE</value>
+							<value name="proxy-Custom arguments" type="string"></value>
+							<value name="proxy-Custom ctor arguments" type="string"></value>
+						</path>
+					</path>
+				</path>
+			</path>
+			<path name="ID0000a8">
+				<value name="title" type="string">wxMenu: IDM_DL_POPUP</value>
+				<value name="id" type="Integer">157441184</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">menu</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="proxy-type" type="string">wbStandaloneMenuProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="proxy-Id name" type="string">IDM_DL_POPUP</value>
+				<value name="proxy-Resource function" type="string">CreateDownloadPopupMenu</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<path name="ID0000a9">
+					<value name="title" type="string">Cleanup download folder...: IDM_CLEANUP_DLS</value>
+					<value name="id" type="Integer">157456904</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157441184</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">24/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMCleanupDlsClick</value>
+					<value name="proxy-Id name" type="string">IDM_CLEANUP_DLS</value>
+					<value name="proxy-Id value" type="Integer">10035</value>
+					<value name="proxy-Label" type="string">Cleanup download folder...</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID0000aa">
+					<value name="title" type="string">Cleanup selected file(s): ID_CLEANUP_SEL</value>
+					<value name="id" type="Integer">157460768</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157441184</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">24/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnCleanupSelClick</value>
+					<value name="proxy-Id name" type="string">ID_CLEANUP_SEL</value>
+					<value name="proxy-Id value" type="Integer">10084</value>
+					<value name="proxy-Label" type="string">Cleanup selected file(s)</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID0000ab">
+					<value name="title" type="string">Abort selected download(s): ID_ABORT_DL</value>
+					<value name="id" type="Integer">157464432</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157441184</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">24/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnAbortDlClick</value>
+					<value name="proxy-Id name" type="string">ID_ABORT_DL</value>
+					<value name="proxy-Id value" type="Integer">10085</value>
+					<value name="proxy-Label" type="string">Abort selected download(s)</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID0000ac">
+					<value name="title" type="string">Resume selected download(s): ID_RESUME_DL</value>
+					<value name="id" type="Integer">157468096</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157441184</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">24/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnResumeDlClick</value>
+					<value name="proxy-Id name" type="string">ID_RESUME_DL</value>
+					<value name="proxy-Id value" type="Integer">10086</value>
+					<value name="proxy-Label" type="string">Resume selected download(s)</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+			</path>
+			<path name="ID0000ad">
+				<value name="title" type="string">wxMenu: IDM_DLQ_POPUP</value>
+				<value name="id" type="Integer">157471792</value>
+				<value name="type" type="string">dialog-document</value>
+				<value name="filename" type="string"></value>
+				<value name="icon-name" type="string">menu</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">1</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">146564944</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="proxy-type" type="string">wbStandaloneMenuProxy</value>
+				<value name="base-id" type="Integer">10000</value>
+				<value name="use-id-prefix" type="bool">FALSE</value>
+				<value name="id-prefix" type="string"></value>
+				<value name="proxy-Id name" type="string">IDM_DLQ_POPUP</value>
+				<value name="proxy-Resource function" type="string">CreateDownloadQueuePopupMenu</value>
+				<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				<path name="ID0000ae">
+					<value name="title" type="string">Download item(s) now: IDM_DLNOW</value>
+					<value name="id" type="Integer">157473768</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157471792</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">24/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMDlnowClick</value>
+					<value name="proxy-Id name" type="string">IDM_DLNOW</value>
+					<value name="proxy-Id value" type="Integer">10087</value>
+					<value name="proxy-Label" type="string">Download item(s) now</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID0000af">
+					<value name="title" type="string">Move item(s) to top of queue: IDM_TO_TOP</value>
+					<value name="id" type="Integer">157477560</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157471792</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">24/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMToTopClick</value>
+					<value name="proxy-Id name" type="string">IDM_TO_TOP</value>
+					<value name="proxy-Id value" type="Integer">10088</value>
+					<value name="proxy-Label" type="string">Move item(s) to top of queue</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID0000b0">
+					<value name="title" type="string">Move item(s) to bottom of queue: IDM_TO_BOT</value>
+					<value name="id" type="Integer">157481224</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157471792</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">24/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMToBotClick</value>
+					<value name="proxy-Id name" type="string">IDM_TO_BOT</value>
+					<value name="proxy-Id value" type="Integer">10089</value>
+					<value name="proxy-Label" type="string">Move item(s) to bottom of queue</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+				<path name="ID0000b1">
+					<value name="title" type="string">Remove item(s) from queue: IDM_REMOVE</value>
+					<value name="id" type="Integer">157484888</value>
+					<value name="type" type="string">dialog-control-document</value>
+					<value name="filename" type="string"></value>
+					<value name="icon-name" type="string">menuitem</value>
+					<value name="is-transient" type="Integer">0</value>
+					<value name="owns-file" type="Integer">1</value>
+					<value name="title-mode" type="Integer">0</value>
+					<value name="parent" type="Integer">157471792</value>
+					<value name="locked" type="Integer">0</value>
+					<value name="created" type="string">24/1/2005</value>
+					<value name="proxy-type" type="string">wbMenuItemProxy</value>
+					<value name="event-handler-0" type="string">wxEVT_COMMAND_MENU_SELECTED|OnMRemoveClick</value>
+					<value name="proxy-Id name" type="string">IDM_REMOVE</value>
+					<value name="proxy-Id value" type="Integer">10090</value>
+					<value name="proxy-Label" type="string">Remove item(s) from queue</value>
+					<value name="proxy-Kind" type="string">Normal</value>
+					<value name="proxy-Checked" type="bool">FALSE</value>
+					<value name="proxy-Help text" type="string"></value>
+					<value name="proxy-Bitmap" type="string"></value>
+					<value name="proxy-Platform" type="string">&lt;Any platform&gt;</value>
+				</path>
+			</path>
+		</path>
+		<path name="ID0000b2">
+			<value name="title" type="string">Sources</value>
+			<value name="id" type="Integer">157488464</value>
+			<value name="type" type="string">html-document</value>
+			<value name="filename" type="string"></value>
+			<value name="icon-name" type="string">sourcesfolder</value>
+			<value name="is-transient" type="Integer">1</value>
+			<value name="owns-file" type="Integer">1</value>
+			<value name="title-mode" type="Integer">0</value>
+			<value name="parent" type="Integer">146543728</value>
+			<value name="locked" type="Integer">1</value>
+			<path name="ID0000b3">
+				<value name="title" type="string">asyncdns.cpp</value>
+				<value name="id" type="Integer">157488576</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">asyncdns.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000b4">
+				<value name="title" type="string">blowfish.cpp</value>
+				<value name="id" type="Integer">157488768</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">blowfish.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000b5">
+				<value name="title" type="string">childwnd.cpp</value>
+				<value name="id" type="Integer">157488960</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">childwnd.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000b6">
+				<value name="title" type="string">config.cpp</value>
+				<value name="id" type="Integer">157489152</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">config.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000b7">
+				<value name="title" type="string">connection.cpp</value>
+				<value name="id" type="Integer">157489376</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">connection.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000b8">
+				<value name="title" type="string">d_chat.cpp</value>
+				<value name="id" type="Integer">157489568</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">d_chat.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000b9">
+				<value name="title" type="string">filedb.cpp</value>
+				<value name="id" type="Integer">157489792</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">filedb.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000ba">
+				<value name="title" type="string">keygen.cpp</value>
+				<value name="id" type="Integer">157489984</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">keygen.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000bb">
+				<value name="title" type="string">license.cpp</value>
+				<value name="id" type="Integer">157490208</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">license.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000bc">
+				<value name="title" type="string">listen.cpp</value>
+				<value name="id" type="Integer">157490432</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">listen.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000bd">
+				<value name="title" type="string">listview.cpp</value>
+				<value name="id" type="Integer">157490624</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">listview.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000be">
+				<value name="title" type="string">m_chat.cpp</value>
+				<value name="id" type="Integer">157490816</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">m_chat.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000bf">
+				<value name="title" type="string">m_file.cpp</value>
+				<value name="id" type="Integer">157491040</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">m_file.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000c0">
+				<value name="title" type="string">m_keydist.cpp</value>
+				<value name="id" type="Integer">157491232</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">m_keydist.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000c1">
+				<value name="title" type="string">m_lcaps.cpp</value>
+				<value name="id" type="Integer">157491456</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">m_lcaps.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000c2">
+				<value name="title" type="string">m_ping.cpp</value>
+				<value name="id" type="Integer">157491680</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">m_ping.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000c3">
+				<value name="title" type="string">m_search.cpp</value>
+				<value name="id" type="Integer">157491904</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">m_search.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000c4">
+				<value name="title" type="string">m_upload.cpp</value>
+				<value name="id" type="Integer">157492096</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">m_upload.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000c5">
+				<value name="title" type="string">main.cpp</value>
+				<value name="id" type="Integer">157492288</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">main.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000c6">
+				<value name="title" type="string">mqueue.cpp</value>
+				<value name="id" type="Integer">157492480</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">mqueue.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000c7">
+				<value name="title" type="string">mqueuelist.cpp</value>
+				<value name="id" type="Integer">157492672</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">mqueuelist.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000c8">
+				<value name="title" type="string">netkern.cpp</value>
+				<value name="id" type="Integer">157492864</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">netkern.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000c9">
+				<value name="title" type="string">netq.cpp</value>
+				<value name="id" type="Integer">157493056</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">netq.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000ca">
+				<value name="title" type="string">prefs.cpp</value>
+				<value name="id" type="Integer">157493248</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">prefs.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000cb">
+				<value name="title" type="string">sha.cpp</value>
+				<value name="id" type="Integer">157493440</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">sha.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000cc">
+				<value name="title" type="string">sharedmain.cpp</value>
+				<value name="id" type="Integer">157493632</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">sharedmain.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000cd">
+				<value name="title" type="string">shbuf.cpp</value>
+				<value name="id" type="Integer">157493824</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">shbuf.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000ce">
+				<value name="title" type="string">srchwnd.cpp</value>
+				<value name="id" type="Integer">157494016</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">srchwnd.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000cf">
+				<value name="title" type="string">srvmain.cpp</value>
+				<value name="id" type="Integer">157494240</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">srvmain.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000d0">
+				<value name="title" type="string">stdafx.cpp</value>
+				<value name="id" type="Integer">157494432</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">stdafx.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000d1">
+				<value name="title" type="string">util.cpp</value>
+				<value name="id" type="Integer">157494624</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">util.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000d2">
+				<value name="title" type="string">xfers.cpp</value>
+				<value name="id" type="Integer">157494816</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">xfers.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000d3">
+				<value name="title" type="string">xferwnd.cpp</value>
+				<value name="id" type="Integer">157495008</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">xferwnd.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000d4">
+				<value name="title" type="string">md5.cpp</value>
+				<value name="id" type="Integer">157495200</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">rsa/md5.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000d5">
+				<value name="title" type="string">nn.cpp</value>
+				<value name="id" type="Integer">157495392</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">rsa/nn.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000d6">
+				<value name="title" type="string">prime.cpp</value>
+				<value name="id" type="Integer">157495584</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">rsa/prime.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000d7">
+				<value name="title" type="string">r_keygen.cpp</value>
+				<value name="id" type="Integer">157495776</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">rsa/r_keygen.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000d8">
+				<value name="title" type="string">r_random.cpp</value>
+				<value name="id" type="Integer">157495968</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">rsa/r_random.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000d9">
+				<value name="title" type="string">rsa.cpp</value>
+				<value name="id" type="Integer">157496160</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">rsa/rsa.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+			<path name="ID0000da">
+				<value name="title" type="string">wxextra.cpp</value>
+				<value name="id" type="Integer">157496352</value>
+				<value name="type" type="string">source-editor-document</value>
+				<value name="filename" type="string">wxextra.cpp</value>
+				<value name="icon-name" type="string">source-editor</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">1</value>
+				<value name="parent" type="Integer">157488464</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">31/0/2005</value>
+				<value name="language" type="string"></value>
+			</path>
+		</path>
+		<path name="ID0000db">
+			<value name="title" type="string">Images</value>
+			<value name="id" type="Integer">157496544</value>
+			<value name="type" type="string">html-document</value>
+			<value name="filename" type="string"></value>
+			<value name="icon-name" type="string">bitmapsfolder</value>
+			<value name="is-transient" type="Integer">1</value>
+			<value name="owns-file" type="Integer">1</value>
+			<value name="title-mode" type="Integer">0</value>
+			<value name="parent" type="Integer">146543728</value>
+			<value name="locked" type="Integer">1</value>
+			<path name="ID0000dc">
+				<value name="title" type="string">user.ico.gif</value>
+				<value name="id" type="Integer">157496752</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/user.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000dd">
+				<value name="title" type="string">allusers.ico.gif</value>
+				<value name="id" type="Integer">157496952</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/allusers.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000de">
+				<value name="title" type="string">backward.ico.gif</value>
+				<value name="id" type="Integer">157497152</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/backward.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000df">
+				<value name="title" type="string">browse.ico.gif</value>
+				<value name="id" type="Integer">157497352</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/browse.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000e0">
+				<value name="title" type="string">chat.ico.gif</value>
+				<value name="id" type="Integer">157497552</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/chat.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000e1">
+				<value name="title" type="string">clear-all2.ico.gif</value>
+				<value name="id" type="Integer">157497752</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/clear-all2.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000e2">
+				<value name="title" type="string">clear-completed2.ico.gif</value>
+				<value name="id" type="Integer">157497952</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/clear-completed2.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000e3">
+				<value name="title" type="string">clear-inactive2.ico.gif</value>
+				<value name="id" type="Integer">157498152</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/clear-inactive2.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000e4">
+				<value name="title" type="string">connect.ico.gif</value>
+				<value name="id" type="Integer">157498352</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/connect.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000e5">
+				<value name="title" type="string">dir.ico.gif</value>
+				<value name="id" type="Integer">157498552</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/dir.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000e6">
+				<value name="title" type="string">disconnect.ico.gif</value>
+				<value name="id" type="Integer">157498752</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/disconnect.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000e7">
+				<value name="title" type="string">dlnow.ico.gif</value>
+				<value name="id" type="Integer">157498952</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/dlnow.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000e8">
+				<value name="title" type="string">file.ico.gif</value>
+				<value name="id" type="Integer">157499152</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/file.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000e9">
+				<value name="title" type="string">forward.ico.gif</value>
+				<value name="id" type="Integer">157499352</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/forward.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000ea">
+				<value name="title" type="string">icon1.ico.gif</value>
+				<value name="id" type="Integer">157499552</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/icon1.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000eb">
+				<value name="title" type="string">iconplay.ico.gif</value>
+				<value name="id" type="Integer">157499784</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/iconplay.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000ec">
+				<value name="title" type="string">more2.ico.gif</value>
+				<value name="id" type="Integer">157499984</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/more2.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000ed">
+				<value name="title" type="string">move2end.ico.gif</value>
+				<value name="id" type="Integer">157500184</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/move2end.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000ee">
+				<value name="title" type="string">move2top.ico.gif</value>
+				<value name="id" type="Integer">157500384</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/move2top.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000ef">
+				<value name="title" type="string">search.ico.gif</value>
+				<value name="id" type="Integer">157500584</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/search.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000f0">
+				<value name="title" type="string">stopdl.ico.gif</value>
+				<value name="id" type="Integer">157500784</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/stopdl.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000f1">
+				<value name="title" type="string">transfers.ico.gif</value>
+				<value name="id" type="Integer">157500984</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/transfers.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000f2">
+				<value name="title" type="string">updir.ico.gif</value>
+				<value name="id" type="Integer">157501184</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/updir.ico.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">30/0/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000f3">
+				<value name="title" type="string">connect_icon.gif</value>
+				<value name="id" type="Integer">157501384</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/connect_icon.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">24/1/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+			<path name="ID0000f4">
+				<value name="title" type="string">chat_icon.gif</value>
+				<value name="id" type="Integer">157501584</value>
+				<value name="type" type="string">image-document</value>
+				<value name="filename" type="string">res/chat_icon.gif</value>
+				<value name="icon-name" type="string">image</value>
+				<value name="is-transient" type="Integer">0</value>
+				<value name="owns-file" type="Integer">0</value>
+				<value name="title-mode" type="Integer">0</value>
+				<value name="parent" type="Integer">157496544</value>
+				<value name="locked" type="Integer">0</value>
+				<value name="created" type="string">24/1/2005</value>
+				<value name="zoom-level" type="Integer">100</value>
+			</path>
+		</path>
+	</path>
+</path>
diff -b -N -ru waste-source-1.5-beta-2/wxwaste.xrc latest/wxwaste.xrc
--- waste-source-1.5-beta-2/wxwaste.xrc	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxwaste.xrc	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,1064 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<resource version="2.3.0.1" xmlns="http://www.wxwidgets.org/wxxrc">
+    <object class="wxApp" name="" subclass="WxwasteApp">
+    </object>
+    <object class="wxFrame" name="ID_MAIN_FRAME" subclass="MainFrame">
+        <style>wxDEFAULT_FRAME_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU|wxTAB_TRAVERSAL</style>
+        <size>400,300</size>
+        <title>WxWASTE</title>
+        <object class="wxMenuBar" name="ID_MAIN_MENUBAR">
+            <object class="wxMenu">
+                <label>File</label>
+                <object class="wxMenuItem" name="ID_MENU_PREFS">
+                    <label>&amp;Preferences...</label>
+                </object>
+                <object class="wxMenuItem" name="ID_MENU_QUIT">
+                    <label>&amp;Quit</label>
+                </object>
+            </object>
+            <object class="wxMenu">
+                <label>View</label>
+                <object class="wxMenuItem" name="ID_MENU_NETSTAT">
+                    <label>&amp;Network Status...</label>
+                    <checkable>1</checkable>
+                </object>
+                <object class="wxMenuItem" name="ID_MENU_BROWSER">
+                    <label>&amp;Browser...</label>
+                    <checkable>1</checkable>
+                </object>
+                <object class="wxMenuItem" name="ID_MENU_XFERS">
+                    <label>&amp;Transfers...</label>
+                    <checkable>1</checkable>
+                </object>
+                <object class="wxMenuItem" name="ID_MENU_UPLOADS">
+                    <label>&amp;Uploads...</label>
+                    <checkable>1</checkable>
+                </object>
+                <object class="separator">
+                </object>
+                <object class="wxMenuItem" name="ID_MENU_JOINCHAT">
+                    <label>Create/&amp;Join Chat...</label>
+                </object>
+                <object class="wxMenu" name="ID_CHATS">
+                    <label>Chat Windows...</label>
+                </object>
+            </object>
+        </object>
+        <object class="wxBoxSizer">
+            <orient>wxVERTICAL</orient>
+            <object class="sizeritem">
+                <flag>wxALIGN_CENTER_HORIZONTAL|wxALL</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="ID_BITMAPBUTTON_NETSTAT">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/connect.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                        <border>5</border>
+                        <object class="wxStaticText" name="IDC_NETSTATUS">
+                            <label>:0</label>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="ID_BUTTON_BROWSER">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/search.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="ID_JOINCHAT">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/chat.ico.gif</bitmap>
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxALIGN_LEFT|wxALL|wxADJUST_MINSIZE</flag>
+                <border>5</border>
+                <object class="wxStaticText" name="wxID_STATIC">
+                    <style>wxALIGN_LEFT</style>
+                    <label>Users:</label>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <option>1</option>
+                <object class="wxTreeCtrl" name="IDC_USERS">
+                    <size>100,130</size>
+                    <style>wxTR_NO_BUTTONS|wxTR_NO_LINES|wxTR_FULL_ROW_HIGHLIGHT|wxTR_HIDE_ROOT|wxSUNKEN_BORDER</style>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxStaticLine" name="wxID_STATIC">
+                    <style>wxLI_HORIZONTAL</style>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxALIGN_LEFT|wxALL|wxADJUST_MINSIZE</flag>
+                <border>5</border>
+                <object class="wxStaticText" name="wxID_STATIC">
+                    <style>wxALIGN_LEFT</style>
+                    <label>Chats:</label>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxTreeCtrl" name="IDC_CHATROOMS">
+                    <size>100,60</size>
+                    <style>wxTR_NO_BUTTONS|wxTR_NO_LINES|wxTR_FULL_ROW_HIGHLIGHT|wxTR_HIDE_ROOT|wxTR_SINGLE|wxSUNKEN_BORDER</style>
+                </object>
+            </object>
+        </object>
+    </object>
+    <object class="wxDialog" name="ID_NETSTAT" subclass="WxNetStatDialog">
+        <style>wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU</style>
+        <size>400,300</size>
+        <title>Network Status</title>
+        <centered>1</centered>
+        <object class="wxBoxSizer">
+            <orient>wxVERTICAL</orient>
+            <object class="sizeritem">
+                <flag>wxGROW|wxLEFT|wxRIGHT|wxTOP</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <option>9</option>
+                        <object class="wxComboBox" name="IDC_NEWCONNECTION">
+                            <style>wxCB_DROPDOWN</style>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_ADDCONNECTION">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/connect.ico.gif</bitmap>
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxALIGN_LEFT|wxLEFT|wxRIGHT</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_CONNECTCATCH">
+                            <tooltip>Connect to selected host</tooltip>
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/connect.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_REMOVECONNECTION">
+                            <tooltip>Disconnect from selected host</tooltip>
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/stopdl.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_REMOVECATCH">
+                            <tooltip>Disconnect and remove selected host</tooltip>
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/disconnect.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                        <border>5</border>
+                        <object class="wxStaticText" name="wxID_STATIC">
+                            <label>Maintain</label>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxTextCtrl" name="IDC_NUMCONUP">
+                            <size>30,-1</size>
+                            <value>1</value>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                        <border>5</border>
+                        <object class="wxStaticText" name="wxID_STATIC">
+                            <label>connections</label>
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <option>9</option>
+                <object class="wxListCtrl" name="ID_NS_HOST_LISTCTRL">
+                    <size>400,170</size>
+                    <style>wxLC_REPORT|wxLC_SINGLE_SEL|wxSUNKEN_BORDER</style>
+                </object>
+            </object>
+        </object>
+    </object>
+    <object class="wxDialog" name="ID_BROWSER" subclass="WxBrowser">
+        <style>wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU</style>
+        <title>Browser</title>
+        <centered>1</centered>
+        <object class="wxBoxSizer">
+            <orient>wxVERTICAL</orient>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="ID_SRCH_USERLIST">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/allusers.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_GOPARENT">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/updir.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxLEFT|wxTOP|wxBOTTOM</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_BACK">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/backward.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxGROW|wxRIGHT|wxTOP|wxBOTTOM</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_BACK2">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/more2.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxLEFT|wxTOP|wxBOTTOM</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_FORWARD">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/forward.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxGROW|wxRIGHT|wxTOP|wxBOTTOM</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_FORWARD2">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/more2.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <option>9</option>
+                        <object class="wxComboBox" name="IDC_SEARCHTEXT">
+                            <style>wxCB_DROPDOWN</style>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_SEARCH">
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/search.ico.gif</bitmap>
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <option>1</option>
+                <object class="wxPanel" name="IDC_SEARCHRES_PANEL">
+                    <size>670,450</size>
+                    <style>wxNO_BORDER|wxTAB_TRAVERSAL</style>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                        <border>5</border>
+                        <object class="wxStaticText" name="wxID_STATIC">
+                            <label>Filter search results</label>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxTextCtrl" name="IDC_EDIT_FILTER">
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                        <border>5</border>
+                        <option>9</option>
+                        <object class="wxStaticText" name="ID_SEARCH_DATA">
+                            <fg>#929292</fg>
+                            <label>Ready</label>
+                        </object>
+                    </object>
+                </object>
+            </object>
+        </object>
+    </object>
+    <object class="wxDialog" name="ID_XFERS" subclass="WxXfers">
+        <style>wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU</style>
+        <size>550,300</size>
+        <title>Transfers</title>
+        <centered>1</centered>
+        <object class="wxBoxSizer">
+            <orient>wxVERTICAL</orient>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <option>1</option>
+                <object class="wxNotebook" name="ID_NOTEBOOK">
+                    <object class="notebookpage">
+                        <label>Downloads</label>
+                        <object class="wxPanel" name="ID_DL_PANEL">
+                            <style>wxSUNKEN_BORDER|wxTAB_TRAVERSAL</style>
+                            <object class="wxBoxSizer">
+                                <orient>wxVERTICAL</orient>
+                                <object class="sizeritem">
+                                    <flag>wxGROW|wxALL</flag>
+                                    <border>5</border>
+                                    <option>2</option>
+                                    <object class="wxListCtrl" name="IDD_XFERS">
+                                        <size>100,80</size>
+                                        <style>wxLC_REPORT</style>
+                                    </object>
+                                </object>
+                                <object class="sizeritem">
+                                    <flag>wxALIGN_LEFT|wxLEFT|wxRIGHT|wxTOP</flag>
+                                    <border>5</border>
+                                    <object class="wxBoxSizer">
+                                        <orient>wxHORIZONTAL</orient>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxChoice" name="IDC_AUTOCLEAR">
+                                                <content>
+                                                    <item>Do not clear completed downloads</item>
+                                                    <item>Clear when complete</item>
+                                                </content>
+                                                <selection>0</selection>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxChoice" name="IDC_AUTORESUME">
+                                                <content>
+                                                    <item>Auto-resume downloads</item>
+                                                    <item>Do not auto-resume</item>
+                                                </content>
+                                                <selection>0</selection>
+                                            </object>
+                                        </object>
+                                    </object>
+                                </object>
+                                <object class="sizeritem">
+                                    <flag>wxALIGN_LEFT|wxLEFT|wxRIGHT|wxBOTTOM</flag>
+                                    <border>5</border>
+                                    <object class="wxBoxSizer">
+                                        <orient>wxHORIZONTAL</orient>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxBitmapButton" name="IDC_RESUME">
+                                                <tooltip>Resume selected download(s)</tooltip>
+                                                <style>wxBU_AUTODRAW</style>
+                                                <bitmap>res/dlnow.ico.gif</bitmap>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxBitmapButton" name="IDC_ABORTSEL">
+                                                <tooltip>Abort selected download(s)</tooltip>
+                                                <style>wxBU_AUTODRAW</style>
+                                                <bitmap>res/stopdl.ico.gif</bitmap>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxBitmapButton" name="IDC_CLEARCOMP">
+                                                <tooltip>Clear completed download(s)</tooltip>
+                                                <style>wxBU_AUTODRAW</style>
+                                                <bitmap>res/clear-completed2.ico.gif</bitmap>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxBitmapButton" name="IDC_CLEARCOMP3">
+                                                <tooltip>Clear inactive download(s)</tooltip>
+                                                <style>wxBU_AUTODRAW</style>
+                                                <bitmap>res/clear-inactive2.ico.gif</bitmap>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxBitmapButton" name="IDC_CLEARALL">
+                                                <tooltip>Clear all download(s)</tooltip>
+                                                <style>wxBU_AUTODRAW</style>
+                                                <bitmap>res/clear-all2.ico.gif</bitmap>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                                            <border>5</border>
+                                            <object class="wxStaticText" name="wxID_STATIC">
+                                                <label>Max simultaneous</label>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxTextCtrl" name="IDC_MAXSIMULDL">
+                                                <size>40,-1</size>
+                                                <tooltip>Max simultaneous downloads</tooltip>
+                                                <value>1</value>
+                                            </object>
+                                        </object>
+                                    </object>
+                                </object>
+                            </object>
+                        </object>
+                    </object>
+                    <object class="notebookpage">
+                        <label>Download Queue</label>
+                        <object class="wxPanel" name="ID_DLQUEUE_PANEL">
+                            <style>wxSUNKEN_BORDER|wxTAB_TRAVERSAL</style>
+                            <object class="wxBoxSizer">
+                                <orient>wxVERTICAL</orient>
+                                <object class="sizeritem">
+                                    <flag>wxGROW|wxALL</flag>
+                                    <border>5</border>
+                                    <option>2</option>
+                                    <object class="wxListCtrl" name="ID_RECVLISTQ">
+                                        <size>100,80</size>
+                                        <style>wxLC_REPORT</style>
+                                    </object>
+                                </object>
+                                <object class="sizeritem">
+                                    <flag>wxALIGN_LEFT|wxALL</flag>
+                                    <border>5</border>
+                                    <object class="wxBoxSizer">
+                                        <orient>wxHORIZONTAL</orient>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxBitmapButton" name="IDC_DLNOW">
+                                                <tooltip>Download item(s) immediately</tooltip>
+                                                <style>wxBU_AUTODRAW</style>
+                                                <bitmap>res/dlnow.ico.gif</bitmap>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxBitmapButton" name="IDC_MOVETOTOP">
+                                                <tooltip>Move item(s) to top of queue</tooltip>
+                                                <style>wxBU_AUTODRAW</style>
+                                                <bitmap>res/move2top.ico.gif</bitmap>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxBitmapButton" name="IDC_MOVETOBOTTOM">
+                                                <tooltip>Move item(s) to bottom of queue</tooltip>
+                                                <style>wxBU_AUTODRAW</style>
+                                                <bitmap>res/move2end.ico.gif</bitmap>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxBitmapButton" name="IDC_REMOVEQUEUE">
+                                                <tooltip>Remove item(s) from queue</tooltip>
+                                                <style>wxBU_AUTODRAW</style>
+                                                <bitmap>res/stopdl.ico.gif</bitmap>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                                            <border>5</border>
+                                            <object class="wxBitmapButton" name="IDC_CLEARQUEUE">
+                                                <tooltip>Clear queue</tooltip>
+                                                <style>wxBU_AUTODRAW</style>
+                                                <bitmap>res/clear-all2.ico.gif</bitmap>
+                                            </object>
+                                        </object>
+                                        <object class="sizeritem">
+                                            <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                                            <border>5</border>
+                                            <object class="wxStaticText" name="IDC_QUEUEITEMS">
+                                                <label>0 items in queue</label>
+                                            </object>
+                                        </object>
+                                    </object>
+                                </object>
+                            </object>
+                        </object>
+                    </object>
+                </object>
+            </object>
+        </object>
+    </object>
+    <object class="wxDialog" name="ID_UPLOADS" subclass="WxUploads">
+        <style>wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU</style>
+        <size>550,300</size>
+        <title>Uploads</title>
+        <centered>1</centered>
+        <object class="wxBoxSizer">
+            <orient>wxVERTICAL</orient>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <option>2</option>
+                <object class="wxListCtrl" name="IDD_UPLOADS">
+                    <size>100,80</size>
+                    <style>wxLC_REPORT</style>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxALIGN_LEFT|wxALL</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_ABORTSEL">
+                            <tooltip>Abort selected upload(s)</tooltip>
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/stopdl.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_CLEARCOMP">
+                            <tooltip>Clear inactive upload(s)</tooltip>
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/clear-inactive2.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxBitmapButton" name="IDC_CLEARCOMP2">
+                            <tooltip>Clear all upload(s)</tooltip>
+                            <style>wxBU_AUTODRAW</style>
+                            <bitmap>res/clear-completed2.ico.gif</bitmap>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxChoice" name="IDC_AUTOCLEAR">
+                            <content>
+                                <item>Do not clear completed uploads</item>
+                                <item>Clear when complete</item>
+                            </content>
+                            <selection>0</selection>
+                        </object>
+                    </object>
+                </object>
+            </object>
+        </object>
+    </object>
+    <object class="wxMenu" name="IDM_USERLIST_POPUP">
+        <object class="wxMenuItem" name="IDM_CHAT_USER">
+            <label>Chat user</label>
+        </object>
+        <object class="wxMenuItem" name="IDM_WHOIS_USER">
+            <label>Whois user</label>
+        </object>
+        <object class="wxMenuItem" name="IDM_BROWSE_USER">
+            <label>Browse user</label>
+        </object>
+        <object class="wxMenuItem" name="IDM_SENDFILE_USER">
+            <label>Send file(s) to user</label>
+        </object>
+    </object>
+    <object class="wxMenu" name="IDM_SEARCHRES_POPUP">
+        <object class="wxMenuItem" name="ID_DOWNLOAD">
+            <label>Download</label>
+        </object>
+        <object class="wxMenuItem" name="ID_DLPARENT">
+            <label>Download parent</label>
+        </object>
+        <object class="wxMenuItem" name="ID_BROWSELOC">
+            <label>Browse parent</label>
+        </object>
+        <object class="wxMenuItem" name="ID_COPYLOC">
+            <label>Copy location</label>
+        </object>
+    </object>
+    <object class="wxMenu" name="IDM_SEARCHRES_FILE_POPUP">
+        <object class="wxMenuItem" name="ID_DOWNLOADFOLDER">
+            <label>Download</label>
+        </object>
+        <object class="wxMenuItem" name="ID_BROWSEFOLDER">
+            <label>Browse directory</label>
+        </object>
+        <object class="wxMenuItem" name="ID_COPYLOC">
+            <label>Copy location</label>
+        </object>
+    </object>
+    <object class="wxMenu" name="IDM_SEARCHRES_USER_POPUP">
+        <object class="wxMenuItem" name="ID_BROWSENODE">
+            <label>Browse user</label>
+        </object>
+        <object class="wxMenuItem" name="ID_PRIVMSGNODE">
+            <label>Chat user(s)</label>
+        </object>
+        <object class="wxMenuItem" name="IDM_SEARCHRES_USER_WHOIS">
+            <label>Whois user</label>
+        </object>
+        <object class="wxMenuItem" name="ID_SENDFILENODE">
+            <label>Send file(s) to user(s)</label>
+        </object>
+        <object class="wxMenuItem" name="ID_COPYLOC">
+            <label>Copy location</label>
+        </object>
+    </object>
+    <object class="wxDialog" name="ID_PREFS_DIALOG" subclass="WxPrefs">
+        <style>wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU</style>
+        <size>400,300</size>
+        <title>Preferences</title>
+        <centered>1</centered>
+        <object class="wxBoxSizer">
+            <orient>wxVERTICAL</orient>
+            <object class="sizeritem">
+                <flag>wxALIGN_CENTER_HORIZONTAL|wxALL|wxADJUST_MINSIZE</flag>
+                <border>5</border>
+                <object class="wxStaticText" name="wxID_STATIC">
+                    <label>(This is a very basic preferences dialog.  The full dialog is yet to be implemented.
+Edit the configuration file directly for more options.)</label>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                        <border>5</border>
+                        <object class="wxStaticText" name="wxID_STATIC">
+                            <tooltip>Select your connection's speed.  If you select modem or ISDN, your node will not route traffic
+for other nodes and network stability may be affected.</tooltip>
+                            <label>Connection speed:</label>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxLEFT|wxRIGHT|wxTOP</flag>
+                        <border>5</border>
+                        <option>9</option>
+                        <object class="wxChoice" name="ID_CONN_SPEED">
+                            <content>
+                                <item>Modem</item>
+                                <item>ISDN</item>
+                                <item>Slow DSL/Cable</item>
+                                <item>T1/Fast DSL/Cable</item>
+                                <item>T3/LAN</item>
+                            </content>
+                            <selection>2</selection>
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxLEFT|wxRIGHT</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                        <border>5</border>
+                        <object class="wxStaticText" name="wxID_STATIC">
+                            <tooltip>Your nickname to use in WASTE.</tooltip>
+                            <label>Your nickname:</label>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <option>9</option>
+                        <object class="wxTextCtrl" name="ID_NICKNAME">
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxButton" name="ID_UPD_NICK">
+                            <label>Update nickname</label>
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxLEFT|wxRIGHT</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                        <border>5</border>
+                        <object class="wxStaticText" name="wxID_STATIC">
+                            <tooltip>Your real name.</tooltip>
+                            <label>Real name / user info:</label>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <option>9</option>
+                        <object class="wxTextCtrl" name="ID_USER_INFO">
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxLEFT|wxRIGHT|wxADJUST_MINSIZE</flag>
+                        <border>5</border>
+                        <object class="wxStaticText" name="wxID_STATIC">
+                            <tooltip>Network name.  You can only connect to nodes with EXACTLY
+the same network name setting.</tooltip>
+                            <label>Network name / ID / passphrase:</label>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <option>9</option>
+                        <object class="wxTextCtrl" name="ID_NET_NAME">
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxButton" name="ID_GEN_PRIVKEY">
+                    <label>Generate new private key...</label>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxButton" name="ID_COPY_PUBKEY">
+                    <label>Copy my public key to the clipboard</label>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxGROW|wxALL</flag>
+                        <border>5</border>
+                        <option>1</option>
+                        <object class="wxButton" name="ID_VIEW_PUBKEYS">
+                            <label>View authorized public keys</label>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxGROW|wxALL</flag>
+                        <border>5</border>
+                        <option>1</option>
+                        <object class="wxButton" name="ID_ADD_PUB_KEYS">
+                            <label>Add public key(s)...</label>
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxButton" name="ID_BROADCAST_PUBKEY">
+                    <label>Broadcast my public key on network now</label>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxLEFT|wxRIGHT</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL|wxADJUST_MINSIZE</flag>
+                        <border>5</border>
+                        <object class="wxStaticText" name="wxID_STATIC">
+                            <tooltip>A directory where downloaded files will be saved.</tooltip>
+                            <label>Path to save downloaded files:</label>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <option>9</option>
+                        <object class="wxTextCtrl" name="ID_DOWNLOAD_PATH">
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxButton" name="ID_BROWSE_DL_PATH">
+                            <label>Browse...</label>
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxALIGN_LEFT|wxLEFT|wxRIGHT|wxTOP|wxADJUST_MINSIZE</flag>
+                <border>5</border>
+                <object class="wxStaticText" name="wxID_STATIC">
+                    <tooltip>The list of directories to share to other users.</tooltip>
+                    <label>Directories to share: (separate multiple dirs with ";")</label>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxLEFT|wxRIGHT|wxBOTTOM</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <option>9</option>
+                        <object class="wxTextCtrl" name="ID_SHARE_PATH">
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <object class="wxButton" name="ID_ADD_SHARE_PATH">
+                            <label>Add...</label>
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxALIGN_CENTER_HORIZONTAL|wxALL</flag>
+                <border>5</border>
+                <object class="wxButton" name="ID_CLOSE_PREFS">
+                    <size>200,-1</size>
+                    <label>Close</label>
+                </object>
+            </object>
+        </object>
+    </object>
+    <object class="wxDialog" name="ID_PUBKEYVIEWER" subclass="WxPubkeyViewer">
+        <style>wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU</style>
+        <size>400,450</size>
+        <title>Public Keys</title>
+        <object class="wxBoxSizer">
+            <orient>wxVERTICAL</orient>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <option>9</option>
+                <object class="wxTextCtrl" name="ID_KEYS_TEXT">
+                    <size>500,400</size>
+                    <style>wxTE_MULTILINE|wxTE_READONLY</style>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxALIGN_CENTER_HORIZONTAL|wxALL</flag>
+                <border>5</border>
+                <object class="wxButton" name="ID_CLOSE">
+                    <label>Close</label>
+                </object>
+            </object>
+        </object>
+    </object>
+    <object class="wxDialog" name="ID_CHAT_DLG" subclass="WxChat">
+        <style>wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU</style>
+        <size>400,300</size>
+        <title>Chat</title>
+        <centered>1</centered>
+        <object class="wxBoxSizer">
+            <orient>wxVERTICAL</orient>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <option>3</option>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxGROW|wxLEFT|wxRIGHT|wxTOP</flag>
+                        <border>5</border>
+                        <option>3</option>
+                        <object class="wxTextCtrl" name="IDC_CHATTEXT">
+                            <style>wxTE_MULTILINE|wxTE_READONLY|wxTE_RICH|wxTE_WORDWRAP</style>
+                        </object>
+                    </object>
+                    <object class="sizeritem">
+                        <flag>wxGROW|wxLEFT|wxRIGHT|wxTOP</flag>
+                        <border>5</border>
+                        <option>1</option>
+                        <object class="wxTreeCtrl" name="IDC_TREE_CHATROOM">
+                            <size>80,-1</size>
+                            <style>wxTR_NO_BUTTONS|wxTR_NO_LINES|wxTR_HIDE_ROOT|wxTR_SINGLE|wxSUNKEN_BORDER</style>
+                        </object>
+                    </object>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxTextCtrl" name="IDC_CHATEDIT">
+                    <style>wxTE_PROCESS_ENTER</style>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxALIGN_LEFT|wxLEFT|wxRIGHT|wxADJUST_MINSIZE</flag>
+                <border>5</border>
+                <object class="wxStaticText" name="IDC_STATUS">
+                    <fg>#9E9E9E</fg>
+                </object>
+            </object>
+        </object>
+    </object>
+    <object class="wxMenu" name="IDM_UPLOADS_MENU">
+        <object class="wxMenuItem" name="IDM_ABORT_UPLOAD">
+            <label>Abort upload(s)</label>
+        </object>
+    </object>
+    <object class="wxDialog" name="ID_KEYGEN_DLG" subclass="WxKeyGenRandomnessDialog">
+        <style>wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU</style>
+        <size>400,500</size>
+        <title>WASTE Key Generator</title>
+        <centered>1</centered>
+        <object class="wxBoxSizer">
+            <orient>wxVERTICAL</orient>
+            <object class="sizeritem">
+                <flag>wxALIGN_LEFT|wxALL|wxADJUST_MINSIZE</flag>
+                <border>5</border>
+                <object class="wxStaticText" name="wxID_STATIC">
+                    <label>Giving random number generator more randomness, please move
+the mouse around randomly within this window.</label>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxALIGN_CENTER_HORIZONTAL|wxALL|wxADJUST_MINSIZE</flag>
+                <border>5</border>
+                <object class="wxStaticText" name="wxID_STATIC">
+                    <size>-1,66</size>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>20</border>
+                <option>1</option>
+                <object class="wxGauge" name="ID_KG_PROGRESS">
+                    <size>400,-1</size>
+                    <style>wxGA_HORIZONTAL|wxGA_PROGRESSBAR</style>
+                    <value>1</value>
+                    <range>64</range>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxALIGN_CENTER_HORIZONTAL|wxALL|wxADJUST_MINSIZE</flag>
+                <border>5</border>
+                <object class="wxStaticText" name="wxID_STATIC">
+                    <size>-1,111</size>
+                </object>
+            </object>
+            <object class="sizeritem">
+                <flag>wxGROW|wxALL</flag>
+                <border>5</border>
+                <object class="wxBoxSizer">
+                    <orient>wxHORIZONTAL</orient>
+                    <object class="sizeritem">
+                        <flag>wxALIGN_CENTER_VERTICAL|wxALL</flag>
+                        <border>5</border>
+                        <option>1</option>
+                        <object class="wxButton" name="ID_CANCEL">
+                            <label>Cancel</label>
+                        </object>
+                    </object>
+                </object>
+            </object>
+        </object>
+    </object>
+    <object class="wxMenu" name="IDM_DL_POPUP">
+        <object class="wxMenuItem" name="IDM_CLEANUP_DLS">
+            <label>Cleanup download folder...</label>
+        </object>
+        <object class="wxMenuItem" name="ID_CLEANUP_SEL">
+            <label>Cleanup selected file(s)</label>
+        </object>
+        <object class="wxMenuItem" name="ID_ABORT_DL">
+            <label>Abort selected download(s)</label>
+        </object>
+        <object class="wxMenuItem" name="ID_RESUME_DL">
+            <label>Resume selected download(s)</label>
+        </object>
+    </object>
+    <object class="wxMenu" name="IDM_DLQ_POPUP">
+        <object class="wxMenuItem" name="IDM_DLNOW">
+            <label>Download item(s) now</label>
+        </object>
+        <object class="wxMenuItem" name="IDM_TO_TOP">
+            <label>Move item(s) to top of queue</label>
+        </object>
+        <object class="wxMenuItem" name="IDM_TO_BOT">
+            <label>Move item(s) to bottom of queue</label>
+        </object>
+        <object class="wxMenuItem" name="IDM_REMOVE">
+            <label>Remove item(s) from queue</label>
+        </object>
+    </object>
+</resource>
diff -b -N -ru waste-source-1.5-beta-2/wxxfers.cpp latest/wxxfers.cpp
--- waste-source-1.5-beta-2/wxxfers.cpp	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxxfers.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,609 @@
+/*
+WASTE - wxWidgets downloads dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma implementation "wxxfers.h"
+#endif
+
+// For compilers that support precompilation, includes "wx/wx.h".
+#include "wx/wxprec.h"
+
+#ifdef __BORLANDC__
+#pragma hdrstop
+#endif
+
+#ifndef WX_PRECOMP
+#include "wx/wx.h"
+#endif
+
+////@begin includes
+////@end includes
+
+#include "wxxfers.h"
+#include "wxappresources.h"
+#include "main.hpp"
+
+typedef wxWindow * HWND;
+
+////@begin XPM images
+////@end XPM images
+
+/*!
+* WxXfers type definition
+*/
+
+IMPLEMENT_DYNAMIC_CLASS( WxXfers, wxDialog )
+
+/*!
+* WxXfers event table definition
+*/
+
+BEGIN_EVENT_TABLE( WxXfers, wxDialog )
+
+////@begin WxXfers event table entries
+	EVT_CLOSE( WxXfers::OnCloseWindow )
+
+	EVT_MENU( XRCID("IDM_CLEANUP_DLS"), WxXfers::OnMCleanupDlsClick )
+
+	EVT_MENU( XRCID("ID_CLEANUP_SEL"), WxXfers::OnCleanupSelClick )
+
+	EVT_MENU( XRCID("ID_ABORT_DL"), WxXfers::OnAbortDlClick )
+
+	EVT_MENU( XRCID("ID_RESUME_DL"), WxXfers::OnResumeDlClick )
+
+	EVT_MENU( XRCID("IDM_DLNOW"), WxXfers::OnMDlnowClick )
+
+	EVT_MENU( XRCID("IDM_TO_TOP"), WxXfers::OnMToTopClick )
+
+	EVT_MENU( XRCID("IDM_TO_BOT"), WxXfers::OnMToBotClick )
+
+	EVT_MENU( XRCID("IDM_REMOVE"), WxXfers::OnMRemoveClick )
+
+	EVT_LIST_ITEM_ACTIVATED( XRCID("IDD_XFERS"), WxXfers::OnDXfersItemActivated )
+	EVT_LIST_ITEM_RIGHT_CLICK( XRCID("IDD_XFERS"), WxXfers::OnDXfersRightClick )
+
+	EVT_CHOICE( XRCID("IDC_AUTOCLEAR"), WxXfers::OnCAutoclearSelected )
+
+	EVT_CHOICE( XRCID("IDC_AUTORESUME"), WxXfers::OnCAutoresumeSelected )
+
+	EVT_BUTTON( XRCID("IDC_RESUME"), WxXfers::OnCResumeClick )
+
+	EVT_BUTTON( XRCID("IDC_ABORTSEL"), WxXfers::OnCAbortselClick )
+
+	EVT_BUTTON( XRCID("IDC_CLEARCOMP"), WxXfers::OnCClearcompClick )
+
+	EVT_BUTTON( XRCID("IDC_CLEARCOMP3"), WxXfers::OnCClearcomp3Click )
+
+	EVT_BUTTON( XRCID("IDC_CLEARALL"), WxXfers::OnCClearallClick )
+
+	EVT_TEXT( XRCID("IDC_MAXSIMULDL"), WxXfers::OnCMaxsimuldlUpdated )
+	EVT_TEXT_ENTER( XRCID("IDC_MAXSIMULDL"), WxXfers::OnCMaxsimuldlEnter )
+
+	EVT_LIST_ITEM_ACTIVATED( XRCID("ID_RECVLISTQ"), WxXfers::OnRecvlistqItemActivated )
+	EVT_LIST_ITEM_RIGHT_CLICK( XRCID("ID_RECVLISTQ"), WxXfers::OnRecvlistqRightClick )
+
+	EVT_BUTTON( XRCID("IDC_DLNOW"), WxXfers::OnCDlnowClick )
+
+	EVT_BUTTON( XRCID("IDC_MOVETOTOP"), WxXfers::OnCMovetotopClick )
+
+	EVT_BUTTON( XRCID("IDC_MOVETOBOTTOM"), WxXfers::OnCMovetobottomClick )
+
+	EVT_BUTTON( XRCID("IDC_REMOVEQUEUE"), WxXfers::OnCRemovequeueClick )
+
+	EVT_BUTTON( XRCID("IDC_CLEARQUEUE"), WxXfers::OnCClearqueueClick )
+
+////@end WxXfers event table entries
+
+END_EVENT_TABLE()
+
+/*!
+* WxXfers constructors
+*/
+
+WxXfers::WxXfers( )
+{
+}
+
+WxXfers::WxXfers( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+	Create(parent, id, caption, pos, size, style);
+}
+
+/*!
+* WxXfers creator
+*/
+
+bool WxXfers::Create( wxWindow* parent, wxWindowID id, const wxString& caption, const wxPoint& pos, const wxSize& size, long style )
+{
+////@begin WxXfers member initialisation
+	m_notebook = NULL;
+	m_dl_panel = NULL;
+	m_xfers = NULL;
+	m_autoclear = NULL;
+	m_autoresume = NULL;
+	m_resume = NULL;
+	m_abortsel = NULL;
+	m_clearcomp = NULL;
+	m_clearcomp3 = NULL;
+	m_clearall = NULL;
+	m_maxsimuldl = NULL;
+	m_dlqueue_panel = NULL;
+	m_recvlistq = NULL;
+	m_dlnow = NULL;
+	m_movetotop = NULL;
+	m_movetobottom = NULL;
+	m_removequeue = NULL;
+	m_clearqueue = NULL;
+	m_queueitems = NULL;
+////@end WxXfers member initialisation
+
+////@begin WxXfers creation
+	SetParent(parent);
+	CreateControls();
+	SetIcon(GetIconResource(wxT("res/transfers.ico.gif")));
+	GetSizer()->Fit(this);
+	GetSizer()->SetSizeHints(this);
+	Centre();
+////@end WxXfers creation
+
+	SetSize(-1, -1, 420, 250, wxSIZE_USE_EXISTING);
+
+	return TRUE;
+}
+
+/*!
+* Control creation for WxXfers
+*/
+
+void WxXfers::CreateControls()
+{    
+////@begin WxXfers content construction
+
+	wxXmlResource::Get()->LoadDialog(this, GetParent(), _T("ID_XFERS"));
+	m_notebook = XRCCTRL(*this, "ID_NOTEBOOK", wxNotebook);
+	m_dl_panel = XRCCTRL(*this, "ID_DL_PANEL", wxPanel);
+	m_xfers = XRCCTRL(*this, "IDD_XFERS", wxListCtrl);
+	m_autoclear = XRCCTRL(*this, "IDC_AUTOCLEAR", wxChoice);
+	m_autoresume = XRCCTRL(*this, "IDC_AUTORESUME", wxChoice);
+	m_resume = XRCCTRL(*this, "IDC_RESUME", wxBitmapButton);
+	m_abortsel = XRCCTRL(*this, "IDC_ABORTSEL", wxBitmapButton);
+	m_clearcomp = XRCCTRL(*this, "IDC_CLEARCOMP", wxBitmapButton);
+	m_clearcomp3 = XRCCTRL(*this, "IDC_CLEARCOMP3", wxBitmapButton);
+	m_clearall = XRCCTRL(*this, "IDC_CLEARALL", wxBitmapButton);
+	m_maxsimuldl = XRCCTRL(*this, "IDC_MAXSIMULDL", wxTextCtrl);
+	m_dlqueue_panel = XRCCTRL(*this, "ID_DLQUEUE_PANEL", wxPanel);
+	m_recvlistq = XRCCTRL(*this, "ID_RECVLISTQ", wxListCtrl);
+	m_dlnow = XRCCTRL(*this, "IDC_DLNOW", wxBitmapButton);
+	m_movetotop = XRCCTRL(*this, "IDC_MOVETOTOP", wxBitmapButton);
+	m_movetobottom = XRCCTRL(*this, "IDC_MOVETOBOTTOM", wxBitmapButton);
+	m_removequeue = XRCCTRL(*this, "IDC_REMOVEQUEUE", wxBitmapButton);
+	m_clearqueue = XRCCTRL(*this, "IDC_CLEARQUEUE", wxBitmapButton);
+	m_queueitems = XRCCTRL(*this, "IDC_QUEUEITEMS", wxStaticText);
+////@end WxXfers content construction
+
+	// Create custom windows not generated automatically here.
+
+////@begin WxXfers content initialisation
+
+////@end WxXfers content initialisation
+}
+
+/*!
+* Should we show tooltips?
+*/
+
+bool WxXfers::ShowToolTips()
+{
+	return TRUE;
+}
+
+/*!
+* Get bitmap resources
+*/
+
+wxBitmap WxXfers::GetBitmapResource( const wxString& name )
+{
+	// Bitmap retrieval
+////@begin WxXfers bitmap retrieval
+	if (name == wxT("res/dlnow.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/dlnow.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/stopdl.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/stopdl.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/clear-completed2.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/clear-completed2.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/clear-inactive2.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/clear-inactive2.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/clear-all2.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/clear-all2.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/move2top.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/move2top.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	else if (name == wxT("res/move2end.ico.gif"))
+	{
+		wxBitmap bitmap(_T("res/move2end.ico.gif"), wxBITMAP_TYPE_GIF);
+		return bitmap;
+	}
+	return wxNullBitmap;
+////@end WxXfers bitmap retrieval
+}
+
+/*!
+* Get icon resources
+*/
+
+wxIcon WxXfers::GetIconResource( const wxString& name )
+{
+	// Icon retrieval
+////@begin WxXfers icon retrieval
+	if (name == wxT("res/transfers.ico.gif"))
+	{
+		wxIcon icon(_T("res/transfers.ico.gif"), wxBITMAP_TYPE_GIF);
+		return icon;
+	}
+	return wxNullIcon;
+////@end WxXfers icon retrieval
+}
+
+
+/*!
+* wxEVT_COMMAND_LIST_ITEM_ACTIVATED event handler for IDD_XFERS
+*/
+
+void WxXfers::OnDXfersItemActivated( wxListEvent& event )
+{
+	extern int xferwnd_xfers_RECVLIST_DBLCLK(HWND hwndDlg);
+	xferwnd_xfers_RECVLIST_DBLCLK(this);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK event handler for IDD_XFERS
+*/
+
+void WxXfers::OnDXfersRightClick( wxListEvent& event )
+{
+	m_xfers->SetItemState(event.GetIndex(),
+				wxLIST_STATE_SELECTED, wxLIST_STATE_SELECTED);
+
+	wxMenu *menu = AppResources::CreateDownloadPopupMenu();
+
+#if (wxMAJOR_VERSION >= 2 && wxMINOR_VERSION >= 5)
+	PopupMenu(menu);    // no loc = current mouse pos
+#else
+	PopupMenu(menu, (int) event.GetPoint().x, (int) event.GetPoint().y);
+#endif
+}
+
+/*!
+* wxEVT_COMMAND_LIST_ITEM_ACTIVATED event handler for ID_RECVLISTQ
+*/
+
+void WxXfers::OnRecvlistqItemActivated( wxListEvent& event )
+{
+	m_recvlistq->SetItemState(event.GetIndex(),
+				wxLIST_STATE_SELECTED, wxLIST_STATE_SELECTED);
+	extern int xferwnd_xfers_IDC_DLNOW(HWND hwndDlg);
+	xferwnd_xfers_IDC_DLNOW(this);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK event handler for ID_RECVLISTQ
+*/
+
+void WxXfers::OnRecvlistqRightClick( wxListEvent& event )
+{
+	m_recvlistq->SetItemState(event.GetIndex(),
+				wxLIST_STATE_SELECTED, wxLIST_STATE_SELECTED);
+
+	wxMenu *menu = AppResources::CreateDownloadQueuePopupMenu();
+
+#if (wxMAJOR_VERSION >= 2 && wxMINOR_VERSION >= 5)
+	PopupMenu(menu);    // no loc = current mouse pos
+#else
+	PopupMenu(menu, (int) event.GetPoint().x, (int) event.GetPoint().y);
+#endif
+}
+
+void WxXfers::OnDestroy( )
+{
+	extern void xferwnd_WM_DESTROY(HWND hwndDlg);
+	xferwnd_WM_DESTROY(this);
+}
+
+
+/*!
+* wxEVT_COMMAND_CHOICE_SELECTED event handler for IDC_AUTOCLEAR
+*/
+
+void WxXfers::OnCAutoclearSelected( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_AUTOCLEAR(HWND hwndDlg);
+	xferwnd_xfers_IDC_AUTOCLEAR(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_CHOICE_SELECTED event handler for IDC_AUTORESUME
+*/
+
+void WxXfers::OnCAutoresumeSelected( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_AUTORESUME(HWND hwndDlg);
+	xferwnd_xfers_IDC_AUTORESUME(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_RESUME
+*/
+
+void WxXfers::OnCResumeClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_RESUME(HWND hwndDlg);
+	xferwnd_xfers_IDC_RESUME(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_ABORTSEL
+*/
+
+void WxXfers::OnCAbortselClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_ABORTSEL(HWND, bool);
+	xferwnd_xfers_IDC_ABORTSEL(this, false);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARCOMP
+*/
+
+void WxXfers::OnCClearcomp3Click( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_CLEARCOMP(HWND, bool);
+	xferwnd_xfers_IDC_CLEARCOMP(this, true);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARALL
+*/
+
+void WxXfers::OnCClearallClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_CLEARCOMP(HWND, bool);
+	xferwnd_xfers_IDC_CLEARCOMP(this, true);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_TEXT_UPDATED event handler for IDC_MAXSIMULDL
+*/
+
+void WxXfers::OnCMaxsimuldlUpdated( wxCommandEvent& event )
+{
+	extern int xfer_IDC_MAXSIMULDL(HWND hwndDlg);
+	xfer_IDC_MAXSIMULDL(this);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_TEXT_ENTER event handler for IDC_MAXSIMULDL
+*/
+
+void WxXfers::OnCMaxsimuldlEnter( wxCommandEvent& event )
+{
+	extern int xfer_IDC_MAXSIMULDL(HWND hwndDlg);
+	xfer_IDC_MAXSIMULDL(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_DLNOW
+*/
+
+void WxXfers::OnCDlnowClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_DLNOW(HWND hwndDlg);
+	xferwnd_xfers_IDC_DLNOW(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_MOVETOTOP
+*/
+
+void WxXfers::OnCMovetotopClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_MOVETOTOP(HWND hwndDlg);
+	xferwnd_xfers_IDC_MOVETOTOP(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_MOVETOBOTTOM
+*/
+
+void WxXfers::OnCMovetobottomClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_MOVETOBOTTOM(HWND hwndDlg);
+	xferwnd_xfers_IDC_MOVETOBOTTOM(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_REMOVEQUEUE
+*/
+
+void WxXfers::OnCRemovequeueClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_REMOVEQUEUE(HWND, bool);
+	xferwnd_xfers_IDC_REMOVEQUEUE(this, false);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARQUEUE
+*/
+
+void WxXfers::OnCClearqueueClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_CLEARQUEUE(HWND hwndDlg);
+	xferwnd_xfers_IDC_CLEARQUEUE(this);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARCOMP
+*/
+
+void WxXfers::OnCClearcompClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_CLEARCOMP(HWND, bool);
+	xferwnd_xfers_IDC_CLEARCOMP(this, false);
+	event.Skip();
+}
+
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_CLEANUP_DLS
+*/
+
+void WxXfers::OnMCleanupDlsClick( wxCommandEvent& event )
+{
+	extern void CleanupDLFolderEnter(HWND);
+	CleanupDLFolderEnter(this);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_CLEANUP_SEL
+*/
+
+void WxXfers::OnCleanupSelClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_WM_USER_CLEANUPSELECTED(HWND);
+	xferwnd_xfers_WM_USER_CLEANUPSELECTED(this);
+	event.Skip();
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_ABORT_DL
+*/
+
+void WxXfers::OnAbortDlClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_ABORTSEL(HWND, bool);
+	xferwnd_xfers_IDC_ABORTSEL(this, false);
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for ID_RESUME_DL
+*/
+
+void WxXfers::OnResumeDlClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_RESUME(HWND hwndDlg);
+	xferwnd_xfers_IDC_RESUME(this);
+}
+
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_DLNOW
+*/
+
+void WxXfers::OnMDlnowClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_DLNOW(HWND hwndDlg);
+	xferwnd_xfers_IDC_DLNOW(this);
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_TO_TOP
+*/
+
+void WxXfers::OnMToTopClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_MOVETOTOP(HWND hwndDlg);
+	xferwnd_xfers_IDC_MOVETOTOP(this);
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_TO_BOT
+*/
+
+void WxXfers::OnMToBotClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_MOVETOBOTTOM(HWND hwndDlg);
+	xferwnd_xfers_IDC_MOVETOBOTTOM(this);
+}
+
+/*!
+* wxEVT_COMMAND_MENU_SELECTED event handler for IDM_REMOVE
+*/
+
+void WxXfers::OnMRemoveClick( wxCommandEvent& event )
+{
+	extern int xferwnd_xfers_IDC_REMOVEQUEUE(HWND, bool);
+	xferwnd_xfers_IDC_REMOVEQUEUE(this, false);
+}
+
+
+/*!
+* wxEVT_CLOSE_WINDOW event handler for ID_XFERS
+*/
+
+void WxXfers::OnCloseWindow( wxCloseEvent& event )
+{
+	g_config->WriteInt(CONFIG_xfers_vis,0);
+	event.Skip();
+}
+
+
diff -b -N -ru waste-source-1.5-beta-2/wxxfers.h latest/wxxfers.h
--- waste-source-1.5-beta-2/wxxfers.h	1970-01-01 02:00:00.000000000 +0200
+++ latest/wxxfers.h	2005-03-09 07:27:19.000000000 +0200
@@ -0,0 +1,213 @@
+/*
+WASTE - wxWidgets downloads dialog
+Copyright (C) 2005 WASTE Development Team
+
+WASTE is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+WASTE  is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with WASTE; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+*/
+
+#ifndef _WXXFERS_H_
+#define _WXXFERS_H_
+
+#if defined(__GNUG__) && !defined(__APPLE__)
+#pragma interface "wxxfers.cpp"
+#endif
+
+/*!
+* Includes
+*/
+
+////@begin includes
+#include "wx/xrc/xmlres.h"
+#include "wx/notebook.h"
+#include "wx/listctrl.h"
+////@end includes
+
+/*!
+* Forward declarations
+*/
+
+////@begin forward declarations
+class wxNotebook;
+class wxListCtrl;
+////@end forward declarations
+
+/*!
+* Control identifiers
+*/
+
+////@begin control identifiers
+#define ID_XFERS 10002
+#define SYMBOL_WXXFERS_STYLE wxDEFAULT_DIALOG_STYLE|wxCAPTION|wxRESIZE_BORDER|wxSYSTEM_MENU
+#define SYMBOL_WXXFERS_TITLE _("Transfers")
+#define SYMBOL_WXXFERS_IDNAME ID_XFERS
+#define SYMBOL_WXXFERS_SIZE wxSize(550, 300)
+#define SYMBOL_WXXFERS_POSITION wxDefaultPosition
+////@end control identifiers
+
+/*!
+* Compatibility
+*/
+
+#ifndef wxCLOSE_BOX
+#define wxCLOSE_BOX 0x1000
+#endif
+#ifndef wxFIXED_MINSIZE
+#define wxFIXED_MINSIZE 0
+#endif
+
+/*!
+* WxXfers class declaration
+*/
+
+class WxXfers: public wxDialog
+{    
+	DECLARE_DYNAMIC_CLASS( WxXfers )
+	DECLARE_EVENT_TABLE()
+
+public:
+	/// Constructors
+	WxXfers( );
+	WxXfers( wxWindow* parent, wxWindowID id = SYMBOL_WXXFERS_IDNAME, const wxString& caption = SYMBOL_WXXFERS_TITLE, const wxPoint& pos = SYMBOL_WXXFERS_POSITION, const wxSize& size = SYMBOL_WXXFERS_SIZE, long style = SYMBOL_WXXFERS_STYLE );
+
+	/// Creation
+	bool Create( wxWindow* parent, wxWindowID id = SYMBOL_WXXFERS_IDNAME, const wxString& caption = SYMBOL_WXXFERS_TITLE, const wxPoint& pos = SYMBOL_WXXFERS_POSITION, const wxSize& size = SYMBOL_WXXFERS_SIZE, long style = SYMBOL_WXXFERS_STYLE );
+
+	/// Creates the controls and sizers
+	void CreateControls();
+
+////@begin WxXfers event handler declarations
+
+	/// wxEVT_CLOSE_WINDOW event handler for ID_XFERS
+	void OnCloseWindow( wxCloseEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_CLEANUP_DLS
+	void OnMCleanupDlsClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_CLEANUP_SEL
+	void OnCleanupSelClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_ABORT_DL
+	void OnAbortDlClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for ID_RESUME_DL
+	void OnResumeDlClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_DLNOW
+	void OnMDlnowClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_TO_TOP
+	void OnMToTopClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_TO_BOT
+	void OnMToBotClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_MENU_SELECTED event handler for IDM_REMOVE
+	void OnMRemoveClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_LIST_ITEM_ACTIVATED event handler for IDD_XFERS
+	void OnDXfersItemActivated( wxListEvent& event );
+
+	/// wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK event handler for IDD_XFERS
+	void OnDXfersRightClick( wxListEvent& event );
+
+	/// wxEVT_COMMAND_CHOICE_SELECTED event handler for IDC_AUTOCLEAR
+	void OnCAutoclearSelected( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_CHOICE_SELECTED event handler for IDC_AUTORESUME
+	void OnCAutoresumeSelected( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_RESUME
+	void OnCResumeClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_ABORTSEL
+	void OnCAbortselClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARCOMP
+	void OnCClearcompClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARCOMP3
+	void OnCClearcomp3Click( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARALL
+	void OnCClearallClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_UPDATED event handler for IDC_MAXSIMULDL
+	void OnCMaxsimuldlUpdated( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_TEXT_ENTER event handler for IDC_MAXSIMULDL
+	void OnCMaxsimuldlEnter( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_LIST_ITEM_ACTIVATED event handler for ID_RECVLISTQ
+	void OnRecvlistqItemActivated( wxListEvent& event );
+
+	/// wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK event handler for ID_RECVLISTQ
+	void OnRecvlistqRightClick( wxListEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_DLNOW
+	void OnCDlnowClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_MOVETOTOP
+	void OnCMovetotopClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_MOVETOBOTTOM
+	void OnCMovetobottomClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_REMOVEQUEUE
+	void OnCRemovequeueClick( wxCommandEvent& event );
+
+	/// wxEVT_COMMAND_BUTTON_CLICKED event handler for IDC_CLEARQUEUE
+	void OnCClearqueueClick( wxCommandEvent& event );
+
+////@end WxXfers event handler declarations
+
+////@begin WxXfers member function declarations
+
+	/// Retrieves bitmap resources
+	wxBitmap GetBitmapResource( const wxString& name );
+
+	/// Retrieves icon resources
+	wxIcon GetIconResource( const wxString& name );
+////@end WxXfers member function declarations
+
+	void OnDestroy();
+
+	/// Should we show tooltips?
+	static bool ShowToolTips();
+
+////@begin WxXfers member variables
+	wxNotebook* m_notebook;
+	wxPanel* m_dl_panel;
+	wxListCtrl* m_xfers;
+	wxChoice* m_autoclear;
+	wxChoice* m_autoresume;
+	wxBitmapButton* m_resume;
+	wxBitmapButton* m_abortsel;
+	wxBitmapButton* m_clearcomp;
+	wxBitmapButton* m_clearcomp3;
+	wxBitmapButton* m_clearall;
+	wxTextCtrl* m_maxsimuldl;
+	wxPanel* m_dlqueue_panel;
+	wxListCtrl* m_recvlistq;
+	wxBitmapButton* m_dlnow;
+	wxBitmapButton* m_movetotop;
+	wxBitmapButton* m_movetobottom;
+	wxBitmapButton* m_removequeue;
+	wxBitmapButton* m_clearqueue;
+	wxStaticText* m_queueitems;
+////@end WxXfers member variables
+};
+
+#endif
+	// _WXXFERS_H_
diff -b -N -ru waste-source-1.5-beta-2/xfers.cpp latest/xfers.cpp
--- waste-source-1.5-beta-2/xfers.cpp	2004-06-15 01:59:00.000000000 +0300
+++ latest/xfers.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -21,7 +21,7 @@
 #include "stdafx.hpp"
 #include "main.hpp"
 #include "xfers.hpp"
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	#include "xferwnd.hpp"
 	#include "srchwnd.hpp"
 #endif
@@ -68,7 +68,7 @@
 		unsigned char hashbuf[SHA_OUTSIZE],hashbuf2[SHA_OUTSIZE];
 		req->get_fn_hash(hashbuf2);
 		SHAify context;
-		context.add((unsigned char *)p+1, min(strlen(p+1),sizeof(m_fn)-1));
+		context.add((unsigned char *)p+1, waste_min(strlen(p+1),sizeof(m_fn)-1));
 		context.final(hashbuf);
 
 		if (g_config->ReadInt(CONFIG_ulfullpaths,CONFIG_ulfullpaths_DEFAULT)) {
@@ -274,7 +274,7 @@
 			unsigned int x=chunks_to_send[chunks_to_send_pos++];
 			if (x >= 0 && x < m_filelen_chunks) {
 				unsigned int newpos_l=x*FILE_CHUNKSIZE;
-				#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+				#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 					unsigned int newpos_h=(unsigned int) (((__int64)x*(__int64)FILE_CHUNKSIZE)>>32);
 				#else
 					unsigned int newpos_h=0;
@@ -314,7 +314,7 @@
 				m_chunks_sent_total++;
 			};
 
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 				if (g_extrainf) {
 					updateStatusText();
 				};
@@ -323,7 +323,7 @@
 	}
 }
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 	void XferSend::updateStatusText()
 	{
 		char s[128];
@@ -351,7 +351,7 @@
 		else {
 			sprintf(m_err_buf,"Aborted @ %d%%",
 				(m_chunks_sent_total*100)/m_filelen_chunks);
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 				if (g_extrainf) sprintf(m_err_buf+strlen(m_err_buf)," (%d/%d)", m_chunks_sent_total,m_filelen_chunks);
 			#endif
 		};
@@ -400,7 +400,7 @@
 	m_starttime=GetTickCount();
 	m_lastchunkcnt=m_chunks_sent_total;
 
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 		updateStatusText();
 	#endif
 }
@@ -438,13 +438,24 @@
 		};
 	};
 
+#ifdef _DEFINE_WXUI
+
+		wxString wxdir = cstr_to_wxstr(directory);
+		if (!::wxDirExists (wxdir)) {
+		/* warn the user about the failure */
+		::wxMessageBox(_T("Failed to create '") + wxdir + _T("'!"),
+				_T("Failed to create directory"),
+				wxICON_HAND|wxOK);
+		}
+
+#endif
 }
 
 //recv
 
 XferRecv::XferRecv(C_MessageQueueList *mql, const char *guididx, const char *sizestr, const char *filename, const char *path)
 {
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 		/* this section updates the 'Downloads' tab when the transfers start
 		*/
 		g_lvrecv.InsertItem(0,filename,(int)this);
@@ -643,7 +654,7 @@
 		#endif
 		m_err="File already exists";
 
-		#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+		#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 			int idx=g_lvrecv.FindItemByParam((int)this);
 			if (idx!=-1) {
 				g_lvrecv.SetItemText(idx,3,"");
@@ -700,13 +711,13 @@
 			ReadFile(m_hstatfile,&m_bytes_total_h,4,&d,NULL) && d == 4)
 	#else
 		if (m_statfile &&
-			(fread(&sig1,1,4,m_statfile)==4) && (sig1 == WASTESTATE_SIG1) &&
-			(fread(&sig2,1,4,m_statfile)==4) && (sig2 == WASTESTATE_SIG2) &&
+			(fread(&sig1,1,4,m_statfile)==4) && (sig1 == (int) WASTESTATE_SIG1) &&
+			(fread(&sig2,1,4,m_statfile)==4) && (sig2 == (int) WASTESTATE_SIG2) &&
 			(fread(&m_bytes_total_l,1,4,m_statfile)==4) &&
 			(fread(&m_bytes_total_h,1,4,m_statfile)==4))
 	#endif
 		{
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 				char s[32];
 				FormatSizeStr64(s,m_bytes_total_l,m_bytes_total_h);
 				g_lvrecv.SetItemText(0,1,s);
@@ -749,7 +760,7 @@
 					#endif
 						{
 							safe_strncpy(m_nick,nick,sizeof(m_nick));
-							#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+							#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 								int idx=g_lvrecv.FindItemByParam((int)this);
 								if (idx!=-1) {
 									g_lvrecv.SetItemText(idx,4,nick);
@@ -1104,7 +1115,7 @@
 		bool bNewUsername=(strlen(m_nick)==0)&&(strlen(lasthdr->get_nick())>0);
 		if (bNewUsername) {
 			safe_strncpy(m_nick,lasthdr->get_nick(),sizeof(m_nick));
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 				int idx=g_lvrecv.FindItemByParam((int)this);
 				if (idx!=-1) {
 					char s[32];
@@ -1288,9 +1299,18 @@
 						};
 					};
 
-					#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+					#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+
+#ifdef _DEFINE_WXUI
+						char s[128];
+						snprintf(s,127,"Completed @ %d.%02dk/s",
+							cps/1000,(cps/10)%100);
+#else
+						// eh? is s really valid here?
 						sprintf(s,"Completed @ %d.%02dk/s",
 							cps/1000,(cps/10)%100);
+#endif
+
 						if (m_total_chunks_recvd > m_chunk_cnt && m_chunk_cnt) {
 							int p=(m_total_chunks_recvd-m_chunk_cnt)*100/m_chunk_cnt;
 							if (!p) sprintf(s+strlen(s)," 0.%d%% waste",((m_total_chunks_recvd-m_chunk_cnt)*1000/m_chunk_cnt)%10);
@@ -1326,7 +1346,7 @@
 				#endif
 				if (left<0)left=0;
 
-				#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+				#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 					sprintf(s,"%d%%@%d.%02dk/s [%d:%02d ETA]",
 						(m_chunk_cnt*100)/m_chunk_total,
 						cps/1000,(cps/10)%100,
@@ -1336,7 +1356,7 @@
 					if (g_extrainf) {
 						sprintf(s+strlen(s)," [%d/%d/%d/%d]",
 						m_chunk_cnt,m_total_chunks_recvd,m_chunk_total,m_adaptive_chunksize);
-					};
+					}
 
 					int idx=g_lvrecv.FindItemByParam((int)this);
 					if (idx!=-1) g_lvrecv.SetItemText(idx,2,s);
diff -b -N -ru waste-source-1.5-beta-2/xferwnd.cpp latest/xferwnd.cpp
--- waste-source-1.5-beta-2/xferwnd.cpp	2004-06-15 08:34:00.000000000 +0300
+++ latest/xferwnd.cpp	2005-03-09 07:27:19.000000000 +0200
@@ -40,6 +40,9 @@
 int g_files_in_download_queue;
 #if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 	HWND g_xferwnd, g_xfer_subwnd_active;
+#endif
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+	void XferDlg_SetSel(int sel);
 	W_ListView g_lvrecv, g_lvsend, g_lvrecvq;
 #endif
 
@@ -48,8 +51,296 @@
 C_ItemList<char> g_uploads;
 C_ItemList<C_SHBuf> g_uploadqueue;
 
+#ifdef _DEFINE_WXUI
+#include <wx/dir.h>
+#include <wx/file.h>
+#include <wx/ffile.h>
+#include "wxmainframe.h"
+#include "wxxfers.h"
+#include "wxuploads.h"
+#include "wxappresources.h"
+
+WxXfers *g_xfers_wnd;
+WxUploads *g_uploads_wnd;
+extern MainFrame *g_mainwnd;
+
+static wxDialog *g_xfer_subwnds[3], *g_xfer_subwnd_active;
+
+void xfers_to_front() {
+	g_xfers_wnd->Raise();
+}
+
+void xferwnd_find_wxwidgets(WxXfers *dlg, WxUploads *uploaddlg) {
+	g_xfers_wnd = dlg;
+	g_uploads_wnd = uploaddlg;
+
+	g_xfer_subwnds[0] = g_xfers_wnd;
+	g_xfer_subwnds[1] = g_xfers_wnd;
+	g_xfer_subwnds[2] = g_uploads_wnd;
+
+	g_lvrecv.setwnd((wxListCtrl*) g_xfers_wnd->m_xfers);
+	g_lvrecv.AddCol("File",g_config->ReadInt(CONFIG_recv_col1,CONFIG_recv_col1_DEFAULT));
+	g_lvrecv.AddCol("Size",g_config->ReadInt(CONFIG_recv_col2,CONFIG_recv_col2_DEFAULT));
+	g_lvrecv.AddCol("Status",g_config->ReadInt(CONFIG_recv_col3,CONFIG_recv_col3_DEFAULT));
+	g_lvrecv.AddCol("Location",g_config->ReadInt(CONFIG_recv_col4,CONFIG_recv_col4_DEFAULT));
+	g_lvrecv.AddCol("User",g_config->ReadInt(CONFIG_recv_col5,CONFIG_recv_col5_DEFAULT));
+
+	g_lvrecvq.setwnd((wxListCtrl*) g_xfers_wnd->m_recvlistq);
+	g_lvrecvq.AddCol("File",g_config->ReadInt(CONFIG_recv_qcol1,CONFIG_recv_qcol1_DEFAULT));
+	g_lvrecvq.AddCol("Size",g_config->ReadInt(CONFIG_recv_qcol2,CONFIG_recv_qcol2_DEFAULT));
+	g_lvrecvq.AddCol("Location",g_config->ReadInt(CONFIG_recv_qcol3,CONFIG_recv_qcol3_DEFAULT));
+	g_lvrecvq.AddCol("User",g_config->ReadInt(CONFIG_recv_qcol4,CONFIG_recv_qcol4_DEFAULT));
+
+	g_lvsend.setwnd((wxListCtrl*) g_uploads_wnd->m_uploads);
+	g_lvsend.AddCol("File",g_config->ReadInt(CONFIG_send_col1,CONFIG_send_col1_DEFAULT));
+	g_lvsend.AddCol("User",g_config->ReadInt(CONFIG_send_col2,CONFIG_send_col2_DEFAULT));
+	g_lvsend.AddCol("Size",g_config->ReadInt(CONFIG_send_col3,CONFIG_send_col3_DEFAULT));
+	g_lvsend.AddCol("Status",g_config->ReadInt(CONFIG_send_col4,CONFIG_send_col4_DEFAULT));
+}
+
+	void platform_specific_file_execute(const char *fn) {
+		wxString msgstr = cstr_to_wxstr(fn);
+		(void)  ::wxMessageBox(
+				cstr_to_wxstr("Sorry - file execute is not implemented on this platform\n") +
+				cstr_to_wxstr("File path: ") + msgstr,
+				_T("WASTE file execute"),
+				wxOK|wxICON_ERROR,
+				g_xfers_wnd);
+	}
+
+	static void doExecuteOfDownload(int x, int copy)
+	{
+		XferRecv *tr;
+		const char *t=g_config->ReadString(CONFIG_downloadpath,"");
+		if (!t || !*t) return;
+
+		if ((tr=(XferRecv*)g_lvrecv.GetParam(x))!=0) {
+			char *fn=NULL;
+			if (copy) fn=tr->getOutputFileCopy();
+			if (!fn) fn=tr->getActualOutputFile();
+
+			if (fn && *fn) {
+				platform_specific_file_execute(fn);
+				return;
+			};
+		};
+
+		char n[512];
+		n[0]=0;
+		g_lvrecv.GetText(x,0,n,sizeof(n));
+		if (*n) {
+			char *buf=(char*)malloc(strlen(t)+2+strlen(n));
+			if (buf) {
+				sprintf(buf,"%s/%s",t,n);
+				platform_specific_file_execute(buf);
+				free(buf);
+			};
+		};
+	}
+
+#endif  //_DEFINE_WXUI
+
+#if defined(_WIN32)||defined(_DEFINE_WXUI)
+	int CleanupDLFolder(const char *path, HWND wnd, int *cancelflag) //returns 1 if files removed from a directory
+	{
+		int hasremoved=0;
+
+#if defined(_DEFINE_WXUI)
+
+        // must match szDotWastestate
+        static wxString wDotWastestate=_T(".WASTESTATE");
+
+		wxString wxstr = cstr_to_wxstr(path);
+		wxDir dir(wxstr);
+        wxString patt = _T("*");
+        wxString filename;
+
+        if (!dir.GetFirst(&filename, patt, wxDIR_FILES|wxDIR_DIRS)) {
+            // no files
+            return hasremoved;
+        }
+
+        while (dir.GetNext(&filename)) {
+            if (*cancelflag) {
+				break;
+            }
+
+            wxFileName fullfn(dir.GetName(), filename);
+            wxString fullpath = fullfn.GetFullPath();
+
+            if (fullfn.DirExists()) {
+                char buf[1024];
+                wxstr_to_cstr(buf, fullpath, 1023);
+                if (CleanupDLFolder(buf,wnd,cancelflag)) {
+                    if (fullfn.Rmdir()) {
+                        hasremoved=1;
+                    }
+                };
+
+            } else if (fullfn.FileExists() && fullpath.Find(wDotWastestate) >= 0) {
+
+                int sig1, sig2;
+                unsigned long fullsize_l=0,fullsize_h=0;
+
+                wxFFile hStatFile(fullpath, _T("rb"));
+                if (!hStatFile.IsOpened()) {
+                                    hStatFile.Close();
+                    continue;
+                }
+
+                if (hStatFile.Read(&sig1,4) == (size_t) 4 && sig1 == (int) WASTESTATE_SIG1 &&
+                    hStatFile.Read(&sig2,4) == (size_t) 4 && sig1 == (int) WASTESTATE_SIG2 &&
+                    hStatFile.Read(&fullsize_l,4) == (size_t) 4 &&
+                    hStatFile.Read(&fullsize_h,4) == (size_t) 4)
+                {
+                    /* good state format */
+                }
+                else {
+                    fullsize_l=fullsize_h=0;
+                }
+                hStatFile.Close();
+
+                int dodelete=0;
+                            wxString nonstatename = fullpath;
+                            int pos = fullpath.Find(wDotWastestate);
+                            nonstatename.Truncate(pos);
+
+                if (nonstatename.Cmp(_T("")) == 0) {
+                    dodelete=2;
+                } else if (wxFileName::FileExists(nonstatename)) {
+                    wxFFile hActFile(nonstatename, _T("rb"));
+                    if (hActFile.IsOpened()) {
+                        int d_h=0;
+                        int d_l=hActFile.Length();
+                        hActFile.Close();
+                        if (!*cancelflag) {
+                            char tmp[2048];
+                            char s[32],s2[32];
+                            FormatSizeStr64(s,d_l,d_h);
+                            FormatSizeStr64(s2,fullsize_l,fullsize_h);
+
+                            char endofpath[1024];
+                            wxstr_to_cstr(endofpath, nonstatename, 1023);
+
+                            if (fullsize_l || fullsize_h) sprintf(tmp,"Partial download '%s' is %s of %s. Delete?",endofpath,s,s2);
+                            else sprintf(tmp,"Partial download '%s' is %s. Delete?",endofpath,s);
+
+                            wxString msgstr = cstr_to_wxstr(tmp);
+                            int res = ::wxMessageBox(
+                                    msgstr,
+                                    _T("WASTE download directory cleanup"),
+                                    wxYES_NO|wxCANCEL|wxICON_QUESTION,
+                                    g_xfers_wnd);
+                            dodelete = (res == wxYES);
+                            *cancelflag = (res == wxCANCEL);
+                        };
+                    };
+                };
+
+                if (dodelete) {
+                    wxRemoveFile(nonstatename);
+                    if (dodelete < 2) {
+                        wxRemoveFile(nonstatename + wDotWastestate);
+                    };
+                    hasremoved=1;
+                };
+            }
+		}
+
+#else
+
+		char buf[2048];
+		safe_strncpy(buf,path,1024);
+		if (buf[strlen(buf)-1] != '\\') strcat(buf,"\\");
+		char *endofpath=buf+strlen(buf);
+
+		WIN32_FIND_DATA fd;
+		HANDLE hf;
+
+		sprintf(endofpath,"*%s",szDotWastestate);
+		hf=FindFirstFile(buf,&fd);
+		if (hf != INVALID_HANDLE_VALUE) {
+			do{
+				if (!(fd.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)) {
+					strcpy(endofpath,fd.cFileName);
+					HANDLE hStatFile=CreateFile(buf,GENERIC_WRITE|GENERIC_READ,0,NULL,OPEN_ALWAYS,0,NULL);
+
+					if (hStatFile != INVALID_HANDLE_VALUE) {
+						int sig1, sig2;
+						DWORD d;
+						DWORD fullsize_l=0,fullsize_h=0;
+
+						if (ReadFile(hStatFile,&sig1,4,&d,NULL) && d == 4 && sig1 == WASTESTATE_SIG1 &&
+							ReadFile(hStatFile,&sig2,4,&d,NULL) && d == 4 && sig2 == WASTESTATE_SIG2 &&
+							ReadFile(hStatFile,&fullsize_l,4,&d,NULL) && d == 4 &&
+							ReadFile(hStatFile,&fullsize_h,4,&d,NULL) && d == 4)
+						{
+						}
+						else fullsize_l=fullsize_h=0;
+
+						int dodelete=0;
+						char *p=endofpath+strlen(endofpath);
+						while (p > endofpath && strnicmp(p,szDotWastestate,11)) p--;
+						if (p == endofpath) dodelete=2;
+						else {
+							*p=0;
+							HANDLE hActFile=CreateFile(buf,GENERIC_WRITE|GENERIC_READ,0,NULL,OPEN_ALWAYS,0,NULL);
+							if (hActFile != INVALID_HANDLE_VALUE) {
+								DWORD d_h=0;
+								DWORD d_l=GetFileSize(hActFile,&d_h);
+								CloseHandle(hActFile);
+								if (!d) dodelete=1;
+								else if (!*cancelflag) {
+									char tmp[2048];
+									char s[32],s2[32];
+									FormatSizeStr64(s,d_l,d_h);
+									FormatSizeStr64(s2,fullsize_l,fullsize_h);
+									if (fullsize_l || fullsize_h) sprintf(tmp,"Partial download '%s' is %s of %s. Delete?",endofpath,s,s2);
+									else sprintf(tmp,"Partial download '%s' is %s. Delete?",endofpath,s);
+									int res=MessageBox(g_xfers_wnd,tmp,APP_NAME " download directory cleanup",MB_YESNOCANCEL|MB_ICONQUESTION);
+									dodelete = res == IDYES;
+									*cancelflag = res == IDCANCEL;
+								};
+							};
+						};
+						CloseHandle(hStatFile);
+
+						if (dodelete) {
+							DeleteFile(buf);
+							if (dodelete < 2) {
+								strcat(buf,szDotWastestate);
+								DeleteFile(buf);
+							};
+							hasremoved=1;
+						};
+					};
+				};
+			} while (FindNextFile(hf,&fd));
+			FindClose(hf);
+		};
+		strcpy(endofpath,"*");
+		hf=FindFirstFile(buf,&fd);
+		if (hf != INVALID_HANDLE_VALUE) {
+			do{
+				if ((fd.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) && strcmp(fd.cFileName,"..") && strcmp(fd.cFileName,".")) {
+					strcpy(endofpath,fd.cFileName);
+					if (CleanupDLFolder(buf,wnd,cancelflag)) {
+						if (RemoveDirectory(buf)) hasremoved=1;
+					};
+				};
+			} while (FindNextFile(hf,&fd));
+			FindClose(hf);
+		};
+
+#endif
+
+		return hasremoved;
+	}
+#endif // defined(_WIN32)||defined(_DEFINE_WXUI)
+
 #if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 	static HWND g_xfer_subwnds[3];
+
 	static void doExecuteOfDownload(HWND hwndDlg, int x, int copy)
 	{
 		XferRecv *tr;
@@ -168,6 +459,45 @@
 	}
 #endif
 
+#ifndef _DEFINE_SRV
+void CleanupDLFolderEnter(HWND hwndDlg) {
+	const char *t=g_config->ReadString(CONFIG_downloadpath,"");
+	if (t&&*t) {
+		int f=0;
+		CleanupDLFolder(t,hwndDlg,&f);
+	};
+}
+#endif
+
+
+void
+set_xfer_title (char *buf, int len) {
+	strcpy(buf,"Transfers");
+	int numdls=g_recvs.GetSize();
+	int numuls=g_sends.GetSize();
+	int numq=g_files_in_download_queue;
+	int a=0;
+
+	if (numdls) sprintf(buf+strlen(buf),"%s%d DL%s",a++?", ":" (",numdls,numdls==1?"":"s");
+	if (numq) sprintf(buf+strlen(buf),"%s%d DL%s Queued",a++?", ":" (",numq,numq==1?"":"s");
+	if (numuls) sprintf(buf+strlen(buf),"%s%d UL%s",a++?", ":" (",numuls,numuls==1?"":"s");
+	if (a) strcat(buf,")");
+
+	strcat(buf," - " APP_NAME);
+}
+
+void xferwnd_refresh_title()
+{
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	PostMessage(g_xferwnd,WM_USER_TITLEUPDATE,0,0);
+#elif defined(_DEFINE_WXUI)
+	char buf[1024];
+	set_xfer_title(buf, 1023);
+	g_xfers_wnd->SetTitle(cstr_to_wxstr(buf));
+	g_uploads_wnd->SetTitle(cstr_to_wxstr(buf));
+#endif
+}
+
 static void RunSends()
 {
 	int x,needrefresh=0;
@@ -194,7 +524,7 @@
 		XferSend *xs=g_sends.Get(x);
 		int s=xs->run_hdr(g_mql);
 		if (s) {
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 				int idx=g_lvsend.FindItemByParam((int)xs);
 				if (idx!=-1) {
 					if (!g_config->ReadInt(CONFIG_send_autoclear,CONFIG_send_autoclear_DEFAULT)) {
@@ -219,17 +549,16 @@
 		xs->run(g_mql);
 	};
 	runoffs++; //round robin
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-		if (needrefresh) PostMessage(g_xferwnd,WM_USER_TITLEUPDATE,0,0);
-	#endif
+
+	if (needrefresh) xferwnd_refresh_title();
 }
 
 static void RunRecvs()
 {
 	int needrefresh=0;
-	static unsigned int next_runitem;
 
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+	static unsigned int next_runitem;
 		int a=GetTickCount()-next_runitem;
 		if (!next_runitem || a>=0) {
 			if (g_mql->GetNumQueues()) if (g_recvs.GetSize() < g_max_simul_dl) {
@@ -239,6 +568,7 @@
 				for (qitem = 0; qitem < g_files_in_download_queue; qitem ++) {
 					char host[512];
 					g_lvrecvq.GetText(qitem,2,host,sizeof(host));
+
 					if (!strncmp(lhost,host,32)) continue;
 
 					lhost[0]=0;
@@ -252,6 +582,7 @@
 					int n=g_lvrecv.GetCount();
 					unsigned int nhostitems=0;
 					int x;
+
 					if (!(g_max_simul_dl_host&0x80000000) && g_max_simul_dl_host) {
 						for (x = 0; x < n; x ++) {
 							if (!g_lvrecv.GetParam(x)) continue;
@@ -304,7 +635,7 @@
 		XferRecv *xr=g_recvs.Get(x);
 		int s=xr->run(g_mql);
 		if (s) {
-			#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+			#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 				int idx=g_lvrecv.FindItemByParam((int)xr);
 				if (idx!=-1) {
 					char text[128];
@@ -326,6 +657,7 @@
 							g_lvrecv.GetText(idx,1,sizestr,sizeof(sizestr));
 							g_lvrecv.DeleteItem(idx);
 
+
 							int p=g_lvrecvq.InsertItem(g_lvrecvq.GetCount(),name,0);
 							g_lvrecvq.SetItemText(p,1,sizestr);
 							g_lvrecvq.SetItemText(p,2,text);
@@ -343,15 +675,13 @@
 			needrefresh++;
 		};
 	};
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-		if (needrefresh) PostMessage(g_xferwnd,WM_USER_TITLEUPDATE,0,0);
-	#endif
+	if (needrefresh) xferwnd_refresh_title();
 }
 
 int Xfer_WillQ(char *file, char *guidstr)
 {
 
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 		unsigned int nhostitems=0;
 		//see if item is already beind downloaded, and if not, how many items from that host are
 		int n=g_lvrecv.GetCount();
@@ -374,7 +704,7 @@
 	return (g_recvs.GetSize() >= g_max_simul_dl);
 }
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 
 	void Xfer_UploadFileToUser(HWND hwndDlg, char *file, char *user, char *leadingpath)
 	{
@@ -415,6 +745,18 @@
 			if (*p == '\\') *p='/';
 			p++;
 		};
+#ifdef _DEFINE_WXUI
+		{
+			wxString fname = cstr_to_wxstr(file);
+			wxFile wxf(fname);
+			if (wxf.IsOpened()) {
+				int fs_h=0;
+				int fs_l=(int) wxf.Length();
+				wxf.Close();
+				r.set_fsize(fs_l,fs_h);
+			}
+		}
+#else
 		HANDLE h=CreateFile(file,GENERIC_READ,FILE_SHARE_READ|FILE_SHARE_WRITE,NULL,OPEN_EXISTING,0,NULL);
 		if (h != INVALID_HANDLE_VALUE) {
 			int fs_h=0;
@@ -422,6 +764,7 @@
 			CloseHandle(h);
 			r.set_fsize(fs_l,fs_h);
 		};
+#endif
 		r.set_fn(buf);
 		r.set_guid(&g_client_id);
 		r.set_idx(UPLOAD_BASE_IDX+idx);
@@ -453,51 +796,227 @@
 		g_lvsend.SetItemText(0,3,PENDING_UPLOAD_STRING);
 
 		if (g_config->ReadInt(CONFIG_aoupload,CONFIG_aoupload_DEFAULT)) {
+
+#ifdef _DEFINE_WXUI
+
+			g_mainwnd->ViewWindow(g_mainwnd->m_uploads_dlg,
+					g_config->ReadInt(CONFIG_aoupload_btf,
+					CONFIG_aoupload_btf_DEFAULT));
+
+#else
+
 			SendMessage(g_mainwnd,WM_COMMAND,ID_VIEW_TRANSFERS,0);
 
 			if (g_config->ReadInt(CONFIG_aoupload_btf,CONFIG_aoupload_btf_DEFAULT)) SetForegroundWindow(g_xferwnd);
 			else SetForegroundWindow(hwndDlg);
+#endif
 
 			XferDlg_SetSel(2);
 		};
 	}
-
 #endif //WIN32
+
 void Xfer_Run()
 {
 	RunSends();
 	RunRecvs();
 }
 
-#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))|| defined(_DEFINE_WXUI)
 	void XferDlg_SetSel(int sel)
 	{
-		HWND tabwnd=GetDlgItem(g_xferwnd,IDC_TAB1);
 
-		if (sel >= 0)
-			TabCtrl_SetCurSel(tabwnd,sel);
+#ifdef _DEFINE_WXUI
+		if (sel >= 0) {
+			if (sel < 2) {
+				g_xfers_wnd->m_notebook->SetSelection(sel);
+			} else {
+				// blah. todo?
+			}
+		}
 		else
-			sel=TabCtrl_GetCurSel(tabwnd);
+			sel=g_xfers_wnd->m_notebook->GetSelection();
 
 		if (sel >= 0) {
 			if (g_xfer_subwnd_active != g_xfer_subwnds[sel]) {
-				if (g_xfer_subwnd_active) ShowWindow(g_xfer_subwnd_active,SW_HIDE);
+				if (g_xfer_subwnd_active) g_xfer_subwnd_active->Show(false);
 				g_config->WriteInt(CONFIG_xfer_sel,sel);
 				g_xfer_subwnd_active=g_xfer_subwnds[sel];
 			};
 			if (g_xfer_subwnd_active) {
+				/*
 				RECT r;
-				GetClientRect(tabwnd,&r);
+				GetClientRect(g_xfers_wnd->m_notebook,&r);
 
-				TabCtrl_AdjustRect(tabwnd,FALSE,&r);
+				TabCtrl_AdjustRect(g_xfers_wnd->m_notebook,FALSE,&r);
 
 				SetWindowPos(g_xfer_subwnd_active,HWND_TOP,r.left,r.top,r.right-r.left,r.bottom-r.top,SWP_NOACTIVATE);
-				ShowWindow(g_xfer_subwnd_active,SW_SHOWNA);
-			};
+				*/
+				if (g_xfer_subwnd_active) g_xfer_subwnd_active->Show(true);
 		};
 	}
 
-	static BOOL WINAPI Send_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
+#else
+
+		HWND tabwnd=GetDlgItem(g_xferwnd,IDC_TAB1);
+
+		if (sel >= 0)
+			TabCtrl_SetCurSel(tabwnd,sel);
+		else
+			sel=TabCtrl_GetCurSel(tabwnd);
+
+		if (sel >= 0) {
+			if (g_xfer_subwnd_active != g_xfer_subwnds[sel]) {
+				if (g_xfer_subwnd_active) ShowWindow(g_xfer_subwnd_active,SW_HIDE);
+				g_config->WriteInt(CONFIG_xfer_sel,sel);
+				g_xfer_subwnd_active=g_xfer_subwnds[sel];
+			};
+			if (g_xfer_subwnd_active) {
+				RECT r;
+				GetClientRect(tabwnd,&r);
+
+				TabCtrl_AdjustRect(tabwnd,FALSE,&r);
+
+				SetWindowPos(g_xfer_subwnd_active,HWND_TOP,r.left,r.top,r.right-r.left,r.bottom-r.top,SWP_NOACTIVATE);
+				ShowWindow(g_xfer_subwnd_active,SW_SHOWNA);
+			};
+		};
+#endif
+
+	}
+#endif
+
+#ifndef _DEFINE_SRV
+
+void xferwnd_uploads_IDC_SENDLIST_NM_RCLICK(HWND hwndDlg, int mouse_x, int mouse_y) {
+	int x;
+
+	int sel=0;
+	int l=g_lvsend.GetCount();
+	for (x = 0; x < l && !sel; x ++) sel=g_lvsend.GetSelected(x);
+
+	// TODO: check where this function wanna go
+	//EnableMenuItem(hMenu,ID_ULWND_ABORTUPLOADS,sel?MF_ENABLED:MF_GRAYED);
+
+#ifdef _DEFINE_WXUI
+	wxMenu *hMenu;
+	hMenu = AppResources::CreateUploadsPopupMenu();
+
+#if (wxMAJOR_VERSION >= 2 && wxMINOR_VERSION >= 5)
+	g_uploads_wnd->PopupMenu(hMenu); // no loc = current mouse pos
+#else
+	g_uploads_wnd->PopupMenu(hMenu, mouse_x, mouse_y);
+#endif
+
+#else
+
+	HMENU hMenu=GetSubMenu(g_context_menus,4);
+	POINT p;
+	GetCursorPos(&p);
+	TrackPopupMenu(hMenu,TPM_RIGHTBUTTON|TPM_LEFTBUTTON,p.x,p.y,0,hwndDlg,NULL);
+#endif
+}
+
+int xferwnd_uploads_IDC_AUTOCLEAR(HWND hwndDlg) {
+#ifdef _DEFINE_WXUI
+	int sel = g_uploads_wnd->m_autoclear->GetSelection();
+	g_config->WriteInt(CONFIG_send_autoclear,sel == 1);
+#else
+	g_config->WriteInt(CONFIG_send_autoclear,!!IsDlgButtonChecked(hwndDlg,IDC_AUTOCLEAR));
+#endif
+	return 0;
+}
+
+int xferwnd_xfers_IDC_AUTOCLEAR(HWND hwndDlg) {
+#ifdef _DEFINE_WXUI
+	int sel = g_xfers_wnd->m_autoclear->GetSelection();
+	g_config->WriteInt(CONFIG_recv_autoclear,sel == 1);
+#else
+	g_config->WriteInt(CONFIG_recv_autoclear,!!IsDlgButtonChecked(hwndDlg,IDC_AUTOCLEAR));
+#endif
+	return 0;
+}
+
+void xferwnd_WM_DESTROY(HWND hwndDlg) {
+	g_config->WriteInt(CONFIG_send_col1,g_lvsend.GetColumnWidth(0));
+	g_config->WriteInt(CONFIG_send_col2,g_lvsend.GetColumnWidth(1));
+	g_config->WriteInt(CONFIG_send_col3,g_lvsend.GetColumnWidth(2));
+	g_config->WriteInt(CONFIG_send_col4,g_lvsend.GetColumnWidth(3));
+};
+
+int xferwnd_xfers_IDC_AUTORESUME(HWND hwndDlg) {
+#ifdef _DEFINE_WXUI
+	int sel = g_xfers_wnd->m_autoclear->GetSelection();
+	g_config->WriteInt(CONFIG_send_autoclear,sel == 0);
+#else
+	g_config->WriteInt(CONFIG_recv_autores,!!IsDlgButtonChecked(hwndDlg,IDC_AUTORESUME));
+#endif
+	return 0;
+}
+
+int xferwnd_uploads_IDC_CLEARCOMP(HWND hwndDlg) {
+	int x;
+	int l=g_lvsend.GetCount();
+	for (x = 0; x < l; x ++) {
+		if (!g_lvsend.GetParam(x)) {
+			g_lvsend.DeleteItem(x--);
+			l--;
+		};
+	};
+	return 0;
+}
+
+int xferwnd_uploads_IDC_ABORTSEL (HWND hwndDlg, bool is_clearcomp2) {
+	int x;
+	int l=g_lvsend.GetCount();
+	for (x = 0; x < l; x ++) {
+		if (is_clearcomp2 || g_lvsend.GetSelected(x)) {
+			void *tt=(void *)g_lvsend.GetParam(x);
+
+			if (tt) {
+				int y,n=g_uploads.GetSize();
+				for (y = 0; y < n && (void*)g_uploads.Get(y) != tt; y ++);
+				if (y < n) {
+					g_uploads.Set(y,NULL);
+					free(tt);
+					g_lvsend.SetItemParam(x,0);
+					g_lvsend.SetItemText(x,3,"Aborted");
+				}
+				else {
+					XferSend *t=(XferSend *)tt;
+					t->Abort(g_mql);
+					if (t->get_idx() >= UPLOAD_BASE_IDX) {
+						int wu=t->get_idx()-UPLOAD_BASE_IDX;
+						if (wu >= 0 && wu < n) {
+							free(g_uploads.Get(wu));
+							g_uploads.Set(wu,NULL);
+						};
+					};
+				};
+			};
+
+			if (is_clearcomp2) {
+				g_lvsend.DeleteItem(x);
+				x--;
+				l--;
+			};
+		};
+	};
+	return 0;
+}
+
+int xferwnd_uploads_IDC_CLEARCOMP2(HWND hwndDlg) {
+#ifdef _DEFINE_WXUI
+	if (wxMessageBox(_T("Abort and clear all uploads?"),_T("Question"),wxYES_NO|wxICON_QUESTION) == wxNO) return 0;
+#else
+	if (MessageBox(hwndDlg,"Abort and clear all uploads?",APP_NAME " Question",MB_YESNO|MB_ICONQUESTION) == IDNO) return 0;
+#endif
+	return xferwnd_uploads_IDC_ABORTSEL(hwndDlg, true);
+}
+
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+
+	static BOOL WINAPI Send_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
 	{
 		static ChildWndResizeItem rlist[]={
 			{IDC_SENDLIST,0x0011},
@@ -542,19 +1061,7 @@
 				LPNMHDR l=(LPNMHDR)lParam;
 				if (l->idFrom==IDC_SENDLIST) {
 					if (l->code == NM_RCLICK) {
-						int x;
-						HMENU hMenu=GetSubMenu(g_context_menus,4);
-
-						int sel=0;
-						int l=g_lvsend.GetCount();
-						for (x = 0; x < l && !sel; x ++) sel=g_lvsend.GetSelected(x);
-
-						// TODO: check where this function wanna go
-						//EnableMenuItem(hMenu,ID_ULWND_ABORTUPLOADS,sel?MF_ENABLED:MF_GRAYED);
-
-						POINT p;
-						GetCursorPos(&p);
-						TrackPopupMenu(hMenu,TPM_RIGHTBUTTON|TPM_LEFTBUTTON,p.x,p.y,0,hwndDlg,NULL);
+						xferwnd_uploads_IDC_SENDLIST_NM_RCLICK(hwndDlg);
 					};
 					int s2=!!ListView_GetItemCount(l->hwndFrom);
 					int s=!!ListView_GetSelectedCount(l->hwndFrom);
@@ -566,96 +1073,323 @@
 				return 0;
 			};
 		case WM_DESTROY:
-			{
-				g_config->WriteInt(CONFIG_send_col1,g_lvsend.GetColumnWidth(0));
-				g_config->WriteInt(CONFIG_send_col2,g_lvsend.GetColumnWidth(1));
-				g_config->WriteInt(CONFIG_send_col3,g_lvsend.GetColumnWidth(2));
-				g_config->WriteInt(CONFIG_send_col4,g_lvsend.GetColumnWidth(3));
+			xferwnd_WM_DESTROY(hwndDlg);
 				return 0;
-			};
 		case WM_COMMAND:
 			{
 				switch (LOWORD(wParam))
 				{
 				case IDC_AUTOCLEAR:
-					{
-						g_config->WriteInt(CONFIG_send_autoclear,!!IsDlgButtonChecked(hwndDlg,IDC_AUTOCLEAR));
+					return xferwnd_uploads_IDC_AUTOCLEAR(hwndDlg);
+				case IDC_CLEARCOMP:
+					return xferwnd_uploads_IDC_CLEARCOMP(hwndDlg);
+				case IDC_CLEARCOMP2:
+					return xferwnd_uploads_IDC_CLEARCOMP2(hwndDlg);
+				case IDC_ABORTSEL:
+					return xferwnd_uploads_IDC_ABORTSEL(hwndDlg, false);
+				};
+				return 0;
+			};
+		};
 						return 0;
 					}
-				case IDC_CLEARCOMP:
+#endif//WIN32
+
+#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
+	void RecvQ_UpdateStatusText()
 					{
+		char buf[256];
+
+		sprintf(buf,"%d items in queue",g_files_in_download_queue);
+
+#ifdef _DEFINE_WXUI
+		wxSetDlgItemText(g_xfers_wnd->m_queueitems,buf);
+#else
+		SetDlgItemText(GetParent(g_lvrecvq.getwnd()),IDC_QUEUEITEMS,buf);
+#endif
+		xferwnd_refresh_title();
+
+	}
+#endif
+
+int xferwnd_xfers_IDC_DLNOW(HWND hwndDlg) {
 						int x;
-						int l=g_lvsend.GetCount();
+	int l=g_lvrecvq.GetCount();
+	int b=0;
 						for (x = 0; x < l; x ++) {
-							if (!g_lvsend.GetParam(x)) {
-								g_lvsend.DeleteItem(x--);
+		if (g_lvrecvq.GetSelected(x)) {
+			char name[260];
+			char sizestr[64];
+			char host[512];
+			char user[1024];
+			g_lvrecvq.GetText(x,0,name,sizeof(name));
+			g_lvrecvq.GetText(x,1,sizestr,sizeof(sizestr));
+			g_lvrecvq.GetText(x,2,host,sizeof(host));
+			g_lvrecvq.GetText(x,3,user,sizeof(user));
+			g_lvrecvq.DeleteItem(x);
+			g_files_in_download_queue--;
+
+			int a,n=g_lvrecv.GetCount();
+			for (a = 0; a < n; a ++) {
+				char name2[260];
+				char host2[512];
+				g_lvrecv.GetText(a,0,name2,sizeof(name2));
+				g_lvrecv.GetText(a,3,host2,sizeof(host2));
+				if (!stricmp(name2,name) && !stricmp(host2,host)) {
+					if (g_lvrecv.GetParam(a)) break;
+					g_lvrecv.DeleteItem(a--);
+					n--;
+				};
+			};
+			if (a == n) {
+				const char *tmp=g_config->ReadString(CONFIG_downloadpath,"");
+				if (tmp && tmp[0]) {
+					g_recvs.Add(new XferRecv(g_mql,host,sizestr,name,tmp));
+				};
+			};
+
+			b=1;
+			x--;
 								l--;
 							};
 						};
+	if (b) {
+		XferDlg_SetSel(0);
+	};
+	RecvQ_UpdateStatusText();
 						return 0;
+}
+
+int xferwnd_xfers_IDC_MOVETOBOTTOM(HWND hwndDlg) {
+	int x;
+	int l=g_lvrecvq.GetCount();
+	int a=l-1;
+	for (x = l-1; x >= 0; x --) {
+		if (g_lvrecvq.GetSelected(x)) {
+			char text[1024];
+			char size[64];
+			char loc[1024];
+			char nick[32];
+			int param=g_lvrecvq.GetParam(x);
+			g_lvrecvq.GetText(x,0,text,sizeof(text));
+			g_lvrecvq.GetText(x,1,size,sizeof(size));
+			g_lvrecvq.GetText(x,2,loc,sizeof(loc));
+			g_lvrecvq.GetText(x,3,nick,sizeof(nick));
+			g_lvrecvq.DeleteItem(x);
+			g_lvrecvq.InsertItem(a,text,param);
+			g_lvrecvq.SetItemText(a,1,size);
+			g_lvrecvq.SetItemText(a,2,loc);
+			g_lvrecvq.SetItemText(a,3,nick);
+			g_lvrecvq.SetSelected(a);
+			a--;
 					};
-				case IDC_CLEARCOMP2:
-					{
-						if (MessageBox(hwndDlg,"Abort and clear all uploads?",APP_NAME " Question",MB_YESNO|MB_ICONQUESTION) == IDNO) break;
-					}
-				case IDC_ABORTSEL:
-					{
+	};
+	return 0;
+}
+
+int xferwnd_xfers_IDC_MOVETOTOP(HWND hwndDlg) {
 						int x;
-						int l=g_lvsend.GetCount();
+	int l=g_lvrecvq.GetCount();
+	int a=0;
 						for (x = 0; x < l; x ++) {
-							if (LOWORD(wParam) == IDC_CLEARCOMP2 || g_lvsend.GetSelected(x)) {
-								void *tt=(void *)g_lvsend.GetParam(x);
+		if (g_lvrecvq.GetSelected(x)) {
+			char text[1024];
+			char size[64];
+			char loc[1024];
+			char nick[32];
+			int param=g_lvrecvq.GetParam(x);
+			g_lvrecvq.GetText(x,0,text,sizeof(text));
+			g_lvrecvq.GetText(x,1,size,sizeof(size));
+			g_lvrecvq.GetText(x,2,loc,sizeof(loc));
+			g_lvrecvq.GetText(x,3,nick,sizeof(nick));
+			g_lvrecvq.DeleteItem(x);
+			g_lvrecvq.InsertItem(a,text,param);
+			g_lvrecvq.SetItemText(a,1,size);
+			g_lvrecvq.SetItemText(a,2,loc);
+			g_lvrecvq.SetItemText(a,3,nick);
+			g_lvrecvq.SetSelected(a);
+			a++;
+		};
+	};
+	return 0;
+}
 
-								if (tt) {
-									int y,n=g_uploads.GetSize();
-									for (y = 0; y < n && (void*)g_uploads.Get(y) != tt; y ++);
-									if (y < n) {
-										g_uploads.Set(y,NULL);
-										free(tt);
-										g_lvsend.SetItemParam(x,0);
-										g_lvsend.SetItemText(x,3,"Aborted");
-									}
-									else {
-										XferSend *t=(XferSend *)tt;
-										t->Abort(g_mql);
-										if (t->get_idx() >= UPLOAD_BASE_IDX) {
-											int wu=t->get_idx()-UPLOAD_BASE_IDX;
-											if (wu >= 0 && wu < n) {
-												free(g_uploads.Get(wu));
-												g_uploads.Set(wu,NULL);
+int xferwnd_xfers_IDC_REMOVEQUEUE(HWND hwndDlg, bool is_cq) {
+	int x;
+	int l=g_lvrecvq.GetCount();
+	for (x = 0; x < l; x ++) {
+		if (is_cq || g_lvrecvq.GetSelected(x)) {
+			g_lvrecvq.DeleteItem(x--);
+			l--;
+			g_files_in_download_queue--;
 											};
 										};
+	RecvQ_UpdateStatusText();
+	return 0;
+}
+
+int xferwnd_xfers_IDC_CLEARQUEUE(HWND hwndDlg) {
+#ifdef _DEFINE_WXUI
+	if (wxMessageBox(_T("Clear entire download queue?"),_T("Question"),wxYES_NO|wxICON_QUESTION) == wxNO) return 0;
+#else
+	if (MessageBox(hwndDlg,"Clear entire download queue?",APP_NAME " Question",MB_YESNO|MB_ICONQUESTION) == IDNO) return 0;
+#endif
+	return xferwnd_xfers_IDC_REMOVEQUEUE(hwndDlg, true);
+}
+
+int xferwnd_xfers_IDC_ABORTSEL(HWND hwndDlg, bool ignore) {
+	int x;
+	int l=g_lvrecv.GetCount();
+	for (x = 0; x < l; x ++) {
+		if (g_lvrecv.GetSelected(x)) {
+			XferRecv *a=(XferRecv *)g_lvrecv.GetParam(x);
+			if (a) a->Abort(g_mql);
 									};
 								};
+	return 0;
+}
 
-								if (LOWORD(wParam) == IDC_CLEARCOMP2) {
-									g_lvsend.DeleteItem(x);
-									x--;
+int xferwnd_xfers_IDC_CLEARCOMP(HWND hwndDlg, bool is_cc3) {
+	int x;
+	int l=g_lvrecv.GetCount();
+	for (x = 0; x < l; x ++) {
+		char buf[64];
+		g_lvrecv.GetText(x,3,buf,sizeof(buf));
+		if (!g_lvrecv.GetParam(x) &&
+			(is_cc3 ||
+			!buf[0]))
+		{
+			g_lvrecv.DeleteItem(x--);
 									l--;
 								};
 							};
+	return 0;
+}
+
+int xferwnd_xfers_IDC_CLEARALL(HWND hwndDlg) {
+#ifdef _DEFINE_WXUI
+	if (wxMessageBox(_T("Abort all downloads?"),_T("Question"),wxYES_NO|wxICON_QUESTION) == wxNO) return 0;
+#else
+	if (MessageBox(hwndDlg,"Abort all downloads?",APP_NAME " Question",MB_YESNO|MB_ICONQUESTION) == IDNO) return 0;
+#endif
+	int x;
+	int l=g_lvrecv.GetCount();
+	for (x = 0; x < l; x ++) {
+		XferRecv *a=(XferRecv *)g_lvrecv.GetParam(x);
+		if (a) a->Abort(g_mql);
+		g_lvrecv.DeleteItem(x--);
+		l--;
+	};
+	return 0;
+}
+
+int xferwnd_xfers_WM_USER_CLEANUPSELECTED(HWND hwndDlg) {
+#ifdef _DEFINE_WXUI
+	if (wxMessageBox(_T("Clear selected downloads?"),_T("Question"),wxYES_NO|wxICON_QUESTION) == wxNO) return 0;
+#else
+	if (MessageBox(hwndDlg,"Clear selected downloads?",APP_NAME " Question",MB_YESNO|MB_ICONQUESTION) == IDNO) return 0;
+#endif
+	int x;
+	int l = g_lvrecv.GetCount();
+	for (x = 0; x < l; x ++) {
+		if (g_lvrecv.GetSelected(x)) { //checks to see if the files were selected
+			XferRecv *a=(XferRecv *)g_lvrecv.GetParam(x);
+			if (a) a->Abort(g_mql);//forces an abort
+			g_lvrecv.DeleteItem(x--);//detletes the file
+			l--;
+		};
 						};
 						return 0;
+}
+
+int xferwnd_xfers_IDC_RESUME(HWND hwndDlg) {
+	int x;
+	int l=g_lvrecv.GetCount();
+	for (x = 0; x < l; x ++) {
+		if (g_lvrecv.GetSelected(x)) {
+			int param=g_lvrecv.GetParam(x);
+			if (!param) {
+				char sizestr[64];
+				char host[512];
+				char name[260];
+				char nick[32];
+				g_lvrecv.GetText(x,3,host,sizeof(host));
+				if (host[0]) {
+					g_lvrecv.GetText(x,0,name,sizeof(name));
+					g_lvrecv.GetText(x,1,sizestr,sizeof(sizestr));
+					g_lvrecv.GetText(x,4,nick,sizeof(nick));
+					g_lvrecv.DeleteItem(x);
+					int p=g_lvrecvq.InsertItem(g_lvrecvq.GetCount(),name,0);
+					g_lvrecvq.SetItemText(p,1,sizestr);
+					g_lvrecvq.SetItemText(p,2,host);
+					g_lvrecvq.SetItemText(p,3,nick);
+					g_files_in_download_queue++;
+					l--; x--;
+				};
+			};
 					};
 				};
+	RecvQ_UpdateStatusText();
 				return 0;
+}
+
+int xfer_IDC_MAXSIMULDL(HWND hwndDlg) {
+
+#ifdef _DEFINE_WXUI
+	long val;
+	if (g_xfers_wnd->m_maxsimuldl->GetValue().ToLong(&val) && val != 0) {
+		g_max_simul_dl=(int) val;
+		g_config->WriteInt(CONFIG_recv_maxdl,(int) val);
+	}
+#else
+	int r;
+	BOOL b;
+	r=GetDlgItemInt(hwndDlg,IDC_MAXSIMULDL,&b,FALSE);
+	if (b) {
+		g_max_simul_dl=r;
+		g_config->WriteInt(CONFIG_recv_maxdl,r);
+	};
+#endif
+	return 0;
+
+}
+
+int xferwnd_xfers_RECVLIST_DBLCLK (HWND hwndDlg) {
+	int x;
+	int l=g_lvrecv.GetCount();
+	for (x = 0; x < l && !g_lvrecv.GetSelected(x); x ++);
+	if (x < l) {
+		if (!g_lvrecv.GetParam(x)) {
+			char text[32];
+			g_lvrecv.GetText(x,3,text,sizeof(text));
+
+#ifdef _DEFINE_WXUI
+
+			if (text[0]) {
+				return xferwnd_xfers_IDC_RESUME(hwndDlg);
+			}
+			else {
+				doExecuteOfDownload(x,0);
+			};
+
+#else
+
+			if (text[0]) {
+				SendMessage(hwndDlg,WM_COMMAND,IDC_RESUME,0);
+			}
+			else {
+				doExecuteOfDownload(hwndDlg,x,0);
+			};
+
+#endif
+
 			};
 		};
 		return 0;
-	}
-#endif//WIN32
+}
+#endif /* _DEFINE_SRV */
 
 #if defined(_WIN32)&&(!defined(_DEFINE_SRV))
-	void RecvQ_UpdateStatusText()
-	{
-		char buf[256];
-
-		sprintf(buf,"%d items in queue",g_files_in_download_queue);
-
-		SetDlgItemText(GetParent(g_lvrecvq.getwnd()),IDC_QUEUEITEMS,buf);
-		PostMessage(g_xferwnd,WM_USER_TITLEUPDATE,0,0);
-	}
-
 	static BOOL WINAPI RecvQ_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
 	{
 		static ChildWndResizeItem rlist[]={
@@ -750,125 +1484,15 @@
 				switch (LOWORD(wParam))
 				{
 				case IDC_DLNOW:
-					{
-						int x;
-						int l=g_lvrecvq.GetCount();
-						int b=0;
-						for (x = 0; x < l; x ++) {
-							if (g_lvrecvq.GetSelected(x)) {
-								char name[260];
-								char sizestr[64];
-								char host[512];
-								char user[1024];
-								g_lvrecvq.GetText(x,0,name,sizeof(name));
-								g_lvrecvq.GetText(x,1,sizestr,sizeof(sizestr));
-								g_lvrecvq.GetText(x,2,host,sizeof(host));
-								g_lvrecvq.GetText(x,3,user,sizeof(user));
-								g_lvrecvq.DeleteItem(x);
-								g_files_in_download_queue--;
-
-								int a,n=g_lvrecv.GetCount();
-								for (a = 0; a < n; a ++) {
-									char name2[260];
-									char host2[512];
-									g_lvrecv.GetText(a,0,name2,sizeof(name2));
-									g_lvrecv.GetText(a,3,host2,sizeof(host2));
-									if (!stricmp(name2,name) && !stricmp(host2,host)) {
-										if (g_lvrecv.GetParam(a)) break;
-										g_lvrecv.DeleteItem(a--);
-										n--;
-									};
-								};
-								if (a == n) {
-									const char *tmp=g_config->ReadString(CONFIG_downloadpath,"");
-									if (tmp && tmp[0]) {
-										g_recvs.Add(new XferRecv(g_mql,host,sizestr,name,tmp));
-									};
-								};
-
-								b=1;
-								x--;
-								l--;
-							};
-						};
-						if (b) {
-							XferDlg_SetSel(0);
-						};
-						RecvQ_UpdateStatusText();
-						return 0;
-					};
+					return xferwnd_xfers_IDC_DLNOW(hwndDlg);
 				case IDC_MOVETOBOTTOM:
-					{
-						int x;
-						int l=g_lvrecvq.GetCount();
-						int a=l-1;
-						for (x = l-1; x >= 0; x --) {
-							if (g_lvrecvq.GetSelected(x)) {
-								char text[1024];
-								char size[64];
-								char loc[1024];
-								char nick[32];
-								int param=g_lvrecvq.GetParam(x);
-								g_lvrecvq.GetText(x,0,text,sizeof(text));
-								g_lvrecvq.GetText(x,1,size,sizeof(size));
-								g_lvrecvq.GetText(x,2,loc,sizeof(loc));
-								g_lvrecvq.GetText(x,3,nick,sizeof(nick));
-								g_lvrecvq.DeleteItem(x);
-								g_lvrecvq.InsertItem(a,text,param);
-								g_lvrecvq.SetItemText(a,1,size);
-								g_lvrecvq.SetItemText(a,2,loc);
-								g_lvrecvq.SetItemText(a,3,nick);
-								g_lvrecvq.SetSelected(a);
-								a--;
-							};
-						};
-						return 0;
-					};
+					return xferwnd_xfers_IDC_MOVETOBOTTOM(hwndDlg);
 				case IDC_MOVETOTOP:
-					{
-						int x;
-						int l=g_lvrecvq.GetCount();
-						int a=0;
-						for (x = 0; x < l; x ++) {
-							if (g_lvrecvq.GetSelected(x)) {
-								char text[1024];
-								char size[64];
-								char loc[1024];
-								char nick[32];
-								int param=g_lvrecvq.GetParam(x);
-								g_lvrecvq.GetText(x,0,text,sizeof(text));
-								g_lvrecvq.GetText(x,1,size,sizeof(size));
-								g_lvrecvq.GetText(x,2,loc,sizeof(loc));
-								g_lvrecvq.GetText(x,3,nick,sizeof(nick));
-								g_lvrecvq.DeleteItem(x);
-								g_lvrecvq.InsertItem(a,text,param);
-								g_lvrecvq.SetItemText(a,1,size);
-								g_lvrecvq.SetItemText(a,2,loc);
-								g_lvrecvq.SetItemText(a,3,nick);
-								g_lvrecvq.SetSelected(a);
-								a++;
-							};
-						};
-						return 0;
-					};
+					return xferwnd_xfers_IDC_MOVETOTOP(hwndDlg);
 				case IDC_CLEARQUEUE:
-					{
-						if (MessageBox(hwndDlg,"Clear entire download queue?",APP_NAME " Question",MB_YESNO|MB_ICONQUESTION) == IDNO) break;
-					};
+					return xferwnd_xfers_IDC_CLEARQUEUE(hwndDlg);
 				case IDC_REMOVEQUEUE:
-					{
-						int x;
-						int l=g_lvrecvq.GetCount();
-						for (x = 0; x < l; x ++) {
-							if (LOWORD(wParam) == IDC_CLEARQUEUE || g_lvrecvq.GetSelected(x)) {
-								g_lvrecvq.DeleteItem(x--);
-								l--;
-								g_files_in_download_queue--;
-							};
-						};
-						RecvQ_UpdateStatusText();
-						return 0;
-					};
+					return xferwnd_xfers_IDC_REMOVEQUEUE(hwndDlg, false);
 				};
 				return 0;
 			};
@@ -946,21 +1570,7 @@
 
 				if (p->idFrom == IDC_RECVLIST) {
 					if (p->code == NM_DBLCLK) {
-						int x;
-						int l=g_lvrecv.GetCount();
-						for (x = 0; x < l && !g_lvrecv.GetSelected(x); x ++);
-						if (x < l) {
-							if (!g_lvrecv.GetParam(x)) {
-								char text[32];
-								g_lvrecv.GetText(x,3,text,sizeof(text));
-								if (text[0]) {
-									SendMessage(hwndDlg,WM_COMMAND,IDC_RESUME,0);
-								}
-								else {
-									doExecuteOfDownload(hwndDlg,x,0);
-								};
-							};
-						};
+						xferwnd_xfers_RECVLIST_DBLCLK(hwndDlg);
 					};
 					if (p->code == NM_RCLICK) {
 						int x;
@@ -994,11 +1604,7 @@
 							if (t&&*t) ShellExecute(hwndDlg,"open",t,NULL,t,SW_SHOW);
 						}
 						else if (x == ID_CLEANUPDLDIR) {
-							const char *t=g_config->ReadString(CONFIG_downloadpath,"");
-							if (t&&*t) {
-								int f=0;
-								CleanupDLFolder(t,hwndDlg,&f);
-							};
+							CleanupDLFolderEnter(hwndDlg);
 						}
 						else if (x == ID_ABORTSEL) {
 							SendMessage(hwndDlg,WM_COMMAND,IDC_ABORTSEL,0);
@@ -1026,116 +1632,27 @@
 				{
 				case IDC_MAXSIMULDL:
 					{
+			int xfer_IDC_MAXSIMULDL();
 						if (HIWORD(wParam) == EN_CHANGE) {
-							int r;
-							BOOL b;
-							r=GetDlgItemInt(hwndDlg,IDC_MAXSIMULDL,&b,FALSE);
-							if (b) {
-								g_max_simul_dl=r;
-								g_config->WriteInt(CONFIG_recv_maxdl,r);
-							};
-						};
+			xfer_IDC_MAXSIMULDL();
+			}
 						return 0;
 					};
 				case IDC_AUTOCLEAR:
-					{
-						g_config->WriteInt(CONFIG_recv_autoclear,!!IsDlgButtonChecked(hwndDlg,IDC_AUTOCLEAR));
-						return 0;
-					};
+					return xferwnd_xfers_IDC_AUTOCLEAR(hwndDlg);
 				case IDC_AUTORESUME:
-					{
-						g_config->WriteInt(CONFIG_recv_autores,!!IsDlgButtonChecked(hwndDlg,IDC_AUTORESUME));
-						return 0;
-					};
+					return xferwnd_xfers_IDC_AUTORESUME(hwndDlg);
 				case IDC_CLEARCOMP:
 				case IDC_CLEARCOMP3:
-					{
-						int x;
-						int l=g_lvrecv.GetCount();
-						for (x = 0; x < l; x ++) {
-							char buf[64];
-							g_lvrecv.GetText(x,3,buf,sizeof(buf));
-							if (!g_lvrecv.GetParam(x) &&
-								(LOWORD(wParam) == IDC_CLEARCOMP3 ||
-								!buf[0]))
-							{
-								g_lvrecv.DeleteItem(x--);
-								l--;
-							};
-						};
-						return 0;
-					};
+					return xferwnd_xfers_IDC_CLEARCOMP(hwndDlg, LOWORD(wParam) == IDC_CLEARCOMP3);
 				case IDC_CLEARALL:
-					{
-						if (MessageBox(hwndDlg,"Abort all downloads?",APP_NAME " Question",MB_YESNO|MB_ICONQUESTION) == IDNO) break;
-						int x;
-						int l=g_lvrecv.GetCount();
-						for (x = 0; x < l; x ++) {
-							XferRecv *a=(XferRecv *)g_lvrecv.GetParam(x);
-							if (a) a->Abort(g_mql);
-							g_lvrecv.DeleteItem(x--);
-							l--;
-						};
-						return 0;
-					};
+					return xferwnd_xfers_IDC_CLEARALL(hwndDlg);
 				case IDC_ABORTSEL:
-					{
-						int x;
-						int l=g_lvrecv.GetCount();
-						for (x = 0; x < l; x ++) {
-							if (g_lvrecv.GetSelected(x)) {
-								XferRecv *a=(XferRecv *)g_lvrecv.GetParam(x);
-								if (a) a->Abort(g_mql);
-							};
-						};
-						return 0;
-					};
+					return xferwnd_xfers_IDC_ABORTSEL(hwndDlg, false);
 				case WM_USER_CLEANUPSELECTED://this is the code that cleans up the selected files from the download manager
-					{
-						if (MessageBox(hwndDlg,"Clear selected downloads?",APP_NAME " Question",MB_YESNO|MB_ICONQUESTION) == IDNO) break;
-						int x;
-						int l = g_lvrecv.GetCount();
-						for (x = 0; x < l; x ++) {
-							if (g_lvrecv.GetSelected(x)) { //checks to see if the files were selected
-								XferRecv *a=(XferRecv *)g_lvrecv.GetParam(x);
-								if (a) a->Abort(g_mql);//forces an abort
-								g_lvrecv.DeleteItem(x--);//detletes the file
-								l--;
-							};
-						};
-						return 0;
-					};
+					return xferwnd_xfers_WM_USER_CLEANUPSELECTED(hwndDlg);
 				case IDC_RESUME:
-					{
-						int x;
-						int l=g_lvrecv.GetCount();
-						for (x = 0; x < l; x ++) {
-							if (g_lvrecv.GetSelected(x)) {
-								int param=g_lvrecv.GetParam(x);
-								if (!param) {
-									char sizestr[64];
-									char host[512];
-									char name[260];
-									char nick[32];
-									g_lvrecv.GetText(x,3,host,sizeof(host));
-									if (host[0]) {
-										g_lvrecv.GetText(x,0,name,sizeof(name));
-										g_lvrecv.GetText(x,1,sizestr,sizeof(sizestr));
-										g_lvrecv.GetText(x,4,nick,sizeof(nick));
-										g_lvrecv.DeleteItem(x);
-										int p=g_lvrecvq.InsertItem(g_lvrecvq.GetCount(),name,0);
-										g_lvrecvq.SetItemText(p,1,sizestr);
-										g_lvrecvq.SetItemText(p,2,host);
-										g_lvrecvq.SetItemText(p,3,nick);
-										g_files_in_download_queue++;
-										l--; x--;
-									};
-								};
-							};
-						};
-						RecvQ_UpdateStatusText();
-						return 0;
-					};
+					return xferwnd_xfers_IDC_RESUME(hwndDlg);
 				};
 				return 0;
 			};
@@ -1221,18 +1738,7 @@
 		case WM_USER_TITLEUPDATE:
 			{
 				char buf[1024];
-				strcpy(buf,"Transfers");
-				int numdls=g_recvs.GetSize();
-				int numuls=g_sends.GetSize();
-				int numq=g_files_in_download_queue;
-				int a=0;
-
-				if (numdls) sprintf(buf+strlen(buf),"%s%d DL%s",a++?", ":" (",numdls,numdls==1?"":"s");
-				if (numq) sprintf(buf+strlen(buf),"%s%d DL%s Queued",a++?", ":" (",numq,numq==1?"":"s");
-				if (numuls) sprintf(buf+strlen(buf),"%s%d UL%s",a++?", ":" (",numuls,numuls==1?"":"s");
-				if (a) strcat(buf,")");
-
-				strcat(buf," - " APP_NAME);
+		set_xfer_title(buf, 1023);
 				SetWndTitle(hwndDlg,buf);
 				return 0;
 			};
diff -b -N -ru waste-source-1.5-beta-2/xferwnd.hpp latest/xferwnd.hpp
--- waste-source-1.5-beta-2/xferwnd.hpp	2004-06-14 15:30:00.000000000 +0300
+++ latest/xferwnd.hpp	2005-03-09 07:27:19.000000000 +0200
@@ -24,6 +24,8 @@
 
 	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 		extern HWND g_xferwnd, g_xfer_subwnd_active;
+	#endif
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 		extern W_ListView g_lvrecv, g_lvsend, g_lvrecvq;
 		extern int g_files_in_download_queue;
 	#endif
@@ -39,9 +41,11 @@
 	void Xfer_Run();
 	void RecvQ_UpdateStatusText();
 
-	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV)) || defined(_DEFINE_WXUI)
 		void Xfer_UploadFileToUser(HWND hwndDlg, char *file, char *user, char *leadingpath);
 		void XferDlg_SetSel(int sel=-1);
+	#endif//_WIN32
+	#if defined(_WIN32)&&(!defined(_DEFINE_SRV))
 		BOOL WINAPI Xfers_DlgProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam);
 
 	#endif//_WIN32
